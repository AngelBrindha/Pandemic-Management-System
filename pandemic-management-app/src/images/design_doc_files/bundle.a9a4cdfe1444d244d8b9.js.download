(self.webpackChunkfauxton=self.webpackChunkfauxton||[]).push([[296],{29318:(e,t,n)=>{"use strict";var r=n(24332),o=n.n(r);const a={root:"/",version:"1.0.dev",host:"/",i18n:{en_US:{"mango-descripton":"Cloudant Query is a JSON-query syntax for quickly finding documents. You must create indexes before you can run Cloudant Query.","all-mango-indexes":"All Query Indexes","new-mango-index":"Query Indexes","mango-help-title":"Cloudant Query","run-query-with-mango":"Query","mango-title-editor":"Cloudant Query","mango-descripton-index-editor":'The example in the editor shows how to index the field "foo" using the json type index. You can automatically index all the fields in all of your documents using a text type index with the syntax \'{ "index": {}, "type": "text" }\', Note that indexing all fields can be resource consuming on large data sets.<br/><br/>Created indexes are displayed on the right.',"mango-additional-indexes-heading":"Your Search Indexes","mango-find-heading":"Cloudant Query","mango-indexeditor-title":"Cloudant Query","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser. Using CORS, you can host browser-based apps on static pages, and load data directly from Cloudant.","replication-password-modal-header":"Enter Local-Account Password","replication-password-modal-text":"Replication requires authentication on your local account.","replication-user-password-auth-label":"Cloudant Username or API Key","replication-username-input-placeholder":"Username or API Key","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-incorrect-credentials":"Name or password is incorrect.","auth-passwords-not-match":"Passwords do not match.","auth-logged-out":"You have been logged out.","create-db-partitioned-help":"A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Use of partition queries can reduce the cost per query by up to 20X and significantly improve response times over global queries. See <a href='https://cloud.ibm.com/docs/services/Cloudant?topic=cloudant-database-partitioning' target='_blank'>guide</a> for more details."}}};var i=n(13974),s=n.n(i);const c={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html"}};var l=n(84979),u=n.n(l),d={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},i=e;if(e)for(var s;s=o.exec(i);)n[a(s[1])]=a(s[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return u()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),u()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===d.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+d.safeURLName(t)}return d.safeURLName(e)},localStorageSet:function(e,t){(s().isObject(t)||s().isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(s().has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}};const p=d;var f=n(90421),h=n.n(f),m=n(43149),y=(n(43375),new(n(5646).x));function b(e,t){return Promise.resolve({url:e,options:t})}var g=b,v=function(e){if(!e||"function"!=typeof e||2!==e.length)throw new Error("preFetch must be a function that accepts two parameters (url and options) like the native fetch()");g=e},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,i.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"});return g(e,r).then((function(e){return fetch(e.url,e.options).then((function(e){return y.next(e),n.raw?e:e.json()}))}))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(e,"GET",t)},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(e,"DELETE",t)},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),E(e,"POST",n)},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),E(e,"PUT",n)},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E(e,t,(0,i.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),D(e,"DELETE",n)},P={};P.removeSpecialCharacters=p.removeSpecialCharacters,P.safeURL=p.safeURLName,P.imageUrl=function(e){return e},P.getDocUrl=function(e){return s().has(c.DOC_URLS,e)?c.DOC_URLS[e]:"#"},P.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<r.length;)o+=1,e/=1024;return e.toFixed(t)+" "+r[o-1]},P.formatDate=function(e){return h()(e,"X").format("MMM Do, h:mm:ss a")},P.getDateFromNow=function(e){return h()(e,"X").fromNow()},P.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},P.getApiUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),m.resolve(window.location.href,a.host+e)},P.getServerUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),a.host+e},P.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return m.resolve(t+n,a.host)},P.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=P.getServerUrl("/_uuids?count=".concat(e));return w(t)},P.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};const R=P;var k=n(73982),T=n.n(k);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var M={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){M.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){M.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){M.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=j({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),M.reduxDispatch&&M.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){M.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return s().extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return s().extend(s().clone(M.addonExtensions),e)}};M.View=T().View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var U={fetchOnce:function(e){var t=s().extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};M.Model=T().Model.extend({}),M.Collection=T().Collection.extend({}),s().each([M.Model,M.Collection],(function(e){s().extend(e.prototype,U)}));var B=s().extend({},T().Events);M.registerExtension=function(e,t){B[e]||(B[e]=[]),B.trigger("add:"+e,t),B[e].push(t)},M.unRegisterExtension=function(e){var t=B[e];t&&(B.trigger("remove:"+e,t),delete B[e])},M.getExtensions=function(e){var t=B[e];return t||(t=[]),t},M.removeExtensionItem=function(e,t,n){var r=B[e];if(r){var o=arguments[arguments.length-1];s().isObject(t)&&!n&&(o=function(e){return s().isEqual(e,t)}),r=s().filter(r,(function(e){return!o(e)})),B[e]=r,B.trigger("removeItem:"+e,t)}},M.extensions=B,M.setSession=function(e){M.session=e},M.reducers={},M.addReducers=function(e){M.reducers=I(I({},M.reducers),e)},M.middlewares=[],M.addMiddleware=function(e){e&&"function"==typeof e&&M.middlewares.push(e)};const q=M;var V=n(85582),H=n.n(V),G=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},F=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&q.navigate("/login?urlback=".concat(e),{replace:!0}),q.navigate("/login",{replace:!0})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new(H())((function(t,n){return q.session.getSession().then((function(){G(q.session,e)?t():n()})).catch((function(e){n(e),F()}))}))},z={};const W=T().Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){z[e]=t},removeBeforeUnload:function(e){delete z[e]},navigate:function(e,t){var n=!0,r=s().find(s().map(z,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(T().Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=e.prototype.getRouteRoles(r);K(s).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,a));var o=n.activeRouteObject.routeCallback(r,a);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:s,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;s().each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&s().each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],T().history.on("route",(function(){this.lastPages.push(T().history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}});var Y=n(46116);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}var Q=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};Q.extend=T().Model.extend;var J=["routes","roles"];s().extend(Q.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return s().isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;s().each(s().intersection(s().keys(e),J),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return s().keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n=this.get("routes")[e];return("object"===X(n)?this[n.route]:this[n]).apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===X(t)&&t.roles?t.roles:this.roles}});const Z=Q;var ee=function(){this.initialize.apply(this,arguments),s().bindAll(this)};ee.extend=T().Model.extend,s().extend(ee.prototype,T().Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});const te=ee;var ne=[],re=0;const oe={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return re+=1,ne.push(e),e.dispatchId=re,re},dispatch:function(e){ne.forEach((function(t){t(e)}))},unregister:function(e){var t=(0,i.findIndex)(ne,(function(t){return t.dispatchId===e}));-1!==t&&ne.splice(t,1)}};function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}T().$=o(),T().ajax=function(){return T().$.ajax.apply(T().$,arguments)},ae(q,{Router:W,RouteObject:Z,utils:p,Store:te,dispatcher:oe,Promise:H(),Events:s().extend({},T().Events)}),q.constants=c,q.dispatch=oe.dispatch,q.navigate=function(e,t){var n=s().extend({trigger:!0},t);q.router.navigate(e,n),n.trigger&&q.router.trigger("trigger-update")},q.beforeUnload=function(){q.router.beforeUnload.apply(q.router,arguments)},q.removeBeforeUnload=function(){q.router.removeBeforeUnload.apply(q.router,arguments)},q.addRoute=function(e){q.router.route(e.route,e.name,e.callback)};var ie={};q.registerUrls=function(e,t){ie[e]=t},q.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},q.urls=function(e,t){var n,r=q.getExtensions("urls:interceptors"),o=arguments;return s().find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),s().isUndefined(n)?ie[e]?ie[e][t]?(o=Array.prototype.slice.call(arguments,2),n=ie[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},q.getIndexTypePropNames=function(){var e=q.getExtensions("IndexTypes:propNames");return e.push("views"),e};const se=q;function ce(){return ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}n(97938),s().isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),ce(a,{utils:p,getParams:se.utils.getParams,helpers:R}),se.config({addHeaderLink:function(e){se.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){se.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){se.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){se.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){se.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){se.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});const le=a;var ue=n(35466);const de="ADD_NAVBAR_LINK",pe="TOGGLE_NAVBAR_MENU",fe="UPDATE_NAVBAR_LINK",he="REMOVE_NAVBAR_LINK",me="HIDE_NAVBAR_LINK_BADGE",ye="SHOW_NAVBAR_LINK_BADGE",be="NAVBAR_SET_VERSION_INFO",ge="NAVBAR_ACTIVE_LINK",_e="NAVBAR_HIDE",ve="NAVBAR_SHOW",Ee="NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",we="NAVBAR_SHOW_LOGIN_BUTTON",Se="NAVBAR_SHOW_LOGOUT_BUTTON";function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function Pe(e,t){var n=Ne({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}function Re(e,t){var n=xe(e,t),r=n.links,o=n.sectionName,a=r.filter((function(e){return e.id!==t.id}));if(a.length===r.length)return e;var i=Ne({},e);return i[o]=a,i}function ke(e,t){var n=xe(e,t),r=n.links,o=n.sectionName,a=!1,i=r.map((function(e){return e.id===t.id?(a=!0,Ne(Ne({},e),{},{title:t.title,href:t.href})):e}));if(!a)return e;var s=Ne({},e);return s[o]=i,s}function Te(e,t,n){var r=xe(e,t),o=r.links,a=r.sectionName,i=!1,s=o.map((function(e){return e.title===t.title?(i=!0,Ne(Ne({},e),{},{badge:n})):e}));if(!i)return e;var c=Ne({},e);return c[a]=s,c}function xe(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}const Ie="ADD_NOTIFICATION",Ae="SHOW_NOTIFICATION_CENTER",Le="HIDE_NOTIFICATION_CENTER",je="CLEAR_SINGLE_NOTIFICATION",Me="CLEAR_ALL_NOTIFICATIONS",Ue="SELECT_NOTIFICATION_FILTER",Be="SHOW_PERMANENT_NOTIFICATION",qe="HIDE_PERMANENT_NOTIFICATION";var Ve=n(50189);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},ze=0,We=["success","error","info"],Ye=["all","success","error","info"];function Xe(e,t){var n=e.notifications,r=n.slice();if((t=Ge({},t)).toastId=++ze,t.time=h()(),t.cleanMsg=le.utils.stripHTML(t.msg),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.htmlMsg={__html:t.escape?_.escape(t.cleanMsg):t.cleanMsg},t.clear){var o=_.map(n,"toastId");setTimeout((function(){o.forEach((function(e){return Ve.Am.dismiss(e)}))}),800)}return r.unshift(t),(0,Ve.Am)(ue.createElement("span",{dangerouslySetInnerHTML:t.htmlMsg}),t),r}function Qe(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.toastId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),Ve.Am.dismiss(t),o}var Je=se.addon();Je.initialize=function(){var e=new Je.VersionInfo;e.fetch().then((function(){!function(e){se.reduxDispatch({type:be,version:e})}(e.get("version"))}))},Je.VersionInfo=Backbone.Model.extend({url:function(){return le.host}}),se.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Pe(e,t.link);case pe:return Ne(Ne({},e),{},{isMinimized:!e.isMinimized});case fe:return ke(e,t.link);case he:return Re(e,t.link);case ye:return Te(e,t.link,!0);case me:return Te(e,t.link,!1);case be:return Ne(Ne({},e),{},{version:t.version});case ge:return Ne(Ne({},e),{},{activeLink:t.name});case _e:return Ne(Ne({},e),{},{navBarVisible:!1});case ve:return Ne(Ne({},e),{},{navBarVisible:!0});case Ee:return Ne(Ne({},e),{},{loginSectionVisible:t.visible});case we:return Ne(Ne({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case Se:return Ne(Ne({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Ie:return-1===We.indexOf(n.info.type)?e:Ge(Ge({},e),{},{notifications:Xe(e,n.info)});case Me:return Ve.Am.dismiss(),Ge(Ge({},e),{},{notifications:[]});case je:return Ge(Ge({},e),{},{notifications:Qe(e,n.toastId)});case Ae:return Ge(Ge({},e),{},{notificationCenterVisible:!0});case Le:return Ge(Ge({},e),{},{notificationCenterVisible:!1});case Ue:return-1===Ye.indexOf(n.filter)?e:Ge(Ge({},e),{},{selectedNotificationFilter:n.filter});case Be:return Ge(Ge({},e),{},{permanentNotificationVisible:!0,permanentNotificationMessage:n.msg});case qe:return Ge(Ge({},e),{},{permanentNotificationVisible:!1});default:return e}}});const $e=Je,Ze="DATABASES_SETPAGE",et="DATABASES_SETLIMIT",tt="DATABASES_SET_PROMPT_VISIBLE",nt="DATABASES_STARTLOADING",rt="DATABASES_LOADCOMPLETE",ot="DATABASES_UPDATE",at="DATABASES_PARTITIONED_DB_AVAILABLE",it="DATABASES_FETCH_SELECTED_DB_METADATA",st="DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS";var ct=T().Collection.extend({constructor:function(){T().Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=s().result(this,"url").split("?")[1]||"";this.paging=s().defaults(t.paging||{},{defaultParams:s().defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=s().clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=s().clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=s().defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return s().reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=s().defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=s().result(this,"url").split("?")[0];s().each(["startkey","endkey","key"],(function(n){s().has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+le.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),T().Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});const lt=ct;function ut(){return ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ut.apply(this,arguments)}var dt=se.addon();dt.Doc=se.Model.extend({idAttribute:"_id",documentation:function(){return se.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return se.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return le.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!(!this.isDdoc()||"query"!==this.get("language")&&(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new dt.Doc(e,{database:this.database})):this},safeID:function(){return le.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return S(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=ut({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),dt.AllDocs=lt.extend({model:dt.Doc,documentation:function(){return se.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+le.utils.queryParams(t):this.params&&(n="?"+le.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),se.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new dt.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),lt.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});const pt=dt;var ft;pt.QueryParams=(ft=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return ft(e,JSON.parse)},stringify:function(e){return ft(e,JSON.stringify)}}),pt.DdocInfo=se.Model.extend({idAttribute:"_id",documentation:function(){return se.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),se.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){return le.utils.getSafeIdForDoc(this.id)}}),pt.NewDoc=pt.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return R.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),pt.BulkDeleteDoc=se.Model.extend({idAttribute:"_id"}),pt.BulkDeleteDocCollection=se.Collection.extend({model:pt.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return se.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new se.Promise((function(n,r){O(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),pt.MangoBulkDeleteDocCollection=pt.BulkDeleteDocCollection.extend({url:function(){return R.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){return{docids:e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}))}}});const ht=pt;var mt=se.addon();mt.DocLimit=100,mt.Model=se.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return se.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new ht.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return le.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+mt.DocLimit:"apiurl"===e?R.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?se.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?se.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?R.getServerUrl("/"+this.safeID())+"?partitioned=true":R.getServerUrl("/"+this.safeID())},safeID:function(){return le.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new mt.Changes({database:this,params:e}),this.changes}}),mt.Changes=se.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return se.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+le.utils.queryParams(this.params)),e||(e="server"),se.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});const yt=mt;function bt(){return bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bt.apply(this,arguments)}var gt=yt.Model,_t=se.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=le.utils.localStorageGet("fauxton:dbs_per_page"))||(e=se.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,le.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new gt({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return bt({},{id:t,encodedId:encodeURIComponent(t),url:se.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=se.getExtensions("DatabaseList:dbSizeReportFieldName"),n="active";t.length>0&&(n=t[0]);var r=e.sizes,o=r&&r[n]||r&&r.active||r&&r.external||e.data_size||0;return{dataSize:R.formatSize(o),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case Ze:this._page=e.options.page;break;case et:this.setLimit(e.options.limit);break;case tt:this.setPromptVisible(e.options.visible);break;case nt:this.setLoading(!0);break;case rt:this.setLoading(!1);break;case ot:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case at:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),vt=new _t;vt.dispatchToken=se.dispatcher.register(vt.dispatch.bind(vt));const Et={databasesStore:vt,DatabasesStoreConstructor:_t};var wt=function(e){var t=se.urls("databaseBaseURL","server",e);return w(t)};function St(e,t){var n=[],r=[],o=0;e.forEach((function(a){Ot(se.urls("databaseBaseURL","server",a)).then((function(e){n.push(e)})).catch((function(){r.push(a)})).then((function(){++o===e.length&&Ct({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function Ot(e){return w(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function Nt(){return Ot(se.urls("allDBs","server"))}function Dt(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Ct(e){se.dispatch({type:ot,options:e})}const Pt={getDatabaseList:Nt,paginate:Dt,getDatabaseDetails:St,fetch:Ot,updateDatabases:Ct,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),Nt().then((function(e){var o=Dt(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),St(o,e)}))},setPage:function(e){se.dispatch({type:Ze,options:{page:e}})},setLimit:function(e){se.dispatch({type:et,options:{limit:e}})},setStartLoading:function(){se.dispatch({type:nt})},setLoadComplete:function(){se.dispatch({type:rt})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)se.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),se.dispatch({type:tt,options:{visible:!1}});var n=Et.databasesStore.obtainNewDatabaseModel(e,t);se.addNotification({msg:"Creating database."}),n.save().done((function(){se.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=se.urls("allDocs","app",le.utils.safeURLName(e));le.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;se.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=se.urls("allDocs","app",le.utils.safeURLName(e),"");return setTimeout((function(){se.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+le.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"香"),limit:30}),r=R.getServerUrl("/_all_dbs".concat(n));w(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:at,options:{available:e}};se.dispatch(t),se.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=se.getExtensions(Es.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));se.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){se.reduxDispatch({type:it}),wt(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}se.reduxDispatch({type:st,options:{metadata:e}})})).catch((function(e){se.addNotification({msg:e.message,type:"error",clear:!0})}))}};var Rt=n(3074),kt=n.n(Rt),Tt=n(51038);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Lt(e,t)}function jt(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}var Ut,Bt,qt,Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lt(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mt(r);if(o){var n=Mt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jt(this,e)});function i(){return It(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return ue.createElement("div",{className:e,onClick:this.props.onClick})}}])&&At(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Ut=Vt,Bt="propTypes",qt={onClick:kt().func.isRequired,visible:kt().bool.isRequired},Bt in Ut?Object.defineProperty(Ut,Bt,{value:qt,enumerable:!0,configurable:!0,writable:!0}):Ut[Bt]=qt;const Ht=(0,Tt.$j)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:Ae})}))}}}))(Vt);var Gt=function(e){var t=e.endpoint;return t?ue.createElement("div",{className:"faux__jsonlink"},ue.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},ue.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ }"),ue.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},Ft=function(e){var t=e.docURL;return t?ue.createElement("div",{className:"faux__doclink"},ue.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},ue.createElement("i",{className:"icon fonticon-bookmark"}))):null},Kt=function(e){var t=e.crumbs;return ue.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[ue.createElement(zt,{key:n},e.name)];return e.link&&(r=[ue.createElement(zt,{key:n},ue.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(ue.createElement(Wt,{key:"divider_"+n})),r):r}))}(t))};Kt.propTypes={crumbs:kt().array.isRequired};var zt=function(e){var t=e.children;return ue.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},Wt=function(){return ue.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})},Yt=function(e){var t=e.docURL,n=e.endpoint;return ue.createElement("div",{className:"faux__jsondoc-wrapper"},ue.createElement(Gt,{endpoint:n}),ue.createElement(Ft,{docURL:t}))},Xt=function(e){var t=e.children;return ue.createElement("div",{id:"dashboard",className:"one-pane "},t)},Qt=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,a=e.children,i="right-header-flex";return R.isIE1X()&&(i+=" "+i+"--ie1X"),ue.createElement("header",null,ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{id:"breadcrumbs",className:"flex-body"},ue.createElement(Kt,{crumbs:o})),ue.createElement("div",{id:"right-header"},ue.createElement("div",{className:i},a)),t?ue.createElement(Yt,{docURL:n,endpoint:r}):null,ue.createElement("div",{id:"notification-center-btn"},ue.createElement(Ht,null))))};Qt.defaultProps={showApiUrl:!0,crumbs:[]},Qt.propTypes={docURL:kt().string,endpoint:kt().string,crumbs:kt().array};var Jt=function(e){var t=e.children;return ue.createElement("div",{className:"content-area container-fluid"},ue.createElement("div",{id:"tabs"}),ue.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},$t=function(e){var t=e.children;return ue.createElement("div",{className:"faux__onepane-footer"},t)},Zt=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.createElement(Xt,null,ue.createElement(Qt,{crumbs:o,endpoint:r,docURL:n}),ue.createElement(Jt,null,t),ue.createElement($t,null))},en=function(e){var t=e.children;return ue.createElement("div",{id:"dashboard-content"},t)},tn=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},ue.createElement(Qt,{crumbs:o,endpoint:r,docURL:n}),ue.createElement(en,null,t))},nn=n(92703),rn=n.n(nn),on=n(30653);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ln(e,t)}function un(e,t){if(t&&("object"===an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e){return pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pn(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pn(r);if(o){var n=pn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return un(this,e)});function i(){var e;sn(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fn(dn(e=a.call.apply(a,[this].concat(n))),"state",{open:!1}),fn(dn(e),"handleClick",(function(t){var n=!e.state.open;e.setState({open:n}),e.props.onClick({isOpen:n,event:t})})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=rn()("faux--accordion__item-content","collapse",{in:this.state.open});return ue.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},ue.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},ue.createElement("i",{className:r}),ue.createElement("span",null,n)),ue.createElement(on.UO,{in:this.state.open},ue.createElement("div",{className:o},t)))}}])&&cn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}function vn(e,t){return vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vn(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=On(e);if(t){var o=On(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){return On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},On(e)}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fn(hn,"propTypes",{title:kt().string.isRequired}),fn(hn,"defaultProps",{onClick:function(){}});var Dn=function(e){_n(n,e);var t=En(n);function n(){var e;yn(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Nn(Sn(e=t.call.apply(t,[this].concat(o))),"getBadges",(function(){return e.props.elements.map(function(e,t){return ue.createElement(Cn,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(Sn(e)))})),Nn(Sn(e),"removeBadge",(function(t,n){e.props.removeBadge(t,n)})),e}return gn(n,[{key:"render",value:function(){return ue.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),n}(ue.Component);Nn(Dn,"propTypes",{elements:kt().array.isRequired,removeBadge:kt().func.isRequired}),Nn(Dn,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e}});var Cn=function(e){_n(n,e);var t=En(n);function n(){var e;yn(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Nn(Sn(e=t.call.apply(t,[this].concat(o))),"remove",(function(t){t.preventDefault(),e.props.remove(e.props.label,e.props.id)})),e}return gn(n,[{key:"render",value:function(){return ue.createElement("li",{className:"component-badge"},ue.createElement("span",{className:"label label-info"},this.props.label),ue.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"×"))}}]),n}(ue.Component);function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e,t){return Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tn(e,t)}function xn(e,t){if(t&&("object"===Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function In(e){return In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},In(e)}Nn(Cn,"propTypes",{label:kt().string.isRequired,remove:kt().func.isRequired});var An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tn(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=In(r);if(o){var n=In(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xn(this,e)});function i(){return Rn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,a=e.containerClasses,i=e.title,s=e.disabled,c=e.text,l=e.toggleCallback,u=e.active,d=o||u?"js-headerbar-togglebutton-selected":"";return ue.createElement("button",{title:i,disabled:s,onClick:l,className:"button ".concat(a," ").concat(d)},ue.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),ue.createElement("span",null,c))}}])&&kn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Un(e,t)}function Bn(e,t){if(t&&("object"===Ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qn(e)}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(An,"defaultProps",{innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"});var Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vn(r);if(o){var n=Vn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bn(this,e)});function i(){var e;jn(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hn(qn(e=a.call.apply(a,[this].concat(n))),"getMultiSelectOptions",(function(){return e.props.hasSelectedItem?ue.createElement("button",{onClick:e.props.removeItem,className:"fonticon "+e.props.bulkIcon,title:e.props.buttonTitle}):null})),Hn(qn(e),"getPopupContent",(function(){return ue.createElement("ul",{className:"bulk-action-component-popover-actions"},ue.createElement("li",{onClick:e.selectAll},ue.createElement("i",{className:"icon fonticon-cancel"})," ",e.props.dropdownContentText))})),Hn(qn(e),"selectAll",(function(){e.bulkActionPopover.hide(),e.props.selectAll()})),Hn(qn(e),"getOverlay",(function(){return ue.createElement(on.Ox,{ref:function(t){return e.bulkActionPopover=t},trigger:"click",placement:"bottom",rootClose:!0,overlay:ue.createElement(on.J2,{id:"bulk-action-component-popover",title:e.props.title},e.getPopupContent())},ue.createElement("div",{className:"arrow-button"},ue.createElement("i",{className:"fonticon fonticon-play"})))})),Hn(qn(e),"getMasterSelector",(function(){return ue.createElement("div",{className:"bulk-action-component-panel"},ue.createElement("input",{type:"checkbox",checked:e.props.isChecked,onChange:e.props.toggleSelect,disabled:e.props.disabled}),e.props.enableOverlay?ue.createElement("div",{className:"separator"}):null,e.props.enableOverlay?e.getOverlay():null)})),e}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"bulk-action-component"},ue.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}])&&Mn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t){return Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wn(e,t)}function Yn(e,t){if(t&&("object"===Fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}Hn(Gn,"propTypes",{hasSelectedItem:kt().bool.isRequired,removeItem:kt().func.isRequired,selectAll:kt().func,toggleSelect:kt().func.isRequired,isChecked:kt().bool.isRequired,disabled:kt().bool}),Hn(Gn,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wn(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xn(r);if(o){var n=Xn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yn(this,e)});function i(){return Kn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"styled-select"},ue.createElement("label",{htmlFor:this.props.selectId},ue.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),ue.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),ue.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}])&&zn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Qn,"propTypes",{selectValue:kt().string.isRequired,selectId:kt().string.isRequired,selectChange:kt().func.isRequired});var Jn=n(6950),$n=n.n(Jn);const Zn="CMPNTS_DATABASES_SHOWDELETE_MODAL",er={deleteDatabase:function(e,t){var n=this,r=se.urls("databaseBaseURL","server",e,"");S(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),se.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(se.urls("allDBs","app")),t&&t()})).catch((function(e){se.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){se.dispatch({type:Zn,options:e})}};var tr=function(e,t){var n="#"+se.urls("databaseBaseURL","app",se.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:le.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},nr=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},rr=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n};const or={getSeqNum:function(e){return _.isArray(e)?e[1]:e},getNewButtonLinks:function(e,t){var n=se.getExtensions("sidebar:links"),r="#"+se.urls("databaseBaseURL","app",se.url.encode(e)),o="",a="";return t&&(o="/_partition/"+encodeURIComponent(t),a="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+a,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},tr(e,t)])}]},getModifyDatabaseLinks:function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:se.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:er.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},getNewDocUrl:function(e,t){var n=encodeURIComponent(e),r=se.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},isDDocPartitioned:rr,parseJSON:function(e){return JSON.parse('"'+e+'"')},truncateDoc:function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},selectedViewContainsReduceFunction:function(e,t){if(!t)return!1;var n=!1;if(e&&nr(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},selectedItemIsPartitionedView:function(e,t,n){if(!t)return!1;var r=!1;if(e&&nr(t)){var o="_design/"+t.designDocName,a=e.find((function(e){return e._id===o}));a&&(r=rr(a,n))}return r},isViewSelected:nr};function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cr(e,t)}function lr(e,t){if(t&&("object"===ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ur(e)}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e){return dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dr(e)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(27737),n(29236),n(47349);var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dr(r);if(o){var n=dr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lr(this,e)});function i(){var e;ir(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pr(ur(e=a.call.apply(a,[this].concat(n))),"state",{editorInitialized:!1}),pr(ur(e),"initAceEditor",(function(t){e.editor=$n().edit(t),e.editor.$blockScrolling=1/0,e.editor.setShowPrintMargin(!1),e.editor.setOption("highlightActiveLine",!0),e.editor.setTheme("ace/theme/idle_fingers");var n=or.parseJSON(e.props.value);e.editor.setValue(n,-1),e.state.editorInitialized||e.setState({editorInitialized:!0})})),pr(ur(e),"closeModal",(function(){e.props.onClose()})),pr(ur(e),"save",(function(){e.props.onSave(e.editor.getValue())})),pr(ur(e),"getSaveBtn",(function(){return e.state.editorInitialized&&ue.createElement("button",{id:"string-edit-save-btn",onClick:e.save,className:"btn btn-primary save"},ue.createElement("i",{className:"fonticon-circle-check"})," Modify Text")})),e}return t=i,(n=[{key:"render",value:function(){var e=this;return ue.createElement(on.u_,{className:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Edit Value ",ue.createElement("span",{id:"string-edit-header"}))),ue.createElement(on.u_.Body,null,ue.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),ue.createElement("div",{id:"string-editor-wrapper"},ue.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),ue.createElement(on.u_.Footer,null,ue.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),this.getSaveBtn()))}}])&&sr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){return br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},br(e,t)}function gr(e,t){if(t&&("object"===hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _r(e)}function _r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vr(e){return vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vr(e)}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pr(fr,"propTypes",{value:kt().string.isRequired,visible:kt().bool.isRequired,onClose:kt().func.isRequired,onSave:kt().func.isRequired}),pr(fr,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}}),n(7867),n(27737),n(29236),n(47349);var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vr(r);if(o){var n=vr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gr(this,e)});function i(){var e;mr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Er(_r(e=a.call.apply(a,[this].concat(n))),"state",{originalCode:e.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),Er(_r(e),"hasChanged",(function(){return!_.isEqual(e.state.originalCode,e.getValue())})),Er(_r(e),"clearChanges",(function(){e.setState({originalCode:e.getValue()})})),Er(_r(e),"setupAce",(function(t,n){e.editor=$n().edit(e.ace),e.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),e.editor.$blockScrolling=1/0,n&&e.setValue(t.defaultCode),e.editor.setShowPrintMargin(t.showPrintMargin),e.editor.autoScrollEditorIntoView=t.autoScrollEditorIntoView,e.editor.setOption("highlightActiveLine",e.props.highlightActiveLine),e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.ignorableErrors&&e.removeIgnorableAnnotations(),e.addCommands(),e.editor.getSession().setMode("ace/mode/"+t.mode),e.editor.setTheme("ace/theme/"+t.theme),e.editor.setFontSize(t.fontSize),e.editor.getSession().setTabSize(2),e.editor.getSession().setUseSoftTabs(!0),e.props.autoFocus&&e.editor.focus(),e.editor.setReadOnly(t.disabled)})),Er(_r(e),"addCommands",(function(){_.each(e.props.editorCommands,(function(t){e.editor.commands.addCommand(t)}))})),Er(_r(e),"setupEvents",(function(){e.editor.on("blur",_.bind(e.onBlur,_r(e))),e.editor.on("change",_.bind(e.onContentChange,_r(e))),e.props.stringEditModalEnabled&&(e.editor.on("changeSelection",_.bind(e.showHideEditStringGutterIcon,_r(e))),e.editor.getSession().on("changeBackMarker",_.bind(e.showHideEditStringGutterIcon,_r(e))),e.editor.getSession().on("changeScrollTop",_.bind(e.updateEditStringGutterIconPosition,_r(e)))),e.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",e.quitWarningMsg),se.beforeUnload("editor_"+e.props.id,e.quitWarningMsg))})),Er(_r(e),"onBlur",(function(){e.props.blur(e.getValue())})),Er(_r(e),"onContentChange",(function(){e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.change(e.getValue())})),Er(_r(e),"quitWarningMsg",(function(){if(e.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),Er(_r(e),"removeEvents",(function(){e.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",e.quitWarningMsg),se.removeBeforeUnload("editor_"+e.props.id))})),Er(_r(e),"setHeightToLineCount",(function(){var t=e.editor.getSession().getDocument().getLength(),n=t>e.props.maxLines?e.props.maxLines:t;e.editor.setOptions({maxLines:n,minLines:e.props.minLines})})),Er(_r(e),"getAnnotations",(function(){return e.editor.getSession().getAnnotations()})),Er(_r(e),"isIgnorableError",(function(t){return-1!==_.indexOf(e.props.ignorableErrors,t)})),Er(_r(e),"removeIgnorableAnnotations",(function(){var t=e.isIgnorableError;e.editor.getSession().on("changeAnnotation",function(){var e=this.editor.getSession().getAnnotations(),n=_.reduce(e,(function(e,n){return t(n.raw)||e.push(n),e}),[]);e.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(_r(e)))})),Er(_r(e),"showHideEditStringGutterIcon",(function(){return e.hasErrors()||!e.parseLineForStringMatch()?(e.setState({stringEditIconVisible:!1}),!1):(e.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:e.getGutterIconPosition()}}),!0)})),Er(_r(e),"updateEditStringGutterIconPosition",(function(){e.state.stringEditIconVisible&&e.setState({stringEditIconStyle:{top:e.getGutterIconPosition()}})})),Er(_r(e),"getGutterIconPosition",(function(){var t=e.getRowHeight(),n=e.editor.session.getScrollTop();return t*e.documentToScreenRow(e.getSelectionStart().row)-n+"px"})),Er(_r(e),"parseLineForStringMatch",(function(){var t=e.getSelectionStart().row,n=e.getSelectionEnd().row;if(t>=0&&n>=0&&t===n&&e.isRowExpanded(t)){var r=e.getLine(t).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),Er(_r(e),"openStringEditModal",(function(){var t=e.parseLineForStringMatch()[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),e.setState({stringEditModalVisible:!0,stringEditModalValue:t})})),Er(_r(e),"saveStringEditModal",(function(t){var n=e.parseLineForStringMatch(),r=n[1]||"",o=n[2]||"",a=n[3],i="";","===a.substring(a.length-1)&&(i=","),e.replaceCurrentLine(r+o+JSON.stringify(t)+i+"\n"),e.closeStringEditModal()})),Er(_r(e),"closeStringEditModal",(function(){e.setState({stringEditModalVisible:!1})})),Er(_r(e),"hasErrors",(function(){return!_.every(e.getAnnotations(),(function(t){return e.isIgnorableError(t.raw)}))})),Er(_r(e),"setReadOnly",(function(t){e.editor.setReadOnly(t)})),Er(_r(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Er(_r(e),"getValue",(function(){return e.editor.getValue()})),Er(_r(e),"getEditor",(function(){return _r(e)})),Er(_r(e),"getLine",(function(t){return e.editor.session.getLine(t)})),Er(_r(e),"getSelectionStart",(function(){return e.editor.getSelectionRange().start})),Er(_r(e),"getSelectionEnd",(function(){return e.editor.getSelectionRange().end})),Er(_r(e),"getRowHeight",(function(){return e.editor.renderer.layerConfig.lineHeight})),Er(_r(e),"isRowExpanded",(function(t){return!e.editor.getSession().isRowFolded(t)})),Er(_r(e),"documentToScreenRow",(function(t){return e.editor.getSession().documentToScreenRow(t,0)})),Er(_r(e),"replaceCurrentLine",(function(t){e.editor.getSelection().selectLine(),e.editor.insert(t),e.editor.getSelection().moveCursorUp()})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return ue.createElement("div",null,ue.createElement("div",{ref:function(t){return e.ace=t},className:"js-editor",id:this.props.id}),ue.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible||this.props.disabled,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},ue.createElement("i",{className:"icon icon-edit"})),ue.createElement(fr,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}])&&yr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Er(wr,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",disabled:!1,showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var Sr=n(4927),Or=n.n(Sr);function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pr(e,t){return Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pr(e,t)}function Rr(e,t){if(t&&("object"===Nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kr(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ir=Or().js_beautify?Or().js_beautify:Or(),Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tr(r);if(o){var n=Tr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Rr(this,e)});function i(){var e;Dr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xr(kr(e=a.call.apply(a,[this].concat(n))),"noOfLines",(function(){return e.props.code.split(/\r\n|\r|\n/).length})),xr(kr(e),"canBeautify",(function(){return 1===e.noOfLines()})),xr(kr(e),"beautify",(function(t){t.preventDefault();var n=Ir(e.props.code);e.props.beautifiedCode(n)})),xr(kr(e),"getTooltip",(function(){return ue.createElement(on.u,{id:"tooltip"},"Switch to editable code format.")})),e}return t=i,(n=[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return ue.createElement(on.Ox,{placement:"right",overlay:e},ue.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}])&&Cr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ur(e,t)}function Br(e,t){if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qr(e)}function qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(82613);var Gr={dark:"idle_fingers",light:"dawn"},Fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ur(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vr(r);if(o){var n=Vr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Br(this,e)});function i(){var e;jr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hr(qr(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{theme:e.getZenTheme(),code:e.props.defaultCode}})),Hr(qr(e),"getZenTheme",(function(){var e=le.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),Hr(qr(e),"onChange",(function(){e.setState(e.getStoreState())})),Hr(qr(e),"exitZenMode",(function(){e.props.onExit(e.getValue())})),Hr(qr(e),"getValue",(function(){return e.ace.getValue()})),Hr(qr(e),"toggleTheme",(function(){var t="dark"===e.state.theme?"light":"dark";e.setState({theme:t,code:e.getValue()}),le.utils.localStorageSet("zenTheme",t)})),Hr(qr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Hr(qr(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=ue.createElement(on.u,{id:"tooltip"},"Exit zen mode (`esc`)"),o=ue.createElement(on.u,{id:"tooltip"},"Switch zen theme");return ue.createElement("div",{className:t},ue.createElement("div",{className:"zen-mode-controls"},ue.createElement("ul",null,ue.createElement("li",null,ue.createElement(on.Ox,{placement:"left",overlay:r},ue.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),ue.createElement("li",null,ue.createElement(on.Ox,{placement:"left",overlay:o},ue.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),ue.createElement("div",{className:"tooltips"})),ue.createElement(wr,{ref:function(t){return e.ace=t},autoFocus:!0,theme:Gr[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}])&&Mr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t){return Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yr(e,t)}function Xr(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qr(e)}function Qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jr(e)}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hr(Fr,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var Zr=["Missing name in function declaration.","['{a}'] is better written in dot notation."],eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jr(r);if(o){var n=Jr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xr(this,e)});function i(){var e;zr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $r(Qr(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{zenModeEnabled:!1,code:e.props.defaultCode}})),$r(Qr(e),"getZenModeIcon",(function(){if(e.props.allowZenMode)return ue.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:e.enterZenMode})})),$r(Qr(e),"getDocIcon",(function(){if(e.props.docLink)return ue.createElement("a",{className:"help-link","data-bypass":"true",href:e.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.createElement("i",{className:"icon-question-sign"}))})),$r(Qr(e),"getZenModeOverlay",(function(){if(e.state.zenModeEnabled)return ue.createElement(Fr,{defaultCode:e.state.code,mode:e.props.mode,ignorableErrors:Zr,onExit:e.exitZenMode})})),$r(Qr(e),"enterZenMode",(function(){e.setState({zenModeEnabled:!0,code:e.codeEditor.getValue()})})),$r(Qr(e),"exitZenMode",(function(t){e.setState({zenModeEnabled:!1}),e.getEditor().setValue(t)})),$r(Qr(e),"getEditor",(function(){return e.codeEditor})),$r(Qr(e),"getValue",(function(){return e.getEditor().getValue()})),$r(Qr(e),"beautify",(function(t){e.setState({code:t}),e.getEditor().setValue(t)})),$r(Qr(e),"update",(function(){e.getEditor().setValue(e.state.code)})),$r(Qr(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),ue.createElement("div",{className:t},ue.createElement("label",null,ue.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),ue.createElement(wr,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:Zr,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),ue.createElement(Ar,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}])&&Wr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e,t){return oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oo(e,t)}function ao(e,t){if(t&&("object"===to(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function io(e){return io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},io(e)}$r(eo,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}});var so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oo(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=io(r);if(o){var n=io(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ao(this,e)});function i(){return no(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"bordered-box"},ue.createElement("div",{className:"padded-box"},this.props.children))}}])&&ro(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const co="LAYOUT_TABLE",lo="LAYOUT_METADATA",uo="LAYOUT_JSON",po="MangoIndex",fo="MangoQueryResult",ho="view",mo="truncated",yo="full",bo="small-font",go="large-font",_o="medium-font";function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t){return So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},So(e,t)}function Oo(e,t){if(t&&("object"===vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return No(e)}function No(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Do(e)}function Co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&So(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Do(r);if(o){var n=Do(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oo(this,e)});function i(){var e;Eo(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Co(No(e=a.call.apply(a,[this].concat(n))),"onChange",(function(t){t.preventDefault(),e.props.docChecked(e.props.doc.id,e.props.doc._rev)})),Co(No(e),"getUrlFragment",(function(){return e.props.children?ue.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},e.props.children):""})),Co(No(e),"getExtensionIcons",(function(){var t=se.getExtensions("DocList:icons");return _.map(t,(function(t,n){return ue.createElement(t,{doc:e.props.doc,key:n})}))})),Co(No(e),"getDocumentTypeIcon",(function(){return e.props.docType===po?-1!==e.props.docContent.indexOf('"partitioned": true')?ue.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):ue.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),Co(No(e),"getCheckbox",(function(){return e.props.isDeletable?ue.createElement("div",{className:"checkbox inline"},ue.createElement("input",{id:"checkbox-"+e.props.docIdentifier,checked:e.props.checked,"data-checked":e.props.checked,type:"checkbox",onChange:e.onChange,className:"js-row-select"}),ue.createElement("label",{onClick:e.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+e.props.docIdentifier})):ue.createElement("div",{className:"checkbox-dummy"})})),Co(No(e),"onClick",(function(t){e.props.onClick(e.props.docIdentifier,e.props.doc,t)})),Co(No(e),"getDocContent",(function(){if(_.isEmpty(e.props.docContent))return null;var t=e.props.docContent,n=!1;if(e.props.truncate){var r=or.truncateDoc(e.props.docContent,e.props.maxRows);n=r.isTruncated,t=r.content}var o=e.props.resultsStyle.fontSize,a=rn()("prettyprint",{"prettyprint--small":o===bo,"prettyprint--large":o===go});return ue.createElement("div",{className:"doc-data"},ue.createElement("pre",{className:a},t),n?ue.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),e}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},ue.createElement("div",{className:"custom-inputs"},this.getCheckbox()),ue.createElement("div",{className:"doc-item"},ue.createElement("header",{onClick:this.onClick},ue.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),ue.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),ue.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),ue.createElement("div",{className:"clearfix"}))}}])&&wo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Co(Po,"propTypes",{docIdentifier:kt().string.isRequired,docType:kt().string,docChecked:kt().func.isRequired,truncate:kt().bool,maxRows:kt().number,resultsStyle:kt().object}),Co(Po,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:_o},docType:ho});var Ro=function(){return ue.createElement("div",{className:"loading-lines"},ue.createElement("div",{id:"line1"}," "),ue.createElement("div",{id:"line2"}," "),ue.createElement("div",{id:"line3"}," "),ue.createElement("div",{id:"line4"}," "))};function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function To(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t){return Io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Io(e,t)}function Ao(e,t){if(t&&("object"===ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lo(e)}function Lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(e){return jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jo(e)}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Io(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jo(r);if(o){var n=jo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ao(this,e)});function i(){var e;To(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mo(Lo(e=a.call.apply(a,[this].concat(n))),"getIcon",(function(){return e.props.showIcon?ue.createElement("i",{className:"icon "+e.props.customIcon}):null})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,r=e.id,o=e.style,a=e.text,i=e.disabled;return ue.createElement("button",{onClick:t,type:"submit",disabled:i,"data-id":this.props["data-id"],className:"btn save "+n,id:r,style:o},this.getIcon(),a)}}])&&xo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Mo(Uo,"propTypes",{showIcon:kt().bool,id:kt().string,customIcon:kt().string,style:kt().object,buttonType:kt().string,"data-id":kt().string,onClick:kt().func,disabled:kt().bool}),Mo(Uo,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}});var Bo=n(71400),qo=n.n(Bo);function Vo(e){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(e)}function Ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fo(e,t,n){return t&&Go(e.prototype,t),n&&Go(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ko(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zo(e,t)}function zo(e,t){return zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zo(e,t)}function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qo(e);if(t){var o=Qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yo(this,n)}}function Yo(e,t){if(t&&("object"===Vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xo(e)}function Xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qo(e){return Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qo(e)}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $o=function(e){Ko(n,e);var t=Wo(n);function n(){var e;Ho(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Jo(Xo(e=t.call.apply(t,[this].concat(o))),"createSectionLinks",(function(t){return t?t.map((function(t,n){return e.createEntry(t,n)})):null})),Jo(Xo(e),"createEntry",(function(e,t){return ue.createElement("li",{key:t},ue.createElement("a",{className:rn()("icon",e.icon,{"fonticon-placeholder":!e.icon}),"data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,rel:"noreferrer noopener",target:e.external?"_blank":""},e.title))})),Jo(Xo(e),"createSectionTitle",(function(e,t){return e?ue.createElement("li",{key:t,className:"header-label"},e):null})),Jo(Xo(e),"createSection",(function(){return e.props.links.map((function(t,n){return t.title&&t.links?[e.createSectionTitle(t.title,"title_"+n),e.createSectionLinks(t.links)]:e.createEntry(t,"el"+n)}))})),e}return Fo(n,[{key:"render",value:function(){var e=this.createSection(),t=this.props.hideArrow?"":"arrow",n="button"===this.props.toggleType?Zo:ea;return ue.createElement(on.Lt,{id:"dropdown-menu"},ue.createElement(n,{bsRole:"toggle",icon:this.props.icon}),ue.createElement(ta,{bsRole:"menu",className:t},e))}}]),n}(ue.Component);Jo($o,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),Jo($o,"propTypes",{icon:kt().string,hideArrow:kt().bool,links:kt().array.isRequired,toggleType:kt().string.isRequired});var Zo=function(e){Ko(n,e);var t=Wo(n);function n(e,r){var o;return Ho(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(Xo(o)),o}return Fo(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.createElement(on.zx,{onClick:this.handleClick},ue.createElement("i",{className:"dropdown-toggle "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"}}),this.props.children)}}]),n}(ue.Component),ea=function(e){Ko(n,e);var t=Wo(n);function n(e,r){var o;return Ho(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(Xo(o)),o}return Fo(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),n}(ue.Component),ta=function(e){Ko(n,e);var t=Wo(n);function n(e,r){return Ho(this,n),t.call(this,e,r)}return Fo(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,r=e.onClose,o=e.className;return ue.createElement(qo(),{disabled:!n,onRootClose:r},ue.createElement("ul",{className:rn()("dropdown-menu",o),role:"menu","aria-labelledby":"dLabel"},t))}}]),n}(ue.Component),na=n(90731);function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function oa(){return oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(this,arguments)}function aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sa(e,t,n){return t&&ia(e.prototype,t),n&&ia(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}function la(e,t){return la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},la(e,t)}function ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fa(e);if(t){var o=fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return da(this,n)}}function da(e,t){if(t&&("object"===ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pa(e)}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e){return fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fa(e)}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ma=function(e){ca(n,e);var t=ua(n);function n(e){var r;return aa(this,n),ha(pa(r=t.call(this,e)),"getChildren",(function(e){var t=e[0].style,n="tray show-tray "+r.props.className;return ue.createElement("div",{key:"1",id:r.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},r.props.children)})),ha(pa(r),"willEnter",(function(){return{opacity:(0,na.ST)(1),top:(0,na.ST)(64)}})),ha(pa(r),"willLeave",(function(){return{opacity:(0,na.ST)(0),top:(0,na.ST)(30)}})),ha(pa(r),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),ha(pa(r),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:r.willEnter()}]})),e.container||(r.container=pa(r)),r}return sa(n,[{key:"render",value:function(){return ue.createElement(on.aV,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},ue.createElement(na.bg,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),n}(ue.Component);ha(ma,"propTypes",{contentVisible:kt().bool.isRequired,closeTray:kt().func.isRequired,onEnter:kt().func,container:kt().object}),ha(ma,"defaultProps",{onEnter:function(){}});var ya=function(e){ca(n,e);var t=ua(n);function n(){var e;aa(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ha(pa(e=t.call.apply(t,[this].concat(o))),"renderChildren",(function(){return ue.Children.map(e.props.children,(function(t){var n={};return Object.keys(e.props).filter((function(t){return Object.prototype.hasOwnProperty.call(e.props,t)})).map((function(t){return n[t]=e.props[t]})),ue.cloneElement(t,n)}))})),e}return sa(n,[{key:"render",value:function(){return ue.createElement("div",null,this.renderChildren())}}]),n}(ue.Component);function ba(e){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(e)}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function va(e,t){return va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},va(e,t)}function Ea(e,t){if(t&&("object"===ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wa(e)}function wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sa(e)}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ha(ya,"defaultProps",{className:""});var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&va(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sa(r);if(o){var n=Sa(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ea(this,e)});function i(){var e;ga(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oa(wa(e=a.call.apply(a,[this].concat(n))),"state",{inputValue:"",disableSubmit:!0}),Oa(wa(e),"close",(function(t){t&&t.preventDefault(),e.setState({inputValue:"",disableSubmit:!0}),e.props.showHide({showModal:!1})})),Oa(wa(e),"open",(function(){e.props.showHide({showModal:!0})})),Oa(wa(e),"getDatabaseName",(function(){return e.props.modalProps.dbId.trim()})),Oa(wa(e),"onInputChange",(function(t){var n=t.target.value.trim();e.setState({inputValue:n}),e.setState({disableSubmit:n!==e.getDatabaseName()})})),Oa(wa(e),"onDeleteClick",(function(t){t.preventDefault(),er.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),Oa(wa(e),"onInputKeypress",(function(t){13===t.keyCode&&!0!==e.state.disableSubmit&&er.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?ue.createElement("p",{style:{color:"#d14"},className:"warning"},ue.createElement("b",null,"You are about to delete a system database, be careful!")):null;return ue.createElement(on.u_,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Confirm Deletion")),ue.createElement(on.u_.Body,null,r,ue.createElement("p",null,"Warning: This action will permanently delete ",ue.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),ue.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),ue.createElement(on.u_.Footer,null,ue.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),ue.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},ue.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}])&&_a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Oa(Na,"propTypes",{showHide:kt().func.isRequired,modalProps:kt().object,onSuccess:kt().func});var Da=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,a=e.badgeText,i=t?"tab-element-checked":"",s=null;return a&&(s=ue.createElement("span",{className:"tab-element-badge"},a)),ue.createElement("li",{className:"component-tab-element ".concat(i)},ue.createElement("label",null,ue.createElement("div",{className:"tab-element-indicator-wrapper"},ue.createElement("div",{className:"tab-element-indicator"})),ue.createElement("div",{className:"tab-element-content"},ue.createElement("i",{className:o}),ue.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,s)))};Da.propTypes={selected:kt().bool.isRequired,text:kt().string.isRequired,onChange:kt().func.isRequired,iconClass:kt().string,badgeText:kt().string};var Ca,Pa=function(e){var t=e.children;return ue.createElement("ul",{className:"component-tab-element-wrapper"},t)},Ra=n(45854);function ka(e){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(e)}function Ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t){return xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xa(e,t)}function Ia(e,t){if(t&&("object"===ka(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Aa(e)}function Aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},La(e)}var ja=function(){Ca&&window.clearInterval(Ca)},Ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xa(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=La(r);if(o){var n=La(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ia(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={value:t.props.startValue},t.updatePollingFreq=t.updatePollingFreq.bind(Aa(t)),t}return t=i,n=[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){ja()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,a=r.max,i=r.onPoll;this.setState({value:e}),0===e||e<o||e>a?ja():(t=1e3*e,n=function(){return i()},ja(),Ca=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,a=this.state.value,i=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var a=o;return"minute"===t&&(a=Math.floor(o/60)),"".concat(a," ").concat(1===a?t:"".concat(t,"s"))}(a,o,r,n),s="off"===i?"faux__polling-info-value--off":"faux__polling-info-value--active";return ue.createElement("div",{className:"faux__polling"},ue.createElement("div",{className:"faux__polling-info"},ue.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),ue.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(s)},i)),ue.createElement(Ra.Z,{className:"faux__polling-info-slider",min:n,max:r+t,step:t,defaultValue:a,onChange:this.updatePollingFreq}))}}],n&&Ta(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Ma.defaultProps={startValue:0,min:0,valueUnits:"minute"},Ma.propTypes={startValue:kt().number,valueUnits:kt().string,min:kt().number,max:kt().number.isRequired,stepSize:kt().number.isRequired,onPoll:kt().func.isRequired};var Ua=function(e){var t=e.refresh;return ue.createElement("div",{className:"faux__refresh-btn"},ue.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},ue.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};Ua.propTypes={refresh:kt().func.isRequired};var Ba,qa=n(73150),Va=n.n(qa);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ka(e,t){return Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ka(e,t)}function za(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wa(e)}var Ya=function(e,t){(Ba=new(Va())("#copy-"+e)).on("success",(function(){t()}))},Xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ka(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wa(r);if(o){var n=Wa(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return za(this,e)});function i(){return Ga(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){Ya(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){Ba.destroy()}},{key:"componentDidUpdate",value:function(){Ya(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?ue.createElement("i",{"aria-hidden":"true",className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return ue.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?ue.createElement("p",null,ue.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}])&&Fa(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Qa(e){return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(e)}function Ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $a(e,t){return $a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$a(e,t)}function Za(e,t){if(t&&("object"===Qa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ei(e){return ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ei(e)}Xa.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},Xa.propTypes={text:kt().string.isRequired,displayType:kt().oneOf(["icon","text","input"]),uniqueKey:kt().string.isRequired,onClipboardClick:kt().func.isRequired};var ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$a(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ei(r);if(o){var n=ei(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Za(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return ue.createElement(Da,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){se.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?ue.createElement("div",{className:"tab__wrapper"},ue.createElement(Pa,null,r),ue.createElement("div",{className:"tab__container"},ue.createElement(o.component,null))):null}}])&&Ja(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);ti.propTypes={tabs:kt().array.isRequired,selectedTab:kt().string.isRequired};var ni=n(46626);function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(e,t){return ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ci(e,t)}function li(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}var di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ui(r);if(o){var n=ui(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return li(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).lastCall=void 0,t}return t=i,(n=[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=ai(ai({},this.props),{},{loadOptions:e,onBlurResetsInput:!1});return ue.createElement(ni.ZP.Async,t)}}])&&si(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const pi={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=rn()("faux--accordion",n);return ue.createElement("ul",{className:o,style:r},t)},AccordionItem:hn,BadgeList:Dn,Badge:Cn,BulkActionComponent:Gn,ConfirmButton:Uo,ToggleHeaderButton:An,StyledSelect:Qn,CodeEditorPanel:eo,CodeEditor:wr,StringEditModal:fr,ZenModeOverlay:Fr,Beautify:Ar,PaddedBorderedBox:so,Polling:Ma,Document:Po,LoadLines:Ro,MenuDropDown:$o,TrayContents:ma,TrayWrapper:ya,connectToStores:function(e,t,n){var r=function(r){ca(a,r);var o=ua(a);function a(){var e;aa(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return ha(pa(e=o.call.apply(o,[this].concat(r))),"state",n(e.props)),ha(pa(e),"onChange",(function(){e.setState(n(e.props))})),ha(pa(e),"handleStoresChanged",(function(){e.setState(n(e.props))})),e}return sa(a,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return ue.createElement(e,oa({},this.state,this.props))}}]),a}(ue.Component);return r},DeleteDatabaseModal:Na,TabElement:Da,TabElementWrapper:Pa,RefreshBtn:Ua,Copy:Xa,TabWindowWrapper:ti,ThrottledReactSelectAsync:di};var fi={};fi.DeleteDbModalStore=se.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=le.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){e.type===Zn&&(this.setDeleteModal(e.options),this.triggerChange())}}),fi.deleteDbModalStore=new fi.DeleteDbModalStore,fi.deleteDbModalStore.dispatchToken=se.dispatcher.register(fi.deleteDbModalStore.dispatch.bind(fi.deleteDbModalStore));const hi=fi;function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bi(e,t)}function gi(e,t){if(t&&("object"===mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}var vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_i(r);if(o){var n=_i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gi(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return ue.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return ue.createElement("div",{id:"per-page"},ue.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label,"  ",ue.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}])&&yi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t,n){return t&&Si(e.prototype,t),n&&Si(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t)}function Di(e,t){return Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Di(e,t)}function Ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ki(e);if(t){var o=ki(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pi(this,n)}}function Pi(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(e){return ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ki(e)}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vi.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},vi.propTypes={perPage:kt().number.isRequired,perPageChange:kt().func.isRequired,label:kt().string,options:kt().array};var xi=function(e){Ni(n,e);var t=Ci(n);function n(){var e;wi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ti(Ri(e=t.call.apply(t,[this].concat(o))),"getClasses",(function(){var t={js:"lang-js"},n="prettyprint";return _.has(t,e.props.lang)&&(n+=" "+t[e.props.lang]),n})),e}return Oi(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return ue.createElement("div",null,ue.createElement("pre",{className:this.getClasses()},e))}}]),n}(ue.Component);Ti(xi,"defaultProps",{lang:"js"});var Ii=function(e){Ni(n,e);var t=Ci(n);function n(){var e;wi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ti(Ri(e=t.call.apply(t,[this].concat(o))),"getVisiblePages",(function(t,n){var r,o;if(n<e.props.maxNavPages)r=1,o=n+1;else{var a=Math.floor(e.props.maxNavPages/2);o=t+a,(r=t-a)<=1&&(r=1,o=e.props.maxNavPages+1),o>n+1&&(r=n-(e.props.maxNavPages-1),o=n+1)}return{from:r,to:o}})),Ti(Ri(e),"createItemsForPage",(function(t){return _.range(t.from,t.to).map((function(t){return ue.createElement("li",{key:t,className:e.props.page===t?"active":null},e.getLink(t,t))}))})),Ti(Ri(e),"getLink",(function(t,n){return e.props.onClick?ue.createElement("a",{onClick:e.getOnPageClick(t),dangerouslySetInnerHTML:{__html:n}}):ue.createElement("a",{href:e.props.urlPrefix+t+e.props.urlSuffix,dangerouslySetInnerHTML:{__html:n}})})),Ti(Ri(e),"getTotalPages",(function(){return 0===e.props.total?1:Math.ceil(e.props.total/e.props.perPage)})),e}return Oi(n,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return ue.createElement("ul",{className:"pagination"},ue.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(r,"&laquo;")),n,ue.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),n}(ue.Component);Ti(Ii,"defaultProps",{perPage:se.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var Ai=function(e){Ni(n,e);var t=Ci(n);function n(){var e;wi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ti(Ri(e=t.call.apply(t,[this].concat(o))),"close",(function(t){t&&t.preventDefault(),e.props.onClose()})),e}return Oi(n,[{key:"render",value:function(){var e=ue.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass,n=this.props.onClose?ue.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"):null,r=this.props.onSubmit?ue.createElement("button",{className:t,onClick:this.props.onSubmit},ue.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel):null;return ue.createElement(on.u_,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,this.props.title)),ue.createElement(on.u_.Body,null,e),ue.createElement(on.u_.Footer,null,n,r))}}]),n}(ue.Component);Ti(Ai,"propTypes",{visible:kt().bool.isRequired,text:kt().oneOfType([kt().string,kt().element]).isRequired,onClose:kt().func.isRequired,onSubmit:kt().func.isRequired}),Ti(Ai,"defaultProps",{visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary"});const Li={CodeFormat:xi,Pagination:Ii,ConfirmationModal:Ai};function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bi(e,t,n){return t&&Ui(e.prototype,t),n&&Ui(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vi(e,t)}function Vi(e,t){return Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vi(e,t)}function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ki(e);if(t){var o=Ki(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gi(this,n)}}function Gi(e,t){if(t&&("object"===ji(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fi(e)}function Fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wi=Et.databasesStore,Yi=hi.deleteDbModalStore,Xi=pi.Accordion,Qi=pi.AccordionItem,Ji=pi.DeleteDatabaseModal,$i=pi.ToggleHeaderButton,Zi=pi.TrayContents,es=function(e){qi(n,e);var t=Hi(n);function n(e){var r;return Mi(this,n),zi(Fi(r=t.call(this,e)),"getStoreState",(function(){return{dbList:Wi.getDbList(),loading:Wi.isLoading(),showDeleteDatabaseModal:Yi.getShowDeleteDatabaseModal(),showPartitionedColumn:Wi.isPartitionedDatabasesAvailable(),page:Wi.getPage(),limit:Wi.getLimit()}})),zi(Fi(r),"onChange",(function(){r.setState(r.getStoreState())})),zi(Fi(r),"state",r.getStoreState()),r.reloadAfterDatabaseDeleted=r.reloadAfterDatabaseDeleted.bind(Fi(r)),r}return Bi(n,[{key:"componentDidMount",value:function(){Wi.on("change",this.onChange,this),Yi.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){Pt.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){Wi.off("change",this.onChange,this),Yi.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),Pt.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return ue.createElement(ts,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),n}(ue.Component),ts=function(e){qi(n,e);var t=Hi(n);function n(){var e;Mi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zi(Fi(e=t.call.apply(t,[this].concat(o))),"createRows",(function(t){return t.map((function(t,n){return ue.createElement(ns,{item:t,key:n,showPartitionedColumn:e.props.showPartitionedColumn})}))})),zi(Fi(e),"getExtensionColumns",(function(){var e=se.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return ue.createElement(e,{key:t})}))})),zi(Fi(e),"showDeleteDatabaseModal",(function(){er.showDeleteDatabaseModal({showDeleteModal:!e.props.showDeleteDatabaseModal.showDeleteModal})})),e}return Bi(n,[{key:"render",value:function(){if(this.props.loading)return ue.createElement("div",{className:"view"},ue.createElement(pi.LoadLines,null));var e=this.createRows(this.props.dbList);return ue.createElement("div",{className:"view"},ue.createElement(Ji,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),ue.createElement("table",{className:"table table-striped fauxton-table-list databases"},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",null,"Name"),ue.createElement("th",null,"Size"),ue.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?ue.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),ue.createElement("th",null,"Actions"))),ue.createElement("tbody",null,e)))}}]),n}(ue.Component);zi(ts,"propTypes",{dbList:kt().array.isRequired,showDeleteDatabaseModal:kt().object.isRequired,loading:kt().bool.isRequired,showPartitionedColumn:kt().bool.isRequired,onDatabaseDeleted:kt().func});var ns=function(e){qi(n,e);var t=Hi(n);function n(){var e;Mi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zi(Fi(e=t.call.apply(t,[this].concat(o))),"getExtensionColumns",(function(e){var t=se.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return ue.createElement(t,{row:e,key:n})}))})),zi(Fi(e),"showDeleteDatabaseModal",(function(e){er.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),e}return Bi(n,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,a=e.docCount,i=e.docDelCount,s=e.showTombstoneWarning,c=e.failed,l=e.isPartitioned,u=s?ue.createElement(rs,{docCount:a,docDelCount:i}):null;if(c)return ue.createElement("tr",null,ue.createElement("td",{"data-name":"database-load-fail-name"},n),ue.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var d=this.props.showPartitionedColumn?ue.createElement("td",null,l?"Yes":"No"):null;return ue.createElement("tr",null,ue.createElement("td",null,ue.createElement("a",{href:r},n)),ue.createElement("td",null,o),ue.createElement("td",null,a," ",u),d,this.getExtensionColumns(e),ue.createElement("td",{className:"database-actions"},ue.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start","aria-label":"Replicate ".concat(n),title:"Replicate "+name,href:"#/replication/_create/"+t}),ue.createElement("a",{"aria-label":"Set permissions for ".concat(n),className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),ue.createElement("a",{"aria-label":"Delete ".concat(n),className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),n}(ue.Component);zi(ns,"propTypes",{item:kt().shape({id:kt().string.isRequired,encodedId:kt().string.isRequired,url:kt().string.isRequired,failed:kt().bool.isRequired,dataSize:kt().string,docCount:kt().number,docDelCount:kt().number,isPartitioned:kt().bool,showTombstoneWarning:kt().bool}).isRequired,showPartitionedColumn:kt().bool.isRequired});var rs=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=ue.createElement(on.u,{id:"graveyard-tooltip"},r);return ue.createElement(on.Ox,{placement:"top",overlay:o},ue.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:r}))},os=function(e){qi(n,e);var t=Hi(n);function n(e){var r;return Mi(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return Bi(n,[{key:"getStoreState",value:function(){return{showPartitionedOption:Wi.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){Wi.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wi.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return ue.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.createElement(is,{loadOptions:Pt.fetchAllDbsWithKey}),ue.createElement(as,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),n}(ue.Component),as=function(e){qi(n,e);var t=Hi(n);function n(e){var r;return Mi(this,n),(r=t.call(this,e)).state={isPromptVisible:!1,databaseName:"",partitionedSelected:void 0},r.onTrayToggle=r.onTrayToggle.bind(Fi(r)),r.closeTray=r.closeTray.bind(Fi(r)),r.focusInput=r.focusInput.bind(Fi(r)),r.onKeyUpInInput=r.onKeyUpInInput.bind(Fi(r)),r.onChange=r.onChange.bind(Fi(r)),r.onAddDatabase=r.onAddDatabase.bind(Fi(r)),r.onTogglePartitioned=r.onTogglePartitioned.bind(Fi(r)),r}return Bi(n,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;Pt.createNewDatabase(this.state.databaseName,e)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?ue.createElement(Xi,{className:"partitioned-db-help"},ue.createElement(Qi,{title:"What is a Partitioned Database?"},ue.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return ue.createElement("div",{className:"partitioned-db-section"},ue.createElement("label",{htmlFor:"partitioned-db",className:"partitioned-db-label"},"Partitioning"),ue.createElement("div",{className:"partitioned-db-options"},ue.createElement("input",{id:"partitioned-db",type:"checkbox",checked:!0===this.state.partitionedSelected,onChange:this.onTogglePartitioned}),ue.createElement("label",{htmlFor:"partitioned-db"},"Partitioned")),e)}},{key:"render",value:function(){var e=this,t=rn()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return ue.createElement("div",null,ue.createElement($i,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),ue.createElement(Zi,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},ue.createElement("div",{className:"tray-contents"},ue.createElement("div",{className:"tray-header"},ue.createElement("h3",null,"Create Database")),ue.createElement("div",{className:"tray-body"},ue.createElement("label",{htmlFor:"js-new-database-name",className:"db-name-label"},"Database name"),ue.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"database-name"}),this.partitionedOption()),ue.createElement("div",{className:"tray-footer"},ue.createElement("a",{className:"btn btn-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),ue.createElement("a",{className:"btn btn-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),n}(ue.Component);zi(as,"defaultProps",{showPartitionedOption:!1}),zi(as,"propTypes",{showPartitionedOption:kt().bool.isRequired,partitionedDbHelpText:kt().string});var is=function(e){var t=e.loadOptions;return ue.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},ue.createElement("div",{className:"faux-header__searchboxcontainer"},ue.createElement(pi.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;Pt.jumpToDatabase(t)}})))};is.propTypes={loadOptions:kt().func.isRequired};var ss=function(e){qi(n,e);var t=Hi(n);function n(){var e;Mi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zi(Fi(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),zi(Fi(e),"onChange",(function(){e.setState(e.getStoreState(e.props))})),zi(Fi(e),"state",e.getStoreState(e.props)),e}return Bi(n,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);se.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);se.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,a=Math.min(r,n*t);return ue.createElement("footer",{className:"all-db-footer pagination-footer"},ue.createElement("div",{id:"database-pagination"},ue.createElement(Li.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),ue.createElement(vi,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),ue.createElement("div",{className:"current-databases"},"Showing ",ue.createElement("span",{className:"all-db-footer__range"},o,"–",a)," of ",ue.createElement("span",{className:"all-db-footer__total-db-count"},r)," databases."))}}]),n}(ue.Component);zi(ss,"defaultProps",{linkPath:"_all_dbs",store:Wi});const cs={DatabasesController:es,DatabaseTable:ts,DatabaseRow:ns,RightDatabasesHeader:os,GraveyardInfo:rs,AddDatabaseWidget:as,JumpToDatabaseWidget:is,DatabasePagination:ss};var ls=cs.RightDatabasesHeader,us=cs.DatabasesController,ds=cs.DatabasePagination;const ps=function(){return ue.createElement(Xt,null,ue.createElement(Qt,{crumbs:[{name:"Databases"}],endpoint:se.urls("allDBs","apiurl"),docURL:se.constants.DOC_URLS.ALL_DBS},ue.createElement(ls,{partitionedDbHelpText:le.i18n.en_US["create-db-partitioned-help"]})),ue.createElement(Jt,null,ue.createElement(us,null)),ue.createElement($t,null,ue.createElement(ds,null)))};var fs=se.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return Pt.setPage(r),o&&Pt.setLimit(o),ue.createElement(ps,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=le.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});yt.RouteObjects=[fs];const hs=yt;function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){bs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gs={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};function _s(e){return!(!e||!e.props||!0!==e.props.partitioned)}function vs(e){return e?"/_partition/".concat(e):""}hs.initialize=function(){se.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),Pt.checkPartitionedQueriesIsAvailable()},hs.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",se.registerExtension(hs.PARTITONED_DB_CHECK_EXTENSION,(function(){return w(R.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),se.addReducers({databases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return ys(ys({},e),{},{partitionedDatabasesAvailable:t.options.available});case it:return ys(ys({},e),{},{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case st:return ys(ys({},e),{},{isLoadingDbInfo:!1,dbInfo:t.options.metadata,isDbPartitioned:_s(t.options.metadata)});default:return e}}}),hs.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",le.utils.safeURLName(t),"/_all_docs?limit="+hs.DocLimit].join("")},se.registerUrls("changes",{server:function(e,t){return R.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+vs(t)+"/_changes"+n},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_changes"+t)}}),se.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return R.getApiUrl("/_all_dbs")}}),se.registerUrls("databaseBaseURL",{server:function(e){return R.getServerUrl("/"+le.utils.safeURLName(e))},apiurl:function(e){return R.getApiUrl("/"+le.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),se.registerUrls("permissions",{server:function(e){return R.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+vs(t)+"/permissions"},apiurl:function(e){return R.getApiUrl("/"+e+"/_security")}});const Es=hs,ws="SIDEBAR_EXPAND_SELECTED_ITEM",Ss="SIDEBAR_NEW_OPTIONS",Os="SIDEBAR_TOGGLE_CONTENT",Ns="SIDEBAR_FETCHING",Ds="SIDEBAR_SHOW_DELETE_INDEX_MODAL",Cs="SIDEBAR_HIDE_DELETE_INDEX_MODAL",Ps="SIDEBAR_SHOW_CLONE_INDEX_MODAL",Rs="SIDEBAR_HIDE_CLONE_INDEX_MODAL",ks="SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",Ts="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",xs="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",Is="SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",As="SIDEBAR_UPDATED_DESIGN_DOCS",Ls=function(e){e.database.safeID()!==function(e){var t=e.sidebar;return!t||t.loading?"":t.database.safeID()}(se.reduxState())&&se.reduxDispatch({type:Ns}),e.designDocs.fetch().then((function(){se.reduxDispatch({type:Ss,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),se.navigate("/",{trigger:!0})}se.addNotification({msg:n,type:"error",clear:!0})}))},js=function(e){se.reduxDispatch({type:Ns}),e.fetch().then((function(){se.reduxDispatch({type:As,options:{designDocs:e}})}))},Ms=function(){se.reduxDispatch({type:Cs})},Us=function(e){se.reduxDispatch({type:ws,options:{selectedNavItem:e}})};var Bs=se.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new pt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),Ls(t)},getCrumbs:function(e){return[{type:"back",link:se.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=le.getParams(e);return{urlParams:t,docParams:pt.QueryParams.parse(t)}}});const qs=Bs;function Vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hs(e,t,n){return t&&Vs(e.prototype,t),n&&Vs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Gs=Hs((function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,a=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=a||""}}));function Fs(e){return Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fs(e)}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zs(e,t){return zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zs(e,t)}function Ws(e,t){if(t&&("object"===Fs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ys(e)}function Ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xs(e){return Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xs(e)}var Qs=pi.StyledSelect,Js=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zs(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xs(r);if(o){var n=Xs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ws(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onTogglePartitioned=t.onTogglePartitioned.bind(Ys(t)),t}return t=i,(n=[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(se.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return ue.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return ue.createElement("div",{id:"new-ddoc-section",className:"span5"},ue.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),ue.createElement("div",{className:"controls"},ue.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?ue.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.createElement("i",{className:"icon-question-sign"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?"check--disabled":"",r=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return ue.createElement("div",{className:"ddoc-selector-partitioned"},ue.createElement("label",{className:n,title:r},ue.createElement("input",{id:"js-ddoc-selector-partitioned",type:"checkbox",title:r,checked:t,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"},disabled:e}),"Partitioned"))}},{key:"render",value:function(){var e=ue.createElement("optgroup",{label:"Select a document"},ue.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return ue.createElement("div",{className:"design-doc-group control-group"},ue.createElement("div",{className:"span3"},ue.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),ue.createElement(Qs,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField(),this.getPartitionedCheckbox())}}])&&Ks(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function $s(e){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(e)}function Zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(e,t){return ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ec(e,t)}function tc(e,t){if(t&&("object"===$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nc(e){return nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nc(e)}Js.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},Js.propTypes={designDocList:kt().array.isRequired,onSelectDesignDoc:kt().func.isRequired,onChangeNewDesignDocName:kt().func.isRequired,selectedDesignDocName:kt().string.isRequired,selectedDesignDocPartitioned:kt().bool.isRequired,newDesignDocName:kt().string.isRequired,newDesignDocPartitioned:kt().bool.isRequired,designDocLabel:kt().string,docURL:kt().string};var rc=le.helpers.getDocUrl,oc=pi.CodeEditorPanel,ac=pi.StyledSelect,ic=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ec(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nc(r);if(o){var n=nc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tc(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return ue.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=ue.createElement(oc,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=ue.createElement("div",{className:"reduce-editor-warning"},ue.createElement("label",null,"Partitioned views do not support custom reduce functions."))),ue.createElement("div",null,ue.createElement("div",{className:"control-group"},ue.createElement("label",{htmlFor:"reduce-function-selector"},ue.createElement("span",null,"Reduce (optional)"),ue.createElement("a",{className:"help-link","data-bypass":"true",href:rc("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.createElement("i",{className:"icon-question-sign"}))),ue.createElement(ac,{selectContent:n,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.props.reduceSelectedOption})),e)}}])&&Zs(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sc(e){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(e)}function cc(){return cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cc.apply(this,arguments)}function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uc(e,t){return uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uc(e,t)}function dc(e,t){if(t&&("object"===sc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pc(e)}function pc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fc(e){return fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fc(e)}ic.defaultProps={customReducerSupported:!0},ic.propTypes={reduceOptions:kt().array.isRequired,hasReduce:kt().bool.isRequired,hasCustomReduce:kt().bool.isRequired,customReducerSupported:kt().bool,reduce:kt().string,reduceSelectedOption:kt().string.isRequired,updateReduceCode:kt().func.isRequired,selectReduceChanged:kt().func.isRequired};var hc=le.helpers.getDocUrl,mc=pi.CodeEditorPanel,yc=pi.ConfirmButton,bc=pi.LoadLines,gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uc(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fc(r);if(o){var n=fc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dc(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).saveView=t.saveView.bind(pc(t)),t.viewChange=t.viewChange.bind(pc(t)),t.updateMapCode=t.updateMapCode.bind(pc(t)),t}return t=i,n=[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=se.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else se.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+se.urls("allDocs","app",e,t);var n=le.utils.getSafeIdForDoc(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+se.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.createElement("div",{className:"define-view"},ue.createElement(bc,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return ue.createElement("div",{className:"define-view"},ue.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},ue.createElement("h3",{className:"simple-header"},t),ue.createElement("div",{className:"new-ddoc-section"},ue.createElement(Js,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:hc("DESIGN_DOCS")})),ue.createElement("div",{className:"control-group"},ue.createElement("label",{htmlFor:"index-name"},ue.createElement("span",null,"Index name"),ue.createElement("a",{className:"help-link","data-bypass":"true",href:hc("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.createElement("i",{className:"icon-question-sign"}))),ue.createElement("input",{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"})),ue.createElement(mc,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:hc("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map}),ue.createElement(ic,cc({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),ue.createElement("div",{className:"padded-box"},ue.createElement("div",{className:"control-group"},ue.createElement(yc,{id:"save-view",text:n}),ue.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))))}}],n&&lc(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);gc.propTypes={isLoading:kt().bool.isRequired,isNewView:kt().bool.isRequired,database:kt().object.isRequired,isDbPartitioned:kt().bool.isRequired,designDocId:kt().string.isRequired,newDesignDocName:kt().string.isRequired,viewName:kt().string.isRequired,isNewDesignDoc:kt().bool.isRequired,originalViewName:kt().string,originalDesignDocName:kt().string,designDocs:kt().object,saveDesignDoc:kt().object,partitionKey:kt().string,updateNewDesignDocName:kt().func.isRequired,changeViewName:kt().func.isRequired,updateMapCode:kt().func.isRequired};const _c="CLEAR_INDEX",vc="EDIT_INDEX",Ec="EDIT_NEW_INDEX",wc="SELECT_REDUCE_CHANGE",Sc="VIEW_SAVED",Oc="VIEW_CREATED",Nc="DESIGN_DOC_CHANGE",Dc="DESIGN_DOC_NEW_NAME_UPDATED",Cc="DESIGN_DOC_NEW_PARTITIONED_UPDATED",Pc="VIEW_NAME_CHANGE",Rc="VIEW_ADD_DESIGN_DOC",kc="VIEW_UPDATE_MAP_CODE",Tc="VIEW_UPDATE_REDUCE_CODE";var xc=function(e){return function(t){t({type:vc,options:e})}},Ic=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},Ac=function(e){return function(t){t({type:Rc,designDoc:e.toJSON()})}},Lc=function(e,t,n,r,o){var a=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;se.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),i=e.get(n)||{};delete i[r];var s={};s[n]=i,e.set(s);var c,l=se.getIndexTypePropNames(),u=_.some(l,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),d=!1;return u?c=e.save():(c=e.destroy(),d=!0),c.then((function(){d&&t.remove(e.id),a.onSuccess()}),a.onError)},jc=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},Mc=function(e,t,n,r,o,a){if("new-doc"===t){var i={_id:"_design/"+n,views:{},language:"javascript"},s=new ht.Doc(i,{database:o});return a&&s.setDDocPartitionedOption(r),s}var c=e.find((function(e){return e.id===t}));return c?c.dDocModel():null};const Uc={helpers:{findDesignDoc:jc,getDesignDoc:Mc},safeDeleteIndex:Lc,selectReduceChanged:function(e){return function(t){t({type:wc,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:Pc,name:e})}},editIndex:xc,dispatchClearIndex:function(){se.reduxDispatch({type:_c})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){xc(e)(se.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),se.navigate("/",{trigger:!0})}se.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:Ic,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),se.addNotification({msg:"Saving View...",type:"info",clear:!0}),Ic(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(se.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=jc(e.designDocs,e.originalDesignDocName);Lc(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){js(e.designDocs)}})}"new-doc"===e.designDocId&&Ac(r),js(e.designDocs),n({type:Sc}),se.navigate(t,{trigger:!0})}),(function(e){se.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:Ac,deleteView:function(e){return Lc(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=se.urls("allDocs","app",e.database.safeID());se.navigate(t)}js(e.designDocs),se.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),Ms()}})},cloneView:function(e){var t=Mc(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))se.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=jc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),se.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),js(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;se.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){se.navigate("#"+se.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:kc,code:e})}},updateReduceCode:function(e){return function(t){t({type:Tc,code:e})}},selectDesignDoc:function(e){return function(t){t({type:Nc,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:Dc,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:Cc,options:{value:e}})}}};function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){Vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hc="function (doc) {\n  emit(doc._id, 1);\n}",Gc="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",Fc=["_sum","_count","_stats","_approx_count_distinct"],Kc=Fc.concat(["CUSTOM","NONE"]),zc={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:Hc},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:Kc};function Wc(e,t){var n=qc(qc({},e),{},{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){return e.isNewView||e.isNewDesignDoc?{reduce:"",map:Hc}:e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}function Yc(e){return e.view.reduce?Xc(e)?"CUSTOM":e.view.reduce:"NONE"}function Xc(e){return!(!e.view.reduce||-1!==Fc.indexOf(e.view.reduce))}function Qc(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new ht.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function Jc(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}var $c=(0,Tt.$j)((function(e,t){var n,r,o,a=e.indexEditor,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&or.isDDocPartitioned(o.get("doc"),r));return{database:a.database,isNewView:a.isNewView,viewName:a.viewName,designDocs:a.designDocs,designDocList:Jc(a),originalViewName:a.originalViewName,originalDesignDocName:a.originalDesignDocName,isNewDesignDoc:a.isNewDesignDoc,designDocId:a.designDocId,designDocPartitioned:s,newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,saveDesignDoc:Qc(a,i.isDbPartitioned),map:a.view.map,isLoading:a.isLoading,reduce:a.view.reduce,reduceOptions:a.reduceOptions,reduceSelectedOption:Yc(a),hasCustomReduce:Xc(a),hasReduce:!!a.view.reduce,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(Uc.saveView(t,n))},changeViewName:function(t){e(Uc.changeViewName(t))},updateMapCode:function(t){e(Uc.updateMapCode(t))},selectDesignDoc:function(t){e(Uc.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(Uc.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(Uc.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(Uc.updateReduceCode(t))},selectReduceChanged:function(t){e(Uc.selectReduceChanged(t))}}}))(gc);const Zc={IndexEditorContainer:$c,IndexEditor:gc,ReduceEditor:ic,DesignDocSelector:Js,StyledSelect:pi.StyledSelect};function el(e){return el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(e)}function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nl(e,t){return nl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nl(e,t)}function rl(e,t){if(t&&("object"===el(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ol(e)}function ol(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function al(e){return al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},al(e)}function il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sl=Zc.DesignDocSelector,cl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nl(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=al(r);if(o){var n=al(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rl(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),il(ol(t=a.call(this,e)),"submit",(function(){t.designDocSelector.validate()&&(""!==t.props.newIndexName?t.props.submit():se.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),il(ol(t),"close",(function(e){e&&e.preventDefault(),t.props.close()})),il(ol(t),"setNewIndexName",(function(e){t.props.setNewCloneIndexName(e.target.value)})),t.props.setNewCloneIndexName(""),t}return t=i,(n=[{key:"render",value:function(){var e=this;return ue.createElement(on.u_,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,this.props.title)),ue.createElement(on.u_.Body,null,ue.createElement("form",{className:"form",method:"post",onSubmit:this.submit},ue.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),ue.createElement("div",{className:"row"},ue.createElement(sl,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned})),ue.createElement("div",{className:"clone-index-name-row"},ue.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),ue.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),ue.createElement(on.u_.Footer,null,ue.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),ue.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},ue.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}])&&tl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ll(e){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(e)}function ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pl(e,t){return pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pl(e,t)}function fl(e,t){if(t&&("object"===ll(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hl(e)}function hl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ml(e){return ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ml(e)}function yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}il(cl,"propTypes",{visible:kt().bool.isRequired,title:kt().string,close:kt().func.isRequired,submit:kt().func.isRequired,designDocArray:kt().array.isRequired,selectedDesignDoc:kt().string.isRequired,newDesignDocName:kt().string.isRequired,newIndexName:kt().string.isRequired,indexLabel:kt().string.isRequired,selectDesignDoc:kt().func.isRequired,updateNewDesignDocName:kt().func.isRequired,setNewCloneIndexName:kt().func.isRequired}),il(cl,"defaultProps",{title:"Clone Index",visible:!1});var bl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pl(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ml(r);if(o){var n=ml(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fl(this,e)});function i(){var e;ul(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yl(hl(e=a.call.apply(a,[this].concat(n))),"state",{placement:"bottom"}),yl(hl(e),"setPlacement",(function(t){var n=document.getElementById(t).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";e.setState({placement:n})})),yl(hl(e),"createItems",(function(){var t=e.props.items.sort();return _.map(t,(function(t,n){var r=se.urls(e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.designDocName));e.props.selectedPartitionKey&&(r=se.urls("partitioned_"+e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.selectedPartitionKey),encodeURIComponent(e.props.designDocName)));var o=e.props.selectedIndex===t?"active":"";return ue.createElement("li",{className:o,key:n},ue.createElement("a",{id:e.props.designDocName+"_"+t,href:"#/"+r+encodeURIComponent(t),className:"toggle-view"},t),ue.createElement(on.Ox,{trigger:"click",onEnter:e.setPlacement.bind(hl(e),e.props.designDocName+"_"+t),placement:e.state.placement,rootClose:!0,ref:function(t){return e.itemOverlay=t},overlay:ue.createElement(on.J2,{id:"index-menu-component-popover"},ue.createElement("ul",null,ue.createElement("li",{onClick:e.indexAction.bind(hl(e),"edit",{indexName:t,onEdit:e.props.onEdit})},ue.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),ue.createElement("li",{onClick:e.indexAction.bind(hl(e),"clone",{indexName:t,onClone:e.props.onClone})},ue.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),ue.createElement("li",{onClick:e.indexAction.bind(hl(e),"delete",{indexName:t,onDelete:e.props.onDelete})},ue.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},ue.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))}))})),yl(hl(e),"indexAction",(function(t,n,r){switch(r.preventDefault(),e.itemOverlay.hide(),t){case"delete":e.props.showDeleteIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onDelete);break;case"clone":e.props.showCloneIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onClone);break;case"edit":n.onEdit(e.props.database.id,e.props.selectedPartitionKey,e.props.designDocName,n.indexName)}})),yl(hl(e),"toggle",(function(t){t.preventDefault(),e.props.toggle(e.props.designDocName,e.props.title)})),e}return t=i,(n=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return ue.createElement("li",{id:r},ue.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},ue.createElement("div",{className:"fonticon-play"}),n),ue.createElement(on.UO,{in:this.props.isExpanded},ue.createElement("ul",{className:t},this.createItems())))}}])&&dl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function gl(e){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gl(e)}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t){return vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vl(e,t)}function El(e,t){if(t&&("object"===gl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wl(e)}function wl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e){return Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sl(e)}function Ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}yl(bl,"propTypes",{urlNamespace:kt().string.isRequired,indexLabel:kt().string.isRequired,database:kt().object.isRequired,designDocName:kt().string.isRequired,items:kt().array.isRequired,isExpanded:kt().bool.isRequired,selectedIndex:kt().string.isRequired,onDelete:kt().func.isRequired,onClone:kt().func.isRequired,showDeleteIndexModal:kt().func.isRequired,showCloneIndexModal:kt().func.isRequired,isPartitioned:kt().bool.isRequired,selectedPartitionKey:kt().string});var Nl=pi.MenuDropDown,Dl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vl(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sl(r);if(o){var n=Sl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return El(this,e)});function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ol(wl(t=a.call(this,e)),"indexList",(function(){return _.map(t.state.updatedSidebarListTypes,(function(e,n){var r=_.has(t.props.toggledSections,e.name)&&t.props.toggledSections[e.name],o="";return t.props.selectedNavInfo.designDocSection===e.name&&(o=t.props.selectedNavInfo.indexName),ue.createElement(bl,{icon:e.icon,isExpanded:r,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:t.props.toggle,database:t.props.database,designDocName:t.props.designDocName,key:n,title:e.name,selector:e.selector,items:_.keys(t.props.designDoc[e.selector]),isPartitioned:t.props.isPartitioned,selectedPartitionKey:t.props.selectedPartitionKey,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))})),Ol(wl(t),"toggle",(function(e){e.preventDefault(),t.props.toggle(t.props.designDocName)})),Ol(wl(t),"getNewButtonLinks",(function(){var e=t.props.selectedPartitionKey?encodeURIComponent(t.props.selectedPartitionKey):"",n=se.urls("databaseBaseURL","app",encodeURIComponent(t.props.database.id))+(e?"/_partition/"+e:""),r=t.props.designDocName;return[{title:"Add New",links:se.getExtensions("sidebar:links").reduce((function(e,o){return t.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+n+"/"+o.url+"/"+encodeURIComponent(r),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+se.urls("new","addView",encodeURIComponent(t.props.database.id),e,encodeURIComponent(r)),icon:"fonticon-plus-circled"}])}]})),t.state={updatedSidebarListTypes:t.props.sidebarListTypes},_.isEmpty(t.state.updatedSidebarListTypes)||_.has(t.state.updatedSidebarListTypes[0],"selector")&&"views"!==t.state.updatedSidebarListTypes[0].selector){var n=t.state.updatedSidebarListTypes;n.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:Uc.deleteView,onClone:Uc.cloneView,onEdit:Uc.gotoEditViewPage}),t.state={updatedSidebarListTypes:n}}return t}return t=i,(n=[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",a=se.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),i="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",s=this.props.isPartitioned?"Partitioned design document":"Global design document",c=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return ue.createElement("li",{className:"nav-header"},ue.createElement("div",{id:"sidebar-tab-"+r,className:t},ue.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},ue.createElement("div",{className:"fonticon-play"}),ue.createElement("p",{className:"design-doc-name"},ue.createElement("span",{title:"_design/"+r},ue.createElement("i",{className:c,title:s}),r))),ue.createElement("div",{className:"new-button add-dropdown"},ue.createElement(Nl,{links:e}))),ue.createElement(on.UO,{in:this.props.isExpanded},ue.createElement("ul",{className:n,id:"design-doc-menu-".concat(this.props.designDocName)},ue.createElement("li",{className:i},ue.createElement("a",{href:"#/"+a,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}])&&_l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rl(e,t){return Rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rl(e,t)}function kl(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tl(e)}function Tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xl(e){return xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xl(e)}function Il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ol(Dl,"propTypes",{database:kt().object.isRequired,sidebarListTypes:kt().array.isRequired,isExpanded:kt().bool.isRequired,isPartitioned:kt().bool.isRequired,selectedPartitionKey:kt().string,selectedNavInfo:kt().object.isRequired,toggledSections:kt().object.isRequired,designDocName:kt().string.isRequired,showDeleteIndexModal:kt().func.isRequired,showCloneIndexModal:kt().func.isRequired});var Al=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rl(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xl(r);if(o){var n=xl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kl(this,e)});function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Il(Tl(t=a.call(this,e)),"designDocList",(function(){return _.map(t.props.designDocs,(function(e,n){var r=decodeURIComponent(e.safeId),o=or.isDDocPartitioned(e,t.props.isDbPartitioned),a=!1,i={};_.has(t.props.toggledSections,r)&&(a=t.props.toggledSections[r].visible,i=t.props.toggledSections[r].indexGroups);var s={};return"designDoc"===t.props.selectedNav.navItem&&t.props.selectedNav.designDocName===r&&(s=t.props.selectedNav),ue.createElement(Dl,{toggle:t.props.toggle,sidebarListTypes:t.sidebarListTypes,isExpanded:a,toggledSections:i,selectedNavInfo:s,selectedPartitionKey:t.props.selectedPartitionKey,isPartitioned:o,key:n,designDoc:e,designDocName:r,database:t.props.database,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))}));var n=se.getExtensions("sidebar:list");return t.sidebarListTypes=_.isUndefined(n)?[]:n,t}return t=i,(n=[{key:"render",value:function(){return ue.createElement("ul",{className:"nav nav-list"},this.designDocList())}}])&&Pl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ll(e){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function jl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ml(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ul(e,t){return Ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ul(e,t)}function Bl(e,t){if(t&&("object"===Ll(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ql(e)}function ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vl(e){return Vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vl(e)}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Il(Al,"propTypes",{database:kt().object.isRequired,toggle:kt().func.isRequired,designDocs:kt().array,toggledSections:kt().object,selectedNav:kt().shape({designDocName:kt().string,designDocSection:kt().string,indexName:kt().string,navItem:kt().string}).isRequired,isDbPartitioned:kt().bool.isRequired,selectedPartitionKey:kt().string,showDeleteIndexModal:kt().func.isRequired,showCloneIndexModal:kt().func.isRequired});var Gl=pi.MenuDropDown,Fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ul(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vl(r);if(o){var n=Vl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bl(this,e)});function i(){var e;jl(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hl(ql(e=a.call.apply(a,[this].concat(n))),"getNewButtonLinks",(function(){return or.getNewButtonLinks(e.props.databaseName,e.props.selectedPartitionKey)})),Hl(ql(e),"buildDocLinks",(function(){var t=se.urls("base","app",e.props.databaseName);return se.getExtensions("docLinks").map((function(n){return ue.createElement("li",{key:n.url,className:e.getNavItemClass(n.url)},ue.createElement("a",{id:n.url,href:t+n.url},n.title))}))})),Hl(ql(e),"getNavItemClass",(function(t){return t===e.props.selectedNavItem?"active":""})),e}return t=i,(n=[{key:"render",value:function(){var e=this.buildDocLinks(),t=se.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+se.urls("changes","app",t,n,""),o="#"+se.urls("permissions","app",t,n),a=se.urls("allDocs","app",t,n,""),i=se.urls("mango","query-app",t,n),s=le.i18n.en_US["run-query-with-mango"],c=this.getNewButtonLinks();return ue.createElement("ul",{className:"nav nav-list"},ue.createElement("li",{className:this.getNavItemClass("all-docs")},ue.createElement("a",{id:"all-docs",href:"#/"+a,className:"toggle-view"},"All Documents"),ue.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},ue.createElement(Gl,{links:c}))),ue.createElement("li",{className:this.getNavItemClass("mango-query")},ue.createElement("a",{id:"mango-query",href:"#"+i,className:"toggle-view"},s)),ue.createElement("li",{className:this.getNavItemClass("permissions")},ue.createElement("a",{id:"permissions",href:o},"Permissions")),ue.createElement("li",{className:this.getNavItemClass("changes")},ue.createElement("a",{id:"changes",href:r},"Changes")),e,ue.createElement("li",{className:this.getNavItemClass("design-docs")},ue.createElement("a",{id:"design-docs",href:"#/"+a+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),ue.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},ue.createElement(Gl,{links:c}))))}}])&&Ml(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Kl(e){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(e)}function zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t){return Wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wl(e,t)}function Yl(e,t){if(t&&("object"===Kl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xl(e)}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ql(e){return Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ql(e)}function Jl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hl(Fl,"propTypes",{databaseName:kt().string.isRequired,selectedNavItem:kt().string.isRequired,selectedPartitionKey:kt().string});var $l=pi.DeleteDatabaseModal,Zl=pi.LoadLines,eu=Li.ConfirmationModal,tu=hi.deleteDbModalStore,nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wl(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ql(r);if(o){var n=Ql(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yl(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Jl(Xl(t=a.call(this,e)),"onChange",(function(){var e=t.getDeleteDbStoreState();t.setState(e)})),Jl(Xl(t),"showDeleteDatabaseModal",(function(e){er.showDeleteDatabaseModal(e)})),Jl(Xl(t),"deleteIndex",(function(){var e="designDoc"===t.props.selectedNav.navItem&&"_design/"+t.props.selectedNav.designDocName===t.props.deleteIndexModalDesignDoc.id&&t.props.selectedNav.indexName===t.props.deleteIndexModalIndexName;t.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:t.props.deleteIndexModalIndexName,designDoc:t.props.deleteIndexModalDesignDoc,designDocs:t.props.designDocs,database:t.props.database})})),Jl(Xl(t),"cloneIndex",(function(){t.props.cloneIndexModalOnSubmit({sourceIndexName:t.props.cloneIndexSourceIndexName,sourceDesignDocName:t.props.cloneIndexSourceDesignDocName,targetDesignDocName:t.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:t.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:t.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:t.props.isDbPartitioned,newIndexName:t.props.cloneIndexModalNewIndexName,designDocs:t.props.designDocs,database:t.props.database,onComplete:t.props.hideCloneIndexModal})})),t.state=t.getDeleteDbStoreState(),t.deleteIndex=t.deleteIndex.bind(Xl(t)),t.cloneIndex=t.cloneIndex.bind(Xl(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){tu.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){tu.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:tu.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?ue.createElement(Zl,null):ue.createElement("nav",{className:"sidenav"},ue.createElement(Fl,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),ue.createElement(Al,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),ue.createElement($l,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),ue.createElement(eu,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),ue.createElement(cl,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}])&&zl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Jl(nu,"propTypes",{selectedNav:kt().shape({designDocName:kt().string,designDocSection:kt().string,indexName:kt().string,navItem:kt().string}).isRequired});const ru={SidebarController:nu,DesignDoc:Dl,CloneIndexModal:cl};function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var su={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function cu(e,t){var n=au(au({},e),{},{database:t.database,designDocs:t.designDocs,designDocList:du(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}function lu(e,t,n){var r=au({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}function uu(e,t){var n=t.selectedNavItem,r=au({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}function du(e){if(!e)return[];var t=e.toJSON();return(t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}))).map((function(e){return e.safeId=le.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}))}function pu(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&or.isDDocPartitioned(n.get("doc"),t)}function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mu=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},yu=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},bu=(0,Tt.$j)((function(e,t){var n,r,o,a=e.sidebar,i=e.databases;return{database:(n=a,n.loading?{}:n.database),selectedNav:(r=t.selectedNavItem,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(n),!0).forEach((function(t){hu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},r),o),designDocs:a.designDocs,designDocList:a.designDocList,availableDesignDocIds:mu(a),toggledSections:a.toggledSections,isLoading:a.loading||i.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:i.isDbPartitioned,deleteIndexModalVisible:a.deleteIndexModalVisible,deleteIndexModalText:a.deleteIndexModalText,deleteIndexModalOnSubmit:a.deleteIndexModalOnSubmit,deleteIndexModalIndexName:a.deleteIndexModalIndexName,deleteIndexModalDesignDoc:yu(a),cloneIndexModalVisible:a.cloneIndexModalVisible,cloneIndexModalTitle:a.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:a.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:pu(a,i.isDbPartitioned),cloneIndexModalNewDesignDocName:a.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:a.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:a.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:a.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:a.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:a.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:a.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:a.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(function(e,t){return function(n){n({type:Os,designDoc:e,indexGroup:t})}}(t,n))},hideCloneIndexModal:function(){e((function(e){e({type:Rs})}))},hideDeleteIndexModal:function(){e((function(e){e({type:Cs})}))},showDeleteIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:Ds,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}}(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:Ps,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}}(t,n,r,o))},selectDesignDoc:function(t){e(function(e){return function(t){t({type:ks,options:{value:e}})}}(t))},updateNewDesignDocName:function(t){e(function(e){return function(t){t({type:Ts,options:{value:e}})}}(t))},updateNewDesignDocPartitioned:function(t){e(function(e){return function(t){t({type:xs,options:{value:e}})}}(t))},setNewCloneIndexName:function(t){e(function(e){return function(t){t({type:Is,options:{value:e}})}}(t))}}}))(ru.SidebarController);const gu=bu;var _u=function(e){var t=e.url,n=e.icon,r=e.onClick,o=e.children;return ue.createElement("li",{role:"presentation"},ue.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:r,href:t},ue.createElement("i",{className:n})," ",o))},vu=function(e){var t,n=e.dbName,r=(t=function(e,t){var n=or.getNewButtonLinks(e,t);return function(e){return or.getModifyDatabaseLinks(e)}(e).concat(n)}(n,e.partitionKey),t.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return ue.createElement(_u,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)}));return[ue.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return ue.createElement(_u,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)})));return ue.createElement("div",{className:"faux-header__doc-header-left"},ue.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){se.navigate("#/_all_dbs")}},ue.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),ue.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:n},n),ue.createElement(on.Lt,{id:"faux-header__doc-header-left-1"},ue.createElement(on.Lt.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},ue.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),ue.createElement(on.Lt.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},r)))};vu.propTypes={dbName:kt().string.isRequired,partitionKey:kt().string};const Eu=vu;var wu=n(75566);function Su(e){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(e)}function Ou(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Du(e,t){return Du=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Du(e,t)}function Cu(e,t){if(t&&("object"===Su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pu(e){return Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pu(e)}n(70488);var Ru=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pu(r);if(o){var n=Pu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cu(this,e)});function i(){return Ou(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"willEnter",value:function(){return{opacity:(0,na.ST)(1,na.um.gentle),height:(0,na.ST)(160,na.um.gentle)}}},{key:"willLeave",value:function(){return{opacity:(0,na.ST)(0,na.um.gentle),height:(0,na.ST)(0,na.um.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:ue.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},ue.createElement(Li.CodeFormat,{code:t.props.code}))}));return ue.createElement("span",null,n)}},{key:"render",value:function(){return ue.createElement(na.bg,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}])&&Nu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ku(e){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(e)}function Tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iu(e,t){return Iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Iu(e,t)}function Au(e,t){if(t&&("object"===ku(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lu(e){return Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lu(e)}Ru.propTypes={code:kt().object.isRequired,codeVisible:kt().bool.isRequired};var ju=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lu(r);if(o){var n=Lu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Au(this,e)});function i(){return Tu(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return ue.createElement("span",{className:"js-doc-id"},n);var o="#"+se.urls("document","app",encodeURIComponent(r),encodeURIComponent(n));return ue.createElement("a",{href:o,className:"js-doc-link"},n)}}])&&xu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Mu(e){return Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(e)}function Uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bu(e,t){return Bu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bu(e,t)}function qu(e,t){if(t&&("object"===Mu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Vu(e){return Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vu(e)}var Hu=pi.Copy,Gu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bu(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vu(r);if(o){var n=Vu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qu(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={codeVisible:!1},t}return t=i,(n=[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?ue.createElement(Li.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),se.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,a="change-wrapper"+(r.isNew?" new-change-row":"");return ue.createElement("div",{className:a},ue.createElement("div",{className:"change-box","data-id":r.id},ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"span2"},"seq"),ue.createElement("div",{className:"span8 change-sequence"},r.seq),ue.createElement("div",{className:"span2 text-right"},ue.createElement(Hu,{uniqueKey:(0,wu.Z)(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"span2"},"id"),ue.createElement("div",{className:"span8"},ue.createElement(ju,{id:r.id,deleted:r.deleted,databaseName:o})),ue.createElement("div",{className:"span2 text-right"},ue.createElement(Hu,{uniqueKey:(0,wu.Z)(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"span2"},"deleted"),ue.createElement("div",{className:"span10"},r.deleted?"True":"False")),ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"span2"},"changes"),ue.createElement("div",{className:"span10"},ue.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),ue.createElement(Ru,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}])&&Uu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Fu(e){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(e)}function Ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zu(e,t){return zu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zu(e,t)}function Wu(e,t){if(t&&("object"===Fu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yu(e){return Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yu(e)}Gu.propTypes={change:kt().object,databaseName:kt().string.isRequired};var Xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zu(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yu(r);if(o){var n=Yu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wu(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).props.loadChanges(t.props.databaseName),t}return t=i,(n=[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=ue.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",ue.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?ue.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return ue.createElement(Gu,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return ue.createElement("div",null,ue.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}])&&Ku(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Xu.propTypes={changes:kt().array.isRequired,loaded:kt().bool.isRequired,databaseName:kt().string.isRequired,isShowingSubset:kt().bool.isRequired,loadChanges:kt().func.isRequired};const Qu="UPDATE_CHANGES",Ju="ADD_CHANGES_FILTER_ITEM",$u="REMOVE_CHANGES_FILTER_ITEM";var Zu,ed=function(e,t){var n=or.getSeqNum(e.last_seq);t({type:Qu,changes:e.results,seqNum:n})};const td=function(e){return function(t){Zu=null,function(e,t,n){var r={limit:100};Zu&&(r.since=n,r.timeout=6e4,r.feed="longpoll");var o=le.utils.queryParams(r),a=le.utils.safeURLName(t),i=se.urls("changes","server",a,"?"+o);w(i).then((function(t){if(t.error)throw new Error(t.reason||t.error);ed(t,e)})).catch((function(e){se.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))}(t,e)}};const nd=(0,Tt.$j)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(td(t))}}}))(Xu);function rd(e){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(e)}function od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ad(e,t){return ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ad(e,t)}function id(e,t){if(t&&("object"===rd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sd(e)}function sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cd(e){return cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cd(e)}var ld=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ad(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cd(r);if(o){var n=cd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return id(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={filter:"",error:!1},t.submitForm=t.submitForm.bind(sd(t)),t}return t=i,(n=[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return ue.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},ue.createElement("fieldset",null,ue.createElement("i",{className:"fonticon-filter"}),ue.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),ue.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),ue.createElement("div",{className:"help-block"})))}}])&&od(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pd(e,t){return pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pd(e,t)}function fd(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hd(e)}function hd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function md(e){return md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},md(e)}ld.propTypes={addFilter:kt().func.isRequired,hasFilter:kt().func.isRequired,tooltips:kt().string},ld.defaultProps={tooltip:""};var yd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pd(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=md(r);if(o){var n=md(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fd(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).addFilter=t.addFilter.bind(hd(t)),t.hasFilter=t.hasFilter.bind(hd(t)),t}return t=i,n=[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return ue.createElement("div",{className:"changes-header"},ue.createElement(ld,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),ue.createElement(pi.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)}}))}}],n&&dd(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);yd.propTypes={filters:kt().array.isRequired,addFilter:kt().func.isRequired,removeFilter:kt().func.isRequired};var bd=(0,Tt.$j)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(function(e){return function(t){t({type:Ju,filter:e})}}(t))},removeFilter:function(t){e(function(e){return function(t){t({type:$u,filter:e})}}(t))}}}))(yd);const gd=bd;function _d(e){return _d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(e)}function vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ed(e,t){return Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ed(e,t)}function wd(e,t){if(t&&("object"===_d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sd(e)}function Sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Od(e){return Od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Od(e)}var Nd=pi.LoadLines,Dd=pi.Copy,Cd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ed(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Od(r);if(o){var n=Od(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wd(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sd(t=a.call(this,e)),"showCopiedMessage",(function(){se.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),t.fetchDDocInfo(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return ue.createElement(Nd,null);if(this.props.showLoadError)return ue.createElement("div",{className:"metadata-page"},ue.createElement("header",null,ue.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ue.createElement("section",{className:"container"},"Error retrieving metadata. Try reloading the page."));var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return ue.createElement("div",{className:"metadata-page"},ue.createElement("header",null,ue.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ue.createElement("section",{className:"container"},ue.createElement("h3",null,"Index Information"),ue.createElement("ul",null,ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Language:"),ue.createElement("span",{className:"capitalize"},e.language)),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),ue.createElement("ul",null,ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),ue.createElement("ul",null,ue.createElement("li",null,ue.createElement("span",{className:"item-title"},"MD5 Signature:"),ue.createElement(Dd,{uniqueKey:(0,wu.Z)(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}])&&vd(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Cd.propTypes={isLoading:kt().bool.isRequired,showLoadError:kt().bool.isRequired,viewIndex:kt().object,designDocName:kt().string.isRequired,stopRefresh:kt().func.isRequired,fetchDesignDocInfo:kt().func.isRequired};const Pd={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_FETCHING_FAILED:"DESIGN_FETCHING_FAILED",DESIGN_REFRESH:"DESIGN_REFRESH"};var Rd,kd=function(e,t){e.fetch().then((function(){t({type:Pd.DESIGN_REFRESH,designDocInfo:e})}))},Td=function(){Rd&&(window.clearInterval(Rd),Rd=void 0)};const xd={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:Pd.DESIGN_FETCHING}),n.fetch().then((function(){!function(e,t){Td(),Rd=window.setInterval((function(){kd(e.designDocInfo,t)}),5e3),t({type:Pd.DESIGN_DOC_MONITOR,options:e})}({designDocName:t,designDocInfo:n},e)})).catch((function(){e({type:Pd.DESIGN_FETCHING_FAILED}),se.addNotification({msg:"Error loading design document metadata.",type:"error",clear:!0})}))}},stopRefresh:Td};const Id=(0,Tt.$j)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,showLoadError:n.showLoadError,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(xd.fetchDesignDocInfo(t))},stopRefresh:function(){xd.stopRefresh()}}}))(Cd);function Ad(e){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(e)}function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jd(e,t){return jd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jd(e,t)}function Md(e,t){if(t&&("object"===Ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ud(e)}function Ud(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bd(e){return Bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bd(e)}var qd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jd(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bd(r);if(o){var n=Bd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Md(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).toggleStable=t.toggleStable.bind(Ud(t)),t.onUpdateChange=t.onUpdateChange.bind(Ud(t)),t.toggleIncludeDocs=t.toggleIncludeDocs.bind(Ud(t)),t.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],t}return t=i,n=[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?ue.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",ue.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},ue.createElement("option",{value:"0"},"None"),ue.createElement("option",{value:"1"},"1"),ue.createElement("option",{value:"2"},"2"),ue.createElement("option",{value:"3"},"3"),ue.createElement("option",{value:"4"},"4"),ue.createElement("option",{value:"5"},"5"),ue.createElement("option",{value:"6"},"6"),ue.createElement("option",{value:"7"},"7"),ue.createElement("option",{value:"8"},"8"),ue.createElement("option",{value:"9"},"9"),ue.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return ue.createElement("div",{className:"checkbox inline"},ue.createElement("input",{disabled:n,onChange:this.toggleIncludeDocs,id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),ue.createElement("label",{className:n?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs"))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?ue.createElement("span",null,ue.createElement("div",{className:"checkbox inline"},ue.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:n}),ue.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),ue.createElement("div",{className:"checkbox inline"},ue.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"stable",type:"checkbox",checked:n,disabled:!t}),ue.createElement("label",{className:t?"":"disabled",htmlFor:"qoStable",id:"qoStableLabel"},"Stable"))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return ue.createElement("option",{key:e.value,value:e.value},e.label)}));return ue.createElement("div",{className:"dropdown inline"},ue.createElement("label",{className:"drop-down"},"Update",ue.createElement("select",{className:"input-small",id:"qoUpdate",value:e,onChange:this.onUpdateChange},t)))}},{key:"render",value:function(){return ue.createElement("div",{className:"query-group",id:"query-options-main-fields"},ue.createElement("span",{className:"add-on"},"Query Options",ue.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},ue.createElement("i",{className:"icon-question-sign"}))),ue.createElement("div",{className:"row-fluid fieldsets"},this.includeDocsOption(),this.reduceOption()),ue.createElement("div",{className:"row-fluid fieldsets"},this.stableOption(),this.updateOption()))}}],n&&Ld(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Vd(e){return Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(e)}function Hd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gd(e,t){return Gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gd(e,t)}function Fd(e,t){if(t&&("object"===Vd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kd(e){return Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kd(e)}qd.propTypes={toggleIncludeDocs:kt().func.isRequired,includeDocs:kt().bool.isRequired,reduce:kt().bool.isRequired,toggleReduce:kt().func,updateGroupLevel:kt().func,docURL:kt().string.isRequired,stable:kt().bool.isRequired,toggleStable:kt().func.isRequired,update:kt().string.isRequired,changeUpdateField:kt().func.isRequired,showReduce:kt().bool.isRequired,enableStable:kt().bool.isRequired};var zd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gd(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kd(r);if(o){var n=Kd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fd(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",r=n,o="drop-down btn ",a=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?a+="active":r+="hide",ue.createElement("div",{className:"query-group",id:"query-options-key-search"},ue.createElement("div",{className:"add-on"},"Keys"),ue.createElement("div",{className:"btn-group toggle-btns row-fluid"},ue.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),ue.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:a},"Between Keys")),ue.createElement("div",{className:t},ue.createElement("div",{className:n,id:"js-showKeys"},ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),ue.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),ue.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),ue.createElement("div",{className:r,id:"js-showStartEnd"},ue.createElement("div",{className:"controls controls-row"},ue.createElement("div",null,ue.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),ue.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),ue.createElement("div",null,ue.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),ue.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),ue.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},ue.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),ue.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}])&&Hd(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Wd(e){return Wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(e)}function Yd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qd(e,t){return Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qd(e,t)}function Jd(e,t){if(t&&("object"===Wd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $d(e){return $d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$d(e)}var Zd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qd(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$d(r);if(o){var n=$d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jd(this,e)});function i(){return Yd(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(se.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return ue.createElement("div",{className:"query-group",id:"query-options-additional-params"},ue.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),ue.createElement("div",{className:"row-fluid fieldsets"},ue.createElement("div",{className:"dropdown inline"},ue.createElement("label",{className:"drop-down"},"Limit",ue.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},ue.createElement("option",{value:"none"},"None"),ue.createElement("option",{value:5},"5"),ue.createElement("option",{value:10},"10"),ue.createElement("option",{value:20},"20"),ue.createElement("option",{value:30},"30"),ue.createElement("option",{value:50},"50"),ue.createElement("option",{value:100},"100"),ue.createElement("option",{value:500},"500"))))),ue.createElement("div",{className:"row-fluid fieldsets"},ue.createElement("div",{className:"checkbox inline"},ue.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),ue.createElement("label",{htmlFor:"qoDescending"},"Descending")),ue.createElement("div",{className:"dropdown inline"},ue.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",ue.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}])&&Xd(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ep(e){return ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e,t){return np=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},np(e,t)}function rp(e,t){if(t&&("object"===ep(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},op(e)}var ap=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&np(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(r);if(o){var n=op(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rp(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return ue.createElement("div",{className:"controls-group query-group"},ue.createElement("div",{id:"button-options",className:"controls controls-row"},ue.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),ue.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}])&&tp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ip(e){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(e)}function sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cp(e,t){return cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cp(e,t)}function lp(e,t){if(t&&("object"===ip(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function up(e){return up=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},up(e)}ap.propTypes={onCancel:kt().func.isRequired};var dp=pi.ToggleHeaderButton,pp=pi.TrayContents,fp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cp(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=up(r);if(o){var n=up(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lp(this,e)});function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e);var n=e.ddocsOnly,r=e.queryOptionsApplyFilterOnlyDdocs;return n&&r(),t}return t=i,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,a=t.resetPagination,i=t.selectedLayout,s=t.changeLayout;a(o);var c=i===lo;c&&r.include_docs?s(co):c||r.include_docs||s(lo),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return ue.createElement(pp,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},ue.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},ue.createElement(qd,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:se.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),ue.createElement(zd,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),ue.createElement(Zd,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),ue.createElement(ap,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,a=e.skip,i=e.limit,s=e.stable,c=e.update;return!!(n&&n.startkey||r||i&&"none"!=i||a||t||o||s||"true"!==c)}},{key:"render",value:function(){return ue.createElement("div",{id:"header-query-options"},ue.createElement("div",{id:"query-options"},ue.createElement("div",null,ue.createElement(dp,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}])&&sp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);fp.propTypes={contentVisible:kt().bool.isRequired,queryOptionsApplyFilterOnlyDdocs:kt().func.isRequired,queryOptionsRemoveFilterOnlyDdocs:kt().func.isRequired,queryOptionsExecute:kt().func.isRequired,queryOptionsParams:kt().object.isRequired,perPage:kt().number.isRequired,resetPagination:kt().func.isRequired,selectedLayout:kt().string.isRequired,changeLayout:kt().func.isRequired,queryOptionsToggleVisibility:kt().func.isRequired,queryOptionsToggleStable:kt().func.isRequired,queryOptionsChangeUpdate:kt().func.isRequired,stable:kt().bool.isRequired,update:kt().string.isRequired};const hp="INDEX_RESULTS_REDUX_NEW_RESULTS",mp="INDEX_RESULTS_REDUX_IS_LOADING",yp="INDEX_RESULTS_REDUX_CHANGE_LAYOUT",bp="INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",gp="INDEX_RESULTS_REDUX_SET_PER_PAGE",_p="INDEX_RESULTS_REDUX_PAGINATE_NEXT",vp="INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",Ep="INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",wp="INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",Sp="INDEX_RESULTS_REDUX_RESET_STATE",Op="INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",Np="INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",Dp="INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",Cp="INDEX_RESULTS_SET_STYLE";var Pp=function(e,t,n){void 0===e&&(e="server");var r=le.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return se.urls("document",e,o,r,"?conflicts=true")},Rp=function(e,t){if(e)return t!==po&&!!Object.keys(e).length&&!!e._id},kp=function(e,t){return t===po?"special"!==e.type:!(!e._id&&!e.id||!(e._rev||e.value&&e.value.rev))},Tp=function(e,t){return!!e.find((function(e){return kp(e,t)}))},xp=function(){if(window.localStorage){var e=le.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return se.constants.MISC.DEFAULT_PAGE_SIZE},Ip=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ho;return t===ho?e.id||e._id:t===po?"special"===e.type?"_all_docs":e.ddoc:t===fo?e._id:e.id||e._id},Ap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ho;return t===ho?e.value?e.value.rev:e._rev:t!==po&&t===fo?e._rev:void 0},Lp=function(e){return"Reason: "+(e&&e.message||"n/a")},jp=function(){return{type:Sp}},Mp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ep,selectedDocs:e}},Up=function(e){return{type:yp,layout:e}};function Bp(){return Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bp.apply(this,arguments)}function qp(){return qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qp.apply(this,arguments)}n(93554);var Vp=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:qp({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,a=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:mp}),e(o).then((function(e){var n=e.docs,r=e.docType,i=e.executionStats,s=e.warning,c=e.layout,l=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,a,o.limit),u=l.finalDocList,d=l.canShowNext;c&&t(Up(c)),t(function(e,t,n,r,o,a){return{type:hp,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:a}}(u,o,d,r,i,s))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:Np}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:Dp}):se.addNotification({msg:"Error running query. "+Lp(e),type:"error",clear:!0}),t(jp())}))}},Hp=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),se.addNotification({msg:t,type:"error",clear:!0})},Gp=function(e,t,n,r){se.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===po?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var a=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&Hp(o),n&&a&&js(n)};function Fp(){return Fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fp.apply(this,arguments)}var Kp=function(e){return{type:gp,perPage:e}},zp=function(e){return{type:Op,options:e}},Wp=function(e){return zp({includeDocs:!e})};function Yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qp=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=se.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},Jp=function(e){return JSON.stringify(e,null,3)},$p=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(n),!0).forEach((function(t){Xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")};var Zp=function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,a=void 0===o||o,i=e.map((function(e){if("MangoIndex"===r)return{header:Qp(e),content:$p(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?Pp("app",e.id,n):null,isDeletable:!!a&&"special"!==e.type,isEditable:!1};var t=Ip(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:Ap(e,r),keylabel:"id",url:t?Pp("app",t,n):null,isDeletable:a,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:Tp(e,r),results:i}},ef=void 0,tf=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},nf=function(e,t){var n=lo===t.selectedLayout,r=n?function(e){var t=tf(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):function(e,t){var n,r=null,o=t.selectedFieldsTableView,a=t.showAllFieldsTableView,i=e.map((function(e){return e.doc||e}));n=tf(i),o&&0===o.length&&(o=function(e,t){var n,r,o=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);return delete(o=_.countBy(o,(function(e){return e}))).id,delete o._rev,(o=(n=o=Object.keys(o).reduce((function(e,t){return e.push([o[t],t]),e}),[]),r=function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1},o=n.sort((function(e,t){return r(e,t,0)}))).slice(0,5)).reduce((function(e,t){return e.push(t[1]),e}),[])}(i));var s,c,l=_.without(n,"_attachments");return s=o,c=l,r=_.without.bind(ef,c).apply(ef,s),a&&(r=null,o=l),{schema:n,normalizedDocs:i,selectedFieldsTableView:o,notSelectedFieldsTableView:r}}(e,t),o=r.schema,a=r.normalizedDocs,i=r.selectedFieldsTableView,s=r.notSelectedFieldsTableView,c=a.map((function(e){return{content:e,id:Ip(e,t.docType),_rev:Ap(e,t.docType),header:"",keylabel:"",url:e._id||e.id?Pp("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&kp(e,t.docType),isEditable:Rp(e,t.docType)}}));return{notSelectedFields:s,selectedFields:i,hasBulkDeletableDoc:!!t.deleteEnabled&&Tp(a,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(i).length,allFieldCount:_.without(o,"_attachments").length}}};function rf(e){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(e)}function of(){return of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},of.apply(this,arguments)}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){cf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lf,uf={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:lo,textEmptyIndex:"No Documents Found",docType:ho,resultsStyle:(lf=le.utils.localStorageGet("fauxton:results_style"),lf||(lf={textOverflow:mo,fontSize:_o}),lf),fetchParams:{limit:xp()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:xp(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}};function df(e){le.utils.localStorageSet("fauxton:results_style",e)}var pf=function(e){return"query"!==e.language},ff=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},a=r.filter(pf);return uo===o.selectedLayout?Zp(a,o):nf(a,o)},hf=function(e){return e.selectedLayout===co},mf=function(e){return!!yf(e)&&e.pagination.pageStart+e.docs.length-1},yf=function(e){return!e.isLoading&&e.docs.length>0},bf=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];return kp(n,e.docType)?e.selectedDocs.some((function(t){return Ip(n,e.docType)===t._id}))?void 0:{v:!1}:"continue"},n=0;n<e.docs.length;n++){var r=t(n);if("continue"!==r&&"object"===rf(r))return r.v}return!0},gf=function(e){return e.selectedDocs.length>0},_f=function(e){return e.selectedDocs.length},vf=function(e){return e.pagination.currentPage>1},Ef=function(e,t){return ff(e,t).displayedFields||{}},wf=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},Sf=function(e){return e.docs},Of=function(e){return e.selectedDocs},Nf=function(e){return e.isEditable},Df=function(e){return e.selectedLayout},Cf=function(e){return e.textEmptyIndex},Pf=function(e){return e.docType},Rf=function(e){return e.tableView.showAllFieldsTableView},kf=function(e){return e.pagination.canShowNext},Tf=function(e){return e.pagination.perPage},xf=function(e){return e.fetchParams},If=function(e){return e.resultsStyle},Af=function(e,t){return or.selectedViewContainsReduceFunction(e,t)},Lf=function(e,t,n){return!or.isViewSelected(t)||!or.selectedItemIsPartitionedView(e,t,n)},jf=(0,Tt.$j)((function(e,t){var n=e.indexResults,r=e.sidebar,o=e.databases,a=n.queryOptionsPanel;return{contentVisible:a.isVisible,includeDocs:a.includeDocs,showReduce:Af(r.designDocList,t.selectedNavItem),reduce:a.reduce,groupLevel:a.groupLevel,showByKeys:a.showByKeys,showBetweenKeys:a.showBetweenKeys,betweenKeys:a.betweenKeys,byKeys:a.byKeys,descending:a.descending,skip:a.skip,limit:a.limit,enableStable:Lf(r.designDocList,t.selectedNavItem,o.isDbPartitioned),stable:a.stable,update:a.update,fetchParams:xf(n),queryOptionsParams:wf(n),perPage:Tf(n),selectedLayout:Df(n),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.constants.MISC.DEFAULT_PAGE_SIZE;return Kp(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return zp(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return zp({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return zp({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return zp({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return zp({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return zp({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return zp({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return zp({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return zp({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Wp(t))},queryOptionsToggleVisibility:function(t){e(function(e){return zp({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return Vp(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(zp({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(zp({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return zp({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(function(e){return zp({update:e.toString()})}(t))},changeLayout:function(t){e(Up(t))},resetState:function(){e(jp())}}}))(fp);const Mf=jf;jf.propTypes={queryDocs:kt().func.isRequired};var Uf=function(e){var t=e.database,n=e.loadOptions;return ue.createElement("div",null,ue.createElement(pi.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=se.urls("document","app",le.utils.safeURLName(t.id),le.utils.safeURLName(n));setTimeout((function(){return se.navigate(r,{trigger:!0})}))}}))};Uf.propTypes={database:kt().object.isRequired,loadOptions:kt().func.isRequired};const Bf=Uf,qf=function(e,t){return function(n,r){var o="?"+le.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+"香"),limit:30}),a=t?se.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):se.urls("allDocs","server",e.safeID(),o);w(a).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}}))),r(null,{options:t})}))}};var Vf=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,a=e.ddocsOnly,i=e.selectedNavItem,s=e.partitionKey;return ue.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.createElement("div",{className:"faux-header__searchboxwrapper"},ue.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:ue.createElement(Bf,{key:JSON.stringify(t+s),cache:!1,loadOptions:qf(t,s),database:t}))),n?null:ue.createElement(Mf,{ddocsOnly:a,queryDocs:o,selectedNavItem:i}))};Vf.propTypes={database:kt().object.isRequired,hideQueryOptions:kt().bool,isRedux:kt().bool,queryDocs:kt().func,selectedNavItem:kt().object,partitionKey:kt().string},Vf.defaultProps={hideQueryOptions:!1};const Hf=Vf;function Gf(e){return Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(e)}function Ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kf(e,t){return Kf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kf(e,t)}function zf(e,t){if(t&&("object"===Gf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wf(e){return Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wf(e)}var Yf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kf(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wf(r);if(o){var n=Wf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zf(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,a=r.docType,i=r.queryOptionsParams,s=r.fetchUrl;if(a===ho)e=ue.createElement(on.zx,{className:o===lo?"active":"",onClick:this.toggleLayout.bind(this,lo)},"Metadata");else if(a===po)return null;return(s&&-1!==s.indexOf("/_all_docs")||a===fo||!i.reduce)&&(n=ue.createElement(on.zx,{className:o===co?"active":"",onClick:this.toggleLayout.bind(this,co)},ue.createElement("i",{className:"fonticon-table"})," Table"),t=ue.createElement(on.zx,{className:o===uo?"active":"",onClick:this.toggleLayout.bind(this,uo)},ue.createElement("i",{className:"fonticon-json"})," JSON")),ue.createElement("div",{className:"alternative-header"},ue.createElement(on.hE,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,a=t.fetchParams,i=t.queryOptionsParams,s=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),i.include_docs=e!==lo,e===co?a.conflicts=!0:delete a.conflicts,s(!i.include_docs),void o(a,i)}}],n&&Ff(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jf(e,t){return Jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jf(e,t)}function $f(e,t){if(t&&("object"===Xf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zf(e)}function Zf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eh(e)}function th(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nh=pi.MenuDropDown,rh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jf(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=eh(r);if(o){var n=eh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $f(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).toggleTextOverflow=t.toggleTextOverflow.bind(Zf(t)),t.setFontSize=t.setFontSize.bind(Zf(t)),t}return t=i,(n=[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===yo?this.props.updateStyle({textOverflow:mo}):this.props.updateStyle({textOverflow:yo})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===yo&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(bo)},icon:this.props.resultsStyle.fontSize===bo?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(_o)},icon:this.props.resultsStyle.fontSize===_o?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(go)},icon:this.props.resultsStyle.fontSize===go?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),ue.createElement("div",{className:"toolbar-dropdown"},ue.createElement(nh,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}])&&Qf(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function oh(e){return oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(e)}function ah(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ih(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sh(e,t){return sh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sh(e,t)}function ch(e,t){if(t&&("object"===oh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lh(e)}th(rh,"defaultProps",{showDensity:!0,showFontSize:!0}),th(rh,"propTypes",{resultsStyle:kt().object.isRequired,updateStyle:kt().func.isRequired,showDensity:kt().bool,showFontSize:kt().bool});var uh=pi.BulkActionComponent,dh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lh(r);if(o){var n=lh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ch(this,e)});function i(){return ah(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,a=e.hasSelectedItem,i=e.toggleSelectAll,s=e.isLoading,c=e.databaseName,l=e.partitionKey,u=null;(n&&t||s)&&(u=ue.createElement(uh,{removeItem:r,isChecked:o,hasSelectedItem:a,toggleSelect:i,disabled:s,title:"Select all docs that can be..."}));var d=null,p=this.props.selectedLayout!==uo,f=null;(t||s)&&(d=ue.createElement(Yf,this.props),f=ue.createElement(rh,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:p}));var h=null;return c&&(h=ue.createElement("div",{className:"document-result-screen__toolbar-flex-container"},ue.createElement("a",{href:or.getNewDocUrl(c,l),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),ue.createElement("div",{className:"document-result-screen__toolbar"},u,d,f,h)}}])&&ih(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ph(e){var t=e.text,n=e.isWarning,r=ue.createElement("div",{className:"no-results-screen-warning"},ue.createElement("i",{className:"fonticon-attention-circled"}),t);return ue.createElement("div",{className:"no-results-screen"},n?r:null,ue.createElement("div",{className:"watermark-logo"}),n?null:ue.createElement("h3",null,t))}function fh(e){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(e)}function hh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mh(e,t){return mh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mh(e,t)}function yh(e,t){if(t&&("object"===fh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bh(e)}dh.propTypes={removeItem:kt().func.isRequired,allDocumentsSelected:kt().bool.isRequired,hasSelectedItem:kt().bool.isRequired,toggleSelectAll:kt().func.isRequired,isLoading:kt().bool.isRequired,hasResults:kt().bool.isRequired,isListDeletable:kt().bool,partitionKey:kt().string,docType:kt().string,resultsStyle:kt().object.isRequired,updateResultsStyle:kt().func.isRequired},ph.propTypes={text:kt().string.isRequired};var gh=pi.Copy,_h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bh(r);if(o){var n=bh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yh(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={checked:t.props.isSelected},t}return t=i,n=[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content,r=this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],a=-1!==["object","boolean"].indexOf(fh(n[e]))?JSON.stringify(n[e],null,"  "):n[e],i=rn()({showall:this.props.textOverflow===yo,"small-font":this.props.fontSize===bo,"large-font":this.props.fontSize===go});return ue.createElement("td",{key:o,title:a,className:i,onClick:this.onClick.bind(this)},a)}.bind(this));return r}},{key:"maybeGetCheckboxCell",value:function(e,t){return ue.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?ue.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,a=null,i=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=ue.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},ue.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(i=1===o?o+" Conflict":o+" Conflicts",a=ue.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:i},ue.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),ue.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},a,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return ue.createElement("td",{title:t,className:"tableview-el-copy"},ue.createElement(gh,{title:t,text:t,uniqueKey:(0,wu.Z)(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){se.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return ue.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}],n&&hh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function vh(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,a=e.selectedFields,i=n.map((function(e){return{value:e,label:e}}));return ue.createElement("div",{className:"table-container-autocomplete"},ue.createElement("div",{className:"table-select-wrapper"},ue.createElement(ni.ZP,{value:t,options:i,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},a)}})))}function Eh(e){return Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(e)}function wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sh(e,t){return Sh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sh(e,t)}function Oh(e,t){if(t&&("object"===Eh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nh(e){return Nh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nh(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_h,"defaultProps",{textOverflow:mo}),_h.propTypes={docIdentifier:kt().string.isRequired,docChecked:kt().func.isRequired,isSelected:kt().bool.isRequired,index:kt().number.isRequired,data:kt().object.isRequired,onClick:kt().func.isRequired,textOverflow:kt().string};var Dh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nh(r);if(o){var n=Nh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oh(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return ue.createElement(_h,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return ue.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return ue.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return ue.createElement(vh,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return ue.createElement("tr",{key:"tableview-content-row-header"},ue.createElement("th",{className:"tableview-header-el-checkbox"}),ue.createElement("th",{className:"tableview-el-copy"}),t,ue.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return ue.createElement("div",{className:"table-view-docs"},ue.createElement("table",{className:"table table-striped"},ue.createElement("thead",null,this.getHeader()),ue.createElement("tbody",null,this.getContentRows())))}}])&&wh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ch(e){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(e)}function Ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rh(e,t){return Rh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rh(e,t)}function kh(e,t){if(t&&("object"===Ch(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Th(e)}var xh=pi.LoadLines,Ih=pi.Document,Ah=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Th(r);if(o){var n=Th(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kh(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&se.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?ue.createElement("a",{href:e},ue.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return ue.createElement(Ih,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),ue.createElement("div",{className:e},ue.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return ue.createElement("div",null,ue.createElement(Dh,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?ue.createElement("div",{className:"loading-lines-wrapper"},ue.createElement(xh,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===uo?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return ue.createElement(ph,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return ue.createElement(ph,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return ue.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),ue.createElement(dh,this.props),this.getMainView())}}],n&&Ph(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Lh(e){return Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(e)}function jh(){return jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jh.apply(this,arguments)}function Mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(n),!0).forEach((function(t){Bh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vh(e,t){return Vh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vh(e,t)}function Hh(e,t){if(t&&("object"===Lh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gh(e)}var Fh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gh(r);if(o){var n=Gh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Hh(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,a=e.fetchUrl,i=e.resetState,s=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===a&&this.props.partitionKey===s||(i(),t(Uh(Uh({},n),{},{skip:0}),Uh(Uh({},r),{},{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return ue.createElement(Ah,jh({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}])&&qh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Fh.propTypes={fetchAtStartup:kt().bool.isRequired,fetchDocs:kt().func.isRequired};var Kh=(0,Tt.$j)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:Sf(r),selectedDocs:Of(r),isLoading:(n=r,n.isLoading),hasResults:yf(r),results:ff(r,t.databaseName,t.deleteEnabled),isEditable:Nf(r),selectedLayout:Df(r),allDocumentsSelected:bf(r),hasSelectedItem:gf(r),numDocsSelected:_f(r),textEmptyIndex:Cf(r),docType:Pf(r),fetchParams:xf(r),queryOptionsParams:wf(r),partitionKey:t.partitionKey,resultsStyle:If(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(Vp(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),Mp(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(function(e,t,n,r,o,a,i){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(s){var c,l;if(i===po)l={docids:n.map((function(e){return e._id}))},c=function(e,t){var n=se.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return O(n,t)}(e,l);else{if(i!==ho&&i!==fo)throw new Error("Invalid document type: "+i);c=function(e,t){var n=se.urls("bulk_docs","server",e);return O(n,t)}(e,l={docs:n})}return c.then((function(e){e.error?Hp():(Gp(e,n,r,i),s(Mp()),s(Vp(t,o,a)))}))}}(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(Up(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(kp(e,r)){var o=t.findIndex((function(t){return Ip(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:Ip(e,r),_rev:Ap(e,r),_deleted:!0})}})),Mp(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:wp,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(jp())},queryOptionsToggleIncludeDocs:function(t){e(Wp(t))},updateResultsStyle:function(t){e(function(e){return{type:Cp,resultsStyle:e}}(t))}}}))(Fh);const zh=Kh;function Wh(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),ue.createElement("div",{className:"documents-pagination"},ue.createElement("ul",{className:"pagination"},ue.createElement("li",{className:r},ue.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),ue.createElement("li",{className:o},ue.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}function Yh(e){return Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(e)}function Xh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qh(e,t){return Qh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qh(e,t)}function Jh(e,t){if(t&&("object"===Yh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $h(e){return $h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$h(e)}Kh.propTypes={queryDocs:kt().func.isRequired,docType:kt().string.isRequired},Wh.propTypes={nextClicked:kt().func.isRequired,previousClicked:kt().func.isRequired,canShowPrevious:kt().bool.isRequired,canShowNext:kt().bool.isRequired};var Zh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qh(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$h(r);if(o){var n=$h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jh(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?ue.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):ue.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return ue.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),ue.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},ue.createElement("label",{htmlFor:"footer-doc-control-prioritized"},ue.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}])&&Xh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function em(e){return em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(e)}function tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nm(e,t){return nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nm(e,t)}function rm(e,t){if(t&&("object"===em(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function om(e){return om=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},om(e)}Zh.propTypes={prioritizedEnabled:kt().bool.isRequired,displayedFields:kt().object.isRequired,toggleShowAllColumns:kt().func.isRequired};var am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nm(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=om(r);if(o){var n=om(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rm(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?ue.createElement("span",null,"Showing 0 documents."):ue.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginateNext,i=t.perPage;n&&a(r,o,i)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginatePrevious,i=t.perPage;n&&a(r,o,i)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,a=e.perPage,i=e.canShowNext,s=e.canShowPrevious,c=e.toggleShowAllColumns;return ue.createElement("footer",{className:"index-pagination pagination-footer"},ue.createElement(Wh,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:i,canShowPrevious:s}),ue.createElement("div",{className:"footer-controls"},ue.createElement("div",{className:"page-controls"},t&&n?ue.createElement(Zh,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:c}):null),ue.createElement(vi,{perPageChange:this.perPageChange.bind(this),perPage:a}),ue.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}])&&tm(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),im=(0,Tt.$j)((function(e,t){var n,r=e.indexResults;return{docs:Sf(r),selectedDocs:Of(r),hasResults:yf(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:mf(r),perPage:Tf(r),prioritizedEnabled:Rf(r),showPrioritizedEnabled:hf(r),displayedFields:Ef(r,t.databaseName),canShowNext:kf(r),canShowPrevious:vf(r),fetchParams:xf(r),queryOptionsParams:wf(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:bp})},updatePerPageResults:function(n,r,o){e(function(e,t,n,r){return t=function(e,t,n){return Fp({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(Kp(r)),o(Vp(e,t,n))}}(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return Fp({},e,{skip:e.skip+t})}(t,r),function(r){r({type:_p}),r(Vp(e,t,n))}}(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return Fp({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:vp}),r(Vp(e,t,n))}}(t.queryDocs,n,r,o))}}}))(am);const sm=im;im.propTypes={queryDocs:kt().func.isRequired};var cm=(0,Tt.$j)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,a=t.endpointAddQueryOptions;if(r||(r=se.constants.DOC_URLS.GENERAL),o&&a){var i=le.utils.queryString(wf(n));i&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(i):"".concat(o,"&").concat(i))}return{docUrl:r,endpoint:o}}))(Yt);const lm=cm;function um(e){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(e)}function dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pm(e,t){return pm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pm(e,t)}function fm(e,t){if(t&&("object"===um(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hm(e)}function hm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mm(e)}cm.propTypes={databaseName:kt().string,docUrl:kt().string,endpoint:kt().string,endpointAddQueryOptions:kt().bool};var ym=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pm(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mm(r);if(o){var n=mm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fm(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={editorValue:"",editMode:!1},t.onModeSwitchClick=t.onModeSwitchClick.bind(hm(t)),t.onBlur=t.onBlur.bind(hm(t)),t.startEdit=t.startEdit.bind(hm(t)),t.onKeyPress=t.onKeyPress.bind(hm(t)),t.onChange=t.onChange.bind(hm(t)),t.props.checkDbPartitioned(t.props.databaseName),t}return t=i,(n=[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return ue.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},ue.createElement("i",{className:"fonticon-filter"}),"No partition selected")}},{key:"partitionHeader",value:function(){var e=this,t=ue.createElement("input",{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),ue.createElement(ue.Fragment,null,ue.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},ue.createElement("i",{className:"fonticon-filter"})),ue.createElement("div",{className:r},ue.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return ue.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}])&&dm(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);ym.defaultProps={partitionKey:"",globalMode:!0},ym.propTypes={selectorVisible:kt().bool.isRequired,partitionKey:kt().string.isRequired,checkDbPartitioned:kt().func.isRequired,onPartitionKeySelected:kt().func.isRequired,onGlobalModeSelected:kt().func,globalMode:kt().bool};const bm="PARTITON_KEY_SHOW_SELECTOR",gm="PARTITON_KEY_HIDE_SELECTOR";var _m=(0,Tt.$j)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:gm}),wt(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:bm})}))}}(t))}}}))(ym);const vm=_m;_m.propTypes={databaseName:kt().string.isRequired,partitionKey:kt().string.isRequired,onPartitionKeySelected:kt().func.isRequired,onGlobalModeSelected:kt().func.isRequired,globalMode:kt().bool};var Em=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,a=e.dropDownLinks,i=e.docURL,s=e.endpoint,c=e.endpointAddQueryOptions,l=e.fetchUrl,u=e.ddocsOnly,d=e.queryDocs,p=e.selectedNavItem,f=e.showPartitionKeySelector,h=e.partitionKey,m=e.onPartitionKeySelected,y=e.onGlobalModeSelected,b=e.globalMode,g=null;return f&&(g=ue.createElement(vm,{databaseName:o,partitionKey:h,onPartitionKeySelected:m,onGlobalModeSelected:y,globalMode:b})),ue.createElement("header",{className:"two-panel-header"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{id:"header-docs-left"},ue.createElement(Eu,{dbName:o,partitionKey:h,dropDownLinks:a})),ue.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},g),ue.createElement("div",{id:"right-header",className:"flex-fill"},ue.createElement(Hf,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:l,ddocsOnly:u,queryDocs:d,partitionKey:h,selectedNavItem:p})),ue.createElement(lm,{docURL:i,endpoint:s,endpointAddQueryOptions:c}),ue.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.createElement(Ht,null)))))};Em.propTypes={dbName:kt().string.isRequired,dropDownLinks:kt().array.isRequired,docURL:kt().string,endpoint:kt().string,showIncludeAllDocs:kt().bool,hideQueryOptions:kt().bool,hideJumpToDoc:kt().bool,database:kt().object.isRequired,queryDocs:kt().func,selectedNavItem:kt().object,showPartitionKeySelector:kt().bool.isRequired,partitionKey:kt().string,onPartitionKeySelected:kt().func,onGlobalModeSelected:kt().func,globalMode:kt().bool},Em.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var wm=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,a=e.databaseName,i=e.queryDocs,s=e.selectedNavItem,c=e.partitionKey;return ue.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.createElement(gu,{selectedNavItem:s,selectedPartitionKey:c})),ue.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.createElement("div",{id:"dashboard-upper-content"},r),ue.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),ue.createElement("div",{id:"footer"},t?null:ue.createElement(sm,{databaseName:a,fetchUrl:o,queryDocs:i}))))};wm.defaultProps={hideFooter:!1},wm.propTypes={hideFooter:kt().bool,lowerContent:kt().object,upperContent:kt().object,selectedNavItem:kt().object};var Sm=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.fetchUrl,c=e.ddocsOnly,l=e.deleteEnabled,u=void 0===l||l,d=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,h=e.onGlobalModeSelected,m=e.globalMode,y=(d.navItem,function(e){return function(e,t,n){Bp(n,{reduce:void 0,group:void 0,group_level:void 0});var r=le.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return w(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:ho}}))}(s,0,e)});or.isViewSelected(d)&&(y=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=le.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return w(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:ho,layout:void 0}}))}(s,e)});var b=ue.createElement(zh,{fetchUrl:s,designDocs:n,ddocsOnly:c,databaseName:a,fetchAtStartup:!0,queryDocs:y,docType:ho,deleteEnabled:u,partitionKey:p});return ue.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.createElement(Em,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:a,dropDownLinks:i,database:t,fetchUrl:s,ddocsOnly:c,queryDocs:y,selectedNavItem:d,showPartitionKeySelector:!c,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:h,globalMode:m}),ue.createElement(wm,{lowerContent:b,fetchUrl:s,databaseName:a,queryDocs:y,selectedNavItem:d,partitionKey:p}))},Om=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,a=e.dropDownLinks,i=e.selectedNavItem,s=e.partitionKey;return ue.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.createElement(Em,{docURL:t,endpoint:r,dbName:o,dropDownLinks:a,database:n,hideQueryOptions:!0}),ue.createElement(wm,{upperContent:ue.createElement(gd,null),lowerContent:ue.createElement(nd,{databaseName:o}),hideFooter:!0,selectedNavItem:i,partitionKey:s}))},Nm=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.selectedNavItem,c=e.designDocInfo,l=e.partitionKey,u=t?ue.createElement(Zc.IndexEditorContainer,{partitionKey:l}):ue.createElement(Id,{designDocInfo:c,designDocName:s.designDocName});return ue.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.createElement(Em,{endpoint:o,docURL:r,dbName:a,dropDownLinks:i,database:n,partitionKey:l,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),ue.createElement(wm,{lowerContent:u,hideFooter:!0,selectedNavItem:s,partitionKey:l}))};Nm.defaultProps={showEditView:!0},Nm.propTypes={showEditView:kt().bool,docURL:kt().string.isRequired,endpoint:kt().string,dbName:kt().string.isRequired,dropDownLinks:kt().array.isRequired,designDocInfo:kt().object};var Dm=qs.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new Es.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new ht.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new Gs("designDoc",{designDocName:n,designDocSection:"metadata"});Pt.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.createElement(Nm,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?se.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):se.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var a=!!(r.startkey&&r.startkey.indexOf("_design")>-1),i="all-docs";a&&(i="design-docs");var s=new Gs(i);er.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=t?se.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),l=se.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return Pt.fetchSelectedDatabaseInfo(e),ue.createElement(Sm,{docURL:l,endpoint:c,dbName:this.database.id,dropDownLinks:u,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:a,selectedNavItem:s,partitionKey:t,onPartitionKeySelected:function(t){var n=se.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));se.navigate("#/"+n)},onGlobalModeSelected:function(){var t=se.urls("allDocs","app",encodeURIComponent(e));se.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new Gs("changes");return Pt.fetchSelectedDatabaseInfo(e),ue.createElement(Om,{endpoint:se.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}});const Cm=Dm,Pm="RESET_DOC",Rm="DOC_LOADED",km="SHOW_CLONE_DOC_MODAL",Tm="HIDE_CLONE_DOC_MODAL",xm="SHOW_DELETE_DOC_CONFIRMATION_MODAL",Im="HIDE_DELETE_DOC_CONFIRMATION_MODAL",Am="SHOW_UPLOAD_MODAL",Lm="HIDE_UPLOAD_MODAL",jm="RESET_UPLOAD_MODAL",Mm="FILE_UPLOAD_SUCCESS",Um="FILE_UPLOAD_ERROR",Bm="START_FILE_UPLOAD",qm="SET_FILE_UPLOAD_PERCENTAGE",Vm="SAVING_DOCUMENT",Hm="SAVING_DOCUMENT_COMPLETED";var Gm,Fm=function(e){return function(t){var n=e.doc;t({type:Pm}),n.fetch().then((function(){t({type:Rm,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&zm("The ".concat(n.id," document does not exist.")),se.navigate(se.urls("allDocs","app",e.database.id,""))}))}},Km=function(){return function(e){e({type:Tm})}};function zm(e){se.addNotification({msg:e,type:"error",clear:!0})}const Wm=function(e){se.reduxDispatch(Fm(e))},Ym=Km;function Xm(e){return Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(e)}function Qm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $m(e,t){return $m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$m(e,t)}function Zm(e,t){if(t&&("object"===Xm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ey(e)}function ey(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ty(e)}function ny(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ry=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$m(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ty(r);if(o){var n=ty(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zm(this,e)});function i(){var e;Qm(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ny(ey(e=a.call.apply(a,[this].concat(n))),"getAttachmentList",(function(){var t=encodeURIComponent(e.props.doc.database.get("id")),n=encodeURIComponent(e.props.doc.get("_id"));return _.map(e.props.doc.get("_attachments"),(function(e,r){var o=se.urls("document","attachment",t,n,encodeURIComponent(r));return ue.createElement(on.sN,{key:r,href:o,target:"_blank","data-bypass":"true"},ue.createElement("strong",null,r),ue.createElement("span",{className:"attachment-delimiter"},"-"),ue.createElement("span",null,e.content_type,e.content_type?", ":"",R.formatSize(e.length)))}))})),e}return t=i,(n=[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&ue.createElement("div",{className:"panel-section view-attachments-section btn-group"},ue.createElement(on.Lt,{id:"view-attachments-menu",disabled:this.props.disabled},ue.createElement(on.Lt.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},ue.createElement("i",{className:"icon icon-paper-clip"}),ue.createElement("span",{className:"button-text"},"View Attachments"),ue.createElement("span",{className:"caret"})),ue.createElement(on.Lt.Menu,null,this.getAttachmentList())))}}])&&Jm(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function oy(e){return oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(e)}function ay(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e,t){return sy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sy(e,t)}function cy(e,t){if(t&&("object"===oy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ly(e)}function ly(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uy(e)}function dy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ny(ry,"propTypes",{isLoading:kt().bool.isRequired,disabled:kt().bool,doc:kt().object}),ny(ry,"defaultProps",{isLoading:!0,disabled:!1,doc:{}});var py=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uy(r);if(o){var n=uy(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return cy(this,e)});function i(){var e;ay(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dy(ly(e=a.call.apply(a,[this].concat(n))),"state",{uuid:null}),dy(ly(e),"cloneDoc",(function(){e.props.onSubmit&&e.props.onSubmit(),e.props.cloneDoc(e.props.database,e.props.doc,e.state.uuid)})),dy(ly(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.hideCloneDocModal()})),dy(ly(e),"docIDChange",(function(t){e.setState({uuid:t.target.value})})),e}return t=i,(n=[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&R.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&ue.createElement(on.u_,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Clone Document")),ue.createElement(on.u_.Body,null,ue.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},ue.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),ue.createElement("p",null,"You can modify the following generated ID for your new document."),ue.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),ue.createElement(on.u_.Footer,null,ue.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},ue.createElement("i",{className:"icon-repeat"})," Clone Document")))}}])&&iy(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function fy(e){return fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(e)}function hy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function my(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yy(e,t){return yy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yy(e,t)}function by(e,t){if(t&&("object"===fy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gy(e)}function _y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dy(py,"propTypes",{visible:kt().bool.isRequired,doc:kt().object,database:kt().object.isRequired,onSubmit:kt().func.isRequired,hideCloneDocModal:kt().func.isRequired,cloneDoc:kt().func.isRequired});var vy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yy(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gy(r);if(o){var n=gy(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return by(this,e)});function i(){return hy(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e="icon "+this.props.iconClass;return ue.createElement("div",{className:"panel-section"},ue.createElement("button",{className:"panel-button ".concat(this.props.className),title:this.props.title,onClick:this.props.onClick,disabled:this.props.disabled},ue.createElement("i",{className:e}),ue.createElement("span",null,this.props.title)))}}])&&my(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ey(e){return Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(e)}function wy(){return wy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wy.apply(this,arguments)}function Sy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ny(e,t){return Ny=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ny(e,t)}function Dy(e,t){if(t&&("object"===Ey(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cy(e)}function Cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Py(e)}function Ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_y(vy,"propTypes",{title:kt().string.isRequired,onClick:kt().func.isRequired,className:kt().string,disabled:kt().bool}),_y(vy,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:"",disabled:!1});var ky=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ny(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Py(r);if(o){var n=Py(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Dy(this,e)});function i(){var e;Sy(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ry(Cy(e=a.call.apply(a,[this].concat(n))),"closeModal",(function(t){t&&t.preventDefault(),e.props.inProgress&&e.props.cancelUpload(),e.props.hideUploadModal(),e.props.resetUploadModal()})),Ry(Cy(e),"upload",(function(){e.props.uploadAttachment({doc:e.props.doc,rev:e.props.doc.get("_rev"),files:e.attachments.files})})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t="alert alert-error";""===this.props.errorMessage&&(t+=" hide");var n="progress progress-info",r={disabled:"disabled"};return this.props.inProgress||(n+=" hide",r={}),ue.createElement(on.u_,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Upload Attachment")),ue.createElement(on.u_.Body,null,ue.createElement("div",{className:t},this.props.errorMessage),ue.createElement("div",null,ue.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},ue.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),ue.createElement("input",wy({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},r)),ue.createElement("br",null)),ue.createElement("div",{className:n},ue.createElement("div",{className:"bar",style:{width:this.props.uploadPercentage+"%"}})))),ue.createElement(on.u_.Footer,null,ue.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.createElement("button",wy({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},r),ue.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}])&&Oy(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Ty(e){return Ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(e)}function xy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ay(e,t){return Ay=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ay(e,t)}function Ly(e,t){if(t&&("object"===Ty(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jy(e)}function jy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function My(e){return My=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},My(e)}function Uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ry(ky,"propTypes",{visible:kt().bool.isRequired,doc:kt().object,inProgress:kt().bool.isRequired,uploadPercentage:kt().number.isRequired,errorMessage:kt().string,cancelUpload:kt().func.isRequired,hideUploadModal:kt().func.isRequired,resetUploadModal:kt().func.isRequired,uploadAttachment:kt().func.isRequired});var By=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ay(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=My(r);if(o){var n=My(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ly(this,e)});function i(){var e;xy(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Uy(jy(e=a.call.apply(a,[this].concat(n))),"getCodeEditor",(function(){if(e.props.isLoading)return ue.createElement(pi.LoadLines,null);var t=e.props.doc.attributes;e.props.isDbPartitioned&&(-1!==t._id.indexOf(":")||t._id.startsWith("_design")||(t._id=":"+t._id));var n=JSON.stringify(t,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:e.saveDoc}];return ue.createElement(pi.CodeEditor,{id:"doc-editor",ref:function(t){return e.docEditor=t},defaultCode:n,disabled:e.props.isSaving,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})})),Uy(jy(e),"saveDoc",(function(){e.props.saveDoc(e.props.doc,e.checkDocIsValid(),e.onSaveComplete,e.props.previousUrl)})),Uy(jy(e),"onSaveComplete",(function(){e.getEditor()&&e.getEditor().clearChanges()})),Uy(jy(e),"hideDeleteDocModal",(function(){e.props.hideDeleteDocModal()})),Uy(jy(e),"deleteDoc",(function(){e.props.hideDeleteDocModal(),e.props.deleteDoc(e.props.doc)})),Uy(jy(e),"getEditor",(function(){return e.docEditor?e.docEditor.getEditor():null})),Uy(jy(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.props.doc.clear().set(t,{validate:!0}),!e.props.doc.validationError})),Uy(jy(e),"clearChanges",(function(){e.docEditor&&e.docEditor.clearChanges()})),Uy(jy(e),"getExtensionIcons",(function(){var t=se.getExtensions("DocEditor:icons");return _.map(t,(function(t,n){return ue.createElement(t,{doc:e.props.doc,key:n,database:e.props.database})}))})),Uy(jy(e),"getButtonRow",(function(){return!e.props.isNewDoc&&null!==e.props.doc&&ue.createElement("div",null,ue.createElement(ry,{doc:e.props.doc,isLoading:e.props.isLoading,disabled:e.props.isSaving}),ue.createElement("div",{className:"doc-editor-extension-icons"},e.getExtensionIcons()),e.props.conflictCount?ue.createElement(vy,{title:"Conflicts (".concat(e.props.conflictCount,")"),iconClass:"icon-columns",className:"conflicts",disabled:e.props.isSaving,onClick:function(){se.navigate(se.urls("revision-browser","app",e.props.database.safeID(),e.props.doc.id))}}):null,ue.createElement(vy,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",disabled:e.props.isSaving,onClick:e.props.showUploadModal}),ue.createElement(vy,{title:"Clone Document",iconClass:"icon-repeat",disabled:e.props.isSaving,onClick:e.props.showCloneDocModal}),ue.createElement(vy,{title:"Delete",iconClass:"icon-trash",disabled:e.props.isSaving,onClick:e.props.showDeleteDocModal}))})),e}return t=i,(n=[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor()&&this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isSaving?"Saving...":this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:se.urls("allDocs","app",se.url.encode(this.props.database.id)),r="js-back cancel-button ".concat(this.props.isSaving?"cancel-button--disabled":"");return ue.createElement("div",null,ue.createElement("div",{id:"doc-editor-actions-panel"},ue.createElement("div",{className:"doc-actions-left"},ue.createElement("button",{disabled:this.props.isSaving,className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},ue.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),ue.createElement("div",null,ue.createElement("a",{href:this.props.isSaving?void 0:"#/".concat(n),className:r},"Cancel"))),ue.createElement("div",{className:"alignRight"},this.getButtonRow())),ue.createElement("div",{className:"code-region"},ue.createElement("div",{className:"bgEditorGutter"}),ue.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),ue.createElement(ky,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),ue.createElement(py,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),ue.createElement("span",{id:"hey"},"bb"),ue.createElement(Li.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}])&&Iy(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Uy(By,"defaultProps",{database:{},isNewDoc:!1}),Uy(By,"propTypes",{isLoading:kt().bool.isRequired,isSaving:kt().bool.isRequired,isNewDoc:kt().bool.isRequired,isDbPartitioned:kt().bool.isRequired,doc:kt().object,conflictCount:kt().number.isRequired,previousUrl:kt().string,saveDoc:kt().func.isRequired,isCloneDocModalVisible:kt().bool.isRequired,database:kt().object,showCloneDocModal:kt().func.isRequired,hideCloneDocModal:kt().func.isRequired,cloneDoc:kt().func.isRequired,isDeleteDocModalVisible:kt().bool.isRequired,showDeleteDocModal:kt().func.isRequired,hideDeleteDocModal:kt().func.isRequired,deleteDoc:kt().func.isRequired,isUploadModalVisible:kt().bool.isRequired,uploadInProgress:kt().bool.isRequired,uploadPercentage:kt().number.isRequired,uploadErrorMessage:kt().string,numFilesUploaded:kt().number.isRequired,showUploadModal:kt().func.isRequired,hideUploadModal:kt().func.isRequired,cancelUpload:kt().func.isRequired,resetUploadModal:kt().func.isRequired,uploadAttachment:kt().func.isRequired});var qy=(0,Tt.$j)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isSaving:n.isSaving,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded}}),(function(e){return{saveDoc:function(t,n,r,o){e(function(e,t,n,r){return function(o){t?(o({type:Vm}),e.save().then((function(){n(e.prettyJSON()),o({type:Hm}),se.addNotification({msg:"Document saved successfully.",type:"success",clear:!0}),r?se.navigate(r,{trigger:!0}):se.navigate("#/"+se.urls("allDocs","app",se.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){o({type:Hm}),se.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(zm("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):zm("Please fix the JSON errors and try saving again.")}}(t,n,r,o))},showCloneDocModal:function(){e((function(e){e({type:km})}))},hideCloneDocModal:function(){e(Ym())},cloneDoc:function(e,t,n){!function(e,t,n){Km(),t.copy(n).then((function(){var t=se.urls("document","app",e.safeID(),encodeURIComponent(n));se.navigate(t,{trigger:!0}),se.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");se.addNotification({msg:t,type:"error"})}))}(e,t,n)},showDeleteDocModal:function(){e((function(e){e({type:xm})}))},hideDeleteDocModal:function(){e((function(e){e({type:Im})}))},deleteDoc:function(e){!function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=se.urls("document","server",t,e.safeID(),n);S(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);se.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),se.navigate(se.urls("allDocs","app",t,""))})).catch((function(e){se.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))}(e)},showUploadModal:function(){e((function(e){e({type:Am})}))},hideUploadModal:function(){e((function(e){e({type:Lm})}))},cancelUpload:function(){Gm&&Gm.abort()},resetUploadModal:function(){e((function(e){e({type:jm})}))},uploadAttachment:function(t){e(function(e){return function(t){if(0!==e.files.length){t({type:Bm});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),a=e.files[0],i=se.urls("document","attachment",r,o,encodeURIComponent(a.name),n),s=function(e){t({type:Um,options:{error:e}})},c=new XMLHttpRequest;Gm=c,c.withCredentials=!0,c.upload&&(c.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:qm,options:{percent:n}})}}),c.onloadend=function(){Gm=void 0},c.onerror=function(){s("Error uploading file")},c.onload=function(){if(c.status>=200&&c.status<300)o=e.doc,t(Fm({doc:o,onLoaded:function(){t({type:Mm}),se.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}));else{var n="Error uploading file. ";try{if(c.responseText){var r=JSON.parse(c.responseText);r.error&&(n+="Reason: "+(r.reason||r.error))}}catch(e){}s(n)}var o},c.open("PUT",i),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",a.type||"application/octet-stream"),c.setRequestHeader("Accept","application/json"),c.send(a)}else t({type:Um,options:{error:"Please select a file to be uploaded."}})}}(t))}}}))(By);const Vy=qy;var Hy=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return ue.createElement("div",{style:{height:"20px",width:"11px",marginTop:"7px"},className:n,onClick:t})};Hy.propTypes={onClick:kt().func.isRequired};var Gy=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,a=e.onForwardClick;return ue.createElement("div",{className:"conflicting-revs-dropdown"},ue.createElement(Hy,{backward:!0,onClick:o}),ue.createElement("div",{style:{width:"345px",margin:"0 5px"}},ue.createElement(ni.ZP,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:r})),ue.createElement(Hy,{forward:!0,onClick:a}))};Gy.propTypes={options:kt().array.isRequired,selected:kt().string.isRequired,onRevisionClick:kt().func.isRequired,onBackwardClick:kt().func.isRequired,onForwardClick:kt().func.isRequired};const Fy=Gy;function Ky(e){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(e)}function zy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wy(e,t){return Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wy(e,t)}function Yy(e,t){if(t&&("object"===Ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xy(e)}function Xy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qy(e)}var Jy=pi.ConfirmButton,$y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qy(r);if(o){var n=Qy(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yy(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={checked:!1},t.close=t.close.bind(Xy(t)),t.onDeleteConflicts=t.onDeleteConflicts.bind(Xy(t)),t}return t=i,(n=[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return ue.createElement(on.u_,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},ue.createElement(on.u_.Header,{closeButton:!1},ue.createElement(on.u_.Title,null,"Solve Conflicts")),ue.createElement(on.u_.Body,null,ue.createElement("p",null,ue.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),ue.createElement(on.u_.Footer,null,ue.createElement("div",{style:{float:"left",marginTop:"10px"}},ue.createElement("label",null,ue.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),ue.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),ue.createElement(Jy,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}])&&zy(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Zy(e){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(e)}function eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tb(e,t){return tb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tb(e,t)}function nb(e,t){if(t&&("object"===Zy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rb(e)}function rb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ob(e)}$y.propTypes={onConfirm:kt().func.isRequired,toggleConfirmModal:kt().func.isRequired};var ab=pi.ConfirmButton,ib="deleteConflictsHideModal",sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tb(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ob(r);if(o){var n=ob(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nb(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={showModal:!1},t.selectAsWinner=t.selectAsWinner.bind(rb(t)),t.onSelectAsWinnerClickOurs=t.onSelectAsWinnerClick.bind(rb(t),t.props.ours),t.onSelectAsWinnerClickTheirs=t.onSelectAsWinnerClick.bind(rb(t),t.props.theirs),t.onRevisionClick=t.onRevisionClick.bind(rb(t)),t.onForwardClick=t.onForwardClick.bind(rb(t)),t.onBackwardClick=t.onBackwardClick.bind(rb(t)),t}return t=i,(n=[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&le.utils.localStorageSet(ib,!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===le.utils.localStorageGet(ib)?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return ue.createElement("div",{className:"revision-browser-controls"},ue.createElement($y,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),ue.createElement("table",{style:{margin:"10px 60px",width:"100%"}},ue.createElement("tbody",null,ue.createElement("tr",{style:{height:"60px"}},ue.createElement("td",{style:t},"Server-Selected Rev: "),ue.createElement("td",{style:t},ue.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},ue.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),ue.createElement("td",null,ue.createElement(ab,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),ue.createElement("tr",{style:{height:"60px"}},ue.createElement("td",{style:t},"Conflicting Revisions: "),ue.createElement("td",{style:t},ue.createElement(Fy,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),ue.createElement("td",null,ue.createElement(ab,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}])&&eb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function cb(e){return cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(e)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ub(e,t){return ub=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ub(e,t)}function db(e,t){if(t&&("object"===cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pb(e){return pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pb(e)}sb.propTypes={tree:kt().object.isRequired,ours:kt().object.isRequired,conflictingRevs:kt().array.isRequired},n(7542);var fb=$n().acequire("ace/ext/static_highlight");n(29236);var hb=$n().acequire("ace/mode/json").Mode;n(47349);var mb=$n().acequire("ace/theme/idle_fingers"),yb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ub(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pb(r);if(o){var n=pb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return db(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new hb,n=this.revLeftOurs,r=this.revRightTheirs,o=fb.render(e(this.props.ours),t,mb,0,!0);n.innerHTML=o.html;var a=fb.render(e(this.props.theirs),t,mb,0,!0);r.innerHTML=a.html}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?ue.createElement("div",{className:"revision-split-area"},ue.createElement("div",{"data-id":"ours",style:{width:"50%"}},ue.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),ue.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),ue.createElement("div",{"data-id":"theirs",style:{width:"50%"}},ue.createElement("div",{style:{marginBottom:"20px"}},r._rev),ue.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):ue.createElement("div",null)}}])&&lb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),bb=n(3202),gb=(n(58241),function(e){var t=e.ours,n=e.theirs;if(!t||!n)return ue.createElement("div",null);var r=bb.diff(t,n),o=bb.formatters.html.format(r,t);return ue.createElement("div",{className:"revision-diff-area"},ue.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))});gb.propTypes={ours:kt().object,theirs:kt().object,currentRev:kt().string};const _b=gb;function vb(e){return vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vb(e)}function Eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wb(e,t){return wb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wb(e,t)}function Sb(e,t){if(t&&("object"===vb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ob(e)}function Ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nb(e){return Nb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nb(e)}var Db=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wb(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nb(r);if(o){var n=Nb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sb(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).toggleDiffViewFalse=t.toggleDiffView.bind(Ob(t),!1),t.toggleDiffViewTrue=t.toggleDiffView.bind(Ob(t),!0),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,a=e.isDiffViewEnabled;return t.length||r?r&&o.length?ue.createElement("div",{className:"revision-wrapper scrollable"},ue.createElement(sb,this.props),ue.createElement("div",{className:"revision-view-controls"},ue.createElement(on.hE,{className:"two-sides-toggle-button"},ue.createElement(on.zx,{style:{width:"120px"},className:a?"active":"",onClick:this.toggleDiffViewTrue},ue.createElement("i",{className:"icon-columns"})," Diff"),ue.createElement(on.zx,{style:{width:"120px"},className:a?"":"active",onClick:this.toggleDiffViewFalse},ue.createElement("i",{className:"icon-file-text"})," Document"))),a?ue.createElement(_b,{ours:n,theirs:r}):ue.createElement(yb,{ours:n,theirs:r})):ue.createElement("div",{style:{textAlign:"center",color:"#fff"}},ue.createElement("h2",null,"No conflicts")):ue.createElement(Ro,null)}}])&&Eb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),Cb="REV_TREE_LOADED",Pb="REV_BROWSER_DIFF_DOCS_READY",Rb="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",kb="REV_BROWSER_SHOW_CONFIRM_MODAL";function Tb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tb(Object(n),!0).forEach((function(t){Ib(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ib(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ab={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null};var Lb=function(e){return e.doc},jb=function(e){return e.conflictDoc},Mb=function(e){return e.conflictingRevs},Ub=function(e){return e.databaseName},Bb=function(e){return e.ours},qb=function(e){return e.theirs},Vb=function(e){return e.showConfirmModal},Hb=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},Gb=function(e){return e.isDiffViewEnabled},Fb=function(e){return e.docToWin};const Kb=function(e,t){var n=t._rev;return e.getDoc(t._id,{revs:!0,open_revs:"all"}).then((function(e){var t={};return{paths:e.map((function(e){(e=e.ok)._deleted&&(t[e._rev]=!0);var n=e._revisions;return n.ids.map((function(e,t){return n.start-t+"-"+e}))})),deleted:t,winner:n}}))};function zb(e){return zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(e)}function Wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yb;function Xb(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var Qb=function(e,t,n,r,o){return{type:"REV_TREE_LOADED",options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},Jb=function(e,t){return{type:"REV_BROWSER_SHOW_CONFIRM_MODAL",options:{show:e,docToWin:t}}},$b=(0,Tt.$j)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:Lb(r),conflictDoc:jb(r),conflictingRevs:Mb(r),databaseName:Ub(r),ours:Bb(r),theirs:qb(r),showConfirmModal:Vb(r),dropdownData:Hb(r),isDiffViewEnabled:Gb(r),docToWin:Fb(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(Jb(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=se.urls("databaseBaseURL","apiurl",n);(Yb=function(e){try{new URL(e)}catch(t){throw new Error("Invalid database URL: ".concat(e))}return{getDoc:function(t,n){return function(e,t,n){if(!t)return Promise.reject(new Error("Invalid document ID"));var r="";n&&"object"===zb(n)&&(r="?"+le.utils.queryParams(n));var o="";if(t.startsWith("_design/")){var a=t.substring(8);o="_design/"+encodeURIComponent(a)}else o=encodeURIComponent(t);var i="".concat(e,"/").concat(o).concat(r);return w(i).then((function(e){if(e.error){var t=new Error(e.error);throw t.reason=e.reason,t.error=e.error,t}return e}))}(e,t,n)}}}(t)).getDoc(r).then((function(e){return Promise.all([Promise.resolve(e),Kb(Yb,e)])})).then((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=r[0],a=r[1],i=Xb(a.paths,a.winner,Object.keys(a.deleted)),s=i[0];if(!s)return e(Qb(a,o,i,null,n));Yb.getDoc(o._id,{rev:s}).then((function(t){e(Qb(a,o,i,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){Yb.getDoc(e._id,{rev:t}).then((function(t){n(function(e,t){return{type:"REV_BROWSER_DIFF_DOCS_READY",options:{theirs:t,ours:e}}}(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var a,i,s,c;e((a=t.databaseName,i=n,s=o.paths,c=r,function(e){var t=Xb(s,c,[]),n=function(e,t){return{docs:t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}))}}(i,t);O(se.urls("bulk_docs","server",a,""),n).then((function(t){if(t.error)return se.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});se.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(Jb(!1,null)),se.navigate(se.urls("allDocs","app",a,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",options:{enableDiff:e}}}(t))}}}))(Db);const Zb=$b;var eg=se.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new Es.Model({id:this.databaseName}),this.doc=new ht.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=se.urls("allDocs","app",se.url.encode(this.database.safeID())),r=se.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return ue.createElement(tn,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:ue.createElement(Zb,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r=le.getParams(n),o=[{name:e,link:se.urls("allDocs","app",se.url.encode(e))},{name:t||"New Document"}];if(this.database=new Es.Model({id:e}),t)this.doc=new ht.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var a=r?r.partitionKey:void 0;this.doc=new ht.NewDoc(null,{database:this.database,partitionKey:a})}Pt.fetchSelectedDatabaseInfo(e),Wm({doc:this.doc,database:this.database});var i=void 0,s=se.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return s.length>0&&(i=s[s.length-1]),ue.createElement(tn,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:r.partitionKey,component:ue.createElement(Vy,{database:this.database,isNewDoc:!t,previousUrl:i})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}});const tg={DocEditorRouteObject:eg};var ng=qs.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new Es.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),Uc.dispatchClearIndex(),Uc.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Pt.fetchSelectedDatabaseInfo(e);var o=new Gs("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});Us(o);var a=t?encodeURIComponent(t):"",i=se.urls("view","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),s=se.urls("view","apiurl",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),c=se.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return ue.createElement(Sm,{docURL:c,endpoint:s,dbName:this.database.id,dropDownLinks:l,database:this.database,fetchUrl:i,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=se.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));se.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=se.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));se.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),Uc.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),Pt.fetchSelectedDatabaseInfo(e);var a=new Gs(""),i=this.getCrumbs(this.database);return ue.createElement(Nm,{showIncludeAllDocs:!0,docURL:se.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:a,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){Uc.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Pt.fetchSelectedDatabaseInfo(e);var o=new Gs("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});Us(o);var a=se.constants.DOC_URLS.GENERAL,i=se.urls("view","apiurl",e,n,r),s=this.getCrumbs(this.database);return ue.createElement(Nm,{showIncludeAllDocs:!0,docURL:a,endpoint:i,dbName:this.database.id,dropDownLinks:s,database:this.database,selectedNavItem:o,partitionKey:t})}});const rg=ng;function og(e){return og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(e)}function ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ig(e,t){return ig=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ig(e,t)}function sg(e,t){if(t&&("object"===og(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cg(e){return cg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cg(e)}var lg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ig(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cg(r);if(o){var n=cg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sg(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return[n," ",n>1?"minutes":"minute",", ",t=Math.floor(t-60*n)," ",t>1?"seconds":"second"].join("")}},{key:"getWarning",value:function(e){if(e){var t=e.split("\n").map((function(e,t){return ue.createElement(ue.Fragment,{key:t},e,ue.createElement("br",null))}));return ue.createElement("span",null,t)}}},{key:"warningPopupComponent",value:function(e){if(e)return ue.createElement("div",{className:"warning"},ue.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("number"==typeof t){var o=0!==t||n?"true":"false";return ue.createElement("div",{"data-status":o},e+": ",ue.createElement("span",{className:"value"},t.toLocaleString()," ",r))}return null}},{key:"executionStatsPopupComponent",value:function(e){return e?ue.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",Math.round(e.execution_time_ms),!1,"ms")):null}},{key:"popup",value:function(e,t){return ue.createElement(on.J2,{id:"popover-execution-stats",title:"Execution Statistics"},ue.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,r=this.getWarning(n),o=null;r&&(o=ue.createElement("i",{className:"fonticon-attention-circled"}));var a=null;t?a=ue.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):r&&(a=ue.createElement("span",{className:"execution-stats-component"},"Warning"));var i=this.popup(t,r);return ue.createElement(on.Ox,{trigger:["hover","focus","click"],placement:"right",overlay:i},ue.createElement("span",{className:"execution-stats"},o,a))}}],n&&ag(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function ug(e){return ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(e)}function dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(n),!0).forEach((function(t){fg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mg(e,t){return mg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mg(e,t)}function yg(e,t){if(t&&("object"===ug(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bg(e){return bg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bg(e)}lg.propTypes={executionStats:kt().object,warning:kt().string};var gg=pi.PaddedBorderedBox,_g=pi.CodeEditorPanel,vg=le.helpers.getDocUrl,Eg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mg(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bg(r);if(o){var n=bg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yg(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults();var t=this.codeEditor.codeEditor.editor;t.commands.byName.runQuery||t.commands.addCommand({name:"runQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return ue.createElement("div",{className:"mango-editor-wrapper"},ue.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},ue.createElement("div",{className:"padded-box"},ue.createElement(ni.ZP,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),ue.createElement(gg,null,ue.createElement(_g,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:vg("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),ue.createElement("div",{className:"padded-box"},ue.createElement("div",{className:"control-group"},ue.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),ue.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),ue.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),ue.createElement("div",null,ue.createElement(lg,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?ue.createElement("div",{className:"mango-editor-wrapper"},ue.createElement(pi.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(se.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+se.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);se.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:pg(pg({},this.props.fetchParams),{},{skip:0})}))}}],n&&hg(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Eg.propTypes={description:kt().string.isRequired,editorTitle:kt().string.isRequired,queryFindCode:kt().string.isRequired,queryFindCodeChanged:kt().bool,databaseName:kt().string.isRequired,partitionKey:kt().string,runExplainQuery:kt().func.isRequired,runQuery:kt().func.isRequired,manageIndexes:kt().func.isRequired,loadQueryHistory:kt().func.isRequired,clearResults:kt().func.isRequired};const wg={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"};function Sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Og(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sg(Object(n),!0).forEach((function(t){Ng(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ng(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dg=function(e,t){var n=le.utils.queryString(t),r=se.urls("mango","index-server",le.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),w(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:po,layout:uo}}))},Cg=null,Pg=function(e,t,n,r){var o=t?encodeURIComponent(t):"",a=se.urls("mango","query-server",encodeURIComponent(e),o),i=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),Og(Og({},e),{},{limit:n,skip:e.skip?t.skip+e.skip:t.skip})}(n,r);return O(a,i,{raw:!0})},Rg=function(e,t,n,r){return function(e){return null===Cg?new se.Promise((function(t){Pg(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){Cg=200==e.status,t(Cg)}))})):Promise.resolve(Cg)}(e).then((function(o){return o&&(n.execution_stats=!0),Pg(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:fo,executionStats:e.execution_stats,warning:e.warning}}))}))};const kg={loadQueryHistory:function(e){return{type:wg.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:wg.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:wg.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:wg.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:wg.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:wg.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:wg.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return se.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=se.urls("mango","index-server",le.utils.safeURLName(e));return O(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){var t="#"+se.urls("mango","query-app",le.utils.safeURLName(n),"");e(Vp((function(e){return Dg(n,e)}),o,{})),se.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})})).catch((function(e){se.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=se.urls("mango","explain-server",encodeURIComponent(e),r);return O(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){se.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}}};var Tg=function(e){var t=e.additionalIndexes;if(!t)return[];var n=se.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},xg=(0,Tt.$j)((function(e,t){var n,r,o=e.mangoQuery,a=e.indexResults;return{databaseName:t.databaseName,queryFindCode:Jp(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:Tg(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:a.fetchParams,executionStats:a.executionStats,warning:a.warning,partitionKey:t.partitionKey}}),(function(e){return{loadQueryHistory:function(t){e(kg.loadQueryHistory(t))},runExplainQuery:function(t){e(kg.runExplainQuery(t))},runQuery:function(t){e(kg.hideQueryExplain()),e(kg.newQueryFindCode(t)),e(Vp((function(e){return Rg(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(jp())},manageIndexes:function(){e(kg.hideQueryExplain())}}}))(Eg);const Ig=xg;function Ag(e){return Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(e)}function Lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lg(Object(n),!0).forEach((function(t){Mg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bg(e,t){return Bg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bg(e,t)}function qg(e,t){if(t&&("object"===Ag(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vg(e)}function Vg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hg(e)}var Gg=pi.PaddedBorderedBox,Fg=pi.CodeEditorPanel,Kg=pi.ConfirmButton,zg=pi.LoadLines,Wg=le.helpers.getDocUrl,Yg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bg(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hg(r);if(o){var n=Hg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qg(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={partitionedSelected:!0},t.onTemplateSelected=t.onTemplateSelected.bind(Vg(t)),t.onTogglePartitioned=t.onTogglePartitioned.bind(Vg(t)),t.saveIndex=t.saveIndex.bind(Vg(t)),t}return t=i,n=[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:jg(jg({},this.props.fetchParams),{},{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?ue.createElement("label",null,ue.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+se.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return ue.createElement("div",{className:"mango-editor-wrapper"},ue.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},ue.createElement("div",{className:"padded-box"},ue.createElement(ni.ZP,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),ue.createElement(Gg,null,ue.createElement(Fg,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:Wg("MANGO_INDEX"),defaultCode:this.props.queryIndexCode}),this.partitionedCheckobx()),ue.createElement("div",{className:"padded-box"},ue.createElement("div",{className:"control-group"},ue.createElement(Kg,{text:"Create index",id:"create-index-btn",showIcon:!1}),ue.createElement("a",{className:"edit-link",href:n},"edit query")))))}},{key:"render",value:function(){return this.props.isLoading?ue.createElement(zg,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){se.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}],n&&Ug(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);Yg.propTypes={isLoading:kt().bool.isRequired,databaseName:kt().string.isRequired,isDbPartitioned:kt().bool.isRequired,saveIndex:kt().func.isRequired,queryIndexCode:kt().string.isRequired,partitionKey:kt().string,loadIndexTemplates:kt().func.isRequired,clearResults:kt().func.isRequired,loadIndexList:kt().func.isRequired},Yg.defaultProps={isLoading:!0,isDbPartitioned:!1};var Xg=(0,Tt.$j)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:Jp(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(kg.saveIndex(t))},loadIndexList:function(n){e(Vp((function(e){return Dg(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(jp())},loadIndexTemplates:function(){e(kg.loadIndexTemplates())}}}))(Yg);const Qg=Xg;function Jg(e){return Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(e)}function $g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e_(e,t){return e_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e_(e,t)}function t_(e,t){if(t&&("object"===Jg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n_(e)}var r_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e_(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=n_(r);if(o){var n=n_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return t_(this,e)});function i(){return $g(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return ue.createElement("div",null,ue.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}])&&Zg(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);r_.propTypes={explainPlan:kt().object.isRequired};const o_={MangoIndexEditorContainer:Qg,MangoQueryEditorContainer:Ig,ExplainPage:r_};function a_(e){return a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(e)}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s_(e,t){return s_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s_(e,t)}function c_(e,t){if(t&&("object"===a_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l_(e){return l_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l_(e)}var u_=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,a=e.partitionKey,i=e.onPartitionKeySelected,s=e.onGlobalModeSelected,c=e.globalMode,l=ue.createElement(lm,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),u=null;return o&&(u=ue.createElement(vm,{databaseName:r,partitionKey:a,onPartitionKeySelected:i,onGlobalModeSelected:s,globalMode:c})),ue.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},u),ue.createElement("div",{id:"right-header",className:"flex-body"}),l,ue.createElement("div",{id:"notification-center-btn"},ue.createElement(Ht,null)))},d_=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return ue.createElement("div",{id:"footer"},ue.createElement(sm,{databaseName:t,fetchUrl:n,queryDocs:r}))},p_=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,a=e.partitionKey,i=e.showPartitionKeySelector,s=e.onPartitionKeySelected,c=e.onGlobalModeSelected,l=e.globalMode;return ue.createElement("div",{className:"header-wrapper flex-layout flex-row"},ue.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},ue.createElement(Kt,{crumbs:t})),ue.createElement(u_,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:i,partitionKey:a,onPartitionKeySelected:s,onGlobalModeSelected:c,globalMode:l}))};p_.defaultProps={crumbs:[]};var f_=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,a=e.fetchUrl,i=e.queryDocs,s=e.docType,c=e.partitionKey,l=t?ue.createElement(o_.MangoIndexEditorContainer,{description:le.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:c}):ue.createElement(o_.MangoQueryEditorContainer,{description:le.i18n.en_US["mango-descripton"],editorTitle:le.i18n.en_US["mango-title-editor"],additionalIndexesText:le.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:c}),u=ue.createElement(zh,{fetchUrl:a,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:i,docType:s,partitionKey:c}),d=ue.createElement(d_,{databaseName:o,fetchUrl:a,queryDocs:i});return r&&(u=ue.createElement(o_.ExplainPage,{explainPlan:r}),d=null),ue.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},ue.createElement("div",{id:"left-content",className:"flex-body"},l),ue.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},ue.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},u),d))},h_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s_(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l_(r);if(o){var n=l_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c_(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,a=e.designDocs,i=e.fetchUrl,s=e.databaseName,c=e.queryFindCode,l=e.partitionKey,u=e.onPartitionKeySelected,d=e.onGlobalModeSelected,p=e.globalMode,f=this.props.endpoint;if(this.props.explainPlan){var h=l?encodeURIComponent(l):"";f=se.urls("mango","explain-apiurl",encodeURIComponent(t),h)}var m=function(e){return Rg(s,l,c,e)},y=fo;return n&&(m=function(e){return Dg(s,e)},y=po),ue.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},ue.createElement(p_,{docURL:r,endpoint:f,crumbs:o,databaseName:s,partitionKey:l,showPartitionKeySelector:!n,onPartitionKeySelected:u,onGlobalModeSelected:d,globalMode:p}),ue.createElement(f_,{edit:n,designDocs:a,explainPlan:this.props.explainPlan,databaseName:s,fetchUrl:i,queryDocs:m,docType:y,partitionKey:l}))}}],n&&i_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),m_=(0,Tt.$j)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(h_),y_=se.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new yt.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=se.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",a="/"+encodeURIComponent(this.databaseName)+o+"/_find",i=[{name:e,link:r},{name:le.i18n.en_US["mango-title-editor"]}],s=se.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return ue.createElement(m_,{database:e,crumbs:i,docURL:se.constants.DOC_URLS.MANGO_SEARCH,endpoint:s,edit:!1,databaseName:this.databaseName,fetchUrl:a,partitionKey:t,onPartitionKeySelected:function(t){var n=se.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));se.navigate("#/"+n)},onGlobalModeSelected:function(){var t=se.urls("mango","query-app",encodeURIComponent(e));se.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new pt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=se.urls("allDocs","app",encodeURIComponent(this.databaseName),r),a=se.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),i=[{name:e,link:o},{name:le.i18n.en_US["mango-indexeditor-title"]}];return Pt.fetchSelectedDatabaseInfo(e),ue.createElement(m_,{showIncludeAllDocs:!1,crumbs:i,docURL:se.constants.DOC_URLS.MANGO_INDEX,endpoint:a,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}});const b_={MangoIndexEditorAndQueryEditor:y_};pt.RouteObjects=[tg.DocEditorRouteObject,Cm,rg,b_.MangoIndexEditorAndQueryEditor];const g_=pt;function __(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?__(Object(n),!0).forEach((function(t){E_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):__(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w_={isLoading:!0,showLoadError:!1,viewIndex:void 0};const S_={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function O_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O_(Object(n),!0).forEach((function(t){D_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C_={selector:{_id:{$gt:null}}},P_=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:Jp(t),className:"mango-select-entry"}},R_=function(){return[P_(C_)]},k_=function(){return S_.INDEX_TEMPLATES.map((function(e){var t=P_(e.code);return t.label=e.label||t.label,t}))},T_=function(){var e=se.getExtensions("mango:indexTemplates")[0];return e?e.filter((function(e){return!!e.code})).map((function(e){var t=P_(e.code);return t.label=e.label||t.label,t})):k_()},x_={queryFindCode:C_,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:R_(),historyKey:"default",queryIndexTemplates:k_()},I_=function(e){var t=e+"_queryhistory",n=le.utils.localStorageGet(t);return n||((n=se.getExtensions("mango:queryHistory")[0])?n.filter((function(e){return!!e.code})).map((function(e){var t=P_(e.code);return t.label=e.label||t.label,t})):R_())},A_=function(e,t,n){var r=e.historyKey,o=e.history.slice(),a=P_(t);a.label=n||a.label;var i=o.findIndex((function(e){return e.value===a.value}));return i>-1&&o.splice(i,1),o.unshift(a),o.length>5&&o.splice(5,1),le.utils.localStorageSet(r,o),o},L_=function(e,t,n){var r=e.queryIndexTemplates.slice(),o=P_(t);o.label=n||o.label,r.find((function(e){return e.value===o.value}))||r.push(o)};function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j_(Object(n),!0).forEach((function(t){U_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B_={selectorVisible:!1};function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q_(Object(n),!0).forEach((function(t){H_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G_={doc:null,isLoading:!0,isSaving:!1,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0};function F_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(n),!0).forEach((function(t){z_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W_={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function Y_(e,t,n){var r=K_(K_({},e),{},{lastSequenceNum:t,isLoaded:!0}),o=0===r.changes.length;r.changes.forEach((function(e){e.isNew=!1}));var a=n.map((function(e){var t=or.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!o}}));return r.changes=a.concat(r.changes),J_(r),r}function X_(e,t){var n=e.filters.slice();n.push(t);var r=K_(K_({},e),{},{filters:n});return J_(r),r}function Q_(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=K_(K_({},e),{},{filters:n});return J_(o),o}function J_(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}function $_(e){return e||(e=""),e}function Z_(e){return e?"/_partition/".concat(e):""}se.addReducers({indexResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uf,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Cp:var n=sf(sf({},e.resultsStyle),t.resultsStyle);return df(n),sf(sf({},e),{},{resultsStyle:n});case Sp:return sf(sf({},uf),{},{noResultsWarning:e.noResultsWarning,selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:xp()+1,skip:0},pagination:of({},uf.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:of({},uf.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:e.resultsStyle});case mp:return sf(sf({},e),{},{isLoading:!0});case Np:return of({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case Dp:return of({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case Ep:return sf(sf({},e),{},{selectedDocs:t.selectedDocs});case hp:var r=e.selectedLayout;return t.docType===fo&&e.selectedLayout===lo&&(r=co),sf(sf({},e),{},{docs:t.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:of({},e.fetchParams,t.params),pagination:of({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:r,executionStats:t.executionStats,warning:t.warning});case yp:return sf(sf({},e),{},{selectedLayout:t.layout});case bp:return sf(sf({},e),{},{tableView:of({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case wp:return sf(sf({},e),{},{tableView:of({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case gp:return le.utils.localStorageSet("fauxton:perpageredux",t.perPage),sf(sf({},e),{},{pagination:of({},uf.pagination,{perPage:t.perPage})});case _p:return sf(sf({},e),{},{pagination:of({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case vp:return sf(sf({},e),{},{pagination:of({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case Op:return t.options.includeDocs&&t.options.reduce||t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),sf(sf({},e),{},{queryOptionsPanel:of({},e.queryOptionsPanel,t.options)});default:return e}},mangoQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x_,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case wg.MANGO_SET_DB:return N_(N_({},e),{},{database:n.database,historyKey:n.database?n.database.id:"default"});case wg.MANGO_LOAD_QUERY_HISTORY:var r=I_(n.databaseName);return N_(N_({},e),{},{history:r,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(r[0].value)});case wg.MANGO_NEW_QUERY_FIND_CODE:return N_(N_({},e),{},{queryFindCode:n.queryCode,history:A_(e,n.queryCode)});case wg.MANGO_RESET:return N_(N_({},e),{},{getLoadingIndexes:n.isLoading});case wg.MANGO_LOAD_INDEX_TEMPLATES:var o=T_();return N_(N_({},e),{},{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case wg.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return N_(N_({},e),{},{queryIndexCode:n.code,queryIndexTemplates:L_(e,n.code,n.label)});case wg.MANGO_SHOW_EXPLAIN_RESULTS:return N_(N_({},e),{},{explainPlan:n.explainPlan});case wg.MANGO_HIDE_EXPLAIN_RESULTS:return N_(N_({},e),{},{explainPlan:!1});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:su,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case ws:return uu(e,n);case Ss:return cu(e,n);case Os:return lu(e,t.designDoc,t.indexGroup);case Ns:return au(au({},e),{},{loading:!0});case Ds:return au(au({},e),{},{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:ue.createElement("div",null,"Are you sure you want to delete the ",ue.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case Cs:return au(au({},e),{},{deleteIndexModalVisible:!1});case Ps:return au(au({},e),{},{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case Rs:return au(au({},e),{},{cloneIndexModalVisible:!1});case ks:return au(au({},e),{},{cloneIndexModalSelectedDesignDoc:n.value});case Ts:return au(au({},e),{},{cloneIndexModalNewDesignDocName:n.value});case xs:return au(au({},e),{},{cloneIndexModalNewDesignDocPartitioned:n.value});case Is:return au(au({},e),{},{cloneIndexModalNewIndexName:n.value});case As:return au(au({},e),{},{designDocs:n.designDocs,designDocList:du(n.designDocs),loading:!1});default:return e}},revisionBrowser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ab,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case Cb:var o=r.tree,a=r.doc,i=r.conflictDoc,s=r.conflictingRevs,c=r.databaseName;return xb(xb({},e),{},{tree:o,doc:a,conflictDoc:i,conflictingRevs:s,databaseName:c,theirs:i,ours:a});case Pb:return xb(xb({},e),{},{theirs:r.theirs});case Rb:return xb(xb({},e),{},{isDiffViewEnabled:r.enableDiff});case kb:return xb(xb({},e),{},{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bm:return M_(M_({},e),{},{selectorVisible:!0});case gm:return M_(M_({},e),{},{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G_,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Pm:return V_({},G_);case Rm:var o=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),V_(V_({},e),{},{isLoading:!1,doc:n.doc,docConflictCount:o});case km:return V_(V_({},e),{},{cloneDocModalVisible:!0});case Tm:return V_(V_({},e),{},{cloneDocModalVisible:!1});case xm:return V_(V_({},e),{},{deleteDocModalVisible:!0});case Im:return V_(V_({},e),{},{deleteDocModalVisible:!1});case Am:return V_(V_({},e),{},{uploadModalVisible:!0});case Lm:return V_(V_({},e),{},{uploadModalVisible:!1});case Mm:return V_(V_({},e),{},{numFilesUploaded:e.numFilesUploaded+1});case Um:return V_(V_({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case jm:return V_(V_({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case Bm:return V_(V_({},e),{},{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case qm:return V_(V_({},e),{},{uploadPercentage:n.percent});case Vm:return V_(V_({},e),{},{isSaving:!0});case Hm:return V_(V_({},e),{},{isSaving:!1});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qu:return e.lastSequenceNum!==t.seqNum?Y_(e,t.seqNum,t.changes):e;case Ju:return X_(e,t.filter);case $u:return Q_(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w_,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Pd.DESIGN_FETCHING:return v_(v_({},e),{},{isLoading:!0});case Pd.DESIGN_FETCHING_FAILED:return v_(v_({},e),{},{isLoading:!1,showLoadError:!0});case Pd.DESIGN_DOC_MONITOR:return v_(v_({},e),{},{isLoading:!1,showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});case Pd.DESIGN_DOC_REFRESH:return v_(v_({},e),{},{showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zc,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case _c:return qc({},zc);case vc:case Ec:return Wc(e,n);case Pc:return qc(qc({},e),{},{viewName:t.name});case wc:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r=Gc),qc(qc({},e),{},{view:qc(qc({},e.view),{},{reduce:r})});case Nc:return qc(qc({},e),{},{designDocId:n.value});case Sc:case Oc:return e;case Rc:return qc(qc({},e),{},{designDocId:t.designDoc._id});case kc:return qc(qc({},e),{},{view:qc(qc({},e.view),{},{map:t.code})});case Tc:return qc(qc({},e),{},{view:qc(qc({},e.view),{},{reduce:t.code})});case Dc:return qc(qc({},e),{},{newDesignDocName:n.value});case Cc:return qc(qc({},e),{},{newDesignDocPartitioned:n.value});default:return e}}}),se.registerUrls("allDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/_all_docs"+$_(t))},app:function(e,t,n){return"database/"+e+Z_(t)+"/_all_docs"+$_(n)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_all_docs"+$_(t))}}),se.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+$_(n)},apiurl:function(e,t,n){return R.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+$_(n))},server:function(e,t,n){return R.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+$_(n))}}),se.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),R.getServerUrl("/"+e+"/_all_docs"+$_(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+$_(t)},apiurl:function(e,t){return e=encodeURIComponent(e),R.getApiUrl("/"+e+"/_all_docs"+$_(t))}}),se.registerUrls("bulk_docs",{server:function(e,t){return R.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+$_(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+$_(t)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_bulk_docs"+$_(t))}}),se.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+encodeURIComponent(t)+"/conflicts"}}),se.registerUrls("designDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+Z_(t)+"/_design/"+le.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return R.getApiUrl("/"+e+"/"+t+"/_info")}}),se.registerUrls("view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+Z_(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+Z_(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+Z_(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+Z_(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),se.registerUrls("partitioned_view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),se.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),R.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),R.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?R.getApiUrl("/"+e+"/"+t):R.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),se.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+Z_(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+Z_(t)+"/new_view/"+n}}),se.registerUrls("base",{server:function(e){return R.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),se.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),R.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+Z_(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+Z_(t)+"/_index"+n},"index-server-bulk-delete":function(e){return R.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),R.getServerUrl("/"+e+Z_(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+Z_(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+Z_(t)+"/_find"+n},"explain-server":function(e,t){return R.getServerUrl("/"+e+Z_(t)+"/_explain")},"explain-apiurl":function(e,t){return R.getApiUrl("/"+e+Z_(t)+"/_explain")}});const ev=g_,tv="EDIT_CORS",nv="CORS_SET_IS_LOADING",rv="CORS_SHOW_DELETE_DOMAIN_MODAL",ov="CORS_HIDE_DELETE_DOMAIN_MODAL";var av=function(e,t,n,r){if(!t)throw new Error("node not set");return N(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},iv=function(){return{type:nv,isLoading:!1}},sv=function(e){return{type:tv,options:e,isLoading:!1}},cv=function(){return{type:ov}},lv=function(e){return"Reason: "+(e&&e.message||"n/a")},uv=function(e){return _.isEmpty(e)?"":e.join(",")},dv={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=w(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=w(e+"/httpd").then((function(e){if(e.error)throw new Error(e.reason);return e}));se.Promise.join(r,o,(function(e,r){var o=sv({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){se.addNotification({msg:"Could not load CORS settings.  "+lv(e),type:"error"})}))}},showLoadingBars:function(){return{type:nv,isLoading:!0}},hideLoadingBars:iv,showDomainDeleteConfirmation:function(e){return{type:rv,domainToDelete:e}},hideDomainDeleteConfirmation:cv,loadCORSOptions:sv,sanitizeOrigins:uv,saveCors:function(e,t){return function(n){var r,o,a,i=[];return i.push(function(e,t,n){if(!t)throw new Error("node not set");return N(e+"/httpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(i.push((r=e,o=t.node,a=uv(t.origins),av(r,o,"origins",a))),i.push(function(e,t){return av(e,t,"credentials","true")}(e,t.node)),i.push(function(e,t){return av(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),i.push(function(e,t){return av(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),se.Promise.all(i).then((function(){se.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(sv(t))})).catch((function(e){se.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+lv(e),type:"error",clear:!0}),n(cv()),n(iv())}))}},overrideFetchAndLoadCORSOptions:function(e){dv.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){dv.saveCors=e}};const pv=dv;var fv=function(e){return"Reason: "+(e&&e.message||"n/a")};pv.overrideFetchAndLoadCORSOptions((function(){return function(e){fetch("/_api/v2/user/config/cors",{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"GET"}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.code+") "+e.error);return e})).then((function(t){var n=t.enable_cors,r=t.origins,o=pv.loadCORSOptions({origins:r,corsEnabled:n});e(o)})).catch((function(e){se.addNotification({msg:"Could not load CORS settings.  "+fv(e),type:"error"})}))}})),pv.overrideSaveCors((function(e,t){var n=t.origins,r=t.corsEnabled;return function(e){var t;(t={origins:n,enable_cors:r,allow_credentials:!0},fetch("/_api/v2/user/config/cors",{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.code+") "+e.error);return e}))).then((function(){se.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),e(pv.loadCORSOptions({corsEnabled:r,origins:n}))})).catch((function(t){se.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+fv(t),type:"error",clear:!0}),e(pv.hideDomainDeleteConfirmation()),e(pv.hideLoadingBars())}))}}));const hv=pv;function mv(e){return mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(e)}function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bv(e,t){return bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bv(e,t)}function gv(e,t){if(t&&("object"===mv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_v(e)}var vv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bv(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_v(r);if(o){var n=_v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gv(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?ue.createElement("div",null,ue.createElement("p",null,ue.createElement("strong",null," Origin Domains ")," "),ue.createElement("p",null,"Databases will accept requests from these domains: "),ue.createElement("label",{className:"radio"},ue.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),ue.createElement("label",{className:"radio"},ue.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}])&&yv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);vv.propTypes={corsEnabled:kt().bool,isAllOrigins:kt().bool,originChange:kt().func.isRequired};var Ev=function(e){return!!wv(e)||(se.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},wv=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function Sv(e){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(e)}function Ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nv(e,t){return Nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nv(e,t)}function Dv(e,t){if(t&&("object"===Sv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cv(e){return Cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cv(e)}var Pv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cv(r);if(o){var n=Cv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Dv(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={origin:""},t}return t=i,n=[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!Ev(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?ue.createElement("div",{id:"origin-domains-container"},ue.createElement("div",{className:"origin-domains"},ue.createElement("div",{className:"input-append"},ue.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),ue.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},ue.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}],n&&Ov(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Rv(e){return Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(e)}function kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tv(e,t){return Tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tv(e,t)}function xv(e,t){if(t&&("object"===Rv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Iv(e)}Pv.propTypes={isVisible:kt().bool.isRequired,addOrigin:kt().func.isRequired};var Av=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tv(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Iv(r);if(o){var n=Iv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xv(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={edit:!1,updatedOrigin:t.props.origin},t}return t=i,(n=[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),Ev(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?ue.createElement("div",{className:"input-append edit-domain-section"},ue.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),ue.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):ue.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return ue.createElement("tr",null,ue.createElement("td",null,e),ue.createElement("td",{width:"30"},ue.createElement("span",null,ue.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),ue.createElement("td",{width:"30"},ue.createElement("span",null,ue.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}])&&kv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Lv(e){return Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(e)}function jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mv(e,t){return Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mv(e,t)}function Uv(e,t){if(t&&("object"===Lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bv(e)}Av.propTypes={origin:kt().string.isRequired,updateOrigin:kt().func.isRequired,deleteOrigin:kt().func.isRequired};var qv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mv(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bv(r);if(o){var n=Bv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Uv(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return ue.createElement(Av,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return ue.createElement("table",{id:"origin-domain-table",className:"table table-striped"},ue.createElement("tbody",null,r))}}])&&jv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Vv(e){return Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(e)}function Hv(e){return function(e){if(Array.isArray(e))return Gv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kv(e,t){return Kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kv(e,t)}function zv(e,t){if(t&&("object"===Vv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wv(e)}qv.propTypes={isVisible:kt().bool.isRequired,origins:kt().arrayOf(kt().string),updateOrigin:kt().func.isRequired,deleteOrigin:kt().func.isRequired};var Yv=pi.LoadLines,Xv=Li.ConfirmationModal,Qv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wv(r);if(o){var n=Wv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zv(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(le.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,a=this.props.origins.indexOf(o);if(-1!==a){var i=[].concat(Hv(n.slice(0,a)),Hv(n.slice(a+1)));this.props.saveCORS({corsEnabled:t,origins:i,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=ue.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},ue.createElement(vv,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),ue.createElement(qv,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),ue.createElement(Pv,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=ue.createElement(Yv,null));var n=ue.createElement("span",null,"Are you sure you want to delete ",ue.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return ue.createElement("div",{className:"cors-page flex-body"},ue.createElement("header",{id:"cors-header"},ue.createElement("p",null,le.i18n.en_US["cors-notice"])),ue.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},ue.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",ue.createElement("br",null),ue.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),ue.createElement(Xv,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}])&&Fv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const Jv={CORSContainer:(0,Tt.$j)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(pv.showLoadingBars()),e(pv.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(pv.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(pv.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(pv.hideDomainDeleteConfirmation())}}}))(Qv),CORSScreen:Qv,OriginInput:Pv,Origins:vv,OriginTable:qv,OriginRow:Av};function $v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$v(Object(n),!0).forEach((function(t){eE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tE={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""},nE=se.addon();nE.initialize=function(){},se.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tv:var n=t.options;return Zv(Zv({},e),{},{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==s().indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case rv:return Zv(Zv({},e),{},{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case ov:return Zv(Zv({},e),{},{deleteDomainModalVisible:!1,domainToDelete:""});case nv:return Zv(Zv({},e),{},{isLoading:t.isLoading});default:return e}}});const rE=nE;var oE={};_.extend(oE,hv,rE),oE.Components=Jv;const aE=oE,iE="USER_AUTHENTICATED",sE="ACCOUNTS_SELECT_PAGE",cE="ACCOUNTS_SET_FIRST_NAME",lE="ACCOUNTS_SET_LAST_NAME",uE="ACCOUNTS_SET_COMPANY",dE="ACCOUNTS_SET_EMAIL",pE="ACCOUNTS_SAVING_START",fE="ACCOUNTS_SAVING_END",hE="ACCOUNTS_SET_CURRENT_PWD",mE="ACCOUNTS_SET_NEW_PWD",yE="ACCOUNTS_SET_NEW_PWD_CONFIRMATION",bE="ACCOUNTS_CLEAR_PWD_INFO",gE="VIRTUAL_HOSTS_LOADED",_E="ACCOUNTS_SET_NEW_HOSTNAME",vE="ACCOUNTS_SET_NEW_HOSTNAME_PATH",EE="ACCOUNTS_VIRTUAL_HOST_ADDED",wE="ACCOUNTS_SHOW_DELETE_VIRTUAL_HOST_MODAL",SE="ACCOUNTS_HIDE_DELETE_VIRTUAL_HOST_MODAL",OE="ACCOUNTS_VIRTUAL_HOST_DELETED",NE="ACCOUNTS_USAGE_RETURNED",DE="ACCOUNTS_USAGE_FETCHING",CE="ACCOUNTS_USAGE_ERROR",PE=function(e){return/^billing\.tiered\./.test(e)||/^billing\.ibmcloud\./.test(e)},RE=function(e,t){return void 0!==e&&void 0!==t},kE=function(e){var t;return e&&e.month&&e.year?(e.month=+e.month-1,t=new Date(e.year,e.month)):t=new Date,t.getFullYear()<2015?5:50},TE=function(e,t){return function(e){return e.forEach((function(e){e.values.sort((function(e,t){return h()(e.date).isAfter(t.date)?1:h()(e.date).isSame(t.date)?0:-1}))})),e}(function(e,t,n){var r=n.reduce((function(e,t){return e[t]={name:t,values:[]},e}),{}),o=e.reduce((function(e,r){var o=t[r],a=h().utc(r).clone().startOf("day").format();return n.forEach((function(t){var n={value:parseInt(o[t],10),date:a,section:t};e[t].values.push(n)})),e}),r);return(0,i.values)(o)}((n=e,r=[],Object.keys(n).filter((function(e){var t=h().utc(e).get("date");return!(0,i.includes)(r,t)&&(r.push(t),!0)}))),e,t));var n,r};var xE=new(se.Store.extend({initialize:function(){this.reset()},reset:function(){this._currentPage=null,this._userAuthenticated=!1,this._isSaving=!1,this._username=null,this._firstName=null,this._lastName=null,this._email=null,this._company=null,this._accountCRN=null,this._currentPwd="",this._newPwd="",this._newPwdConfirmation="",this._virtualHosts=[],this._virtualHostsLoaded=!1,this._virtualHostsLoadError=!1,this._newHostname="",this._newHostnamePath="",this._deleteVirtualHostModalVisible=!1,this._virtualHostnameToDelete="",this._location="",this._dedicatedHwCRN="",this._domains=[],this._usageDataLoadError=!1,this._prices=null,this._dataVol=null,this._requests=null,this._bill=null,this._lightRequestData=[],this._heavyRequestData=[],this._dataVolumeData=[],this._isInPast=!1,this._freeLimit=0},isUserAuthenticated:function(){return this._userAuthenticated},isSaving:function(){return this._isSaving},setIsSaving:function(e){this._isSaving=e},isActivityLoaded:function(){return!!this.isUserAuthenticated()&&null!==this._prices&&this._heavyRequestData.length>0&&null!==this._bill},setUser:function(e){this._userAuthenticated=!0,this._username=e.username,this._firstName=e.firstName,this._lastName=e.lastName,this._email=e.email,this._company=e.company,e.domains?this._domains=e.domains:this._domains=[],e.partners&&e.partners.bluemix?(this._accountCRN=e.partners.bluemix.crn,this._legacyCredsEnabled=!e.partners.bluemix.iam_enabled||!0===e.partners.bluemix.legacy_credentials,e.partners.bluemix.dedicated_hardware_crn&&(this._dedicatedHwCRN=e.partners.bluemix.dedicated_hardware_crn)):(this._accountCRN=void 0,this._legacyCredsEnabled=!1);var t=e.cluster?e.cluster:"";this._location=function(e){return"bluemix-uk-test1"===e?"London":"ibm004"===e||"cldt-accountstaging001"===e?"Dallas":e.startsWith("bm-cc-dedicated")||e.startsWith("bm-cc-profility")?"Dedicated Hardware Environment":e.startsWith("bm-cc-")||e.startsWith("cl")?-1!==e.indexOf("-bj")?"China":-1!==e.indexOf("-dal")||-1!==e.indexOf("-us-south")?"Dallas":-1!==e.indexOf("-us-east")?"Washington DC":-1!==e.indexOf("-eu-de")||-1!==e.indexOf("-fra")?"Frankfurt":-1!==e.indexOf("-eu-gb")||-1!==e.indexOf("-uk")?"London":-1!==e.indexOf("-jp-tok")?"Tokyo":-1!==e.indexOf("-syd")||-1!==e.indexOf("-au-syd")?"Sydney":-1!==e.indexOf("-kr-seo")?"Seoul":-1!==e.indexOf("-in-che")?"Chennai":"Unknown":"Unknown"}(t)},getUsername:function(){return this._username},getFirstName:function(){return this._firstName},getLastName:function(){return this._lastName},getCompany:function(){return this._company},getEmail:function(){return this._email},getDomains:function(){return this._domains},getAccountCRN:function(){return this._accountCRN},getLocation:function(){return this._location},getDedicatedHwCRN:function(){return this._dedicatedHwCRN},isLegacyCredsEnabled:function(){return this._legacyCredsEnabled},setPage:function(e){this._currentPage=e},getPage:function(){return this._currentPage},setFirstName:function(e){this._firstName=e},setLastName:function(e){this._lastName=e},setCompany:function(e){this._company=e},setEmail:function(e){this._email=e},getCurrentPwd:function(){return this._currentPwd},setCurrentPwd:function(e){this._currentPwd=e},getNewPwd:function(){return this._newPwd},setNewPwd:function(e){this._newPwd=e},getNewPwdConfirmation:function(){return this._newPwdConfirmation},setNewPwdConfirmation:function(e){this._newPwdConfirmation=e},clearPwdInfo:function(){this._currentPwd="",this._newPwd="",this._newPwdConfirmation=""},setVirtualHostInfo:function(e){this._virtualHostsLoaded=!0,this._virtualHostsLoadError=!e.success,e.success&&(this._virtualHosts=e.virtualHosts)},virtualHostsLoaded:function(){return this._virtualHostsLoaded},virtualHostsLoadError:function(){return this._virtualHostsLoadError},getVirtualHosts:function(){return this._virtualHosts},getNewHostname:function(){return this._newHostname},setNewHostname:function(e){this._newHostname=e},getNewHostnamePath:function(){return this._newHostnamePath},setNewHostnamePath:function(e){this._newHostnamePath=e},addVirtualHost:function(e){this._virtualHosts.push(e)},deleteVirtualHostModalVisible:function(){return this._deleteVirtualHostModalVisible},setDeleteVirtualHostModalVisibility:function(e){this._deleteVirtualHostModalVisible=e},getVirtualHostnameToDelete:function(){return this._virtualHostnameToDelete},deleteVirtualHost:function(e){this._virtualHosts=this._virtualHosts.filter((function(t){return t.host!==e}))},fetchingAccountUsageData:function(){return this._fetchingAccountUsageData},setAccountUsageData:function(e){this._isInPast=e.isInPast,this._freeLimit=e.freeLimit,this._fetchingAccountUsageData=!1,this._prices=e.prices,this._dataVol=e.dataVol,this._dataVolumeData=TE(e.dataVol.data_vol,["dbs","views","search","geo"]),this._bill=e.bill,e.requests&&(this._heavyRequestData=TE(e.requests.requests,["PUT","POST","COPY","DELETE"]),this._lightRequestData=TE(e.requests.requests,["GET","HEAD"]))},usageInPast:function(){return this._isInPast},usageFreeLimit:function(){return this._freeLimit},getLightRequestData:function(){return this._lightRequestData},getHeavyRequestData:function(){return this._heavyRequestData},getDataVolumeData:function(){return this._dataVolumeData},getDataVolume:function(){return this._dataVol},hasUsageDataLoadError:function(){return this._usageDataLoadError},getBill:function(){return this._bill},hasNoUsage:function(){return null===this._bill||"0"==this._bill.http_heavy.count&&"0"==this._bill.http_light.count&&"0"==this._bill.data_volume.count},dispatch:function(e){switch(e.type){case iE:this.setUser(e.options);break;case sE:this.setPage(e.options.page);break;case cE:this.setFirstName(e.options.firstName);break;case lE:this.setLastName(e.options.lastName);break;case uE:this.setCompany(e.options.company);break;case dE:this.setEmail(e.options.email);break;case pE:this.setIsSaving(!0);break;case fE:this.setIsSaving(!1);break;case hE:this.setCurrentPwd(e.options.password);break;case mE:this.setNewPwd(e.options.password);break;case yE:this.setNewPwdConfirmation(e.options.password);break;case bE:this.clearPwdInfo();break;case gE:this.setVirtualHostInfo(e.options);break;case _E:this.setNewHostname(e.options.hostname);break;case vE:this.setNewHostnamePath(e.options.path);break;case EE:this.addVirtualHost(e.options.virtualHost),this.setIsSaving(!1);break;case wE:this.setDeleteVirtualHostModalVisibility(!0),this._virtualHostnameToDelete=e.options.hostname;break;case SE:this.setDeleteVirtualHostModalVisibility(!1);break;case OE:this.deleteVirtualHost(e.options.hostname),this.setDeleteVirtualHostModalVisibility(!1);break;case NE:this.setAccountUsageData(e.options);break;case DE:this._fetchingAccountUsageData=!0;break;case CE:this._usageDataLoadError=!0;break;default:return}this.triggerChange()}}));xE.dispatchToken=se.dispatcher.register(xE.dispatch.bind(xE));const IE={accountStore:xE},AE="CCM_SHOW_PLAN_EXCEEDED_MODAL",LE="CCM_HIDE_PLAN_EXCEEDED_MODAL",jE="CCM_CHANGE_PLAN",ME="CCM_SAVE_NEW_PLAN_SUCCESS",UE="CCM_SAVE_NEW_PLAN_ERROR",BE="CCM_SAVE_NEW_PLAN_STARTED",qE="CCM_SHOW_PLAN_SAVE_CONFIRM_MODAL",VE="CCM_HIDE_PLAN_SAVE_CONFIRM_MODAL",HE="CCM_SHOW_REDIRECT_TO_BLUEMIX_MODAL",GE="CCM_HIDE_REDIRECT_TO_BLUEMIX_MODAL",FE="CCM_SET_LAST_PLAN_CHANGE_DATE",KE={PAGE_ANNOUNCEMENTS:"PAGE_ANNOUNCEMENTS",PAGE_PROFILE:"PAGE_PROFILE",PAGE_CORS:"PAGE_CORS",PAGE_PASSWORD:"PAGE_PASSWORD",PAGE_VIRTUAL_HOSTS:"PAGE_VIRTUAL_HOSTS",PAGE_USAGE:"PAGE_USAGE",PAGE_PLAN:"PAGE_PLAN",ANNOUNCEMENT_VERSION:14,MIN_PWD_SIZE:16,MIN_PWD_STRENGTH:4,PLANS:{"billing.tiered.standard.1":{reads:20,writes:10,queries:5,priceHour:0},"billing.tiered.standard.2":{reads:100,writes:50,queries:5,priceHour:.105},"billing.tiered.standard.3":{reads:1e3,writes:500,queries:50,priceHour:1.05},"billing.tiered.standard.4":{reads:5e3,writes:2500,queries:250,priceHour:5.25}},NEW_BLUEMIX_PLANS:{"billing.tiered.bluemix.lite":{reads:20,writes:10,queries:5,priceHour:0},"billing.tiered.bluemix.standard":{reads:100,writes:50,queries:5,priceHour:.105},"billing.ibmcloud.transactionengine.standard":{reads:50,writes:50,queries:0,priceHour:.03}},CUSTOM_PLANS:{"billing.tiered.bluemix.custom.hertz.20L10W3Q":{reads:2e4,writes:1e4,queries:3e3,priceHour:35},"billing.tiered.bluemix.custom.hertz.20L10W6Q":{reads:2e4,writes:1e4,queries:6e3,priceHour:56},"billing.tiered.bluemix.standard.fixed.200":{reads:2e4,writes:1e4,queries:1e3,priceHour:21}},USAGE_TABS:{HEAVY:"USAGE_TABS_HEAVY",LIGHT:"USAGE_TABS_LIGHT",DATA_VOLUME:"USAGE_TABS_DATA_VOLUME"}};var zE=new(se.Store.extend({initialize:function(){this.reset()},reset:function(){this._userAuthenticated=!1,this._plan=null,this._lastPlanChangeDate=null,this._planExceededModalVisible=!1,this._ccmPlanUpdateInProgress=!1,this._isConfirmPlanModalVisible=!1,this._isRedirectToBluemixModalVisible=!1},getSidebarItems:function(){var e=[{icon:"icon-bullhorn",title:"Announcements",pageName:KE.PAGE_ANNOUNCEMENTS,link:"account/announcements"},{icon:"cloudant-CORS",title:"CORS",pageName:KE.PAGE_CORS,link:"account/cors"}],t=Object.keys(KE.PLANS).concat(Object.keys(KE.NEW_BLUEMIX_PLANS));return this._plan&&-1!==t.indexOf(this._plan.id)&&e.push({icon:"fonticon-wrench2",title:"Provisioning",pageName:KE.PAGE_PLAN,link:"account/plan"}),e},getPlan:function(){return this._plan},getLastPlanChangeDate:function(){return this._lastPlanChangeDate},isPlanExceededModalVisible:function(){return this._planExceededModalVisible},showPlanExceededModal:function(){this._planExceededModalVisible=!0},hidePlanExceededModal:function(){this._planExceededModalVisible=!1},getIsOnLitePlan:function(){return!!this._preSelectedPlan&&("billing.tiered.standard.1"===this._preSelectedPlan.id||"billing.tiered.bluemix.lite"===this._preSelectedPlan.id)},getIsNewBluemixPlan:function(){return!!this._preSelectedPlan&&-1!==Object.keys(KE.NEW_BLUEMIX_PLANS).indexOf(this._preSelectedPlan.id)},getIsCustomPlan:function(){return!!this._preSelectedPlan&&!(-1!==Object.keys(KE.NEW_BLUEMIX_PLANS).indexOf(this._preSelectedPlan.id)||-1!==Object.keys(KE.PLANS).indexOf(this._preSelectedPlan.id))},getIsCcmUpdateInProgress:function(){return this._ccmPlanUpdateInProgress},getPreSelectedPlan:function(){return this._preSelectedPlan},getIsConfirmPlanModalVisible:function(){return this._isConfirmPlanModalVisible},getIsRedirectToBluemixModalVisible:function(){return this._isRedirectToBluemixModalVisible},dispatch:function(e){switch(e.type){case iE:this._userAuthenticated=!0,this._plan={id:e.options.plan,multiple:e.options.plan_multiple},this._preSelectedPlan={id:e.options.plan,multiple:e.options.plan_multiple};break;case AE:this.showPlanExceededModal();break;case qE:this._isConfirmPlanModalVisible=!0;break;case LE:this.hidePlanExceededModal();break;case jE:this._plan=e.options.plan;break;case FE:this._lastPlanChangeDate=e.options.lastPlanChangeDate;break;case ME:this._ccmPlanUpdateInProgress=!1,this._isConfirmPlanModalVisible=!1,this._preSelectedPlan=this._plan,this._lastPlanChangeDate=new Date;break;case UE:this._ccmPlanUpdateInProgress=!1,this._isConfirmPlanModalVisible=!1;break;case VE:this._isConfirmPlanModalVisible=!1;break;case BE:this._ccmPlanUpdateInProgress=!0;break;case HE:this._isRedirectToBluemixModalVisible=!0;break;case GE:this._isRedirectToBluemixModalVisible=!1;break;default:return}this.triggerChange()}}));zE.dispatchToken=se.dispatcher.register(zE.dispatch.bind(zE));const WE={ccmStore:zE},YE={hideConfirmPlanSelectionModal:function(){se.dispatch({type:VE})},showConfirmPlanSelectionModal:function(){se.dispatch({type:qE})},hideRedirectToBluemixModal:function(){se.dispatch({type:GE})},showRedirectToBluemixModal:function(){se.dispatch({type:HE})},saveNewPlan:function(e){se.dispatch({type:BE}),N("/_api/v2/user/capacity/throughput",e).then((function(e){if(e.ok)return se.dispatch({type:ME}),void se.addNotification({msg:"Your plan has been updated.",type:"success",clear:!0});se.dispatch({type:UE});var t="";e.error&&(t=e.error),se.addNotification({msg:"There was an error updating your plan. ".concat(t),type:"error",clear:!0})}),(function(e){se.dispatch({type:UE});var t="";e.message&&(t=e.message),se.addNotification({msg:"There was an error updating your plan. "+t,type:"error",clear:!0})}))},changeCcmPlan:function(e){se.dispatch({type:jE,options:e})},showPlanExceededModal:function(){se.dispatch({type:AE})},hidePlanExceededModal:function(){se.dispatch({type:LE})},getLastPlanChangeDate:function(){w("/_api/v2/user/plan").then((function(e){if(!e.history)throw new Error(e.error?e.error:"");var t=null;if(e.history.length>0){var n=e.history[e.history.length-1][0];n.endsWith("Z")||(n+="Z"),t=new Date(n)}else t=new Date(0);se.dispatch({type:FE,options:{lastPlanChangeDate:t}})})).catch((function(e){se.addNotification({msg:"Plan history could not be loaded. ".concat(e.message),type:"error",clear:!0})}))}};var XE=function(e){if(!e)return"";var t=e+"";return(t=t.split("."))[1].length<2&&(t[1]=t[1]+"0"),t.join(".")},QE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,t),r=(Math.round(e*n)/n).toFixed(t);return Number(r).toLocaleString([],{minimumFractionDigits:t})},JE=function(){return ue.createElement("div",null,ue.createElement("div",{className:"c-accountplan__persecondheading"},ue.createElement("div",{className:"c-accountplan__persecondelement"},"Reads"),ue.createElement("div",{className:"c-accountplan__persecondelement"},"Writes"),ue.createElement("div",{className:"c-accountplan__persecondelement"},"Global Queries")))},$E=function(e){var t=e.l,n=e.w,r=e.q,o=e.selected,a=e.enabled,i=e.onChange,s=e.value,c=e.preselectedPlan,l="c-accountplan__selectplanelement";return l="".concat(l,a&&o?"--selected":a?"--deselected":"--disabled"),c&&(l="c-accountplan__selectplanelement--preselected"),ue.createElement("label",{className:"c-accountplan__selectplanelement "+l},ue.createElement("div",{className:"c-accountplan__selectplanelement__content"},ue.createElement("input",{style:{display:"none"},type:"radio",value:s,checked:o,onChange:i}),ue.createElement("div",{className:"c-accountplan__persecondelement c-accountplan__persecondelement--padded"},"".concat(t)),ue.createElement("div",{className:"c-accountplan__persecondelement c-accountplan__persecondelement--padded"},"".concat(n)),ue.createElement("div",{className:"c-accountplan__persecondelement c-accountplan__persecondelement--padded"},"".concat(r))))},ZE=function(e){var t=e.tooltip_content,n=ue.createElement(on.u,{id:"graveyard-tooltip"},t);return ue.createElement(on.Ox,{placement:"top",overlay:n},ue.createElement("i",{className:"icon icon-info-sign c-accountplan__plan-elem-info-sign"}))};function ew(e){return ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(e)}function tw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nw(e,t){return nw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nw(e,t)}function rw(e,t){if(t&&("object"===ew(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ow(e){return ow=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ow(e)}var aw=KE.PLANS,iw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nw(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ow(r);if(o){var n=ow(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rw(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).disabledClass=e.enabled?"":"c-accountplan--disabled",t.linkColorClass=e.enabled?"":"c-accountplanlink-disabled",t.litePlan=aw["billing.tiered.standard.1"],t}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"c-accountplan__liteplan flex-fill "+this.disabledClass},ue.createElement("h3",{className:"c-accountplan__heading"},"Lite Plan"),ue.createElement("div",null,"The Lite plan is free, and includes a single level of provisioned throughput capacity for ",ue.createElement("a",{className:this.linkColorClass,href:"#monitoring/usage"},"per-second operations")," and 1GB of data storage."),ue.createElement("div",{style:{clear:"both"}},ue.createElement("div",{className:"c-accountplan__planselector"},ue.createElement("form",null,ue.createElement(JE,null),ue.createElement($E,{onChange:function(){},preselectedPlan:this.props.enabled,enabled:this.enabled,selected:this.enabled,l:this.litePlan.reads,w:this.litePlan.writes,q:this.litePlan.queries}))),ue.createElement("div",{className:"c-accountplan__plan-price-wrapper"},ue.createElement("div",{className:"c-accountplan__persecondheading"},"Hourly"),ue.createElement("div",{title:"$"+XE(this.litePlan.priceHour),className:"c-accountplan__pricetag"},"$",QE(aw["billing.tiered.standard.1"].priceHour)))))}}])&&tw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sw(e){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(e)}function cw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lw(e,t){return lw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lw(e,t)}function uw(e,t){if(t&&("object"===sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dw(e){return dw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dw(e)}var pw=KE.PLANS,fw=Object.keys(pw).slice(1),hw=pi.ConfirmButton,mw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lw(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dw(r);if(o){var n=dw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return uw(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"enableConfirmModal",value:function(e){e.preventDefault(),YE.showConfirmPlanSelectionModal()}},{key:"disableConfirmModal",value:function(){YE.hideConfirmPlanSelectionModal()}},{key:"onPlanSelectChange",value:function(e){e.preventDefault(),this.props.onPlanSelectChange({id:e.target.value})}},{key:"onPlanSaveClick",value:function(e){e.preventDefault(),this.props.onPlanSaveClick()}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.preselectedPlan,r=e.selectedPlan,o=e.isCcmPlanUpdateInProgress,a=e.isConfirmPlanModalVisible,i=t?"c-accountplan--enabled":"c-accountplan--disabled",s=t?"":"c-accountplanlink-disabled",c=t?"c-accountplan-hover-item-icon--enabled":"c-accountplan-hover-item-icon--disabled",l=ue.createElement(on.u,{id:"tooltip"},"The displayed hourly values are rounded to the nearest cent.");return ue.createElement("div",{className:"c-accountplan__standardplan flex-fill "+i},ue.createElement("h3",{className:"c-accountplan__heading"},"Standard Plan"),ue.createElement("div",null,"The Standard plan allows selecting level of provisioned throughput capacity for your ",ue.createElement("a",{className:s,href:"#monitoring/usage"},"per-second operations"),", and charges $0.0014/GB/hour for data storage over 20 GB."),ue.createElement("div",{style:{clear:"both"}},ue.createElement("div",{className:"c-accountplan__planselector"},ue.createElement("form",null,ue.createElement(JE,null),ue.createElement($E,{onChange:this.onPlanSelectChange.bind(this),value:fw[0],enabled:t,preselectedPlan:n===fw[0],selected:r===fw[0],l:pw[fw[0]].reads,w:pw[fw[0]].writes,q:pw[fw[0]].queries}),ue.createElement($E,{onChange:this.onPlanSelectChange.bind(this),value:fw[1],enabled:t,preselectedPlan:n===fw[1],selected:r===fw[1],l:pw[fw[1]].reads,w:pw[fw[1]].writes,q:pw[fw[1]].queries}),ue.createElement($E,{onChange:this.onPlanSelectChange.bind(this),value:fw[2],enabled:t,preselectedPlan:n===fw[2],selected:r===fw[2],l:pw[fw[2]].reads,w:pw[fw[2]].writes,q:pw[fw[2]].queries}))),ue.createElement("div",{className:"c-accountplan__plan-price-wrapper"},ue.createElement("div",{className:"c-accountplan__persecondheading"},"Hourly",ue.createElement(on.Ox,{placement:"top",overlay:l},ue.createElement("div",{className:"c-accountplan-hover-item-wrapper"},ue.createElement("div",{className:"c-accountplan-hover-item "+c},ue.createElement("i",{className:"c-accountplan-hover-item-icon icon-asterisk"}))))),ue.createElement("div",{title:"$"+XE(pw[fw[0]].priceHour),className:"c-accountplan__pricetag"},"$",QE(pw[fw[0]].priceHour)),ue.createElement("div",{title:"$"+XE(pw[fw[1]].priceHour),className:"c-accountplan__pricetag"},"$",QE(pw[fw[1]].priceHour)),ue.createElement("div",{title:"$"+XE(pw[fw[2]].priceHour),className:"c-accountplan__pricetag"},"$",QE(pw[fw[2]].priceHour))),ue.createElement("br",null),t?ue.createElement("div",{className:"c-accountplan__savearea"},ue.createElement(hw,{buttonType:"btn-primary",showIcon:!1,onClick:this.enableConfirmModal.bind(this),disabled:o||n===r,text:"Change Capacity"})):null,t&&pw[n]?ue.createElement(gw,{currentCost:720*pw[n].priceHour,newCost:720*pw[r].priceHour}):null,t?ue.createElement(_w,null):null),ue.createElement(yw,{selectedPlan:pw[r],preselectedPlan:pw[n],onCancelClick:this.disableConfirmModal.bind(this),onPlanSaveClick:this.onPlanSaveClick.bind(this),isVisible:a,isCcmPlanUpdateInProgress:o}))}}])&&cw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),yw=function(e){var t=e.onPlanSaveClick,n=e.isVisible,r=e.onCancelClick,o=e.selectedPlan,a=void 0===o?{}:o,i=e.preselectedPlan,s=void 0===i?{}:i,c=e.isCcmPlanUpdateInProgress;return ue.createElement(on.u_,{dialogClassName:"",show:n,onHide:r},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Verify Capacity Change")),ue.createElement(on.u_.Body,null,ue.createElement("div",null,"You are changing your account’s capacity."),ue.createElement("br",null),ue.createElement("div",{className:"c-accountplan__modal-comparison"},ue.createElement("div",{className:"c-accountplan__modal-comparison__left"},"Your ",ue.createElement("b",null,"current")," capacity is:",ue.createElement(bw,{planDetails:s})),ue.createElement("div",{className:"c-accountplan__modal-comparison__right"},"Your ",ue.createElement("b",null,"new")," capacity will be:",ue.createElement(bw,{planDetails:a}))),ue.createElement("br",null),ue.createElement("div",null,"Provisioning changes can require up to 24 hours to complete.")),ue.createElement(on.u_.Footer,null,ue.createElement("a",{style:{marginRight:"20px"},onClick:r,"data-bypass":"true",className:""},"Cancel"),ue.createElement(hw,{onClick:t,disabled:c,text:c?"Processing...":"Change Capacity"})))},bw=function(e){var t=e.planDetails;return ue.createElement("div",null,ue.createElement("br",null),ue.createElement("ul",null,ue.createElement("li",null,t.reads," reads per second"),ue.createElement("li",null,t.writes," writes per second"),ue.createElement("li",null,t.queries," global queries per second")))},gw=function(e){var t=e.currentCost,n=e.newCost,r=n!==t,o="";return r&&(o="c-accountplan__calculatorcellcurrent--crossed-out"),ue.createElement("div",{className:"c-accountplan__costcalc"},"Monthly costs (excluding data):",ue.createElement("table",null,ue.createElement("tbody",null,ue.createElement("tr",null,ue.createElement("td",{className:"c-accountplan__calculatorcell c-accountplan__calculatorcellcurrent ".concat(o)},"$",QE(t)),ue.createElement("td",{className:"c-accountplan__calculatorcell c-accountplan__calculatorcellnew"},r?"$"+QE(n):null)))))};gw.propTypes={currentCost:kt().number};var _w=function(){return ue.createElement("div",{className:"c-accountplan__contact-us"},ue.createElement("b",null,"Need more throughput capacity?"),ue.createElement("br",null),"Contact us for provisioning plans.",ue.createElement("br",null),ue.createElement("br",null),ue.createElement(hw,{buttonType:"btn-primary",showIcon:!1,onClick:function(){se.navigate("#support")},text:"Contact Support"}))};function vw(e){return vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vw(e)}function Ew(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ww(e,t){return ww=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ww(e,t)}function Sw(e,t){if(t&&("object"===vw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ow(e)}var Nw=KE.NEW_BLUEMIX_PLANS["billing.tiered.bluemix.lite"],Dw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ww(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ow(r);if(o){var n=Ow(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sw(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",null,ue.createElement("div",{className:"c-accountplan__wrapper flex-fill ",style:{fontSize:"16px"}},ue.createElement("div",{className:"c-accountplan__plan-title"},"Lite plan capacity"),ue.createElement("div",{className:"c-accountplan__plan-details"},ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},Nw.reads.toLocaleString()),ue.createElement("br",null),"Reads",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},Nw.writes.toLocaleString()),ue.createElement("br",null),"Writes",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},Nw.queries.toLocaleString()),ue.createElement("br",null),"Global Queries",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},"1",ue.createElement("font",{style:{fontSize:"1rem",verticalAlign:"baseline"}},"GB")),ue.createElement("br",null),"Storage",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"limit")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--noborder c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value c-accountplan__plan-elem-value--total"},ue.createElement("span",{style:{fontWeight:"bold"}},"Free")),ue.createElement("br",null),"Cost",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per month")))))}}])&&Ew(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Cw(e){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(e)}function Pw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rw(e,t){return Rw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rw(e,t)}function kw(e,t){if(t&&("object"===Cw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tw(e)}function Tw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xw(e){return xw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xw(e)}n(56597);var Iw=pi.ConfirmButton,Aw=KE.NEW_BLUEMIX_PLANS["billing.tiered.bluemix.standard"],Lw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rw(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xw(r);if(o){var n=xw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kw(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onSliderChange=t.onSliderChange.bind(Tw(t)),t.onPlanUpdateClick=t.onPlanUpdateClick.bind(Tw(t)),t}return t=i,n=[{key:"onPlanUpdateClick",value:function(e){e.preventDefault(),this.props.onPlanUpdateClick()}},{key:"onSliderChange",value:function(e){this.props.onPlanCapacityChange({id:"billing.tiered.bluemix.standard",multiple:e})}},{key:"warningPlanRecentlyChanged",value:function(){var e=this.props.lastPlanChangeDate;if(e){var t=new Date(e.getTime()+36e5);return ue.createElement("div",{className:"c-accountplan__warning-updates-disabled"},ue.createElement("span",{className:"fonticon fonticon-info-circled"}),"Your capacity has changed recently. You can make changes again after ",t.toLocaleTimeString(),".")}return null}},{key:"render",value:function(){var e=this.props,t=e.preselectedPlan,n=e.selectedPlan,r=e.isCcmPlanUpdateInProgress,o=e.previewMode,a=e.bluemixDashboardUrl,i=e.lastPlanChangeDate,s=t.multiple>0?t.multiple:1,c=n.multiple>0?n.multiple:1,l=s+10,u=Date.now()-i>36e5,d="Update";s===c?d="Current Capacity":c>l&&(d="Limit exceeded");var p=ue.createElement(ZE,{tooltip_content:"Additional storage: $.0014/GB/hr or approximately $1/GB/month"}),f=ue.createElement("span",null,"Approximate monthly cost assuming 730 hours per month on average, billing is prorated hourly. See ",ue.createElement("a",{href:"https://cloud.ibm.com/estimator/review",target:"_blank",rel:"noopener noreferrer"},"IBM Cloud pricing calculator")," for localized currency.",ue.createElement("br",null),"https://cloud.ibm.com/estimator/review"),h=ue.createElement(ZE,{tooltip_content:f}),m=ue.createElement("span",null,"Billing is prorated hourly. See ",ue.createElement("a",{href:"https://cloud.ibm.com/estimator/review",target:"_blank",rel:"noopener noreferrer"},"IBM Cloud pricing calculator")," for localized currency.",ue.createElement("br",null),"https://cloud.ibm.com/estimator/review"),y=ue.createElement(ZE,{tooltip_content:m}),b={1:"Min",100:"Max"};1!=s&&(b[s]={label:"current",style:{top:-45}}),l<100&&!o&&(b[l]={label:"change limit",style:{top:-45}});var g=(c*Aw.reads).toLocaleString(),_=(c*Aw.writes).toLocaleString(),v=(c*Aw.queries).toLocaleString(),E=QE(c*Aw.priceHour,3),w=QE(c*Aw.priceHour*730),S=o?"Standard Plan Calculator":"Select your capacity",O=o?null:ue.createElement("div",{className:"c-accountplan__lite-plan-switch"},"Visit the IBM Cloud Dashboard to ",ue.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"switch to the Lite plan"),"."),N="c-accountplan__capacity-bt"+(o?" c-accountplan__capacity-bt--hidden":""),D="c-accountplan__capacity-slider"+(o?" c-accountplan__capacity-slider--wide":""),C="c-accountplan__plan-elem-value"+(o?"":" c-accountplan__plan-elem-value--hourly"),P=o?"12px":"16px",R=o||u?null:this.warningPlanRecentlyChanged(),k=o?null:ue.createElement(ue.Fragment,null,"Increases in capacity are limited to 10 units (1000 reads/sec, 500 writes/sec, 50 global queries/sec) per change and once per hour. Decreases in capacity are not limited in scope but are limited to once per hour.",ue.createElement("br",null));return ue.createElement("div",{className:"c-accountplan__wrapper flex-fill ",style:{fontSize:P}},ue.createElement("div",{className:"c-accountplan__plan-title"},S),ue.createElement("div",{className:"c-accountplan__plan-details"},ue.createElement("div",{className:"c-accountplan__plan-element"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},g),ue.createElement("br",null),"Reads",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},_),ue.createElement("br",null),"Writes",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},v),ue.createElement("br",null),"Global Queries",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},20,ue.createElement("font",{style:{fontSize:"1rem",verticalAlign:"baseline"}},"GB")),ue.createElement("br",null),"Storage",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"included"),p),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--last c-accountplan__plan-element--noborder"},ue.createElement("span",{className:C},ue.createElement("span",{style:{fontWeight:"bold"}},ue.createElement("font",{style:{fontSize:"0.5em",verticalAlign:"super"}},"$"),E,ue.createElement("span",{style:{fontSize:"0.35em"}}," /hour",y))),ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-value--monthly"},ue.createElement("span",{style:{fontWeight:"bold"}},ue.createElement("font",{style:{fontSize:"0.5em",verticalAlign:"super"}},"$"),w,ue.createElement("span",{style:{fontSize:"0.5em"}}," /month",h))))),ue.createElement("div",{className:"c-accountplan__capacity-changer"},ue.createElement("div",{className:D},ue.createElement(Ra.Z,{min:1,max:100,defaultValue:c,onChange:this.onSliderChange,marks:b,trackStyle:{backgroundColor:"#163960"},railStyle:{backgroundColor:"#CECECE"},dotStyle:{borderColor:"#CECECE"},handleStyle:{border:"1px solid #CECECE",backgroundColor:"white",height:24,width:12,marginLeft:-6,marginTop:-10,borderRadius:"8px",boxShadow:"0 2px 4px 0"}}),ue.createElement("br",null),"Throughput Capacity"),ue.createElement("div",{className:N},ue.createElement(Iw,{buttonType:"btn-primary",showIcon:!1,style:{width:160,fontSize:"1em"},onClick:this.onPlanUpdateClick,disabled:r||s===c||c>l||!u,text:d}))),R,ue.createElement("div",{className:"c-accountplan__support"},k,"Require more throughput capacity? ",ue.createElement("a",{href:"#support"},"Contact support"),"."),O)}}],n&&Pw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function jw(e){return jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jw(e)}function Mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uw(e,t){return Uw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Uw(e,t)}function Bw(e,t){if(t&&("object"===jw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qw(e)}Lw.propTypes={preselectedPlan:kt().object.isRequired,selectedPlan:kt().object.isRequired,onPlanUpdateClick:kt().func.isRequired,onPlanCapacityChange:kt().func.isRequired,isCcmPlanUpdateInProgress:kt().bool,isConfirmPlanModalVisible:kt().bool,isRedirectToBluemixModalVisible:kt().bool,previewMode:kt().bool,bluemixDashboardUrl:kt().string.isRequired};var Vw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uw(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qw(r);if(o){var n=qw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bw(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"render",value:function(){var e=this.props.plan,t=ue.createElement(ZE,{tooltip_content:"Additional storage: $.0014/GB/hr or approximately $1/GB/month"}),n=ue.createElement("span",null,"Approximate monthly cost, billing prorated hourly. See ",ue.createElement("a",{href:"https://cloud.ibm.com/estimator/review",target:"_blank",rel:"noopener noreferrer"},"IBM Cloud pricing calculator")," for localized currency.",ue.createElement("br",null),"https://cloud.ibm.com/estimator/review"),r=ue.createElement(ZE,{tooltip_content:n}),o=KE.CUSTOM_PLANS[e.id],a="N/A",i="N/A",s="N/A",c="N/A";return o&&(a=o.reads.toLocaleString(),i=o.writes.toLocaleString(),s=o.queries.toLocaleString(),c=QE(720*o.priceHour)),ue.createElement("div",null,ue.createElement("div",{className:"c-accountplan__wrapper flex-fill ",style:{fontSize:"16px"}},ue.createElement("div",{className:"c-accountplan__plan-title"},"Current capacity (custom)"),ue.createElement("div",{className:"c-accountplan__plan-details"},ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},a),ue.createElement("br",null),"Reads",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},i),ue.createElement("br",null),"Writes",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--grow"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},s),ue.createElement("br",null),"Global Queries",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per second")),ue.createElement("div",{className:"c-accountplan__plan-element"},ue.createElement("span",{className:"c-accountplan__plan-elem-value"},20,ue.createElement("font",{style:{fontSize:"1rem",verticalAlign:"baseline"}},"GB")),ue.createElement("br",null),"Storage",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"included"),t),ue.createElement("div",{className:"c-accountplan__plan-element c-accountplan__plan-element--last c-accountplan__plan-element--noborder"},ue.createElement("span",{className:"c-accountplan__plan-elem-value c-accountplan__plan-elem-value--total"},ue.createElement("span",{style:{fontWeight:"bold"}},ue.createElement("font",{style:{fontSize:"0.5em",verticalAlign:"super"}},"$"),c)),ue.createElement("br",null),"Cost",ue.createElement("br",null),ue.createElement("span",{className:"c-accountplan__plan-elem-unit"},"per month"),r)),ue.createElement("div",{className:"c-accountplan__support"},ue.createElement("a",{href:"#support"},"Contact support")," to change throughput capacity.")))}}])&&Mw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),Hw=pi.ConfirmButton,Gw=KE.NEW_BLUEMIX_PLANS["billing.tiered.bluemix.standard"],Fw=function(e){var t=e.onContinueClick,n=e.isVisible,r=e.onCancelClick,o=ue.createElement(on.u_.Body,null,ue.createElement("div",null,"Changes between Lite and Standard plans must be made via the IBM Cloud Dashboard."),ue.createElement("div",null,"You will be redirected to a new browser tab where you can complete your plan change."));return ue.createElement(Yw,{title:"Note",modalBody:o,confirmButtonLabel:"Continue",onConfirmClick:t,cancelButtonLabel:"Cancel",onCancelClick:r,isVisible:n})};Fw.propTypes={onContinueClick:kt().func.isRequired,onCancelClick:kt().func.isRequired,isVisible:kt().bool.isRequired};var Kw=function(e){var t=e.newCapacity,n=e.preselectedCapacity,r=e.onPlanSaveClick,o=e.onCancelClick,a=e.isVisible,i=e.isPlanUpdateInProgress,s=zw(n,t);return ue.createElement(Yw,{title:"Verify Capacity Change",modalBody:s,confirmButtonLabel:i?"Processing...":"Continue",onConfirmClick:r,cancelButtonLabel:"Cancel",onCancelClick:o,isVisible:a,isOperationInProgress:i})};Kw.propTypes={newCapacity:kt().number.isRequired,preselectedCapacity:kt().number.isRequired,onPlanSaveClick:kt().func.isRequired,onCancelClick:kt().func.isRequired,isVisible:kt().bool.isRequired,isPlanUpdateInProgress:kt().bool.isRequired};var zw=function(e,t){var n={reads:e*Gw.reads,writes:e*Gw.writes,queries:e*Gw.queries},r={reads:t*Gw.reads,writes:t*Gw.writes,queries:t*Gw.queries};return ue.createElement(on.u_.Body,null,ue.createElement("div",null,"You are changing your account’s capacity."),ue.createElement("br",null),ue.createElement("div",{className:"c-accountplan__modal-comparison"},ue.createElement("div",{className:"c-accountplan__modal-comparison__left"},"Your ",ue.createElement("b",null,"current")," capacity is:",ue.createElement(Ww,{planDetails:n})),ue.createElement("div",{className:"c-accountplan__modal-comparison__right"},"Your ",ue.createElement("b",null,"new")," capacity will be:",ue.createElement(Ww,{planDetails:r}))),ue.createElement("br",null),ue.createElement("div",null,"Provisioning changes can require up to 24 hours to complete."))},Ww=function(e){var t=e.planDetails;return ue.createElement("div",null,ue.createElement("br",null),ue.createElement("ul",null,ue.createElement("li",null,t.reads.toLocaleString()," reads per second"),ue.createElement("li",null,t.writes.toLocaleString()," writes per second"),ue.createElement("li",null,t.queries.toLocaleString()," global queries per second")))},Yw=function(e){var t=e.title,n=e.modalBody,r=e.confirmButtonLabel,o=e.onConfirmClick,a=e.cancelButtonLabel,i=e.onCancelClick,s=e.isVisible,c=e.isOperationInProgress;return ue.createElement(on.u_,{dialogClassName:"",show:s,onHide:i},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,t)),n,ue.createElement(on.u_.Footer,null,ue.createElement("a",{style:{marginRight:"20px"},onClick:i,"data-bypass":"true",className:""},a),ue.createElement(Hw,{onClick:o,disabled:c,text:r})))};function Xw(e){return Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xw(e)}function Qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jw(e,t){return Jw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jw(e,t)}function $w(e,t){if(t&&("object"===Xw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zw(e)}function Zw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eS(e)}var tS=pi.ConfirmButton,nS=WE.ccmStore,rS=IE.accountStore,oS=pi.LoadLines,aS="https://cloud.ibm.com/resources",iS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jw(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=eS(r);if(o){var n=eS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $w(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t.onPlanSelectChange=t.onPlanSelectChange.bind(Zw(t)),t.onPlanSaveClick=t.onPlanSaveClick.bind(Zw(t)),t.enableConfirmModal=t.enableConfirmModal.bind(Zw(t)),t.showRedirectToBluemixModal=t.showRedirectToBluemixModal.bind(Zw(t)),t.openBluemixDashboardInNewTab=t.openBluemixDashboardInNewTab.bind(Zw(t)),t.disableRedirectToBluemixModal=t.disableRedirectToBluemixModal.bind(Zw(t)),t.disableConfirmModal=t.disableConfirmModal.bind(Zw(t)),t}return t=i,n=[{key:"getStoreState",value:function(){return{isConfirmPlanModalVisible:nS.getIsConfirmPlanModalVisible(),isRedirectToBluemixModalVisible:nS.getIsRedirectToBluemixModalVisible(),isAuthenticated:rS.isUserAuthenticated(),accountCRN:rS.getAccountCRN(),selectedPlan:nS.getPlan(),isCcmPlanUpdateInProgress:nS.getIsCcmUpdateInProgress(),isOnLitePlan:nS.getIsOnLitePlan(),isNewBluemixPlan:nS.getIsNewBluemixPlan(),isCustomPlan:nS.getIsCustomPlan(),preselectedPlan:nS.getPreSelectedPlan(),lastPlanChangeDate:nS.getLastPlanChangeDate()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){nS.on("change",this.onChange,this),rS.on("change",this.onChange,this),YE.getLastPlanChangeDate()}},{key:"componentWillUnmount",value:function(){nS.off("change",this.onChange),rS.off("change",this.onChange)}},{key:"onPlanSelectChange",value:function(e){YE.changeCcmPlan({plan:e})}},{key:"onPlanSaveClick",value:function(){YE.saveNewPlan({blocks:this.state.selectedPlan.multiple})}},{key:"enableConfirmModal",value:function(){YE.showConfirmPlanSelectionModal()}},{key:"disableConfirmModal",value:function(){YE.hideConfirmPlanSelectionModal()}},{key:"showRedirectToBluemixModal",value:function(e){e.preventDefault(),YE.showRedirectToBluemixModal()}},{key:"disableRedirectToBluemixModal",value:function(){YE.hideRedirectToBluemixModal()}},{key:"openBluemixDashboardInNewTab",value:function(){YE.hideRedirectToBluemixModal(),window.open(aS,"_blank")}},{key:"getLiteAndStandardPlanBoxes",value:function(){var e=this.state,t=e.selectedPlan,n=e.isOnLitePlan,r=e.isCcmPlanUpdateInProgress,o=e.preselectedPlan,a=e.isConfirmPlanModalVisible,i="https://cloud.ibm.com/resources";return n?[ue.createElement(iw,{key:"1",enabled:!0}),ue.createElement("div",{key:"2",style:{position:"relative"},className:"flex-fill"},ue.createElement("div",{className:"c-accountplan__disabledcover"}),ue.createElement(mw,{preselectedPlan:o.id,isConfirmPlanModalVisible:a,isCcmPlanUpdateInProgress:r,onPlanSelectChange:this.onPlanSelectChange,onPlanSaveClick:this.onPlanSaveClick,selectedPlan:t.id,enabled:!1}),ue.createElement("div",{className:"c-accountplan__changeinbluemix"},"Changes between ",ue.createElement("b",null,"Lite")," and ",ue.createElement("b",null,"Standard")," plans must be made in the ",ue.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"IBM Cloud Dashboard.")))]:[ue.createElement(mw,{key:"1",preselectedPlan:o.id,isConfirmPlanModalVisible:a,isCcmPlanUpdateInProgress:r,onPlanSelectChange:this.onPlanSelectChange,onPlanSaveClick:this.onPlanSaveClick,selectedPlan:t.id,enabled:!n}),ue.createElement("div",{key:"2",style:{position:"relative"},className:"flex-fill"},ue.createElement("div",{className:"c-accountplan__disabledcover"}),ue.createElement(iw,{enabled:n}),ue.createElement("div",{className:"c-accountplan__changeinbluemix"},"Changes between ",ue.createElement("b",null,"Lite")," and ",ue.createElement("b",null,"Standard")," plans must be made in the ",ue.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"IBM Cloud Dashboard.")))]}},{key:"getNewBluemixPlanBoxes",value:function(){var e=this.state,t=e.selectedPlan,n=e.isOnLitePlan,r=e.isCcmPlanUpdateInProgress,o=e.preselectedPlan,a=e.isConfirmPlanModalVisible,i=e.isRedirectToBluemixModalVisible,s=e.lastPlanChangeDate,c=t.multiple>0?t.multiple:1,l=o.multiple>0?o.multiple:1,u=ue.createElement("div",{className:"c-accountplan-header__upgrade-bt"},ue.createElement(tS,{buttonType:"btn-primary",showIcon:!1,style:{width:225,fontSize:"0.8em"},onClick:this.showRedirectToBluemixModal,text:"Upgrade to Standard"}));return ue.createElement("div",null,ue.createElement("div",{className:"c-accountplan-header"},ue.createElement("div",null,"You are subscribed to the ",ue.createElement("span",{className:"c-accountplan-header-plan"},n?"Lite":"Standard"," Plan")),n?u:null),n?ue.createElement(Dw,null):null,ue.createElement("div",{style:{margin:n?20:0}}," "),ue.createElement(Lw,{preselectedPlan:o,selectedPlan:t,lastPlanChangeDate:s,isCcmPlanUpdateInProgress:r,onPlanCapacityChange:this.onPlanSelectChange,onPlanUpdateClick:this.enableConfirmModal,previewMode:n,bluemixDashboardUrl:aS}),ue.createElement(Kw,{newCapacity:c,preselectedCapacity:l,onCancelClick:this.disableConfirmModal,onPlanSaveClick:this.onPlanSaveClick,isVisible:a,isPlanUpdateInProgress:r}),ue.createElement(Fw,{onContinueClick:this.openBluemixDashboardInNewTab,onCancelClick:this.disableRedirectToBluemixModal,isVisible:i}))}},{key:"getCustomPlanBoxes",value:function(){var e=this.state.preselectedPlan;return ue.createElement("div",null,ue.createElement("div",{className:"c-accountplan-header"},ue.createElement("div",null,"You are subscribed to the ",ue.createElement("span",{className:"c-accountplan-header-plan"},"Standard Plan"))),ue.createElement(Vw,{plan:e}))}},{key:"getGoToResourceDetails",value:function(){var e=this.state.accountCRN;if(!e)return null;var t=e.startsWith("crn:v1:bluemix")?"cloud.ibm.com":"test.cloud.ibm.com",n=encodeURIComponent(e),r="https://".concat(t,"/services/cloudantnosqldb/").concat(n);return ue.createElement("div",null,ue.createElement("p",null,"Visit the ",ue.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},"IBM Cloud Console")," to manage your plan and modify your reserved throughput capacity."),ue.createElement("p",null,"For more details, read the documentation on ",ue.createElement("a",{href:"",target:"_blank",rel:"noopener noreferrer"},"viewing and changing capacity"),"."))}},{key:"render",value:function(){var e=this.state,t=e.accountCRN,n=e.isNewBluemixPlan,r=e.isCustomPlan,o=e.lastPlanChangeDate;if(!this.state.isAuthenticated)return ue.createElement(oS,null);if(n&&!o)return ue.createElement(oS,null);var a;return a=t?this.getGoToResourceDetails():r?this.getCustomPlanBoxes():n?this.getNewBluemixPlanBoxes():this.getLiteAndStandardPlanBoxes(),ue.createElement("div",{className:"c-accountplan"},ue.createElement("div",{className:"flex flex-layout"},a))}}],n&&Qw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sS(e){return sS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sS(e)}function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lS(e,t){return lS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lS(e,t)}function uS(e,t){if(t&&("object"===sS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dS(e){return dS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dS(e)}var pS=WE.ccmStore,fS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lS(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dS(r);if(o){var n=dS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return uS(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t}return t=i,(n=[{key:"getStoreState",value:function(){return{isVisible:pS.isPlanExceededModalVisible(),isOnLitePlan:pS.getIsOnLitePlan()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){pS.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){pS.off("change",this.onChange)}},{key:"viewPlan",value:function(){YE.hidePlanExceededModal(),se.navigate("account/plan")}},{key:"close",value:function(e){e.preventDefault(),YE.hidePlanExceededModal()}},{key:"getMessageForStandard",value:function(){return ue.createElement("p",null,"Your account is currently very busy, and at the maximum number of operations allowed for your service plan.  Please retry this operation in a few moments, or ",ue.createElement("a",{onClick:YE.hidePlanExceededModal,href:"#account/plans"},"increase to the next service tier"),". You can view operation activity on the ",ue.createElement("a",{onClick:YE.hidePlanExceededModal,href:"#monitoring/usage"},"Activity page"),".")}},{key:"getMessageForLite",value:function(){return ue.createElement("p",null,"Your account is currently very busy, and at the maximum number of operations allowed for your service plan. Please retry this operation in a few moments, or change to a standard plan. You can view operation activity on the ",ue.createElement("a",{onClick:YE.hidePlanExceededModal,href:"#monitoring/usage"},"Activity page"),".")}},{key:"render",value:function(){var e=this.state,t=e.isOnLitePlan,n=e.isVisible;return ue.createElement(on.u_,{dialogClassName:"",show:n,onHide:YE.hidePlanExceededModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Database Operations at Capacity")),ue.createElement(on.u_.Body,null,t?this.getMessageForLite():this.getMessageForStandard()),ue.createElement(on.u_.Footer,null,ue.createElement("button",{onClick:this.viewPlan.bind(this),"data-bypass":"true",className:"btn btn-secondary"},"View Plan")))}}])&&cS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const hS={round:QE,AccountPlan:iS,AccountPlanExceededModal:fS};le.versionAPI="2",le.hostDash=R.getServerUrl("/_api/v"+le.versionAPI);var mS={dashformat:function(e){return e?h()(e).format("MM-DD-YYYY"):""}};mS.User=se.Model.extend({url:function(){return le.hostDash+"/user"},newUser:function(){var e=new Date;return mS.dashformat(e)==mS.dashformat(this.getJoinDate())},noHistory:function(){var e=new Date;return this.underThirty()&&e.getMonth()==this.getJoinDate().getMonth()},getTrialEnd:function(){var e=new Date(this.get("date"));return e.setDate(e.getDate()+30),e},underThirty:function(){return new Date<this.getTrialEnd()},isNew:function(){return!1},adminClusters:function(){return this.get("admin_clusters")},isGlobalAdmin:function(){return!0===this.get("admin")},adminCluster:function(){var e=this.adminClusters();return _.isEmpty(e)?null:e[0]},backupsEnabled:function(){var e=this.get("features");return!_.isUndefined(e)&&_.has(e,"backup")},isInChina:function(){var e=this.get("features");return!_.isUndefined(e)&&_.has(e,"restricted_china")&&_.has(e.restricted_china,"in_china")&&!0===e.restricted_china.in_china},clusterType:function(){return this.get("cluster_type")},warehousingEnabled:function(){if("multitenant"===this.clusterType())return!0;var e=this.get("features");return!_.isUndefined(e)&&_.has(e,"dashdb")&&e.dashdb.enterprise},hasGold:function(){return"gold"===this.get("support_level")},lastPasswordChange:function(){return this.get("last_pw_change")},signupDate:function(){return this.get("date")},partnersCheck:function(){return this.get("partners")},getJoinDate:function(){return new Date(this.get("date"))},getPartnerBluemix:function(){var e=this.get("partners");return e&&e.bluemix?e.bluemix:{}},isIBMCloudAccount:function(){var e=this.get("partners");return!(!e||!e.bluemix)},isMeteredPlan:function(){return"metered"===this.get("plan")},isIAMEnabled:function(){var e=this.getPartnerBluemix();return!(!e||!0!==e.iam_enabled)}}),mS.Bill=se.Model.extend({url:function(){return this.get("month")&&this.get("year")?le.hostDash+"/bill/"+this.get("year")+"/"+this.get("month"):le.hostDash+"/bill"},range:function(){return this.get("month")&&this.get("year")?new Date(this.get("year")+"/"+this.get("month")):new Date}}),mS.Requests=se.Model.extend({url:function(){return this.get("month")&&this.get("year")?le.hostDash+"/usage/requests/"+this.get("year")+"/"+this.get("month"):le.hostDash+"/usage/requests"},range:function(){return this.get("month")&&this.get("year")?new Date(this.get("year")+"/"+this.get("month")):new Date},keys:function(e){var t={GET:0,HEAD:1,PUT:2,POST:4,DELETE:5,COPY:6},n=_.partial(_.includes,["GET","HEAD"]),r=n;return"light"!=e&&(r=function(e){return!n(e)}),_.chain(this.get("requests")).values().map(_.keys).flatten().uniq().filter(r).sortBy((function(e){return t[e]})).value()}}),mS.DataVolume=se.Model.extend({url:function(){return this.get("month")&&this.get("year")?le.hostDash+"/usage/data_volume/"+this.get("year")+"/"+this.get("month"):le.hostDash+"/usage/data_volume"},range:function(){return this.get("month")&&this.get("year")?new Date(this.get("year")+"/"+this.get("month")):new Date},keys:function(){var e={dbs:0,search:1,views:2};return _.chain(this.get("data_vol")).values().map(_.keys).flatten().uniq().sortBy((function(t){return e[t]})).value()}}),mS.Prices=se.Model.extend({url:le.hostDash+"/prices"}),mS.getIcon=function(){return"fonticon-profile"},mS.hasNewAnnouncement=function(){return parseInt(le.utils.localStorageGet("announceBadge"),10)!==KE.ANNOUNCEMENT_VERSION};const yS=mS;function bS(){return bS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bS.apply(this,arguments)}const gS={initAccountActivity:function(e,t,n){var r=new yS.Prices,o=new yS.DataVolume(e),a=new yS.Requests(e),i=new yS.Bill(e);se.dispatch({type:DE});var s=[r.fetchOnce(),o.fetchOnce(),a.fetchOnce(),i.fetchOnce()];se.when(s).then((function(e,r,o,a){se.dispatch({type:NE,options:{prices:e[0].mt_prices,dataVol:r[0],requests:o[0],bill:a[0],isInPast:t,freeLimit:n}})}),(function(){se.dispatch({type:CE})}))},initUsageGraph:function(){var e=new yS.DataVolume(null);se.dispatch({type:DE}),e.fetchOnce().then((function(e){se.dispatch({type:NE,options:{dataVol:e}})}),(function(){se.dispatch({type:CE})}))},fetchUser:function(){se.cloudantUser.fetchOnce()},userAuthenticated:function(e){se.dispatch({type:iE,options:{username:e.get("username"),firstName:e.get("first_name"),lastName:e.get("last_name"),date:e.get("date"),email:e.get("email"),company:e.get("company"),cluster:e.get("cluster"),plan:e.get("plan"),plan_multiple:e.get("plan_multiple"),supportLevel:e.get("support_level"),isInChina:e.isInChina(),partners:bS({bluemix:{iam_enabled:!1}},e.get("partners")),domains:e.get("domains")}})},selectPage:function(e){se.dispatch({type:sE,options:{page:e}})},saveProfile:function(e){se.dispatch({type:pE}),o().ajax({type:"PUT",url:"/_api/v2/user",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),success:function(){se.dispatch({type:fE}),se.addNotification({msg:"Your profile has been updated.",type:"success",clear:!0})},error:function(){se.dispatch({type:fE}),se.addNotification({msg:"There was an error updating your profile.",type:"error",clear:!0})}})},setFirstName:function(e){se.dispatch({type:cE,options:{firstName:e}})},setLastName:function(e){se.dispatch({type:lE,options:{lastName:e}})},setCompany:function(e){se.dispatch({type:uE,options:{company:e}})},setEmail:function(e){se.dispatch({type:dE,options:{email:e}})},setCurrentPwd:function(e){se.dispatch({type:hE,options:{password:e}})},setNewPwd:function(e){se.dispatch({type:mE,options:{password:e}})},setNewPwdConfirmation:function(e){se.dispatch({type:yE,options:{password:e}})},savePassword:function(e){se.dispatch({type:pE}),o().ajax({type:"PUT",url:"/_api/v2/user",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),success:function(){se.dispatch({type:fE}),se.dispatch({type:bE}),se.addNotification({msg:"Your password has been updated.",type:"success",clear:!0})},error:function(){se.dispatch({type:fE}),se.dispatch({type:bE}),se.addNotification({msg:"There was an error updating your password.",type:"error",clear:!0})}})},loadVirtualHosts:function(){o().ajax({type:"GET",url:le.hostDash+"/user/virtual_hosts",dataType:"json",success:function(e){var t=e.virtual_hosts.map((function(e){return{host:e[0],path:e[1]}}));se.dispatch({type:gE,options:{success:!0,virtualHosts:t}})},error:function(){se.dispatch({type:gE,options:{success:!1}})}})},setNewHostname:function(e){se.dispatch({type:_E,options:{hostname:e}})},setNewHostnamePath:function(e){se.dispatch({type:vE,options:{path:e}})},addVirtualHost:function(e){se.dispatch({type:pE}),o().ajax({type:"POST",url:le.hostDash+"/user/virtual_hosts",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),success:function(){se.dispatch({type:EE,options:{virtualHost:e}}),se.addNotification({msg:"The virtual host has been added.",type:"success",clear:!0})},error:function(){se.dispatch({type:fE}),se.addNotification({msg:"There was an error adding the virtual host.",type:"error",clear:!0})}})},showDeleteVirtualHostModal:function(e){se.dispatch({type:wE,options:{hostname:e}})},hideDeleteVirtualHostModal:function(){se.dispatch({type:SE})},deleteVirtualHost:function(e){o().ajax({type:"DELETE",url:le.hostDash+"/user/virtual_hosts",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({host:e}),success:function(){se.dispatch({type:OE,options:{hostname:e}}),se.addNotification({msg:"The virtual host has been deleted.",type:"success",clear:!0})},error:function(){se.dispatch({type:SE}),se.addNotification({msg:"There was an error deleting the virtual host.",type:"error",clear:!0})}})},selectUsageTab:function(e){se.dispatch({type:"ACCOUNTS_SELECT_USAGE_TAB",options:{tab:e}})}};function _S(e){return _S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_S(e)}function vS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ES(e,t){return ES=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ES(e,t)}function wS(e,t){if(t&&("object"===_S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SS(e)}function SS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OS(e){return OS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},OS(e)}function NS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DS=IE.accountStore,CS=pi.LoadLines,PS=function(e){var t=e.label,n=e.url;return ue.createElement("div",{className:"settings-content"},ue.createElement("div",{className:"settings-name"},t),ue.createElement("div",{className:"settings-value"},ue.createElement("a",{href:n,target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},n)))},RS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ES(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OS(r);if(o){var n=OS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wS(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),NS(SS(e=a.call(this)),"getStoreState",(function(){return{isLoading:!DS.isUserAuthenticated(),accountCRN:DS.getAccountCRN(),location:DS.getLocation(),username:DS.getUsername(),legacyCredentialsEnabled:DS.isLegacyCredsEnabled(),dedicatedHwCRN:DS.getDedicatedHwCRN(),domains:DS.getDomains()}})),NS(SS(e),"onChange",(function(){e.setState(e.getStoreState())})),e.state=e.getStoreState(),e.showCopiedMessage=e.showCopiedMessage.bind(SS(e)),e}return t=i,n=[{key:"componentDidMount",value:function(){DS.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){DS.off("change",this.onChange)}},{key:"showCopiedMessage",value:function(e){se.addNotification({msg:"The ".concat(e," has been copied to your clipboard."),type:"info",clear:!0})}},{key:"getAuthMethod",value:function(){var e="https://cloud.ibm.com",t="https://test.cloud.ibm.com",n=!1;if(this.state.accountCRN){var r=this.state.accountCRN.split(":");10===r.length&&"staging"===r[2]&&(n=!0)}var o="".concat(n?t:e,"/docs/Cloudant?topic=Cloudant-work-with-your-account#authentication-iam"),a="".concat(n?t:e,"/docs/Cloudant?topic=Cloudant-work-with-your-account#authentication"),i=ue.createElement("a",{href:o,target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},"IBM Cloud IAM (Identity and Access Management)"),s=ue.createElement("a",{href:a,target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},"Cloudant credentials");return this.state.accountCRN?this.state.legacyCredentialsEnabled?ue.createElement("span",null,i," and ",s):i:s}},{key:"dedicatedHardwarePanel",value:function(){var e=this;return this.state.dedicatedHwCRN?ue.createElement("div",{className:"cloudant-bx--tile settings-tile"},ue.createElement("div",{className:"settings-header"},"Dedicated Hardware"),ue.createElement("div",{className:"settings-content settings-content--last"},ue.createElement("div",{className:"settings-name"},"CRN"),ue.createElement("div",{className:"settings-value"},ue.createElement("span",{id:"dedi_hw_crn"},this.state.dedicatedHwCRN),ue.createElement(pi.Copy,{uniqueKey:this.state.dedicatedHwCRN.replace(/[:/-]/g,""),onClipboardClick:function(){e.showCopiedMessage("dedicated hardware CRN")},text:this.state.dedicatedHwCRN})))):null}},{key:"crnTooltip",value:function(){return this.tooltip("Cloud Resource Names (CRNs) uniquely identify IBM Cloud resources. A CRN is used to specify a resource in a way that is unambiguous and guaranteed to be globally unique, such as in IBM Cloud Identity and Access Management (IAM) policies and services listed in the cloud catalog.")}},{key:"tooltip",value:function(e){var t=ue.createElement(on.u,{id:"graveyard-tooltip"},e);return ue.createElement(on.Ox,{placement:"top",overlay:t},ue.createElement("i",{className:"icon icon-question-sign"}))}},{key:"crnRow",value:function(){var e=this;return this.state.accountCRN?ue.createElement("div",{className:"settings-content"},ue.createElement("div",{className:"settings-name"},"CRN ",this.crnTooltip()),ue.createElement("div",{className:"settings-value"},ue.createElement("span",{id:"account_crn"},this.state.accountCRN),ue.createElement(pi.Copy,{uniqueKey:this.state.accountCRN.replace(/[:/-]/g,""),onClipboardClick:function(){e.showCopiedMessage("CRN")},text:this.state.accountCRN}))):null}},{key:"getEndpoints",value:function(){if(!this.state.domains||0===this.state.domains.length){var e="https://".concat(this.state.username,".cloudant.com");return ue.createElement(PS,{label:"Endpoint",url:e,key:"default_domain"})}return this.state.domains.filter((function(e){return e})).map((function(e){var t="Endpoint";"internal"===e.type?t="Internal ".concat(t):"external"===e.type&&(t="External ".concat(t)),e.preferred&&(t+=" (preferred)");var n="https://".concat(e.domain);return ue.createElement(PS,{label:t,url:n,key:t})}))}},{key:"render",value:function(){return this.state.isLoading?ue.createElement("div",{className:"tab-pane active"},ue.createElement("div",{className:"activity-pane"},ue.createElement(CS,null))):ue.createElement("div",{className:"tab-pane active"},ue.createElement("div",{className:"activity-pane"},ue.createElement("div",{className:"cloudant-bx--tile settings-tile"},ue.createElement("div",{className:"settings-header"},"Deployment details"),this.crnRow(),ue.createElement("div",{className:"settings-content"},ue.createElement("div",{className:"settings-name"},"Location"),ue.createElement("div",{className:"settings-value"},this.state.location)),this.getEndpoints(),ue.createElement("div",{className:"settings-content"},ue.createElement("div",{className:"settings-name"},"Authentication",ue.createElement("br",null),"method"),ue.createElement("div",{className:"settings-value"},this.getAuthMethod())),ue.createElement("div",{className:"settings-content settings-content--last"},ue.createElement("div",{className:"settings-name"},"Disk encryption"),ue.createElement("div",{className:"settings-value"},"Yes"))),this.dedicatedHardwarePanel()))}}],n&&vS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function kS(e){return kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kS(e)}function TS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IS(e,t){return IS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},IS(e,t)}function AS(e,t){if(t&&("object"===kS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LS(e)}function LS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jS(e){return jS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jS(e)}function MS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var US=IE.accountStore,BS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jS(r);if(o){var n=jS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return AS(this,e)});function i(){var e;TS(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return MS(LS(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{page:US.getPage()}})),MS(LS(e),"onChange",(function(){e.setState(e.getStoreState())})),MS(LS(e),"getSidebarItems",(function(){return e.props.sidebarItems.map((function(t,n){return ue.createElement("li",{className:e.state.page===t.pageName?"active":"",key:n},ue.createElement("a",{href:"#"+t.link},ue.createElement("span",{className:t.icon}),ue.createElement("span",{className:"nav-label"},t.title)))}))})),MS(LS(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"componentDidMount",value:function(){US.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){US.off("change",this.onChange)}},{key:"render",value:function(){return ue.createElement("nav",{className:"sidenav simple-sidenav"},ue.createElement("ul",{className:"nav nav-list"},this.getSidebarItems()))}}])&&xS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function qS(e){return qS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qS(e)}function VS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GS(e,t){return GS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},GS(e,t)}function FS(e,t){if(t&&("object"===qS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function KS(e){return KS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},KS(e)}MS(BS,"propTypes",{sidebarItems:kt().array.isRequired});var zS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=KS(r);if(o){var n=KS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return FS(this,e)});function i(){return VS(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"tab-pane active"},ue.createElement("div",{className:"activity-pane"},ue.createElement("h4",null,"Fine-Grained IAM Controls and new Activity Tracker Events"),ue.createElement("p",null,"IBM Cloudant instances in the IBM Cloud now support multiple types of roles for IBM IAM. Check out our ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-managing-access-for-cloudant",target:"_blank",rel:"noopener noreferrer"},"IAM Guide")," for more detail on these new, more perceptive roles. We also released the ability to send ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-at_events",target:"_blank",rel:"noopener noreferrer"},"database audit events")," to IBM Cloud Activity Tracker with LogDNA. Happy Auditing!"),ue.createElement("br",null),ue.createElement("h4",null,"Cloudant integration with IBM Log Analysis with LogDNA"),ue.createElement("p",null,"In the Dallas region, customers can now access their database logs automatically. Learn more ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-log-analysis-integration",target:"_blank",rel:"noopener noreferrer"},"here"),"."),ue.createElement("br",null),ue.createElement("h4",null,"Partition Queries is now GA"),ue.createElement("p",null,"IBM Cloudant released a new capability for partitioned databases which will require both a partition key and doc key for every document stored. Users can leverage partition queries against a partitioned database which are up to 20X cheaper than global queries with reduced latency. See the ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-database-partitioning",target:"_blank",rel:"noopener noreferrer"},"documentation")," for more details. The partition query feature has been rolled out to all Cloudant environments and is now officially GA."),ue.createElement("br",null),ue.createElement("h4",null,"TLS 1.2+ required starting on June 1, 2019"),ue.createElement("p",null,"Starting on June 1, 2019, the IBM Cloudant API will require Transport Layer Security (TLS) 1.2 and above. The IBM Cloudant API requires HTTPS and currently supports TLS 1.0 and above. The IBM Cloud withdrew support for TLS 1.0 and 1.1 for many services in March 2018 and IBM Cloudant is following suit. If your applications are still using TLS 1.0 or 1.1, please update them immediately to TLS 1.2 or above to avoid any impact. If you are unsure what TLS version your application is using to connect to Cloudant or have any questions, open a support ticket. See IBM Cloudant security docs for more detail."),ue.createElement("br",null),ue.createElement("h4",null,"IBM Identity & Access Management (IAM)"),ue.createElement("p",null,"IBM Cloudant instances in the IBM Cloud now support IBM IAM for authentication and authorization. IBM IAM allows for centralized control for granting user and programmatic access to all the Cloudant instances in your IBM Cloud account. See the ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-managing-access-for-cloudant",target:"_blank",rel:"noopener noreferrer"},"IAM guide")," in the documentation for a comparison between using IAM and legacy Cloudant authentication for your applications."),ue.createElement("p",null,"In addition, IBM Cloudant instances support Resource Groups and we encourage all customers to migrate their Cloudant instances that remain in a Cloud Foundry space to Resource Groups to take advantage of the security access benefits. See the ",ue.createElement("a",{href:"https://test.cloud.ibm.com/docs/Cloudant?topic=Cloudant-faq-ibm-cloud-resource-groups",target:"_blank",rel:"noopener noreferrer"},"guide")," on using Cloudant with Resource Groups for more details."),ue.createElement("br",null),ue.createElement("h4",null,"IBM Cloudant Dedicated Hardware environment security enhancements"),ue.createElement("p",null,"The IBM Cloudant Dedicated Hardware plan in the IBM Cloud catalog is for customers who require additional security and compliance benefits. IBM Cloudant Dedicated Hardware instances are isolated environments for the sole use of a customer to run one or more IBM Cloudant Standard plan instances. We have added the ability to connect via IBM’s internal network, meaning customers can avoid public network and outbound bandwidth costs when connecting to Cloudant from their applications. With that, Dedicated Hardware environment now offer the following benefits:"),ue.createElement("ul",null,ue.createElement("li",null,"Isolation at the database compute and storage layers for a single customer"),ue.createElement("li",null,"Choice of any ",ue.createElement("a",{href:"https://www.ibm.com/cloud/data-centers/",target:"_blank",rel:"noopener noreferrer"},"IBM Cloud location")),ue.createElement("li",null,"Optional HIPAA readiness in US locations"),ue.createElement("li",null,"Both external and internal ",ue.createElement("a",{href:"https://test.cloud.ibm.com/docs/Cloudant?topic=Cloudant-connecting#endpoints",target:"_blank",rel:"noopener noreferrer"},"service endpoints")),ue.createElement("li",null,"IP whitelisting"),ue.createElement("li",null,"Bring your own encryption key (BYOK) with Key Protect")),ue.createElement("p",null,"See the ",ue.createElement("a",{href:"https://test.cloud.ibm.com/docs/Cloudant?topic=Cloudant-ibm-cloud-public#dedicated-hardware-plan",target:"_blank",rel:"noopener noreferrer"},"documentation")," on the IBM Cloudant Dedicated Hardware plan for more details."),ue.createElement("br",null)))}}])&&HS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),WS=n(87097),YS=n.n(WS),XS=function(e){var t,n=e.password,r=n?YS()(n).score:-1;return t=-1==r?"":r>=KE.MIN_PWD_STRENGTH&&n.length>=KE.MIN_PWD_SIZE?ue.createElement("span",{className:"password-strength__strong"},"STRONG"):r>=KE.MIN_PWD_STRENGTH&&n.length<KE.MIN_PWD_SIZE?ue.createElement("span",{className:"password-strength__almostthere"},"ALMOST THERE"):3==r?ue.createElement("span",{className:"password-strength__better"},"BETTER"):ue.createElement("span",{className:"password-strength__weak"},"WEAK"),ue.createElement("span",{style:{fontSize:14}},"Password strength: ",t)};XS.propTypes={password:kt().string};const QS=XS;function JS(e){return JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JS(e)}function $S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eO(e,t){return eO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eO(e,t)}function tO(e,t){if(t&&("object"===JS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nO(e)}function nO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rO(e){return rO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rO(e)}function oO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=IE.accountStore,iO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eO(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rO(r);if(o){var n=rO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tO(this,e)});function i(){var e;$S(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oO(nO(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{isAuthenticated:aO.isUserAuthenticated(),isSaving:aO.isSaving(),currentPwd:aO.getCurrentPwd(),newPwd:aO.getNewPwd(),newPwdConfirmation:aO.getNewPwdConfirmation()}})),oO(nO(e),"onChange",(function(){e.setState(e.getStoreState())})),oO(nO(e),"setCurrentPwd",(function(e){gS.setCurrentPwd(e.target.value)})),oO(nO(e),"setNewPwd",(function(e){gS.setNewPwd(e.target.value)})),oO(nO(e),"setNewPwdConfirmation",(function(e){gS.setNewPwdConfirmation(e.target.value)})),oO(nO(e),"validate",(function(){return e.state.currentPwd?!e.state.newPwd||e.state.newPwd.length<KE.MIN_PWD_SIZE?(se.addNotification({type:"error",msg:"Your password must be at least 16 characters long.",clear:!0}),e.password.focus(),!1):YS()(e.state.newPwd).score<KE.MIN_PWD_STRENGTH?(se.addNotification({type:"error",msg:"Your password is too weak. Please consider using additional numbers/symbols and avoid guessable patterns.",clear:!0}),e.password.focus(),!1):!(!e.state.newPwdConfirmation||e.state.newPwd!==e.state.newPwdConfirmation)||(se.addNotification({type:"error",msg:"Your passwords do not match.",clear:!0}),e.passwordConfirm.focus(),!1):(se.addNotification({type:"error",msg:"Please enter your current password.",clear:!0}),e.currentPwd.focus(),!1)})),oO(nO(e),"submit",(function(t){t.preventDefault(),e.validate()&&gS.savePassword({password:e.state.newPwd,old_password:e.state.currentPwd,"new_password-confirm":e.state.newPwdConfirmation})})),oO(nO(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"componentDidMount",value:function(){aO.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){aO.off("change",this.onChange)}},{key:"render",value:function(){var e=this;if(!this.state.isAuthenticated)return ue.createElement(pi.LoadLines,null);var t=this.state.isSaving?"Saving...":"Update Password";return ue.createElement("div",{className:"tab-pane active"},ue.createElement("div",{id:"password-update__desc"},ue.createElement("p",null,"Passwords must be at least ",ue.createElement("span",null,"16")," characters long and meet Cloudant's ",ue.createElement("span",null,"strength requirements.")),ue.createElement("p",null,"We recommend using a combination of alphanumeric and symbol characters and avoiding guessable patterns.")),ue.createElement("form",{id:"password-form",onSubmit:this.submit},ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"password"},"Current Password"),ue.createElement("input",{type:"password",id:"password",ref:function(t){return e.currentPwd=t},autoFocus:!0,value:this.state.currentPwd,onChange:this.setCurrentPwd})),ue.createElement("hr",null),ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"new-password"},"New Password"),ue.createElement("span",null,ue.createElement("input",{type:"password",id:"new-password",ref:function(t){return e.password=t},value:this.state.newPwd,onChange:this.setNewPwd}),ue.createElement("br",null),ue.createElement(QS,{password:this.state.newPwd})),ue.createElement("span",{className:"help-block"})),ue.createElement("div",{className:"controls controls-row",style:{paddingTop:10}},ue.createElement("label",{htmlFor:"new-password-confirm"},"New Password Confirmation"),ue.createElement("input",{type:"password",id:"new-password-confirm",ref:function(t){return e.passwordConfirm=t},value:this.state.newPwdConfirmation,onChange:this.setNewPwdConfirmation}),ue.createElement("span",{className:"help-block"})),ue.createElement("div",{className:"form-actions"},ue.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.state.isSaving},t))))}}])&&ZS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),sO={},cO=[];sO.getUniqueKey=function(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==cO.indexOf(t);)t=e();return cO.push(t),t},sO.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},sO.isValidEmail=function(e){return/^[^@]+@[^@]+\.[^@.]{2,}$/.test(e)},sO.stripProtocol=function(e){return e.replace(/^[^/]*?:\/\//,"")},sO.getCleanDesignDoc=function(e){return e.replace(/_design\//,"")};const lO=sO;function uO(e){return uO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uO(e)}function dO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fO(e,t){return fO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fO(e,t)}function hO(e,t){if(t&&("object"===uO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mO(e)}function mO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yO(e){return yO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yO(e)}function bO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gO=IE.accountStore,_O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fO(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yO(r);if(o){var n=yO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return hO(this,e)});function i(){var e;dO(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bO(mO(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{isAuthenticated:gO.isUserAuthenticated(),isSaving:gO.isSaving(),firstName:gO.getFirstName(),lastName:gO.getLastName(),company:gO.getCompany(),email:gO.getEmail()}})),bO(mO(e),"onChange",(function(){e.setState(e.getStoreState())})),bO(mO(e),"submit",(function(t){t.preventDefault(),e.validate()&&gS.saveProfile({first_name:e.state.firstName.trim(),last_name:e.state.lastName.trim(),company:e.state.company.trim(),email:e.state.email.trim()})})),bO(mO(e),"validate",(function(){return""===e.state.firstName.trim()?(se.addNotification({type:"error",msg:"Please enter a first name.",clear:!0}),e.firstName.focus(),!1):""===e.state.lastName.trim()?(se.addNotification({type:"error",msg:"Please enter a last name.",clear:!0}),e.lastName.focus(),!1):""===e.state.email.trim()?(se.addNotification({type:"error",msg:"Please enter an email address.",clear:!0}),e.email.focus(),!1):!!lO.isValidEmail(e.state.email.trim())||(se.addNotification({type:"error",msg:"Please enter a valid email address.",clear:!0}),e.email.focus(),!1)})),bO(mO(e),"setFirstName",(function(e){gS.setFirstName(e.target.value)})),bO(mO(e),"setLastName",(function(e){gS.setLastName(e.target.value)})),bO(mO(e),"setCompany",(function(e){gS.setCompany(e.target.value)})),bO(mO(e),"setEmail",(function(e){gS.setEmail(e.target.value)})),bO(mO(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"componentDidMount",value:function(){gO.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){gO.off("change",this.onChange)}},{key:"render",value:function(){var e=this;if(!this.state.isAuthenticated)return ue.createElement(pi.LoadLines,null);var t=this.state.isSaving?"Saving...":"Save Changes";return ue.createElement("div",{className:"tab-pane active"},ue.createElement("form",{onSubmit:this.submit,className:"profile-form"},ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"first-name"},"First Name"),ue.createElement("input",{type:"text",className:"input-block-level",id:"first-name",ref:function(t){return e.firstName=t},autoFocus:!0,placeholder:"First Name",value:this.state.firstName,onChange:this.setFirstName})),ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"last-name"},"Last Name"),ue.createElement("input",{type:"text",className:"input-block-level",id:"last-name",ref:function(t){return e.lastName=t},placeholder:"Last Name",value:this.state.lastName,onChange:this.setLastName})),ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"company"},"Company"),ue.createElement("input",{type:"text",className:"input-block-level",id:"company",placeholder:"Your Company",value:this.state.company,onChange:this.setCompany})),ue.createElement("div",{className:"controls controls-row"},ue.createElement("label",{htmlFor:"email"},"Email"),ue.createElement("input",{type:"text",className:"input-block-level",id:"email",ref:function(t){return e.email=t},placeholder:"Your Email",value:this.state.email,onChange:this.setEmail})),ue.createElement("div",{className:"form-actions"},ue.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.state.isSaving},ue.createElement("i",{className:"icon fonticon-ok-circled"}),t))))}}])&&pO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function vO(e){return vO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vO(e)}function EO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SO(e,t){return SO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},SO(e,t)}function OO(e,t){if(t&&("object"===vO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NO(e)}function NO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DO(e){return DO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},DO(e)}function CO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SO(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=DO(r);if(o){var n=DO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return OO(this,e)});function i(){var e;EO(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return CO(NO(e=a.call.apply(a,[this].concat(n))),"deleteVirtualHost",(function(){gS.showDeleteVirtualHostModal(e.props.virtualHost.host)})),e}return t=i,(n=[{key:"render",value:function(){var e=window.location.hostname+this.props.virtualHost.path;return ue.createElement("li",null,ue.createElement("a",{className:"hostname",href:"https://"+this.props.virtualHost.host,title:this.props.virtualHost.host},this.props.virtualHost.host),ue.createElement("span",{className:"path",title:e},ue.createElement("span",{className:"right-arrow"},"→"),ue.createElement("span",null,e)),ue.createElement("button",{className:"icon-trash",onClick:this.deleteVirtualHost}))}}])&&wO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function RO(e){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RO(e)}function kO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xO(e,t){return xO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xO(e,t)}function IO(e,t){if(t&&("object"===RO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AO(e)}function AO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LO(e){return LO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},LO(e)}function jO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}CO(PO,"propTypes",{virtualHost:kt().object.isRequired});var MO=IE.accountStore,UO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xO(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=LO(r);if(o){var n=LO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return IO(this,e)});function i(){var e;kO(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jO(AO(e=a.call.apply(a,[this].concat(n))),"getStoreState",(function(){return{isAuthenticated:MO.isUserAuthenticated(),isSaving:MO.isSaving(),loadError:MO.virtualHostsLoadError(),virtualHosts:MO.getVirtualHosts(),newHostname:MO.getNewHostname(),newHostnamePath:MO.getNewHostnamePath(),deleteVirtualHostModalVisible:MO.deleteVirtualHostModalVisible(),virtualHostToDelete:MO.getVirtualHostnameToDelete()}})),jO(AO(e),"onChange",(function(){e.setState(e.getStoreState())})),jO(AO(e),"submit",(function(t){if(t.preventDefault(),!e.validate())return!1;gS.addVirtualHost({host:e.getCleanHostName(),path:"/"+e.state.newHostnamePath})})),jO(AO(e),"getCleanHostName",(function(){return lO.stripProtocol(e.state.newHostname.trim())})),jO(AO(e),"validate",(function(){return""!==e.getCleanHostName()||(se.addNotification({type:"error",msg:"Please enter a host name.",clear:!0}),e.hostname.focus(),!1)})),jO(AO(e),"loadError",(function(){return ue.createElement("div",{className:"tab-pane active"},ue.createElement("header",null,ue.createElement("h2",null,"Virtual Hosts"),ue.createElement("p",{className:"virtual-hosts-load-error"},"There was an error loading your virtual hosts.")))})),jO(AO(e),"getVirtualHostRows",(function(){return e.state.virtualHosts.map((function(e,t){return ue.createElement(PO,{virtualHost:e,key:t})}))})),jO(AO(e),"getVirtualHostList",(function(){return 0===e.state.virtualHosts.length?null:ue.createElement("section",{id:"your-virtual-hosts"},ue.createElement("ul",{className:"unstyled show-header"},ue.createElement("li",{className:"host-header"},ue.createElement("h2",null,"Your Virtual Hosts")),e.getVirtualHostRows()))})),jO(AO(e),"setNewHostname",(function(e){gS.setNewHostname(e.target.value)})),jO(AO(e),"setNewHostnamePath",(function(e){gS.setNewHostnamePath(e.target.value)})),jO(AO(e),"deleteVirtualHost",(function(){gS.deleteVirtualHost(e.state.virtualHostToDelete)})),jO(AO(e),"state",e.getStoreState()),e}return t=i,(n=[{key:"componentDidMount",value:function(){MO.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){MO.off("change",this.onChange)}},{key:"render",value:function(){var e=this;if(!this.state.isAuthenticated)return ue.createElement(pi.LoadLines,null);if(this.state.loadError)return this.loadError();var t=window.location.hostname,n=this.state.isSaving?"Saving...":"Add Domain";return ue.createElement("div",{className:"tab-pane active"},ue.createElement("header",null,ue.createElement("p",null,"Specify a virtual host to map a domain or domain path to a Cloudant server. After you add a hostname, update the host’s DNS CNAME record to point to ",ue.createElement("strong",null,t),".")),ue.createElement("form",{className:"form-horizontal",onSubmit:this.submit},ue.createElement("div",{className:"control-group add-virtual-host-form"},ue.createElement("input",{type:"text",id:"hostname",className:"input-large",ref:function(t){return e.hostname=t},placeholder:"Hostname",autoFocus:!0,value:this.state.newHostname,onChange:this.setNewHostname}),ue.createElement("span",{className:"right-arrow"},"→"),ue.createElement("div",{className:"input-prepend"},ue.createElement("span",{className:"add-on"},ue.createElement("small",null,t,"/")),ue.createElement("input",{type:"text",id:"path",className:"input-large",placeholder:"Path (optional)",value:this.state.newHostnamePath,onChange:this.setNewHostnamePath})),ue.createElement("button",{className:"btn btn-secondary add-virtual-host-btn",type:"submit",disabled:this.state.isSaving},n))),this.getVirtualHostList(),ue.createElement(Li.ConfirmationModal,{title:"Remove Host",visible:this.state.deleteVirtualHostModalVisible,text:"Are you sure you want to remove this virtual host?",onClose:gS.hideDeleteVirtualHostModal,onSubmit:this.deleteVirtualHost,buttonClass:"btn-danger",successButtonLabel:"Remove Host"}))}}])&&TO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const BO={AccountSidebar:BS,Announcements:zS,Profile:_O,PasswordInfo:iO,PasswordStrengthIndicator:QS,AccountSettings:RS,VirtualHostRow:PO,VirtualHosts:UO};function qO(e){return qO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qO(e)}function VO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HO(e,t){return HO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},HO(e,t)}function GO(e,t){if(t&&("object"===qO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function FO(e){return FO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FO(e)}var KO=IE.accountStore,zO=pi.LoadLines,WO=pi.TabWindowWrapper,YO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=FO(r);if(o){var n=FO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return GO(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t.state.userPromiseResolved=!1,t}return t=i,(n=[{key:"getStoreState",value:function(){return{userAuthenticated:KO.isUserAuthenticated()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){var e=this;KO.on("change",this.onChange,this);var t=function(){e.setState({userPromiseResolved:!0})};ZO.userPromise.then(t).catch(t)}},{key:"componentWillUnmount",value:function(){KO.off("change",this.onChange)}},{key:"getTabs",value:function(){return this.props.getTabs?this.props.getTabs():[]}},{key:"render",value:function(){return this.state.userAuthenticated&&this.state.userPromiseResolved?ue.createElement(WO,{tabs:this.getTabs(),selectedTab:this.props.selectedTab}):ue.createElement(zO,null)}}])&&VO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function XO(){return XO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XO.apply(this,arguments)}YO.propTypes={getTabs:kt().func.isRequired,selectedTab:kt().string.isRequired};var QO=hS.AccountPlan,JO=yS,$O=se.RouteObject.extend({routes:{account:"redirect","account/announcements":"announcements","account/info":"profile","account/password":"passwordInfo","account/cors":"cors","account/plans":"plans","account/settings":"settings","account/data-location":"dataLocation"},selectedHeader:"Account",roles:["_admin"],getTabs:function(){var e="#account",t=JO.user.get("isCcmCustomer"),n=JO.user.isIBMCloudAccount(),r=[];return t&&r.push({name:"Capacity",component:QO,route:"".concat(e,"/plans")}),r.push({name:"Announcements",component:BO.Announcements,route:"".concat(e,"/announcements"),badgeText:JO.hasNewAnnouncement()?"new":""}),n||r.push({name:"Profile",component:BO.Profile,route:"".concat(e,"/info")}),r.push({name:"CORS",component:aE.Components.CORSContainer,route:"".concat(e,"/cors")}),n||r.push({name:"Password",component:BO.PasswordInfo,route:"".concat(e,"/password")}),t&&r.push({name:"Settings",component:BO.AccountSettings,route:"".concat(e,"/settings")}),r},redirect:function(){JO.userPromise.then((function(){var e=JO.user.get("isCcmCustomer")?"#account/plans":"#account/announcements";se.navigate(e,{redirect:!0})}),(function(){}))},announcements:function(){return le.utils.localStorageSet("announceBadge",KE.ANNOUNCEMENT_VERSION),se.hideHeaderLinkBadge({title:"Account"}),ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Announcements"})})},profile:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Profile"})})},passwordInfo:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Password"})})},virtualHosts:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Virtual Hosts"})})},cors:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"CORS"})})},plans:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Capacity"})})},settings:function(){return ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Settings"})})},usage:function(e,t){var n=RE(e,t),r=n?{year:e,month:t}:null;return gS.initAccountActivity(r,n,kE(XO({},r))),ue.createElement(Zt,{crumbs:[{name:"Account"}],component:ue.createElement(YO,{getTabs:this.getTabs.bind(this),selectedTab:"Usage"})})}});JO.RouteObjects=[$O];const ZO=JO;var eN=function(){},tN=function(){};ZO.user||(se.cloudantUser=new ZO.User,ZO.user=se.cloudantUser,ZO.userPromise=new(H())((function(e,t){eN=e,tN=t})),ZO.userPromise.resolveUser=eN),ZO.initialize=function(){se.session.isAuthenticated().then((function(){var e=window.location.hash,t=(e.match(/#reset/)||[]).length>0;"#login"===e||t||"#forgot"===e||ZO.user.fetchOnce().then((function(){eN(),gS.userAuthenticated(ZO.user)}),(function(e){var t=e.statusText;e.responseJSON&&e.responseJSON.message&&(t=e.responseJSON.message),tN(new Error(t))}))})),se.addHeaderLink({title:"Account",href:"#/account",icon:ZO.getIcon()}),yS.hasNewAnnouncement()&&se.showHeaderLinkBadge({title:"Account"})},ZO.userPromise.then((function(){fetch("/",{headers:{Accept:"application/json"}}).then((function(e){e.ok&&e.headers&&-1!==["ibm009","bluemix-uk-standard1","bm-dal-standard1","bm-dal-standard2","bm-dal-standard3","bm-syd-standard1"].indexOf(e.headers.get("x-cloudant-backend"))&&ZO.user.isMeteredPlan()&&se.addNotification({msg:'Warning: The IBM Cloudant Shared Plan will be retired on October 31st, 2018. This plan is impacted by the retirement. Read more at <a href="https://www.ibm.com/blogs/bluemix/2018/08/ibm-cloudant-shared-plan-is-being-retired" target="_blank" rel="noopener noreferrer"><u>https://www.ibm.com/blogs/bluemix/2018/08/ibm-cloudant-shared-plan-is-being-retired</u></a>.',type:"error",clear:!0,escape:!1,visibleTime:15e3})})).catch((function(){}))}),(function(){}));const nN=ZO;nN.userPromise.then((function(){se.showLogout()}),(function(){}));var rN={GENERAL:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-documents",ALL_DBS:"https://cloud.ibm.com/apidocs/cloudant#getalldbs",REPLICATION:"https://cloud.ibm.com/apidocs/cloudant#getreplicationdocument",DESIGN_DOCS:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-design-documents",VIEW_FUNCS:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-views-mapreduce",MAP_FUNCS:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-views-mapreduce#map-function-examples",REDUCE_FUNCS:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-views-mapreduce#reduce-functions",API_REF:"https://cloud.ibm.com/apidocs/cloudant",SEARCH_INDEXES:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-search",SEARCH_INDEX_QUERIES:"https://cloud.ibm.com/apidocs/cloudant#getsearchanalyze",GEOSPATIAL_INDEXES:"https://cloud.ibm.com/apidocs/cloudant#getgeo",GEOSPATIAL_INDEXES_CREATING:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-cloudant-nosql-db-geospatial",DB_PERMISSION:"https://cloud.ibm.com/apidocs/cloudant#getsecurity",STATS:"https://cloud.ibm.com/docs/services/Cloudant/api?topic=cloudant-monitoring-an-ibm-cloudant-cluster#monitoring-a-cloudant-cluster",ACTIVE_TASKS:"https://cloud.ibm.com/apidocs/cloudant#getactivetasks",LOG:"",CONFIG:"",MANGO_INDEX:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-query",MANGO_SEARCH:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-query#working-with-indexes",VIEWS:"https://cloud.ibm.com/apidocs/cloudant#postview",CHANGES:"https://cloud.ibm.com/apidocs/cloudant#getchanges-changes",SECURITY:"https://cloud.ibm.com/apidocs/cloudant#authentication",DESIGN_DOC_METADATA:"https://cloud.ibm.com/apidocs/cloudant#getdesigndocumentinformation",DOC_URL_DESIGN_DOCS:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-design-documents"};Object.keys(rN).forEach((function(e){se.constants.DOC_URLS[e]=rN[e]}));var oN=new se.addon;oN.initialize=function(){se.registerExtension("mango:additionalIndexes",{type:"text",filterFunc:function(e){return{type:e.type,selector:e.def.selector}},createHeader:function(e){var t=e.def;return[e.type+": "+(t.selector?JSON.stringify(t.selector):"")]}})};const aN=oN;var iN;function sN(){iN=null;var e=R.getServerUrl("/_session");return C(e,le.utils.queryParams({username:"_",password:"_"}))}const cN=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),D(e,"POST",n)}(R.getServerUrl("/_session"),le.utils.queryParams(e))},lN=function(){if(iN)return iN;var e=R.getServerUrl("/_session"),t=w(e).then((function(e){return e.userCtx.name&&(iN=t),e.userCtx}));return t};function uN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i.includes)(e,"_admin")}var pN=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new(H())((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}var t,n;return t=e,n=[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:dN(e.roles)},(0,i.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return lN().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=(0,i.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!0;var t=_.intersection(this.userRoles(),e).length;return t>0}}],n&&uN(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const fN=n.p+"dashboard.assets/img/logo-blue-no-title.png",hN="LOGIN_STARTED",mN="LOGIN_COMPLETE",yN="LOGIN_FAILED",bN="RESET_COMPLETED",gN="SHOW_LOGIN_FORM";var _N=function(e){var t=e.message;se.addNotification({msg:t,type:"error"})},vN=function(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))}(!_.isEmpty(e),!_.isEmpty(t))},EN=KE.MIN_PWD_SIZE,wN=KE.MIN_PWD_STRENGTH,SN=function(e,t){if(se.dispatch({type:hN}),document.execCommand&&document.execCommand("ClearAuthenticationCache"),function(e){return!e||e.length<EN||YS()(e).score<wN}(t))return se.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0}),void se.dispatch({type:yN});(function(e,t,n){return vN(e,t)?cN({name:e,password:t}).then((function(e){if(e.error)return _N({message:e.reason}),e;var t=le.i18n.en_US["auth-logged-in"];t&&se.addNotification({msg:t}),se.navigate("/")})).catch(_N):_N({message:le.i18n.en_US["auth-missing-credentials"]})})(e,t).then((function(e){if(e&&e.error)return se.dispatch({type:yN}),void("payment_required"===e.error&&se.showPermanentNotification("Your account has been locked. Please contact Cloudant Support at support@cloudant.com to gain access."));w(R.getServerUrl("/_session")).then((function(e){!function(e){var t=e.userCtx;if(!t||!t.roles||0===t.roles.length){if(sN(),e.error){if("payment_required"===e.error)throw new Error("Your account has been locked. Please contact Cloudant Support at support@cloudant.com.");throw new Error("".concat(e.reason))}if(t&&t.name)throw new Error("".concat(t.name," is not authorized to access this account."));throw new Error("Not authorized to access this account.")}}(e),se.reduxDispatch((function(e){e({type:ve})})),se.dispatch({type:mN})})).catch((function(e){se.navigate("/login"),se.addNotification({msg:e.message,type:"error"}),se.dispatch({type:yN})}))}))},ON=new(se.Store.extend({setURL:function(e){this._url=e.url},getURL:function(){return this._url},dispatch:function(e){"SET_URL_SHARED_AUTH"===e.type&&this.setURL(e.options)}}));ON.dispatchToken=se.dispatcher.register(ON.dispatch.bind(ON));var NN=new(se.Store.extend({loginFormExpandedKey:"cloudant.loginFormExpanded",initialize:function(){this._isLoading=!1;var e=le.utils.localStorageGet(this.loginFormExpandedKey);this._loginFormVisible=!0===e},isLoading:function(){return this._isLoading},isLoginFormVisible:function(){return this._loginFormVisible},dispatch:function(e){switch(e.type){case hN:this._isLoading=!0;break;case yN:case mN:case bN:this._isLoading=!1;break;case gN:this._loginFormVisible=!0,le.utils.localStorageSet(this.loginFormExpandedKey,this._loginFormVisible);break;case"HIDE_LOGIN_FORM":this._loginFormVisible=!1,le.utils.localStorageSet(this.loginFormExpandedKey,this._loginFormVisible);break;default:return}this.triggerChange()}}));function DN(e){return DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DN(e)}function CN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RN(e,t,n){return t&&PN(e.prototype,t),n&&PN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kN(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TN(e,t)}function TN(e,t){return TN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},TN(e,t)}function xN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LN(e);if(t){var o=LN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return IN(this,n)}}function IN(e,t){if(t&&("object"===DN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AN(e)}function AN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LN(e){return LN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},LN(e)}NN.dispatchToken=se.dispatcher.register(NN.dispatch.bind(NN));var jN={sharedDBsAuthStore:ON,cloudantAuthStore:NN}.cloudantAuthStore,MN=function(e){kN(n,e);var t=xN(n);function n(e){var r;return CN(this,n),(r=t.call(this,e)).submit=r.submit.bind(AN(r)),r.setUsername=r.setUsername.bind(AN(r)),r.state={username:"",isLoading:jN.isLoading()},r}return RN(n,[{key:"onChange",value:function(){this.setState({isLoading:jN.isLoading()})}},{key:"componentDidMount",value:function(){jN.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){jN.off("change",this.onChange,this)}},{key:"setUsername",value:function(e){this.setState({username:e.target.value})}},{key:"submit",value:function(e){var t;e.preventDefault(),t=this.state.username,se.dispatch({type:hN}),o().ajax({url:"".concat(le.hostDash,"/user/").concat(t,"/password_reset"),contentType:"application/json; charset=utf-8",dataType:"json",method:"POST"}).then((function(){se.addNotification({msg:"We sent a link to reset your password to the email address we have on file for you.",clear:!0}),se.dispatch({type:mN})}),(function(e){se.addNotification({msg:JSON.parse(e.responseText).error,type:"error",clear:!0}),se.dispatch({type:yN})}))}},{key:"submitButton",value:function(){var e="Reset your password";return this.state.isLoading&&(e="Searching for user..."),ue.createElement("button",{className:"btn btn-primary btn-large",type:"submit",disabled:this.state.isLoading},e)}},{key:"render",value:function(){return ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"login-wrapper"},ue.createElement("div",{className:"login-box"},ue.createElement("div",{className:"brand"},ue.createElement("img",{src:fN,width:"80",height:"80",alt:"IBM Cloudant"}),ue.createElement("span",null,"IBM Cloudant")),ue.createElement("form",{onSubmit:this.submit,id:"forgot"},ue.createElement("p",null,ue.createElement("label",{htmlFor:"user_login"},"Forgot your password?",ue.createElement("br",null)),ue.createElement("input",{id:"username",onChange:this.setUsername,className:"input-block-level",type:"text",name:"name",placeholder:"Cloudant username",size:"24"})),this.submitButton()),ue.createElement("p",{className:"ibmid_pwd_reset"},"Need to ",ue.createElement("a",{href:"https://myibm.ibm.com/dashboard",target:"_blank",rel:"noopener noreferrer"},"reset your IBMid password")," instead?"))))}}]),n}(ue.Component),UN=function(e){kN(n,e);var t=xN(n);function n(e){var r;return CN(this,n),(r=t.call(this,e)).submit=r.submit.bind(AN(r)),r.usernameChange=r.usernameChange.bind(AN(r)),r.passwordChange=r.passwordChange.bind(AN(r)),r.passwordConfirmChange=r.passwordConfirmChange.bind(AN(r)),r.state={username:"",password:"",passwordConfirm:"",isLoading:jN.isLoading()},r}return RN(n,[{key:"onChange",value:function(){this.setState({isLoading:jN.isLoading()})}},{key:"componentDidMount",value:function(){jN.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){jN.off("change",this.onChange,this)}},{key:"submit",value:function(e){e.preventDefault(),function(e,t,n,r){if(function(e,t,n){return e?!t||t.length<EN?(se.addNotification({msg:"Your password must be at least 16 characters long.",type:"error",clear:!0}),!1):YS()(t).score<wN?(se.addNotification({msg:"Your password is too weak. Please consider using additional numbers/symbols and avoid guessable patterns.",type:"error",clear:!0}),!1):!(!n||t!==n)||(se.addNotification({msg:"Please ensure both passwords are the same.",type:"error",clear:!0}),!1):(se.addNotification({msg:"Please enter your Cloudant username.",type:"error",clear:!0}),!1)}(e,t,n))se.dispatch({type:hN}),o().ajax({url:"".concat(le.hostDash,"/user/").concat(e,"/password_reset"),contentType:"application/json; charset=utf-8",dataType:"json",method:"PUT",data:JSON.stringify({password:t,token:r})}).then((function(){se.addNotification({msg:"Your password has been updated.",clear:!0}),se.dispatch({type:bN}),SN(e,t)}),(function(e){se.dispatch({type:yN}),se.addNotification({msg:JSON.parse(e.responseText).message,type:"error",clear:!0})}))}(this.state.username,this.state.password,this.state.passwordConfirm,this.props.token)}},{key:"usernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"passwordConfirmChange",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"submitButton",value:function(){var e="Reset your password";return this.state.isLoading&&(e="Resetting password.."),ue.createElement("button",{id:"submit",className:"btn btn-primary btn-large",type:"submit",disabled:this.state.isLoading},e)}},{key:"form",value:function(){return this.props.token?ue.createElement("form",{onSubmit:this.submit,id:"reset"},ue.createElement("div",null,ue.createElement("p",{id:"password-reset__desc"},"Passwords must be at least ",ue.createElement("span",null,"16")," characters long and meet Cloudant's ",ue.createElement("span",null,"strength requirements.")),ue.createElement("input",{onChange:this.usernameChange,id:"username",type:"text",name:"username",className:"input-block-level",placeholder:"Enter your username",value:this.state.username,size:"24"}),ue.createElement("input",{onChange:this.passwordChange,id:"password",type:"password",name:"password",className:"input-block-level",placeholder:"Enter a new password",value:this.state.password,size:"24"}),ue.createElement(BO.PasswordStrengthIndicator,{password:this.state.password}),ue.createElement("input",{onChange:this.passwordConfirmChange,id:"password_confirm",type:"password",name:"password_confirm",className:"input-block-level",style:{marginTop:20},placeholder:"Confirm password",value:this.state.passwordConfirm,size:"24"})),this.submitButton()):ue.createElement("div",{className:"alert alert-warning"},ue.createElement("strong",null,"Missing token!")," Check your email, or try to ",ue.createElement("a",{href:"#forgot"},"reset")," again.")}},{key:"render",value:function(){return ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"login-wrapper"},ue.createElement("div",{className:"login-box"},ue.createElement("div",{className:"brand"},ue.createElement("img",{src:fN,width:"80",height:"80",alt:"IBM Cloudant"}),ue.createElement("span",null,"IBM Cloudant")),this.form())))}}]),n}(ue.Component),BN=function(e){kN(n,e);var t=xN(n);function n(e){var r;return CN(this,n),(r=t.call(this,e)).showLoginForm=r.showLoginForm.bind(AN(r)),r.loginWithIBMId=r.loginWithIBMId.bind(AN(r)),r.login=r.login.bind(AN(r)),r.updateUsername=r.updateUsername.bind(AN(r)),r.updatePassword=r.updatePassword.bind(AN(r)),r.state={username:window.location.host.split(".")[0],password:"",isLoading:jN.isLoading(),loginFormVisible:jN.isLoginFormVisible(),isMT:r.isMT()},r}return RN(n,[{key:"isMT",value:function(){for(var e=le.addons?le.addons.length:0,t=0;t<e;t++)if(le.addons[t]&&le.addons[t].RouteObjects&&le.addons[t].RouteObjects.length>0){var n=le.addons[t].RouteObjects[0];if(n&&n.prototype&&n.prototype.routes&&n.prototype.routes["account/payment"])return!0}return!1}},{key:"onChange",value:function(){this.setState({isLoading:jN.isLoading(),loginFormVisible:jN.isLoginFormVisible()})}},{key:"componentDidMount",value:function(){jN.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){jN.off("change",this.onChange,this)}},{key:"updatePassword",value:function(e){this.setState({password:e.target.value})}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"login",value:function(e){e.preventDefault(),SN(this.state.username,this.state.password)}},{key:"loginWithIBMId",value:function(e){e.preventDefault(),function(){var e="".concat(le.hostDash,"/ibmid_sso/start");window.location.href=e}()}},{key:"showLoginForm",value:function(e){e.preventDefault(),se.dispatch({type:gN})}},{key:"submitButton",value:function(){var e="Sign in";return this.state.isLoading&&(e="Loading..."),ue.createElement("button",{className:"btn btn-primary btn-large js-button-submit",type:"submit",disabled:this.state.isLoading},e)}},{key:"sharedPlanNotice",value:function(){return ue.createElement("p",{className:"shared-plan-notice"},ue.createElement("b",null,"Notice:")," The cloudant.com Shared plan was retired on ",ue.createElement("b",null,"March 31, 2018"),". See ",ue.createElement("a",{href:"https://cloudant.com/shared-plan-retirement/"},"https://cloudant.com/shared-plan-retirement/")," for details.")}},{key:"render",value:function(){var e=this.state.isMT?this.sharedPlanNotice():null,t=this.state.loginFormVisible,n=null,r=null;return this.props.ssoError?r=ue.createElement("div",{style:{paddingTop:16}},"Sign in with IBMid is not available because this Cloudant instance is not assigned to a resource group. Learn how to ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/resources?topic=resources-migrate",target:"_blank",rel:"noopener noreferrer"},"migrate your service instances and apps to a resource group"),"."):n=ue.createElement("div",null,ue.createElement("button",{id:"bt_ibmid_login",className:"btn btn-primary btn-large js-button-submit",style:{width:"100%"},type:"button",onClick:this.loginWithIBMId,disabled:this.state.isLoading},"Sign in with IBMid")),ue.createElement("div",{className:"cloudant-login-wrapper"},ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"login-wrapper"},ue.createElement("div",{className:"login-box"},ue.createElement("div",{className:"brand"},ue.createElement("img",{src:fN,width:"80",height:"80",alt:"IBM Cloudant"}),ue.createElement("span",null,"IBM Cloudant")),ue.createElement("button",{id:"bt_cloudant_login",className:"btn btn-primary btn-large js-button-submit",style:{width:"100%",display:t?"none":"block"},type:"button",onClick:this.showLoginForm,disabled:this.state.isLoading},"Sign in with Cloudant Username"),ue.createElement("div",{style:{display:t?"block":"none"}},e,ue.createElement("form",{onSubmit:this.login},ue.createElement("p",null,ue.createElement("label",{htmlFor:"username"},"Username"),ue.createElement("input",{id:"username",className:"input-block-level",type:"text",name:"name",value:this.state.username,onChange:this.updateUsername,size:"24"})),ue.createElement("p",null,ue.createElement("label",{htmlFor:"password"},"Password"),ue.createElement("input",{id:"password",className:"input-block-level",type:"password",name:"password",onChange:this.updatePassword,value:this.state.password,placeholder:"Password",size:"24"})),this.submitButton(),ue.createElement("a",{className:"forgot-password",href:"#forgot"},"Forgot Password?"))),ue.createElement("div",null,ue.createElement("div",{className:"login-separator"},ue.createElement("div",{className:"login-separator-line-left"},ue.createElement("hr",null)),ue.createElement("span",null,"or"),ue.createElement("div",{className:"login-separator-line-right"},ue.createElement("hr",null))),r,n)),ue.createElement("div",{className:"login-as-other-user"},ue.createElement("a",{href:"https://cloudant.com/sign-in/"},"Sign in with a different account")))))}}]),n}(ue.Component);const qN={Login:BN,ResetPassword:UN,Forgot:MN},VN=function(e){var t=e.section,n=e.token,r=e.ssoError;return ue.createElement("div",{id:"login"},ue.createElement("div",{className:"js-login-wrapper"},function(e,t,n){return"login"===e?ue.createElement(qN.Login,{ssoError:n}):"forgot"===e?ue.createElement(qN.Forgot,null):ue.createElement(qN.ResetPassword,{token:t})}(t,n,r)))};var HN={},GN=se.RouteObject.extend({routes:{reset:"reset","reset/:token":"reset",forgot:"forgot",login:"login",logout:"logout"},reset:function(e){return ue.createElement(VN,{section:"reset",token:e||""})},forgot:function(){return ue.createElement(VN,{section:"forgot"})},login:function(){var e=le.getParams().ssoError;return ue.createElement(VN,{section:"login",ssoError:e})},logout:function(){localStorage.removeItem("ccm-redirect"),se.addNotification({msg:"Signing "+se.session.user().name+" out.",clear:!0});var e=function(){var e=le.i18n.en_US["auth-logged-out"];se.addNotification({msg:e,clear:!0}),document.execCommand&&document.execCommand("ClearAuthenticationCache")};se.session.isIAM()?C(R.getServerUrl("/_iam_session"),le.utils.queryParams({username:"_",password:"_"})).then((function(){sN(),e()})).then((function(){window.location="https://cloud.ibm.com/resources"})):sN().then(e).then((function(){se.navigate("#login")}))},initialize:function(){se.reduxDispatch((function(e){e({type:_e})}))}});HN.RouteObjects=[GN];const FN=HN;var KN="/_api/v2/ibmid_sso/refresh_session",zN=0,WN=void 0;function YN(){zN=new Date((new Date).getTime()+6e5).getTime()}const XN=function(e,t){if(-1!=e.indexOf(KN))return Promise.resolve({url:e,options:t});if(WN)return WN.then((function(){return{url:e,options:t}}));if((new Date).getTime()>zN){var n={url:e,options:t};return(WN=new Promise((function(e){O(KN).then((function(){e(),WN=null,YN()}))}))).then((function(){return n}))}return Promise.resolve({url:e,options:t})},QN=function(){WN=void 0,YN()};FN.session=new pN({allowAdminParty:!1}),se.setSession(FN.session),se.session.onChange((function(){se.session._isIAM=!1,se.session.isLoggedIn()&&w(R.getServerUrl("/_session")).then((function(e){e.info&&"iam"===e.info.authenticated?(FN.session._isIAM=!0,QN(),v(XN)):v(b)})).catch((function(){}))})),se.session.isIAM=function(){return se.session._isIAM},FN.initialize=function(){},Backbone.ajax=function(e){var t=$.Deferred(),n=t.promise({abort:function(){},readyState:0,responseXML:null,responseText:null,responseJSON:null,status:0,statusText:null}),r=e.success,o=e.error;return r&&n.done(r),o&&n.fail(o),function(e,t,n){var r=e.dataType,o=e.data;if("text"!=r&&"html"!=r&&"json"!=r)throw new Error("Unsupported fetch data type: ".concat(r));var a,i={url:e.url,method:e.type?e.type:"GET",body:o,raw:!0};E(i.url,i.method,i).then((function(e){return t.status=e.status,t.statusText=e.statusText,a=e,e.text()})).then((function(e){var o;if(t.responseText=e,t.readyState=4,"json"===r?(t.responseJSON=JSON.parse(e),o=t.responseJSON):o=e,!a.ok)throw new Error("HTTP code "+a.status);n.resolve(o,t.statusText,t)})).catch((function(e){n.reject(t,t.statusText,e)}))}(e,n,t),n};const JN=FN;var $N={};yt.Status=se.Model.extend({url:function(){return R.getServerUrl("/"+this.database.safeID())},initialize:function(e){this.database=e.database,this.loadSuccess=!1},numDocs:function(){return this.get("doc_count")},numDeletedDocs:function(){return this.get("doc_del_count")},isGraveYard:function(){return this.numDeletedDocs()>this.numDocs()},dataSize:function(){return this.get("other")?this.get("other").data_size:this.get("data_size")?this.get("data_size"):this.get("disk_size")?this.get("disk_size"):0},parse:function(e){return this.loadSuccess=!0,e},hasDataSize:function(){return this.get("other")||this.get("data_size")||this.get("disk_size")}}),yt.List=se.Collection.extend({model:yt.Model,documentation:function(){return se.constants.DOC_URLS.ALL_DBS},getDatabaseNames:function(){return this.toArray().map((function(e){return e.get("name")}))},cache:{expires:60},url:function(e){return"apiurl"===e?window.location.origin+"/_all_dbs":R.getServerUrl("/_all_dbs")},parse:function(e){return e.map((function(e){return{id:le.utils.safeURLName(e),name:e}}))},paginated:function(e,t){var n=(e-1)*t,r=e*t;return this.slice(n,r)}}),$N.SharedModel=yt.Model.extend({url:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"server";return se.urls("databaseBaseURL",e,this.safeID())}}),$N.Status=yt.Status.extend({diskSize:function(){return this.get("other").data_size},url:function(){var e=this.get("database").get("name"),t=e.split("/")[0],n=e.replace(t+"/","");return"/_api/v2/user/shared_databases/proxy/"+le.utils.safeURLName(n)+"?remote_account="+le.utils.safeURLName(t)},readAccess:!0,writeAccess:!1,replicationAccess:!1,adminAccess:!1,isAvailable:!1,revokeAccess:function(){this.readAccess=!1,this.writeAccess=!1,this.replicationAccess=!1,this.adminAccess=!1,this.isAvailable=!1},setPermissions:function(){var e=this;this.isAvailable=!0;var t=this.get("name").split("/")[0],n=this.get("name").split("/")[1],r=new $N.SharedDatabasesPermissions({sharer:t,database:n});r.fetchOnce().then((function(){var t,n,o=r.get("cloudant");void 0!==o&&se.cloudantUser.fetchOnce().then((function(){t=se.cloudantUser.get("username"),o[t]&&(n=o[t],o.nobody&&(n=n.concat(o.nobody)),n.forEach(function(e){if("_admin"===e)this.readAccess=!0,this.writeAccess=!0,this.replicationAccess=!0,this.adminAccess=!0;else switch(e){case"_reader":this.readAccess=!0;break;case"_writer":this.writeAccess=!0;break;case"_replicator":this.replicationAccess=!0}}.bind(e)),e.trigger("change"))}))}))}}),$N.SharedDatabases=yt.List.extend({model:$N.SharedModel,perPage:500,page:1,url:function(){return"/_api/v2/user/shared_databases?per_page="+this.perPage},parse:function(e){return this.total=parseInt(e.total,10),e.shared_databases.map((function(e){return{id:encodeURIComponent(e),name:e}}))}}),$N.SharedDatabasesPermissions=yt.Status.extend({initialize:function(e){this.sharer=e.sharer,this.database=e.database},url:function(){return"/_api/v2/user/shared_databases/proxy/"+le.utils.safeURLName(this.database)+"/_security?remote_account="+le.utils.safeURLName(this.sharer)},parse:function(e){return e}});const ZN=$N;var eD={};eD.SharedAllDocs=g_.AllDocs.extend({initialize:function(e,t){this.username=t.username,this.password=t.password,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},urlRef:function(e,t){var n="";return t?_.isEmpty(t)||(n="?"+o().param(t)):this.params&&(n="?"+o().param(this.params)),_.isUndefined(e)&&(e="server"),se.urls("allDocs",e,this.database.safeID(),n)}}),eD.SharedDocument=g_.Doc.extend({initialize:function(e,t){this.database=t.database,this.doc=t.id},copyShared:function(e){return o().ajax({type:"COPY",url:se.urls("document","server",this.database.safeID(),this.doc),headers:{Destination:encodeURIComponent(e)}})}});const tD=eD;var nD=g_.RouteObjects[0],rD=g_.RouteObjects[1],oD=g_.RouteObjects[2],aD=g_.RouteObjects[3],iD=rD.extend({selectedHeader:"Databases",routes:{"database/shared/:user/:database/_all_docs(:extra)":{route:"sharedAllDocs",roles:["_reader","_writer","_admin"]},"database/shared/:user/:database(:extra)":{route:"sharedAllDocs",roles:["_reader","_writer","_admin"]},"database/shared/:user/:database/_changes(:params)":{route:"sharedChanges",roles:["fx_loggedIn"]},"database/shared/:user/:database/_design/:ddoc/_info":{route:"sharedMetadata",roles:["fx_loggedIn"]}},initialize:function(e,t){le.getParams().include_docs=!0,this.username=tD.sharedUsername=t[0],this.databaseName=t[1],this.database=new ZN.SharedModel({id:this.databaseName,name:this.username}),this.user=new yS.User,this.data={username:this.username,database:this.database},this.data.designDocs=new tD.SharedAllDocs(null,{username:this.username,database:this.database,paging:{pageSize:500},params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0,limit:500}});var n=t.slice(1);rD.prototype.initialize.call(this,e,n)},getAllDatabases:function(){return new ZN.SharedDatabases},sharedAllDocs:function(e,t,n){return this.username=tD.sharedUsername=e,this.globalAllDocs(t,n)},sharedChanges:function(){return this.changes()},sharedMetadata:function(e,t,n){return this.designDocMetadataNoPartition(t,n)}}),sD=oD.extend({routes:{"database/shared/:user/:database/_design/:ddoc/_view/:viewName":{route:"sharedView",roles:["fx_loggedIn"]},"database/shared/:user/:database/_design/:ddoc/_view/:view/edit":{route:"editSharedView",roles:["fx_loggedIn"]},"database/shared/:user/:database/new_view":"sharedNewViewEditor","database/shared/:user/:database/new_view/:designDoc":"sharedNewViewEditor"},initialize:function(e,t){var n=t[1];this.username=tD.sharedUsername=t[0],this.databaseName=n,this.database=new ZN.SharedModel({id:this.databaseName,name:this.username}),this.createDesignDocsCollection(),this.addSidebar()},sharedView:function(e,t,n,r){return this.showGlobalView(t,n,r)},editSharedView:function(e,t,n,r){return this.editViewNoPartition(t,n,r)},sharedNewViewEditor:function(e,t,n){return this.createViewNoPartition(t,n)}}),cD=aD.extend({routes:{"database/shared/:user/:database/_index":{route:"sharedCreateIndex",roles:["fx_loggedIn"]},"database/shared/:user/:database/_find":{route:"sharedFindUsingIndex",roles:["fx_loggedIn"]}},initialize:function(e,t){this.username=tD.sharedUsername=t[0],this.databaseName=t[1],this.database=new ZN.SharedModel({id:this.databaseName,name:this.username})},sharedFindUsingIndex:function(){var e=arguments[1];return this.findUsingIndexNoPartition.apply(this,[e])},sharedCreateIndex:function(){var e=arguments[1];return this.createIndexNoPartition.apply(this,[e])}}),lD=nD.extend({selectedHeader:"Databases",routes:{"database/shared/:user/:database/:doc/code_editor":"sharedCodeEditor","database/shared/:user/:database/:doc":"sharedCodeEditor","database/shared/:user/:database/_design/:ddoc":"sharedShowDesignDoc","database/shared/:user/:database/_new":"sharedNewDocument"},initialize:function(e,t){le.getParams().include_docs=!0,this.username=tD.sharedUsername=t[0],this.databaseName=t[1],this.docID=t[2]||"new",this.isNewDoc=!1,this.database=new ZN.SharedModel({id:this.databaseName,name:this.username}),this.user=new yS.User;var n=t.slice(1);nD.prototype.initialize.call(this,e,n)},sharedCodeEditor:function(e,t,n){this.databaseName!==t&&(this.databaseName=t,this.database=new ZN.SharedModel({id:this.databaseName,name:this.username})),this.doc=new tD.SharedDocument({_id:n},{name:this.username,database:this.database,id:n}),"new"===n&&(this.doc=new g_.NewDoc(null,{database:this.database})),Wm({doc:this.doc,database:this.database});var r=[{type:"back",link:se.urls("allDocs","app",this.database.id)},{name:n+" ("+this.username+")"}];return ue.createElement(tn,{crumbs:r,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),component:ue.createElement(Vy,{database:this.database,isNewDoc:this.isNewDoc,previousUrl:"#/"+this.database.url("app")})})},sharedShowDesignDoc:function(e,t,n){return this.showDesignDoc(t,n)},sharedNewDocument:function(e,t){return this.sharedCodeEditor(e,t,"new")},sharedDuplicateDoc:function(e){var t=this.doc=new tD.SharedDocument({_id:this.docID},{name:this.username,database:this.database,id:this.docID}),n=this.database,r=this.username;this.docID=e,t.copyShared(e).then((function(){t.set({_id:e}),se.navigate("/database/shared/"+r+"/"+n.safeID()+"/"+le.utils.safeURLName(e),{trigger:!0}),se.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: "+e.responseText+".";se.addNotification({msg:t,type:"error"})}))}});tD.RouteObjects=[lD,sD,iD,cD];const uD=tD,dD=[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}],pD=[{code:{selector:{_id:{$gt:"0"}},fields:["_id","_rev"],sort:[{_id:"asc"}]}},{code:{selector:{_id:{$gt:null}}}}];function fD(e){return e&&(e=e+"&remote_account="+uD.sharedUsername),e||(e="?remote_account="+uD.sharedUsername),e}or.getPreviousPageForDoc=function(e,t){var n=e.url("index"),r=n,o=se.router.lastPages;return!t&&o.length>=2&&(/_new$/.test(o[1])?r=o[0]:/backups/.test(o[1])?(r=o[0])+"/backups"===o[1]&&(r=n):r=o[1]),r},uD.addRemoteAccount=fD;var hD=R.getServerUrl("/_api/v2/user/shared_databases/proxy/");uD.proxyUrl=hD,uD.sharedUrlPaths={host:function(){return"https://"+uD.sharedUsername+".cloudant.com/"},userHash:function(){return"database/shared/"+uD.sharedUsername+"/"},databaseBaseURL:{server:function(e){var t=fD();return hD+e+t},app:function(e){return uD.sharedUrlPaths.userHash()+e}},allDBs:{app:function(){return"shared-database"}},allDocs:{server:function(e,t){return t=fD(t),hD+e+"/_all_docs"+t},app:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_all_docs"+t},apiurl:function(e,t){return uD.sharedUrlPaths.host()+e+"/_all_docs"+t}},allDocsSanitized:{server:function(e,t){return e=encodeURIComponent(e),t=fD(t),hD+e+"/_all_docs"+t},app:function(e,t){return e=encodeURIComponent(e),uD.sharedUrlPaths.userHash()+e+"/_all_docs"+t},apiurl:function(e,t){return e=encodeURIComponent(e),uD.sharedUrlPaths.host()+"/"+e+"/_all_docs"+t}},bulk_docs:{server:function(e,t){return t=fD(t),hD+e+"/_bulk_docs"+t},app:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_bulk_docs"+t},apiurl:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_bulk_docs"+t}},changes:{server:function(e,t){return t=fD(t),hD+e+"/_changes"+t},app:function(e,t){return"/"+uD.sharedUrlPaths.userHash()+e+"/_changes"+t},apiurl:function(e,t){return uD.sharedUrlPaths.host()+e+"/_changes"+t}},designDocs:{server:function(e,t){var n=fD(n);return hD+e+"/"+t+"/_info"+n},app:function(e,t,n){return uD.sharedUrlPaths.userHash()+e+"/_design/"+le.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return uD.sharedUrlPaths.host()+e+"/_design"+le.utils.safeURLName(t)+"/_info"}},view:{server:function(e,t,n,r){var o=fD(o);return hD+e+"/_design/"+n+"/_view/"+r+o},app:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_design/"+le.utils.safeURLName(t)+"/_view/"},apiurl:function(e,t,n,r){return uD.sharedUrlPaths.host()+e+"/_design/"+n+"/_view/"+r},showNewlySavedView:function(e,t,n){return uD.sharedUrlPaths.userHash()+e+"/"+t+"/_view/"+n},edit:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/"+n+"/_view/"+r}},permissions:{server:function(e){var t=fD(t);return hD+e+"/_security"+t},app:function(e){return"/"+uD.sharedUrlPaths.userHash()+e+"/permissions"},apiurl:function(e){return uD.sharedUrlPaths.host()+e+"/_security"}},document:{server:function(e,t,n){var r=fD(n);return hD+e+"/"+t+r},attachment:function(e,t,n,r){return r=fD(r),hD+e+"/"+t+"/"+n+r},app:function(e,t){return"/"+uD.sharedUrlPaths.userHash()+e+"/"+t},apiurl:function(e,t){return uD.sharedUrlPaths.host()+e+"/"+t},"web-index":function(e,t){return"/"+uD.sharedUrlPaths.userHash()+e+"/"+t}},new:{newDocument:function(e){return"/"+uD.sharedUrlPaths.userHash()+e+"/_new"},newView:function(e){return"/"+uD.sharedUrlPaths.userHash()+e+"/new_view"},newSearch:function(e){return"/"+uD.sharedUrlPaths.userHash()+e+"/new_search"},addView:function(e,t,n){return"/"+uD.sharedUrlPaths.userHash()+e+"/new_view/"+n},addSearch:function(e,t){return"/"+uD.sharedUrlPaths.userHash()+e+"/new_search/"+t}},base:{server:function(e){return uD.sharedUrlPaths.host()+e+"/"},app:function(e){return"/"+uD.sharedUrlPaths.userHash()+e+"/"}},mango:{"index-server":function(e,t){return t=fD(t),hD+e+"/_index"+t},"index-apiurl":function(e,t,n){return uD.sharedUrlPaths.host()+e+"/_index"+n},"index-app":function(e,t,n){return n||(n=""),"/"+uD.sharedUrlPaths.userHash()+e+"/_index"+n},"index-server-bulk-delete":function(e,t){return t=fD(t),hD+e+"/_index/_bulk_delete"+t},"query-server":function(e,t,n){return n=fD(n),hD+e+"/_find"+n},"query-apiurl":function(e,t,n){return uD.sharedUrlPaths.host()+e+"/_index"+n},"query-app":function(e,t,n){return n||(n=""),"/"+uD.sharedUrlPaths.userHash()+e+"/_find"+n},"explain-server":function(e,t,n){return n=fD(n),hD+e+"/_explain"+n},"explain-apiurl":function(e){return uD.sharedUrlPaths.host()+e+"/_explain"}},replication:{app:function(e){return"#/replication/shared/"+uD.sharedUsername+"/"+e}}},uD.initialize=function(){se.registerExtension("urls:interceptors",(function(e,t){if(!/database\/shared\//.test(window.location.hash))return!1;if(!uD.sharedUrlPaths[e][t])return!1;var n=Array.prototype.slice.call(arguments,2);return uD.sharedUrlPaths[e][t].apply(null,n)})),se.registerExtension("sidebar:viewFilters",(function(e){var t=e.get("doc");return!(t&&!_.isUndefined(t.language)&&"query"===t.language)})),se.registerExtension("mango:indexTemplates",dD),se.registerExtension("mango:queryHistory",pD)};const mD=uD,yD="PERMISSIONS_DB_SECURITY_RESET",bD="PERMISSIONS_DB_SECURITY_RETURNED",gD="PERMISSIONS_API_GENERATE_KEY_START",_D="PERMISSIONS_API_KEY_GENERATED",vD="PERMISSIONS_SECURITY_DATA_ERROR",ED="PERMISSIONS_SET_PERMISSIONS_UPDATE_PENDING",wD="PERMISSIONS_CLEAR_PENDING_UPDATE",SD="PERMISSIONS_SHARED_DB_NO_ACCESS",OD="PERMISSIONS_SHARED_DB_SECURITY_RETURNED",ND="PERMISSIONS_SET_DELETE_USERNAME_PENDING",DD="PERMISSIONS_TOGGLE_BULK_SELECT",CD="PERMISSIONS_TOGGLE_SINGLE_ROW",PD="PERMISSIONS_SHOW_BULK_DELETE_MODAL",RD="PERMISSIONS_HIDE_BULK_DELETE_MODAL",kD="PERMISSIONS_SET_SEARCH_FILTER";const TD={updateRoles:function(e,t,n,r){return r?(-1===t.indexOf(n)&&t.push(n),"_admin"===n&&(t=e)):t=t.filter((function(e){return e!==n})),t}},xD=function(){return["_admin","_reader","_writer","_replicator"]},ID=function(){return["_reader"]},AD="Unauthenticated connections";function LD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MD(){return MD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MD.apply(this,arguments)}var UD=0;function BD(e){return w(se.urls("permissions","server",e))}function qD(e,t){var n=R.getServerUrl("/_api/v2/db/"+e+"/_security");return N(n,t)}function VD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;se.dispatch({type:bD,options:{security:e,pendingUpdateCounter:t}})}function HD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;se.addNotification({msg:"There was an error updating the permissions for this database.",type:"error",clear:!0}),null!==e&&se.dispatch({type:wD,options:{pendingUpdateCounter:e}})}const GD={initPermissions:function(e){se.dispatch({type:yD,options:{isSharedDB:!1}}),BD(e).then((function(e){if(e.error)throw new Error(e.error);se.dispatch({type:bD,options:{security:e}})})).catch((function(){se.dispatch({type:vD})}))},initSharedPermissions:function(e){se.dispatch({type:yD,options:{isSharedDB:!0}}),BD(e).then((function(e){se.dispatch({type:OD,options:{security:e}})})).catch((function(){se.dispatch({type:SD})}))},getSecurityData:BD,saveSecurityData:qD,generateAPIKey:function(e,t){se.dispatch({type:gD}),O(le.hostDash+"/api_keys").then((function(n){if(n.error)throw new Error(n.error);var r=n.key,o=n.password;e.cloudant[r]=ID(),qD(t,e).then((function(t){if(t.error)throw new Error(t.error);VD(e),se.addNotification({msg:"The API Key <code>"+r+"</code> has been created and given <b>_reader</b> permissions on this database.",type:"success",escape:!1,clear:!0})})).catch((function(){HD()})),se.dispatch({type:_D,options:{key:r,password:o}})})).catch((function(e){se.addNotification({msg:e.message,type:"error",clear:!0})}))},grantPermissions:function(e,t,n){e.cloudant[t]=ID(),qD(n,e).then((function(n){if(n.error)throw new Error(n.error);VD(e),se.addNotification({msg:"<code>"+t+"</code> has been given <b>_reader</b> permissions on this database.",type:"success",escape:!1,clear:!0})})).catch((function(){HD()}))},clearPermissions:function(e,t,n){var r=++UD;se.dispatch({type:ND,options:{pendingUpdateCounter:r,username:t}});var o=MD({},e);delete o.cloudant[t],qD(n,o).then((function(t){if(t.error)throw new Error(t.error);VD(e,r),se.addNotification({msg:"Database permissions have been saved.",type:"success",escape:!1,clear:!0})})).catch((function(){HD(r)}))},setPermission:function(e,t,n,r,o,a){var i=MD({},e);i.cloudant[r]=TD.updateRoles(n,i.cloudant[r],o,a);var s=++UD;se.dispatch({type:ED,options:{pendingUpdateCounter:s,username:r,role:o,isEnabled:a}}),qD(t,i).then((function(e){if(e.error)throw new Error(e.error);VD(i,s),se.addNotification({msg:"Database permissions have been saved.",type:"success",escape:!1,clear:!0})})).catch((function(){HD(s)}))},toggleBulkSelect:function(){se.dispatch({type:DD})},toggleRow:function(e,t){se.dispatch({type:CD,options:{username:e,isChecked:t}})},showConfirmBulkDeleteModal:function(){se.dispatch({type:PD})},hideConfirmBulkDeleteModal:function(){se.dispatch({type:RD})},bulkDelete:function(e,t,n){var r=this,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LD(Object(n),!0).forEach((function(t){jD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);n.forEach((function(e){delete o.cloudant[e]})),qD(t,o).then((function(){VD(o),r.hideConfirmBulkDeleteModal(),se.addNotification({msg:"The database permissions have been updated.",type:"success",escape:!1,clear:!0})}),(function(){HD(),r.hideConfirmBulkDeleteModal()}))},setSearchFilter:function(e){se.dispatch({type:kD,options:{filter:e}})}};var FD={};function KD(e){return KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KD(e)}function zD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YD(e,t,n){return t&&WD(e.prototype,t),n&&WD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function XD(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QD(e,t)}function QD(e,t){return QD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},QD(e,t)}function JD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ZD(e);if(t){var o=ZD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $D(this,n)}}function $D(e,t){if(t&&("object"===KD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ZD(e){return ZD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ZD(e)}FD.DatabasePermissionsStore=se.Store.extend({initialize:function(){this._isAuthenticated=!1,this.reset()},reset:function(){this._mayAccessPermissionsPage=!1,this._virtualHostsLoaded=!1,this._errorLoadingPermissions=!1,this._errorLoadingVirtualHosts=!1,this._allVirtualHosts=[],this._filteredVirtualHosts=[],this._isGeneratingAPIKey=!1,this._permissionsReturned=!1,this._availableRoles=xD(),this._permissionTableRows=[],this._apiKey=null,this._apiPassword=null,this._isSharedDB=!1,this._pendingPermissionUpdates=[],this._bulkSelectChecked=!1,this._checkedRows=[],this._userList=[],this._bulkDeleteModalVisible=!1,this._searchFilter=""},isLoaded:function(){return this._isAuthenticated&&this._permissionsReturned},setAuthenticated:function(e){this._isAuthenticated=!0,this._currentUser=e,this._permissionsReturned&&this.parsePermissions(this._security)},mayAccessPermissionsPage:function(){return this._mayAccessPermissionsPage},setMayAccess:function(e){this._mayAccessPermissionsPage=e},setIsSharedDB:function(e){this._isSharedDB=e},setPermissionsReturned:function(){this._permissionsReturned=!0},parsePermissions:function(e){var t=this;if(this._permissionsReturned=!0,this._security=e,this._filteredVirtualHosts=[],this._isSharedDB&&this._isAuthenticated&&(this.setMayAccess(!1),e&&e.cloudant&&-1!==_.union(e.cloudant[this._currentUser],e.cloudant.nobody).indexOf("_admin")&&this.setMayAccess(!0)),this._isAuthenticated&&this._mayAccessPermissionsPage)if(this._permissionTableRows=[{username:this._currentUser,specialRow:"currentUser",roles:xD()}],e.cloudant){this._availableRoles=_.reduce(e.cloudant,(function(e,t){return _.union(e,t)}),xD()),this._permissionTableRows[0].roles=this._availableRoles;var n=Object.keys(e.cloudant).map((function(t){return{username:t,roles:e.cloudant[t]}})),r=(n=n.filter((function(e){return""!==e.username}))).find((function(e){return"nobody"===e.username})),o=r&&r.roles?r.roles:[];n=(n=(n=n.filter((function(e){return"nobody"!==e.username}))).filter((function(e){return e.username!==t._currentUser}))).sort((function(e,t){return e.username.localeCompare(t.username)})),this._userList=n,this._permissionTableRows=_.union(this._permissionTableRows,n);var a=this._allVirtualHosts.map((function(e){return e.host}));this._permissionTableRows=this._permissionTableRows.filter((function(e){var n=-1!==a.indexOf(e.username)||e.username.indexOf("cloudant.com")>-1;return n&&t._filteredVirtualHosts.push(e),!n})),this._permissionTableRows.push({username:"nobody",specialRow:"default",roles:o})}else this._permissionTableRows.push({username:"nobody",specialRow:"default",roles:[]})},getAvailableRoles:function(){return this._availableRoles},getPermissionTableRows:function(){var e=this.includePendingUpdates(this._permissionTableRows);if(!this._searchFilter)return e;var t=new RegExp(this._searchFilter,"i");return e.filter((function(e){return"nobody"!==e.username&&t.test(e.username)}))},getDatabaseSecurity:function(){var e=this,t={};return this._permissionTableRows.forEach((function(n){var r=n.username,o=n.roles;(e._isSharedDB||e._currentUser!=r)&&(t[r]=o)})),this._filteredVirtualHosts.forEach((function(e){var n=e.username,r=e.roles;t[n]=r})),this._pendingPermissionUpdates.filter((function(e){return"update"===e.changeType})).forEach((function(n){var r=n.username,o=n.role,a=n.isEnabled;t[r]=TD.updateRoles(e.getAvailableRoles(),t[r],o,a)})),this._pendingPermissionUpdates.filter((function(e){return"delete"===e.changeType})).forEach((function(e){var n=e.username;delete t[n]})),{_id:"security",cloudant:t}},isGeneratingAPIKey:function(){return this._isGeneratingAPIKey},setAPIKey:function(e,t){this._isGeneratingAPIKey=!1,this._apiKey=e,this._apiPassword=t},getAPIKey:function(){return this._apiKey},getAPIPassword:function(){return this._apiPassword},hadErrorLoadingPermissions:function(){return this._errorLoadingPermissions},hadErrorLoadingVirtualHosts:function(){return this._errorLoadingVirtualHosts},setVirtualHosts:function(e,t){this._virtualHostsLoaded=!0,this._errorLoadingVirtualHosts=!e,t&&(this._allVirtualHosts=t),this._permissionsReturned&&this.parsePermissions(this._security)},getVirtualHosts:function(){return this._virtualHostsLoaded&&this._permissionsReturned?this.includePendingUpdates(this._filteredVirtualHosts):[]},setPendingPermissionsUpdate:function(e){var t=e.pendingUpdateCounter,n=e.username,r=e.role,o=e.isEnabled;this._pendingPermissionUpdates.push({changeType:"update",counter:t,username:n,role:r,isEnabled:o})},setPendingDeleteUser:function(e){var t=e.username,n=e.pendingUpdateCounter;this._pendingPermissionUpdates.push({changeType:"delete",counter:n,username:t})},includePendingUpdates:function(e){var t=this,n=o().extend(!0,[],e);return n=n.map((function(e){return t._pendingPermissionUpdates.filter((function(t){return t.username===e.username&&"update"===t.changeType})).forEach((function(n){e.roles=TD.updateRoles(t.getAvailableRoles(),e.roles,n.role,n.isEnabled)})),e})),this._pendingPermissionUpdates.filter((function(e){return"delete"===e.changeType})).forEach((function(e){var t=e.username;n=n.filter((function(e){return e.username!==t}))})),n},applyPendingUpdate:function(e){var t=this._pendingPermissionUpdates.find((function(t){return t.counter===e}));if(t){var n=this._permissionTableRows.find((function(e){return e.username===t.username}));n||(n=this._filteredVirtualHosts.find((function(e){return e.username===t.username}))),"update"===t.changeType?n.roles=TD.updateRoles(this.getAvailableRoles(),n.roles,t.role,t.isEnabled):(this._permissionTableRows=this._permissionTableRows.filter((function(e){return e.username!==t.username})),this._filteredVirtualHosts=this._filteredVirtualHosts.filter((function(e){return e.username!==t.username}))),this.clearPendingUpdate(e)}},clearPendingUpdate:function(e){e&&(this._pendingPermissionUpdates=this._pendingPermissionUpdates.filter((function(t){return t.counter!==e})))},toggleBulkSelect:function(){this._bulkSelectChecked=!this._bulkSelectChecked,this._bulkSelectChecked?this._checkedRows=this._userList.map((function(e){return e.username})):this._checkedRows=[]},isBulkSelectChecked:function(){return this._bulkSelectChecked},getCheckedRows:function(){return this._checkedRows},toggleSingleRow:function(e,t){t?this._checkedRows.push(e):this._checkedRows=this._checkedRows.filter((function(t){return t!==e})),this._checkedRows.length||(this._bulkSelectChecked=!1)},isBulkDeleteModalVisible:function(){return this._bulkDeleteModalVisible},getNumCustomUsers:function(){return this._userList.length},getSearchFilter:function(){return this._searchFilter},dispatch:function(e){switch(e.type){case iE:this.setAuthenticated(e.options.username);break;case gE:this.setVirtualHosts(e.options.success,e.options.virtualHosts);break;case yD:this.reset(),this.setIsSharedDB(e.options.isSharedDB);break;case bD:this.setMayAccess(!0),this.parsePermissions(e.options.security),this.applyPendingUpdate(e.options.pendingUpdateCounter);break;case OD:this.parsePermissions(e.options.security),this.applyPendingUpdate(e.options.pendingUpdateCounter);break;case gD:this._isGeneratingAPIKey=!0;break;case _D:this.setAPIKey(e.options.key,e.options.password);break;case vD:this._permissionsReturned=!0,this._errorLoadingPermissions=!0;break;case SD:this._permissionsReturned=!0,this.setMayAccess(!1);break;case ED:this.setPendingPermissionsUpdate(e.options);break;case wD:this.clearPendingUpdate(e.options.pendingUpdateCounter);break;case ND:this.setPendingDeleteUser(e.options);break;case DD:this.toggleBulkSelect();break;case CD:this.toggleSingleRow(e.options.username,e.options.isChecked);break;case PD:this._bulkDeleteModalVisible=!0;break;case RD:this._bulkDeleteModalVisible=!1;break;case kD:this._searchFilter=e.options.filter;break;default:return}this.triggerChange()}}),FD.databasePermissionsStore=new FD.DatabasePermissionsStore,FD.databasePermissionsStore.dispatchToken=se.dispatcher.register(FD.databasePermissionsStore.dispatch.bind(FD.databasePermissionsStore));var eC=Li.ConfirmationModal,tC=FD.databasePermissionsStore,nC=IE.accountStore,rC=pi.LoadLines,oC=pi.BulkActionComponent,aC=pi.Copy,iC=function(e){XD(n,e);var t=JD(n);function n(e){var r;return zD(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return YD(n,[{key:"componentDidMount",value:function(){tC.on("change",this.onChange,this),nC.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){tC.off("change",this.onChange),nC.off("change",this.onChange)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"getStoreState",value:function(){return{isLoaded:tC.isLoaded(),errorLoadingPermissions:tC.hadErrorLoadingPermissions(),errorLoadingVirtualHosts:tC.hadErrorLoadingVirtualHosts(),permissionTableRows:tC.getPermissionTableRows(),availableRoles:tC.getAvailableRoles(),virtualHosts:tC.getVirtualHosts(),dbSecurity:tC.getDatabaseSecurity(),isGenerating:tC.isGeneratingAPIKey(),apiKey:tC.getAPIKey(),apiPassword:tC.getAPIPassword(),mayAccess:tC.mayAccessPermissionsPage(),bulkSelectChecked:tC.isBulkSelectChecked(),checkedRows:tC.getCheckedRows(),confirmBulkDeleteModalVisible:tC.isBulkDeleteModalVisible(),numCustomUsers:tC.getNumCustomUsers(),searchFilter:tC.getSearchFilter(),legacyCredsEnabled:nC.isLegacyCredsEnabled()}}},{key:"render",value:function(){var e=this.props,t=e.databaseName,n=e.isSharedDB,r=e.sharer,o=this.state,a=o.isLoaded,i=o.errorLoadingPermissions,s=o.dbSecurity,c=o.permissionTableRows,l=o.availableRoles,u=o.isGenerating,d=o.apiKey,p=o.apiPassword,f=o.mayAccess,h=o.errorLoadingVirtualHosts,m=o.virtualHosts,y=o.bulkSelectChecked,b=o.checkedRows,g=o.confirmBulkDeleteModalVisible,v=o.numCustomUsers,E=o.searchFilter,w=o.legacyCredsEnabled;return n&&r&&c.unshift({username:r,roles:xD()}),a?i?ue.createElement("p",{className:"permissions-data-load-error"},"There was an error loading the permissions data."):f?w?ue.createElement("div",{className:"permissions-page"},ue.createElement(cC,{isSharedDB:n,sharer:r,databaseName:t,rows:c,errorLoadingVirtualHosts:h,virtualHosts:m,availableRoles:l,onDelete:function(e){return GD.clearPermissions(s,e,t)},onUpdate:function(e,n,r){return GD.setPermission(s,t,l,e,n,r)},bulkSelectChecked:y,checkedRows:b,numCustomUsers:v,searchFilter:E}),ue.createElement(sC,{existingUsers:_.keys(s.cloudant),onSubmit:function(e){return GD.grantPermissions(s,e,t)}}),ue.createElement(uC,{isGenerating:u,apiKey:d,apiPassword:p,onGenerate:function(){return GD.generateAPIKey(s,t)}}),ue.createElement(eC,{title:"Confirm Deletion",visible:g,text:"Are you sure you want to delete these rows?",onClose:GD.hideConfirmBulkDeleteModal,onSubmit:function(){return GD.bulkDelete(s,t,b)},buttonClass:"btn-danger",successButtonLabel:"Delete"})):ue.createElement("p",{className:"permissions-iam-notice"},ue.createElement("p",null,"Access to this account can be configured via IBM Cloud Identity and Access Management (IAM) at ",ue.createElement("a",{href:"https://cloud.ibm.com/iam",target:"_blank",rel:"noopener noreferrer"},"https://cloud.ibm.com/iam"),"."),ue.createElement("p",null,"You can learn more about IAM at ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/account?topic=account-iamoverview",target:"_blank",rel:"noopener noreferrer"},"https://cloud.ibm.com/docs/account?topic=account-iamoverview"),".")):ue.createElement("p",{className:"permissions-no-access"},"You have not been granted access to view this page."):ue.createElement(rC,null)}}]),n}(ue.Component);iC.propTypes={databaseName:kt().string.isRequired,isSharedDB:kt().bool.isRequired,sharer:kt().string};var sC=function(e){XD(n,e);var t=JD(n);function n(e){var r;return zD(this,n),(r=t.call(this,e)).state={newUser:""},r}return YD(n,[{key:"submit",value:function(e){e.preventDefault(),"nobody"!==this.state.newUser?-1===this.props.existingUsers.indexOf(this.state.newUser)?this.props.onSubmit(this.state.newUser):se.addNotification({msg:"The <code>"+this.state.newUser+"</code> user has already been added.",type:"info",escape:!1,clear:!0}):se.addNotification({msg:"The <code>nobody</code> username is special. Please enter a different username.",type:"error",escape:!1,clear:!0})}},{key:"render",value:function(){var e=this;return ue.createElement("form",{className:"grant-permissions-form flex-layout flex-row",onSubmit:this.submit.bind(this)},ue.createElement("label",{htmlFor:"grant-rights-field"},"Grant database permissions to:"),ue.createElement("input",{type:"text",id:"grant-rights-field",className:"flex-body",placeholder:"Username or API Key",value:this.state.user,onChange:function(t){return e.setState({newUser:t.target.value})}}),ue.createElement("input",{type:"submit",className:"btn btn-secondary",disabled:""===this.state.newUser,value:"Grant Permissions"}))}}]),n}(ue.Component);sC.propTypes={onSubmit:kt().func.isRequired,existingUsers:kt().array.isRequired};var cC=function(e){XD(n,e);var t=JD(n);function n(){return zD(this,n),t.apply(this,arguments)}return YD(n,[{key:"getColHeaders",value:function(e){return e.map((function(e,t){return"_creator"===e?ue.createElement("th",{className:"muted",title:"The _creator role has been deprecated",key:t}):ue.createElement("th",{key:t,className:"rights-col"},e)}))}},{key:"getRows",value:function(e){var t=this.props,n=t.availableRoles,r=t.onDelete,o=t.onUpdate,a=t.isSharedDB,i=t.sharer,s=t.checkedRows,c=t.numCustomUsers,l=t.searchFilter;return e.map((function(e,t){var u=-1!==s.indexOf(e.username);return ue.createElement(lC,{key:t,isSharedDB:a,sharer:i,user:e,availableRoles:n,isChecked:u,onDelete:r,onUpdate:o,showBulkSelectCol:c>0&&""===l})}))}},{key:"getVirtualHostsSection",value:function(){var e=this.props,t=e.errorLoadingVirtualHosts,n=e.virtualHosts;return t?ue.createElement("tbody",{className:"virtual-hosts-section"},ue.createElement("tr",null,ue.createElement("td",{colSpan:"6",className:"virtual-hosts-section-load-error"},"There was an error loading your virtual hosts."))):n.length?ue.createElement("tbody",{className:"virtual-hosts-section"},ue.createElement("tr",null,ue.createElement("td",{colSpan:"6",className:"virtual-hosts-section-header"},ue.createElement("strong",null,"Virtual Hosts"),ue.createElement("span",null,"- default permissions for this database when requests come through one of your virtual hosts"))),this.getRows(n)):null}},{key:"getBulkActions",value:function(){var e=this.props,t=e.bulkSelectChecked,n=e.checkedRows,r=e.numCustomUsers,o=e.searchFilter;return 0===r||""!==o?null:ue.createElement(oC,{hasSelectedItem:n.length>0,removeItem:GD.showConfirmBulkDeleteModal,selectAll:function(){},toggleSelect:GD.toggleBulkSelect,isChecked:void 0!==t&&t,disabled:!1})}},{key:"getFilter",value:function(){var e=this.props,t=e.numCustomUsers,n=e.searchFilter;return 0===t?null:ue.createElement("div",{className:"flex-layout flex-row bulk-action-row"},ue.createElement("div",null),ue.createElement("div",{style:{position:"relative"}},ue.createElement("i",{className:"fonticon-filter"}),ue.createElement("input",{type:"text",value:n,placeholder:"Filter",className:"searchFilter",onChange:function(e){return GD.setSearchFilter(e.target.value)}})),ue.createElement("div",null))}},{key:"getTable",value:function(){var e=this.props,t=e.availableRoles,n=e.numCustomUsers,r=e.rows,o=e.searchFilter;return 0===r.length?ue.createElement("p",{className:"no-permissions-results"},"No results. Please change your filter."):ue.createElement("table",{className:"permissions-table table table-striped"},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",{className:"names",colSpan:0===n||""!==o?"1":"2"},this.getBulkActions()),this.getColHeaders(t),ue.createElement("th",{className:"th-delete-col"}))),ue.createElement("tbody",null,this.getRows(r)))}},{key:"render",value:function(){return ue.createElement("div",null,ue.createElement("p",{className:"permissions-intro"},"Cloudant users and API keys with permissions on ",ue.createElement("code",null,decodeURIComponent(this.props.databaseName)),"."),this.getFilter(),this.getTable())}}]),n}(ue.Component);cC.propTypes={isSharedDB:kt().bool.isRequired,errorLoadingVirtualHosts:kt().bool.isRequired,databaseName:kt().string.isRequired,rows:kt().array.isRequired,availableRoles:kt().array.isRequired,onDelete:kt().func.isRequired,onUpdate:kt().func.isRequired,virtualHosts:kt().array.isRequired,sharer:kt().string,bulkSelectChecked:kt().bool.isRequired,checkedRows:kt().array.isRequired,numCustomUsers:kt().number.isRequired,searchFilter:kt().string.isRequired};var lC=function(e){XD(n,e);var t=JD(n);function n(){return zD(this,n),t.apply(this,arguments)}return YD(n,[{key:"getRoleColumns",value:function(){var e=this.props,t=e.user,n=e.availableRoles,r=e.onUpdate,o=e.isSharedDB,a=e.sharer,i=-1!==t.roles.indexOf("_admin")?"admin":"";return n.map((function(e,n){var s=-1!==t.roles.indexOf(e),c=!1;return"_creator"===e&&(c=!0),_.has(t,"specialRow")&&"currentUser"===t.specialRow&&(c=!0),o&&a===t.username&&(c=!0),ue.createElement("td",{key:n},ue.createElement("input",{type:"checkbox",className:i,checked:s,disabled:c,value:"checked",onChange:function(n){return r(t.username,e,n.target.checked)}}))}))}},{key:"getCheckboxCol",value:function(){var e=this.props,t=e.user,n=e.isSharedDB,r=e.sharer,o=e.isChecked;if(!e.showBulkSelectCol)return null;var a=n&&t.username===r;return ue.createElement("td",{className:"bulk-select-col"},t.specialRow||a?null:ue.createElement("input",{type:"checkbox",className:"permissions-row-cb","data-cb-user":t.username,checked:o,onChange:function(){return GD.toggleRow(t.username,!o)}}))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.onDelete,r=e.isSharedDB,o=e.sharer,a=t.username,i="";"nobody"===t.username&&(a=AD,i="other-users");var s=r&&t.username===o,c=s?ue.createElement("span",null,"- ",ue.createElement("i",null,"DB Owner")):null;return ue.createElement("tr",null,this.getCheckboxCol(),ue.createElement("td",{"data-name":t.username,className:i},a," ",c),this.getRoleColumns(),ue.createElement("td",{className:"delete-row"},t.specialRow||s?null:ue.createElement("span",{className:"fonticon-cancel delete-user",onClick:function(){return n(t.username)}})))}}]),n}(ue.Component);lC.propTypes={user:kt().object.isRequired,availableRoles:kt().array.isRequired,isSharedDB:kt().bool.isRequired,onDelete:kt().func.isRequired,isChecked:kt().bool.isRequired,showBulkSelectCol:kt().bool.isRequired};var uC=function(e){XD(n,e);var t=JD(n);function n(){return zD(this,n),t.apply(this,arguments)}return YD(n,[{key:"showCopiedMessage",value:function(){se.addNotification({type:"success",msg:"The password has been copied to your clipboard.",clear:!0})}},{key:"getKeyInfo",value:function(){var e=this.props,t=e.apiKey,n=e.apiPassword;return t&&n?ue.createElement("div",{id:"key-info",className:"alert alert-info"},ue.createElement("div",null,ue.createElement("strong",null,"Key:"),ue.createElement("span",{id:"generated-api-key"},t)),ue.createElement("div",null,ue.createElement("strong",null,"Password:"),ue.createElement("span",{id:"generated-api-password"},n),ue.createElement(aC,{uniqueKey:t,onClipboardClick:this.showCopiedMessage,text:n})),ue.createElement("p",null,"Please make a note of the password. For security reasons, we will not store it for you to retrieve in the future.")):null}},{key:"render",value:function(){var e=this.props,t=e.isGenerating,n=e.onGenerate;return ue.createElement("div",{className:"api-keys"},ue.createElement("div",{className:"api-keys__generate-form"},ue.createElement("p",null,ue.createElement("b",null,"API keys")," can grant programmatic access to Cloudant databases. If you generate an API key, you can also manage that key's permissions."),ue.createElement("button",{className:"btn btn-tertiary",id:"generate-api",onClick:n,disabled:t},"Generate API Key")),this.getKeyInfo())}}]),n}(ue.Component);uC.propTypes={onGenerate:kt().func.isRequired,isGenerating:kt().bool.isRequired,apiKey:kt().string,apiPassword:kt().string};const dC={PermissionsPageController:iC,PermissionsTable:cC,GrantPermissionsForm:sC,UserRow:lC,APIKeys:uC},pC=function(e){var t=e.isSharedDB,n=e.docURL,r=e.database,o=e.sharer,a=e.endpoint,i=e.dbName,s=e.dropDownLinks,c=e.selectedNavItem,l=e.partitionKey;return ue.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.createElement(Em,{hideQueryOptions:!0,docURL:n,endpoint:a,dbName:decodeURIComponent(i),dropDownLinks:s,database:r}),ue.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area revert-test-class"},ue.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.createElement(gu,{selectedNavItem:c,selectedPartitionKey:l})),ue.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},ue.createElement(dC.PermissionsPageController,{databaseName:i,isSharedDB:t,sharer:o})))))};var fC=qs.extend({selectedHeader:"Databases",routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},roles:["_admin"],initialize:function(e,t){this.initViews(t[0])},permissions:function(e,t){var n=new Gs("permissions"),r=this.database.safeID();GD.initPermissions(r);var o=[{name:this.database.id,link:Es.databaseUrl(this.database)},{name:"Permissions"}];return ue.createElement(pC,{docURL:se.constants.DOC_URLS.SECURITY,endpoint:se.urls("permissions","apiurl",this.database.safeID()),dbName:r,dropDownLinks:o,database:this.database,isSharedDB:!1,selectedNavItem:n,partitionKey:t})},initViews:function(e){this.databaseName=e,this.database=new Es.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar("permissions")},getExtensionLinks:function(){var e="#"+se.urls("databaseBaseURL","app",this.database.id),t=[{title:"New Doc",url:e+"/_new",icon:"fonticon-plus-circled"},{title:"New View",url:e+"/new_view",icon:"fonticon-plus-circled"}];return _.reduce(se.getExtensions("sidebar:links"),(function(t,n){return t.push({title:n.title,url:e+"/"+n.url,icon:"fonticon-plus-circled"}),t}),t)}}),hC=fC.extend({selectedHeader:"Databases",routes:{"database/shared/:user/:database/permissions":"sharedPermissions"},roles:["_admin"],initialize:function(e,t){this.sharedInitViews(t[0],t[1])},sharedPermissions:function(e){var t=new Gs("permissions"),n=se.cloudantUser,r=this.database.safeID();GD.initSharedPermissions(r,n);var o=[{name:this.database.id,link:Es.databaseUrl(this.database)},{name:"Permissions"}];return ue.createElement(pC,{docURL:se.constants.DOC_URLS.SECURITY,endpoint:se.urls("permissions","apiurl",this.database.safeID()),dbName:r,dropDownLinks:o,database:this.database,isSharedDB:!0,sharer:e,selectedNavItem:t})},sharedInitViews:function(e,t){le.getParams().include_docs=!0,tD.sharedUsername=e,this.databaseName=t,this.database=new ZN.SharedModel({id:t,name:e}),this.user=new yS.User,this.data={username:e,database:this.database},this.data.designDocs=new tD.SharedAllDocs(null,{username:e,database:this.database,paging:{pageSize:500},params:{startkey:"_design",endkey:"_design1",include_docs:!0,limit:500}}),this.designDocs=this.data.designDocs,this.database=this.data.database,this.addSidebar()}});const mC={RouteObjects:[fC,hC],initialize:function(){}},yC="SINGLE_DATABASE_BACKUP_INFO_AVAILABLE",bC="DOCUMENT_BACKUP_LIST_LOADED",gC="SELECT_BACKUP_BY_URL",_C="UPDATE_BACKUP_DOC_EDITOR",vC="DOCUMENT_BACKUP_RESET",EC="SHOW_RESTORE_BACKUP_MODAL",wC="HIDE_RESTORE_BACKUP_MODAL",SC="RESTORE_DOC_START",OC="RESTORE_DOC_COMPLETE";var NC=se.addon(),DC=new Backbone.Collection;NC.DatabaseBackup=se.Model.extend({initialize:function(e){this.dbName=e.database,this.source=DC},url:function(){return"/_api/v2/backup/task?databases="+this.dbName},parse:function(e,t){var n=this.source.findWhere({dbName:t.dbName});return n.set({loaded:!0,hasBackup:e.rows.length>0,tasks:e.rows}),n.unset("fetch"),n.toJSON()},isAvailable:function(e){var t=this.source.findWhere({dbName:e});return t&&t.get("loaded")},fetch:function(){var e=this.source.findWhere({dbName:this.dbName});if(e){if(e.get("loaded")){var t=se.Deferred();return this.set(e.toJSON()),t.resolve(),t.promise()}return e.get("fetch")}var n=Backbone.Model.prototype.fetch.call(this,{dbName:this.dbName});return this.source.add({dbName:this.dbName,loaded:!1,hasBackup:null,fetch:n,tasks:[]}),n}}),NC.DatabaseBackupList=se.Collection.extend({setDatabases:function(e){this.databases=e},url:function(){return"/_api/v2/backup/task?format=mapping&databases="+this.databases.join(",")},parse:function(e){return e.map((function(e,t){var n={db:t,hasBackup:null!==e};return _.isObject(e)&&(n.task=e.task,n.latest_completion=e.latest_completion),n}))}});const CC=NC;CC.DocBackups=se.Collection.extend({update:function(e){this.taskName=e.taskName,this.docID=e.docID},url:function(){var e=le.utils.safeURLName(this.docID);return-1!==this.docID.indexOf("/")&&(e=encodeURIComponent(e)),"/_api/v2/backup/monitor/"+this.taskName+"/"+e+"?include_docs=true"},parse:function(e){return e.databases},restore:function(e,t){var n=o().Deferred();return o().ajax({cache:!1,type:"POST",url:"/_api/v2/backup/restore/document",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({doc_id:this.docID,task_name:this.taskName,task_date:t,frequency:e}),success:function(e){n.resolve(e)},error:function(){n.reject(arguments)}}),n.promise()}});const PC=CC;function RC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kC={parseWeeklyDate:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return RC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RC(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("/"),3),n=t[0],r=t[1],o=t[2],a="".concat(n,"/").concat(o),i=h()(a,"YYYY/[w]W").startOf("isoWeek"),s=h()(a,"YYYY/[w]W").endOf("isoWeek"),c=s;return"01"!==r||"w52"!==o&&"w53"!==o||(a="".concat(parseInt(n)-1,"/").concat(o),c=h()(a,"YYYY/[w]W").endOf("isoWeek")),i.month()+1===parseInt(r)&&s.month()+1!==parseInt(r)&&(c=i.endOf("month")),c}};const TC=kC;function xC(e){se.addNotification({msg:e,type:"error",clear:!0})}function IC(e){se.navigate(se.urls("allDocs","app",e))}function AC(e){var t=[{label:"Daily",backups:[]},{label:"Weekly",backups:[]},{label:"Monthly",backups:[]},{label:"Yearly",backups:[]}],n=null;return e.models.forEach((function(e){var r=e.get("backup"),o=r.match(/deltas\/[^/]+\/(.*)/)[1],a=o.split("/"),i={url:r,doc:e.get("doc")};4===a.length?(n=h()(o,"YYYY/MM/[w]W/DD"),t[0].backups.push(_.extend(i,{epoch:parseInt(n.format("X"),10),date:n.format("MMM Do, YYYY"),restoreKey:"daily",restoreTaskDate:n.format("YYYY-MM-DD")}))):3===a.length?(n=TC.parseWeeklyDate(o),t[1].backups.push(_.extend(i,{epoch:parseInt(n.format("X"),10),date:n.format("MMM Do, YYYY"),restoreKey:"weekly",restoreTaskDate:n.format("YYYY-MM-DD")}))):2===a.length?(n=h()(o,"YYYY/MM"),t[2].backups.push(_.extend(i,{epoch:parseInt(n.format("X"),10),date:h()(o,"YYYY/MM").format("MMM, YYYY"),restoreKey:"monthly",restoreTaskDate:n.format("YYYY-MM")}))):1===a.length&&t[3].backups.push(_.extend(i,{epoch:parseInt(o,10),date:o,restoreKey:"yearly",restoreTaskDate:o}))})),t.forEach((function(e){return e.backups.sort((function(e,t){return t.epoch-e.epoch})),e})),t}const LC={initBackups:function(e){var t=new PC.DatabaseBackup({database:e.database.id}),n=new PC.DocBackups;se.dispatch({type:vC}),e.fetch().then((function(){t.fetch().then((function(){if(!t.get("hasBackup"))return xC("Sorry, this database doesn't have backups enabled."),void IC(e.database.id);t.get("tasks").length&&(n.update({docID:e.id,taskName:t.get("tasks")[0].task}),n.fetch().then((function(){if(!n.models.length)return xC("This document doesn't have any backups on file."),void se.navigate(e.url("app"));se.dispatch({type:bC,options:{doc:e,backupList:AC(n),backupListCollection:n,databaseBackup:t}})})))}))}),(function(t){404===t.status&&(xC("The document does not exist."),IC(e.database.id))}))},selectBackup:function(e){se.dispatch({type:gC,options:{url:e}})},updateDocValue:function(e){se.dispatch({type:_C,options:{json:e}})},saveDoc:function(e,t,n){var r=e.database.safeID();t?(se.addNotification({msg:"Saving document."}),e.save().then((function(){n(e.prettyJSON()),se.navigate(se.urls("document","app",r,e.id)+"/backups")})).fail((function(e){se.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(xC("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):xC("Please fix the JSON errors and try saving again.")},showRestoreModal:function(){se.dispatch({type:EC})},hideRestoreDocModal:function(){se.dispatch({type:wC})},restoreDoc:function(e,t,n){se.addNotification({msg:"Restoring your document. Please wait.",type:"info",clear:!0}),se.dispatch({type:SC}),e.restore(t.restoreKey,t.restoreTaskDate).then((function(){se.dispatch({type:OC}),se.addNotification({msg:"Your document has been restored.",type:"success",clear:!0}),se.navigate(n)}),function(){se.dispatch({type:OC}),se.addNotification({msg:"There was an error restoring this document.",type:"error",clear:!0})}.bind(this))},navigate:function(e){se.navigate(e)},checkDatabaseHasBackups:function(e){var t=se.Deferred(),n=se.cloudantUser,r=new PC.DatabaseBackup({database:e});return n.fetchOnce().then((function(){if(!n.backupsEnabled())return se.dispatch({type:yC,database:r.get("dbName"),hasBackup:!1}),t.resolve(r);r.fetch().then((function(){se.dispatch({type:yC,database:r.get("dbName"),hasBackup:r.get("hasBackup")}),t.resolve(r)}))})),t}};var jC={};jC.DocumentBackupPageStore=se.Store.extend({initialize:function(){this.reset()},reset:function(){this._doc=null,this._docContent="",this._docBackupList=[],this._backupListCollection=null,this._currentBackup=null,this._restoreModalVisible=!1,this._isRestoring=!1},setBackup:function(e,t,n){this._doc=e,this._docContent=JSON.stringify(this._doc.attributes,null,"  "),this._docBackupList=t,this._backupListCollection=n,this.hasBackups()&&(this._currentBackup=this.getMostRecentBackup())},getDocContent:function(){return this._docContent},setDocContent:function(e){this._docContent=e},getBackupList:function(){return this._docBackupList},getBackupListCollection:function(){return this._backupListCollection},hasBackups:function(){return this._docBackupList.length>0},getDoc:function(){return this._doc},isRestoreModalVisible:function(){return this._restoreModalVisible},showRestoreModal:function(){this._restoreModalVisible=!0},hideRestoreModal:function(){this._restoreModalVisible=!1},selectBackup:function(e){this._currentBackup=this.getBackupByURL(e)},restoreDoc:function(){this._isRestoring=!0},restoreDocComplete:function(){this._isRestoring=!1,this._restoreModalVisible=!1},isRestoring:function(){return this._isRestoring},getCurrentBackup:function(){return this._currentBackup},getMostRecentBackup:function(){return this._docBackupList.find((function(e){return e.backups.length>0})).backups[0]},getBackupByURL:function(e){var t;return this._docBackupList.forEach((function(n){var r=n.backups.find((function(t){return t.url===e}));r&&(t=r)})),t},dispatch:function(e){switch(e.type){case bC:this.setBackup(e.options.doc,e.options.backupList,e.options.backupListCollection),this.triggerChange();break;case gC:this.selectBackup(e.options.url),this.triggerChange();break;case _C:this.setDocContent(e.options.json),this.triggerChange();break;case vC:this.reset(),this.triggerChange();break;case EC:this.showRestoreModal(),this.triggerChange();break;case wC:this.hideRestoreModal(),this.triggerChange();break;case SC:this.restoreDoc(),this.triggerChange();break;case OC:this.restoreDocComplete(),this.triggerChange()}}}),jC.documentBackupPageStore=new jC.DocumentBackupPageStore,jC.documentBackupPageStore.dispatchToken=se.dispatcher.register(jC.documentBackupPageStore.dispatch.bind(jC.documentBackupPageStore)),jC.DatabaseBackupStore=se.Store.extend({initialize:function(){this.reset()},reset:function(){this._databases={}},hasBackup:function(e){return!!_.has(this._databases,e)&&this._databases[e].hasBackup},hasBackupByURL:function(e){if(!_.isString(e))return!1;var t=e.split("/")[2];return!!_.has(this._databases,t)&&this._databases[t].hasBackup},getLastBackupDate:function(e){return _.has(this._databases,e)?this._databases[e].lastBackupDate:null},addSingleDatabaseBackup:function(e){this._databases[e.database]={hasBackup:e.hasBackup,lastBackupDate:null}},addDatabaseBackupList:function(e){this._databases=_.extend({},this._databases,e)},dispatch:function(e){switch(e.type){case yC:this.addSingleDatabaseBackup(e),this.triggerChange();break;case"DATABASE_BACKUP_INFO_AVAILABLE":this.addDatabaseBackupList(e.options.backupInfo),this.triggerChange()}}}),jC.databaseBackupStore=new jC.DatabaseBackupStore,jC.databaseBackupStore.dispatchToken=se.dispatcher.register(jC.databaseBackupStore.dispatch.bind(jC.databaseBackupStore));const MC=jC;function UC(e){return UC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UC(e)}function BC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VC(e,t,n){return t&&qC(e.prototype,t),n&&qC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function HC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GC(e,t)}function GC(e,t){return GC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},GC(e,t)}function FC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=WC(e);if(t){var o=WC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return KC(this,n)}}function KC(e,t){if(t&&("object"===UC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zC(e)}function zC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WC(e){return WC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},WC(e)}function YC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XC=MC.databaseBackupStore,QC=MC.documentBackupPageStore,JC=function(e){HC(n,e);var t=FC(n);function n(){var e;BC(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return YC(zC(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{doc:QC.getDoc(),docContent:QC.getDocContent(),backupList:QC.getBackupList(),backupListCollection:QC.getBackupListCollection(),hasBackups:QC.hasBackups(),currentBackup:QC.getCurrentBackup(),restoreModalVisible:QC.isRestoreModalVisible(),isRestoring:QC.isRestoring()}})),YC(zC(e),"getBackupList",(function(){return e.state.backupList.map((function(e,t){if(e.backups.length)return ue.createElement("optgroup",{label:e.label,key:t},e.backups.map((function(e,t){return ue.createElement("option",{value:e.url,key:t},e.date)})))}))})),YC(zC(e),"selectBackup",(function(e){LC.selectBackup(e.target.value)})),YC(zC(e),"gotoDoc",(function(t){t.preventDefault(),LC.navigate(e.state.doc.url("app"))})),YC(zC(e),"saveDoc",(function(t){t.preventDefault(),LC.saveDoc(e.state.doc,e.checkDocIsValid(),e.setDocument)})),YC(zC(e),"getEditor",(function(){return e.backupPageEditor?e.backupPageEditor.getEditor():null})),YC(zC(e),"onRestore",(function(){e.getEditor().editSaved()})),YC(zC(e),"onChange",(function(){e.setState(e.getStoreState())})),YC(zC(e),"setupEditorListener",(function(){e.getEditor().editor.on("change",function(){var e,t=this.getEditor().getValue();try{e=JSON.parse(t)}catch(e){return}var n=["_id"];this.state.doc.get("_rev")&&n.push("_rev"),LC.updateDocValue(t),_.isEmpty(_.difference(n,_.keys(e)))||se.addNotification({type:"error",msg:"Cannot remove a document's id or revision.",clear:!0})}.bind(zC(e))),e.pageInitialized=!0,e.forceUpdate()})),YC(zC(e),"setDocument",(function(t){e.getEditor().editor.getSession().setValue(t)})),YC(zC(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.state.doc.clear().set(t,{validate:!0}),!e.state.doc.validationError})),YC(zC(e),"showRestoreModal",(function(){LC.showRestoreModal()})),YC(zC(e),"updateValues",(function(){e.state.doc.changedAttributes()&&se.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})})),YC(zC(e),"state",e.getStoreState()),e}return VC(n,[{key:"componentDidMount",value:function(){QC.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){QC.off("change",this.onChange),this.state.doc&&this.state.doc.off("sync")}},{key:"componentDidUpdate",value:function(){this.state.backupList.length&&bb.formatters.html.hideUnchanged(),this.state.doc&&(this.state.doc.off("sync"),this.state.doc.on("sync",this.updateValues)),this.pageInitialized||this.setupEditorListener()}},{key:"render",value:function(){var e=this;return this.state.backupList.length?ue.createElement("div",null,ue.createElement("div",{id:"doc-editor-actions-panel",className:"row backup-controls"},ue.createElement("div",{className:"span6"},ue.createElement("h3",null,"Current Rev"),ue.createElement("div",{className:"pull-right"},ue.createElement("button",{className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},ue.createElement("i",{className:"icon fonticon-ok-circled"})," Save"),ue.createElement("div",{className:"cancel-button"},ue.createElement("a",{href:"#","data-bypass":"true",onClick:this.gotoDoc},"Cancel")))),ue.createElement("div",{className:"span6"},ue.createElement("div",{className:"backup-list"},ue.createElement("label",{htmlFor:"js-backup-list-select"},"Select Backup"),ue.createElement("div",{className:"styled-select"},ue.createElement("label",{htmlFor:"js-backup-list-select"},ue.createElement("i",{className:"fonticon-down-dir"}),ue.createElement("select",{id:"js-backup-list-select",onChange:this.selectBackup,defaultValue:this.state.currentBackup.url},this.getBackupList())))),ue.createElement("div",{className:"pull-right"},ue.createElement("button",{className:"restore-doc btn btn-primary",type:"button",onClick:this.showRestoreModal},"Restore")))),ue.createElement("div",{id:"backups-diff",className:"code-region"},ue.createElement(pi.CodeEditor,{showEditorOnly:!0,ref:function(t){return e.backupPageEditor=t},id:"backups-current-doc",defaultCode:this.state.docContent,docs:!1,mode:"json",setHeightWithJS:!1,disableUnload:!0}),ue.createElement($C,{display:this.state.hasBackups&&null!==this.getEditor(),targetDoc:this.state.docContent,sourceDoc:this.state.currentBackup.doc})),ue.createElement(ZC,{visible:this.state.restoreModalVisible,backupListCollection:this.state.backupListCollection,currentBackup:this.state.currentBackup,docURL:this.state.doc.url("app"),onRestore:this.onRestore,isRestoring:this.state.isRestoring})):ue.createElement("div",{id:"backups-page-loading"},ue.createElement(pi.LoadLines,null))}}]),n}(ue.Component);YC(JC,"propTypes",{database:kt().object.isRequired});var $C=function(e){HC(n,e);var t=FC(n);function n(){var e;BC(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return YC(zC(e=t.call.apply(t,[this].concat(o))),"state",{hasDiffs:!1,diffHTML:"",jsonError:!1}),e}return VC(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={};try{t=JSON.parse(e.targetDoc)}catch(e){return void this.setState({jsonError:!0})}var n=!1,r="",o=bb.diff(e.sourceDoc,t);_.isUndefined(o)||(n=!0,r=bb.formatters.html.format(o,e.sourceDoc)),this.setState({jsonError:!1,hasDiffs:n,diffHTML:r})}},{key:"shouldComponentUpdate",value:function(){return!this.state.jsonError}},{key:"render",value:function(){return this.props.display?ue.createElement("div",{id:"backups-delta"},ue.createElement("p",{id:"backups-no-diff",className:this.state.hasDiffs?"hide":""},"This backup has no changes from the current rev."),ue.createElement("ul",{id:"backup-legend",className:this.state.hasDiffs?"":"hide"},ue.createElement("li",null,ue.createElement("div",{className:"backup-legend backup-legend-removed"}),ue.createElement("b",null,"removed")," since the selected backup"),ue.createElement("li",null,ue.createElement("div",{className:"backup-legend backup-legend-added"}),ue.createElement("b",null,"added")," since the selected backup")),ue.createElement("div",{id:"backups-delta-visualization",className:this.state.hasDiffs?"":"hide",dangerouslySetInnerHTML:{__html:this.state.diffHTML}})):null}}]),n}(ue.Component);YC($C,"propTypes",{sourceDoc:kt().object.isRequired,targetDoc:kt().string.isRequired}),YC($C,"defaultProps",{sourceDoc:"",targetDoc:""});var ZC=function(e){HC(n,e);var t=FC(n);function n(){var e;BC(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return YC(zC(e=t.call.apply(t,[this].concat(o))),"closeModal",(function(){LC.hideRestoreDocModal()})),YC(zC(e),"restore",(function(t){t.preventDefault(),LC.restoreDoc(e.props.backupListCollection,e.props.currentBackup,e.props.docURL)})),e}return VC(n,[{key:"render",value:function(){var e=this;return this.props.visible?ue.createElement(on.u_,{dialogClassName:"backup__confirm-modal",show:this.props.visible,onHide:this.closeModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Please Confirm")),ue.createElement(on.u_.Body,null,ue.createElement("p",null,"Are you sure you want to restore the ",ue.createElement("code",null,this.props.currentBackup.date)," version of this document? This will overwrite your current document.")),ue.createElement(on.u_.Footer,null,ue.createElement("button",{className:"btn",onClick:this.closeModal},ue.createElement("i",{className:"icon fonticon-cancel-circled"})," Cancel"),ue.createElement("button",{ref:function(t){return e.confirmButton=t},className:"btn btn-primary save",onClick:this.restore,disabled:this.props.isRestoring},ue.createElement("i",{className:"fonticon-ok-circled"})," Restore"))):null}}]),n}(ue.Component);YC(ZC,"propTypes",{docURL:kt().string.isRequired,backupListCollection:kt().object.isRequired,currentBackup:kt().object.isRequired}),YC(ZC,"defaultProps",{docURL:"",backupListCollection:null,currentBackup:null,visible:!1,isRestoring:!1});var eP=function(e){HC(n,e);var t=FC(n);function n(){return BC(this,n),t.apply(this,arguments)}return VC(n,[{key:"render",value:function(){return se.cloudantUser.backupsEnabled()?ue.createElement("th",null,"Last Backup"):ue.createElement("th",{className:"hide"})}}]),n}(ue.Component),tP=function(e){HC(n,e);var t=FC(n);function n(){var e;BC(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return YC(zC(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{databaseHasBackup:XC.hasBackup(e.props.row.id),lastBackupDate:XC.getLastBackupDate(e.props.row.id)}})),YC(zC(e),"onChange",(function(){e.setState(e.getStoreState())})),YC(zC(e),"state",e.getStoreState()),e}return VC(n,[{key:"componentDidMount",value:function(){XC.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){XC.off("change",this.onChange)}},{key:"render",value:function(){return se.cloudantUser.backupsEnabled()?this.state.databaseHasBackup?(null===this.state.lastBackupDate?(t="pending",e="backup-pending"):t=h()(this.state.lastBackupDate,"YYYY-MM-DDTHH:mm:ssZ",!0).format("MMM Do, h:mm a"),ue.createElement("td",{className:e},t)):ue.createElement("td",null,"—"):ue.createElement("td",{className:"hide"});var e,t}}]),n}(ue.Component);YC(tP,"propTypes",{row:kt().object.isRequired});var nP=function(e){HC(n,e);var t=FC(n);function n(){var e;BC(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return YC(zC(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{databaseHasBackup:XC.hasBackupByURL(e.props.doc.url)}})),YC(zC(e),"onChange",(function(){e.setState(e.getStoreState())})),YC(zC(e),"getLinkURL",(function(){return"#"+e.props.doc.url+"/backups"})),YC(zC(e),"state",e.getStoreState()),e}return VC(n,[{key:"componentDidMount",value:function(){XC.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){XC.off("change",this.onChange)}},{key:"render",value:function(){return!!this.state.databaseHasBackup&&ue.createElement(oP,{linkURL:this.getLinkURL()})}}]),n}(ue.Component);YC(nP,"propTypes",{doc:kt().object.isRequired});var rP=function(e){HC(n,e);var t=FC(n);function n(e,r){var o;BC(this,n),YC(zC(o=t.call(this,e,r)),"getStoreState",(function(){return{hasBackup:XC.hasBackup(o.props.database.id)}})),YC(zC(o),"onChange",(function(){o.setState(o.getStoreState())})),YC(zC(o),"gotoBackupPage",(function(){se.navigate(se.urls("document","app",o.props.doc.database.safeID(),o.props.doc.id)+"/backups")})),YC(zC(o),"isNewDoc",(function(){var e=se.router.lastPages[se.router.lastPages.length-1];return/\/_new$/.test(e)}));var a=o.getStoreState();return a.hasBackupOnload=XC.hasBackup(e.database.id),o.state=a,o}return VC(n,[{key:"componentDidMount",value:function(){XC.on("change",this.onChange,this),LC.checkDatabaseHasBackups(this.props.database.id)}},{key:"componentWillUnmount",value:function(){XC.off("change",this.onChange)}},{key:"render",value:function(){if(this.isNewDoc())return!1;if(!this.state.hasBackup)return!1;var e="panel-button backups";return!this.state.hasBackupOnload&&this.state.hasBackup&&(e+=" fadein"),ue.createElement("div",{className:"panel-section"},ue.createElement("button",{className:e,title:"View document backups",onClick:this.gotoBackupPage},ue.createElement("i",{className:"icon fonticon-clock"}),ue.createElement("span",null,"Backups")))}}]),n}(ue.Component);YC(rP,"propTypes",{doc:kt().object,database:kt().object.isRequired});var oP=function(e){HC(n,e);var t=FC(n);function n(){return BC(this,n),t.apply(this,arguments)}return VC(n,[{key:"render",value:function(){return ue.createElement("div",{className:"doc-backup-symbol",title:"View document backups"},ue.createElement("a",{href:this.props.linkURL},ue.createElement("i",{className:"fonticon-clock"})))}}]),n}(ue.Component);YC(oP,"propTypes",{linkURL:kt().string.isRequired});const aP={BackupPageController:JC,ConfirmRestoreModal:ZC,DatabaseTableHeaderColumn:eP,DatabaseTableRowColumn:tP,DocListBackupsBtnController:nP,DocEditorBackupBtn:rP};var iP=se.RouteObject.extend({selectedHeader:"Databases",routes:{"database/:database/:doc/backups":"backups","database/:database/_design/:ddoc/backups":"backupDesignDoc"},initialize:function(e,t){this.database=t.database},backups:function(e,t){this.docID=t||"new",this.database=this.database||new Es.Model({id:e});var n=new ht.Doc({_id:this.docID},{database:this.database}),r=[{type:"back",link:or.getPreviousPageForDoc(this.database,!1)},{name:this.docID}];return LC.initBackups(n),ue.createElement(tn,{crumbs:r,component:ue.createElement(aP.BackupPageController,{database:this.database})})},backupDesignDoc:function(e,t){return this.backups(e,"_design/"+t)}}),sP=Cm.extend({initialize:function(e,t){this.databaseName=t[0],this.initViews(this.databaseName),this.databaseBackup=new PC.DatabaseBackup({database:this.databaseName}),this.user=se.cloudantUser,LC.checkDatabaseHasBackups(this.databaseName)},initViews:function(e){this.databaseName=e,this.database=new Es.Model({id:this.databaseName}),this.databaseBackup=new PC.DatabaseBackup({database:e}),this.createDesignDocsCollection(),this.addSidebar()}});PC.RouteObjects=[iP,sP];const cP=PC;cP.initialize=function(){se.registerExtension("DocList:icons",aP.DocListBackupsBtnController),se.registerExtension("DocEditor:icons",aP.DocEditorBackupBtn),se.registerExtension("DatabaseTable:head",aP.DatabaseTableHeaderColumn),se.registerExtension("DatabaseTable:databaseRow",aP.DatabaseTableRowColumn)};const lP=cP;var uP=n(3297),dP=n.n(uP);const pP={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function fP(e){return fP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fP(e)}function hP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yP(e,t){return yP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yP(e,t)}function bP(e,t){if(t&&("object"===fP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gP(e){return gP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gP(e)}var _P=pi.StyledSelect,vP=function(e){var t=e.onChange,n=e.value;return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Database URL:"),ue.createElement("div",{className:""},ue.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};vP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var EP=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Name:"),ue.createElement("div",{className:"replication__input-react-select"},ue.createElement(ni.ZP,{name:"source-name",value:t,placeholder:"Database name",options:r,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};EP.propTypes={value:kt().string.isRequired,databases:kt().array.isRequired,onChange:kt().func.isRequired};var wP=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,a=e.onChangeRemote,i=e.onChangeLocal;return t===pP.REPLICATION_SOURCE.LOCAL?ue.createElement(EP,{value:r,databases:n,onChange:i}):ue.createElement(vP,{value:o,onChange:a})};wP.propTypes={replicationSource:kt().string.isRequired,databases:kt().array.isRequired,localSource:kt().string.isRequired,remoteSource:kt().string.isRequired,onChangeRemote:kt().func.isRequired,onChangeLocal:kt().func.isRequired};var SP=function(e){var t=e.onChange,n=e.value;return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Type:"),ue.createElement("div",{className:"replication__input-select"},ue.createElement(_P,{selectContent:[{value:"",label:"Select source type"},{value:pP.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:pP.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return ue.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};SP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var OP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yP(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gP(r);if(o){var n=gP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return bP(this,e)});function i(){return hP(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,a=e.remoteSource,i=e.databases;return t?ue.createElement(wP,{replicationSource:t,databases:i,localSource:n,remoteSource:a,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return ue.createElement("div",null,ue.createElement("h3",null,"Source"),ue.createElement(SP,{onChange:n,value:t}),this.getReplicationSourceRow())}}])&&mP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function NP(e){return NP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NP(e)}function DP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PP(e,t){return PP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},PP(e,t)}function RP(e,t){if(t&&("object"===NP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kP(e){return kP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kP(e)}OP.propTypes={replicationSource:kt().string.isRequired,localSource:kt().string.isRequired,remoteSource:kt().string.isRequired,databases:kt().array.isRequired,onLocalSourceChange:kt().func.isRequired,onRemoteSourceChange:kt().func.isRequired};var TP=pi.StyledSelect,xP=function(e){var t=e.value,n=e.onChange;return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Type:"),ue.createElement("div",{id:"replication-target",className:"replication__input-select"},ue.createElement(TP,{selectContent:[{value:"",label:"Select target type"},{value:pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:pP.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return ue.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};xP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var IP=function(e){var t=e.onChange,n=e.value;return ue.createElement("div",null,ue.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};IP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var AP=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},ue.createElement(ni.ZP,{value:n,options:r,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};AP.propTypes={value:kt().string.isRequired,databases:kt().array.isRequired,onChange:kt().func.isRequired};var LP=function(e){var t=e.onChange,n=e.value;return ue.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};LP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var jP=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,a=e.localTarget,i=e.remoteTarget,s=e.databases;if(!n)return null;n===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(c="New database:",t=ue.createElement(LP,{value:a,onChange:r})):t=n===pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?ue.createElement(AP,{onChange:r,databases:s,value:a}):ue.createElement(IP,{onChange:o,value:i,newRemote:pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var c="Name:";return n!==pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(c="New database:"),ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},c),ue.createElement("div",null,t))};jP.propTypes={databases:kt().array.isRequired,onLocalTargetChange:kt().func.isRequired,onRemoteTargetChange:kt().func.isRequired,remoteTarget:kt().string.isRequired,localTarget:kt().string.isRequired,replicationTarget:kt().string.isRequired};var MP=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var a=t===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,i=a?"Local server does not support partitioned databases":"Creates a new partitioned database",s=ue.createElement(on.u,{id:"new-db-partitioned-tooltip"},i);return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"New database options:"),ue.createElement("div",{className:rn()("replication__input-checkbox",{"replication__input-checkbox--disabled":a})},ue.createElement("input",{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:a}),ue.createElement(on.Ox,{placement:"right",overlay:s},ue.createElement("label",{htmlFor:"target-db-is-partitioned"},"Partitioned"))))};MP.propTypes={onTargetDatabasePartitionedChange:kt().func.isRequired,targetDatabasePartitioned:kt().bool.isRequired,replicationTarget:kt().string.isRequired,allowNewPartitionedLocalDbs:kt().bool.isRequired};var UP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kP(r);if(o){var n=kP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return RP(this,e)});function i(){return DP(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,a=e.localTarget,i=e.onRemoteTargetChange,s=e.remoteTarget,c=e.targetDatabasePartitioned,l=e.onTargetDatabasePartitionedChange,u=e.allowNewPartitionedLocalDbs;return ue.createElement("div",null,ue.createElement("h3",null,"Target"),ue.createElement(xP,{value:t,onChange:r}),ue.createElement(jP,{remoteTarget:s,replicationTarget:t,databases:o,localTarget:a,onRemoteTargetChange:i,onLocalTargetChange:n}),ue.createElement(MP,{replicationTarget:t,onTargetDatabasePartitionedChange:l,targetDatabasePartitioned:c,allowNewPartitionedLocalDbs:u}))}}])&&CP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function BP(e){return BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BP(e)}function qP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HP(e,t){return HP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},HP(e,t)}function GP(e,t){if(t&&("object"===BP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function FP(e){return FP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FP(e)}UP.propTypes={databases:kt().array.isRequired,onTargetChange:kt().func.isRequired,onLocalTargetChange:kt().func.isRequired,onRemoteTargetChange:kt().func.isRequired,remoteTarget:kt().string.isRequired,localTarget:kt().string.isRequired,replicationTarget:kt().string.isRequired};var KP=pi.StyledSelect,zP=function(e){var t=e.value,n=e.onChange;return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Replication type:"),ue.createElement("div",{className:"replication__input-select"},ue.createElement(KP,{selectContent:[{value:pP.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:pP.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return ue.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};zP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var WP=function(e){var t=e.value,n=e.onChange;return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Replication document:"),ue.createElement("div",{className:"replication__doc-name"},ue.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),ue.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};WP.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var YP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=FP(r);if(o){var n=FP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return GP(this,e)});function i(){return qP(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return ue.createElement("div",null,ue.createElement("h3",null,"Options"),ue.createElement(zP,{onChange:o,value:t}),ue.createElement(WP,{onChange:r,value:n}))}}])&&VP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);YP.propTypes={replicationDocName:kt().string.isRequired,replicationType:kt().string.isRequired,onDocChange:kt().func.isRequired,onTypeChange:kt().func.isRequired};var XP=pi.ConfirmButton,QP=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return ue.createElement("div",{className:"replication__button-row"},ue.createElement(XP,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n}),ue.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))};function JP(e){return JP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JP(e)}function $P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eR(e,t,n){return t&&ZP(e.prototype,t),n&&ZP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nR(e,t)}function nR(e,t){return nR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nR(e,t)}function rR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iR(e);if(t){var o=iR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oR(this,n)}}function oR(e,t){if(t&&("object"===JP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aR(e)}function aR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iR(e){return iR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},iR(e)}QP.propTypes={disabled:kt().bool.isRequired,onClick:kt().func.isRequired,onClear:kt().func.isRequired};var sR=pi.StyledSelect,cR=function(e){tR(n,e);var t=rR(n);function n(e){var r;return $P(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(aR(r=t.call(this,e)),"getAuthOptions",(function(){var e=le.i18n.en_US["replication-user-password-auth-label"],t=[{value:pP.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:pP.REPLICATION_AUTH_METHOD.BASIC,label:e}];return r.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return ue.createElement("option",{value:e.value,key:e.value},e.label)}))})),r.onChangeType=r.onChangeType.bind(aR(r)),r.onChangeValue=r.onChangeValue.bind(aR(r)),r.customAuths=se.getExtensions("Replication:Auth"),r.customAuths||(r.customAuths=[]),r.customAuthTypes=r.customAuths.map((function(e){return e.typeValue})),r.customAuthHelp=se.getExtensions("Replication:Auth-help"),r.customAuthHelp||(r.customAuthHelp=[]),r}return eR(n,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==pP.REPLICATION_AUTH_METHOD.BASIC)return ue.createElement(lR,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return ue.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"}),ue.createElement("div",{className:"replication__help-tile"},t[0]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"},"Authentication:"),ue.createElement("div",{className:"replication__input-select"},ue.createElement(sR,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:r}))),this.getAuthInputFields(n,r),this.getHelpText(r))}}]),n}(ue.Component);cR.propTypes={authId:kt().string.isRequired,authType:kt().string.isRequired,credentials:kt().object,onChangeAuth:kt().func.isRequired,onChangeAuthType:kt().func.isRequired},cR.defaultProps={authType:pP.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var lR=function(e){tR(n,e);var t=rR(n);function n(e){var r;return $P(this,n),(r=t.call(this,e)).updatePassword=r.updatePassword.bind(aR(r)),r.updateUsername=r.updateUsername.bind(aR(r)),r.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},r}return eR(n,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=le.i18n.en_US["replication-username-input-placeholder"],n=le.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"}),ue.createElement("div",null,ue.createElement("input",{id:r+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"}),ue.createElement("div",null,ue.createElement("input",{id:r+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),n}(ue.Component);lR.propTypes={auth:kt().object.isRequired,onChange:kt().func.isRequired};var uR=pi.ConfirmButton,dR=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,a=e.isReplicationDB;if(!t)return null;var i="",s="Delete ".concat(a?"Document":"Replication Job"),c="Deleting a replication ".concat(a?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");return o>1&&(i="You are deleting <strong>".concat(o,"</strong> replication ").concat(a?"documents":"jobs","."),s="Delete ".concat(a?"Documents":"Replication Jobs")),ue.createElement(on.u_,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Verify Deletion")),ue.createElement(on.u_.Body,null,ue.createElement("p",{dangerouslySetInnerHTML:{__html:i}}),ue.createElement("p",null,c)),ue.createElement(on.u_.Footer,null,ue.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),ue.createElement(uR,{customIcon:"icon-trash",text:s,onClick:r})))};dR.propTypes={visible:kt().bool.isRequired,isReplicationDB:kt().bool.isRequired,onClick:kt().func.isRequired,onClose:kt().func.isRequired,multipleDocs:kt().number.isRequired},dR.defaultProps={isReplicationDB:!0};var pR=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var a="Replication Error",i=ue.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(a="Replication Error - Failed",i=null),ue.createElement(on.u_,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,a)),ue.createElement(on.u_.Body,null,ue.createElement("p",null,r),i),ue.createElement(on.u_.Footer,null))};pR.propTypes={visible:kt().bool.isRequired,onClick:kt().func.isRequired,onClose:kt().func.isRequired,errorMsg:kt().string.isRequired};var fR=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?ue.createElement(on.u_,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Custom ID Conflict")),ue.createElement(on.u_.Body,null,ue.createElement("p",null,"A replication document with ID ",ue.createElement("code",null,n)," already exists."),ue.createElement("p",null,"You can overwrite the existing document, or change the new replication job’s document ID."),ue.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),ue.createElement(on.u_.Footer,null,ue.createElement("button",{onClick:r,className:"btn replication__error-cancel"},"Change Document ID"),ue.createElement("button",{onClick:o,className:"btn replication__error-continue"},ue.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null};function hR(e){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hR(e)}function mR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yR(e,t){return yR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yR(e,t)}function bR(e,t){if(t&&("object"===hR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gR(e)}function gR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _R(e){return _R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_R(e)}fR.propTypes={visible:kt().bool.isRequired,onClick:kt().func.isRequired,onClose:kt().func.isRequired,docId:kt().string.isRequired};var vR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yR(e,t)}(s,e);var t,n,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_R(r);if(o){var n=_R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return bR(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).submit=t.submit.bind(gR(t)),t.checkAuth=t.checkAuth.bind(gR(t)),t.runReplicationChecks=t.runReplicationChecks.bind(gR(t)),t}return t=s,n=[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,a=t.targetAuthType,i=t.sourceAuth,s=t.targetAuth,c=n===pP.REPLICATION_SOURCE.LOCAL,l=r===pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!se.session.isAdminParty()){if(c&&o===pP.REPLICATION_AUTH_METHOD.NO_AUTH)return void se.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(l&&a===pP.REPLICATION_AUTH_METHOD.NO_AUTH)return void se.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,i,"source",c).then((function(){e.checkLocalAccountCredentials(a,s,"target",l).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==pP.REPLICATION_AUTH_METHOD.BASIC||!r)return se.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return se.addNotification({msg:o,type:"error",clear:!0}),se.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw se.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return E(R.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+dP().encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName;(0,t.checkReplicationDocID)(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,a=e.localTarget,s=e.localSource,c=e.databases;if(o===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(c,a))return se.addNotification({msg:"The <code>"+a+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(o===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var l="";if(/\s/.test(a)?l="The target database may not contain any spaces.":/^_/.test(a)&&(l="The target database may not start with an underscore."),l)return se.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if(r===pP.REPLICATION_SOURCE.REMOTE&&!(0,i.isEmpty)(n)){var u="";try{""===new URL(n).pathname.slice(1)&&(u="Invalid source database URL. Database name is missing.")}catch(e){u="Invalid source database URL."}if(u)return se.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if((o===pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===pP.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!(0,i.isEmpty)(t)){var d="";try{""===new URL(t).pathname.slice(1)&&(d="Invalid target database URL. Database name is missing.")}catch(e){d="Invalid target database URL."}if(d)return se.addNotification({msg:d,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!(0,i.isEmpty)(t)||s===a&&!(0,i.isEmpty)(s))||(se.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,a=t.replicationDocName,i=t.remoteTarget,s=t.remoteSource,c=t.localTarget,l=t.localSource,u=t.sourceAuthType,d=t.sourceAuth,p=t.targetAuthType,f=t.targetAuth,h=t.targetDatabasePartitioned;if(a){var m=this.props.docs.find((function(e){return e._id===a}));m&&(e=m._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:a,localTarget:c,localSource:l,remoteTarget:i,remoteSource:s,_rev:e,sourceAuthType:u,sourceAuth:d,targetAuthType:p,targetAuth:f,targetDatabasePartitioned:h})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,a=e.localTargetKnown,i=e.localTarget;return!(e.submittedNoChange||!r||!o||r===pP.REPLICATION_SOURCE.LOCAL&&!n||o===pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!a||o===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!i||r===pP.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.conflictModalVisible,i=e.databases,s=e.localSource,c=e.remoteSource,l=e.remoteTarget,u=e.localTarget,d=e.targetDatabasePartitioned,p=e.allowNewPartitionedLocalDbs,f=e.updateFormField,h=e.clearReplicationForm,m=e.sourceAuthType,y=e.sourceAuth,b=e.targetAuthType,g=e.targetAuth;return ue.createElement("div",{style:{paddingBottom:20}},ue.createElement(OP,{replicationSource:t,localSource:s,databases:i,remoteSource:c,onSourceSelect:f("replicationSource"),onRemoteSourceChange:f("remoteSource"),onLocalSourceChange:f("localSource")}),ue.createElement(cR,{credentials:y,authType:m,onChangeAuthType:f("sourceAuthType"),onChangeAuth:f("sourceAuth"),authId:"replication-source-auth"}),ue.createElement("hr",{className:"replication__seperator",size:"1"}),ue.createElement(UP,{replicationTarget:n,onTargetChange:f("replicationTarget"),databases:i,localTarget:u,remoteTarget:l,allowNewPartitionedLocalDbs:p,targetDatabasePartitioned:d,onRemoteTargetChange:f("remoteTarget"),onLocalTargetChange:f("localTarget"),onTargetDatabasePartitionedChange:f("targetDatabasePartitioned")}),ue.createElement(cR,{credentials:g,authType:b,onChangeAuthType:f("targetAuthType"),onChangeAuth:f("targetAuth"),authId:"replication-target-auth"}),ue.createElement("hr",{className:"replication__seperator",size:"1"}),ue.createElement(YP,{replicationType:r,replicationDocName:o,onDocChange:f("replicationDocName"),onTypeChange:f("replicationType")}),ue.createElement(QP,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:h}),ue.createElement(fR,{visible:a,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}],n&&mR(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(ue.Component);function ER(e){return ER="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ER(e)}var wR=null,SR=function(e){return wR&&!e||(wR=new se.Promise((function(e){var t=R.getServerUrl("/_scheduler/jobs");w(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),wR},OR=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},NR=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},DR=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},CR=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,a=e.sourceAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,l={};if(t===pP.REPLICATION_SOURCE.LOCAL){var u=encodeURIComponent(n),d=R.getRootUrl({origin:s,pathname:c});l.url="".concat(d).concat(u)}else l.url=OR(DR(r));return RR(l,o,a),l},PR=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,a=e.targetAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,l={};if(t===pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===pP.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)l.url=OR(DR(r));else{var u=encodeURIComponent(n),d=R.getRootUrl({origin:s,pathname:c});l.url="".concat(d).concat(u)}return RR(l,o,a),l},RR=function(e,t,n){if(t&&t!==pP.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===pP.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,a=n.password,o&&a?{Authorization:"Basic "+dP().encode(o+":"+a)}:{});else{var r=se.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,a},kR=function(e){return-1!==s().indexOf([pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE,pP.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},TR=function(e){return e===pP.REPLICATION_TYPE.CONTINUOUS},xR=function(e){var t=e;return e?("object"===ER(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},IR=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},AR=function(){return SR().then((function(e){var t=R.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=w(t).then((function(e){return e.error?[]:e.rows.filter((function(e){return-1===e.id.indexOf("_design/")})).map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:xR(e.source),target:xR(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return n;var r=LR();return se.Promise.join(n,r,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=IR(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))},LR=function(){var e=R.getServerUrl("/_scheduler/docs?include_docs=true");return w(e).then((function(e){return e.error?[]:e.docs}))},jR=function(e){return new Promise((function(t){var n=R.getServerUrl("/_replicator/".concat(e));w(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))};function MR(e){return MR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(e)}function UR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qR(e,t,n){return t&&BR(e.prototype,t),n&&BR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function VR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HR(e,t)}function HR(e,t){return HR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},HR(e,t)}function GR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KR(e);if(t){var o=KR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return FR(this,n)}}function FR(e,t){if(t&&("object"===MR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function KR(e){return KR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},KR(e)}var zR=function(e){var t,n;try{t=new URL(DR(e))}catch(e){return""}var r=R.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?ue.createElement("span",null,r,ue.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},WR=function(e){VR(n,e);var t=GR(n);function n(e){var r;return UR(this,n),(r=t.call(this,e)).state={modalVisible:!1},r}return qR(n,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:ue.createElement("span",null,ue.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),ue.createElement(pR,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=h()(t),o=ue.createElement("span",null,n);if(r.isValid()){var a=r.format("MMM Do, h:mm a"),i=ue.createElement(on.u,{id:""},"Last updated: ",a);o=ue.createElement(on.Ox,{placement:"top",overlay:i},ue.createElement("span",null,n))}return ue.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),n}(ue.Component);WR.propTypes={statusTime:kt().any,status:kt().string,errorMsg:kt().string.isRequired},WR.defaultProps={status:""};var YR=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,a=[];return t||(a.push(ue.createElement("li",{className:"replication__row-list",key:1},ue.createElement("a",{href:"#replication/id/".concat(encodeURIComponent(n)),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),a.push(ue.createElement("li",{className:"replication__row-list",key:2},ue.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:r,"data-bypass":"true"})))),a.push(ue.createElement("li",{className:"replication__row-list",key:3},ue.createElement("a",{className:"replication__row-btn icon-trash ".concat(t?"replication__row-btn--no-left-pad":""," "),title:"Delete ".concat(t?"job":"document"," ").concat(n),onClick:function(){return o(n)}}))),ue.createElement("ul",{className:"replication__row-actions-list"},a)};YR.propTypes={_id:kt().string.isRequired,url:kt().string,error:kt().bool.isRequired,errorMsg:kt().string.isRequired,deleteDocs:kt().func.isRequired};var XR=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,a=e.startTime,i=e.status,s=e.statusTime,c=e.url,l=e.selected,u=e.selectDoc,d=e.errorMsg,p=e.deleteDocs,f=e.onlyDeleteAction,m=e.showStateRow,y=h()(a),b=y.isValid()?y.format("MMM Do, h:mm a"):"",g=null;return m&&(g=ue.createElement(WR,{statusTime:s,status:i,errorMsg:d})),ue.createElement("tr",{className:"replication__table-row"},ue.createElement("td",{className:"replication__table-col"},ue.createElement("input",{checked:l,type:"checkbox",onChange:function(){return u(t)}})," "),ue.createElement("td",{className:"replication__table-col"},zR(n)),ue.createElement("td",{className:"replication__table-col"},zR(r)),ue.createElement("td",{className:"replication__table-col"},b),ue.createElement("td",{className:"replication__table-col"},o),g,ue.createElement("td",{className:"replication__table-col"},ue.createElement(YR,{onlyDeleteAction:f,deleteDocs:p,_id:t,url:c,error:"error"===i||"retrying"===i,errorMsg:d})))};XR.propTypes={_id:kt().string.isRequired,source:kt().string.isRequired,target:kt().string.isRequired,type:kt().string.isRequired,status:kt().string,url:kt().string,statusTime:kt().object.isRequired,startTime:kt().object,selected:kt().bool.isRequired,selectDoc:kt().func.isRequired,errorMsg:kt().string.isRequired,deleteDocs:kt().func.isRequired,onlyDeleteAction:kt().bool.isRequired,showStateRow:kt().bool.isRequired};var QR=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,a=r?ue.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return ue.createElement("div",{className:"replication__bulk-select-wrapper"},ue.createElement("div",{className:"replication__bulk-select-header"},ue.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),a)};QR.propTypes={isSelected:kt().bool.isRequired,someDocsSelected:kt().bool.isRequired,onCheck:kt().func.isRequired,deleteDocs:kt().func.isRequired};var JR=function(e){var t=e.msg;return ue.createElement("tr",null,ue.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};JR.defaultProps={msg:"There is no replicator-db activity or history to display."};var $R=function(e){VR(n,e);var t=GR(n);function n(e){return UR(this,n),t.call(this,e)}return qR(n,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?ue.createElement(JR,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return ue.createElement(XR,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?ue.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",ue.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return ue.createElement(on.iA,{striped:!0},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",{className:"replication__table-bulk-select"},ue.createElement(QR,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),ue.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",ue.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),ue.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",ue.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),ue.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",ue.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),ue.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",ue.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),ue.createElement("th",{className:"replication__table-header-actions"},"Actions"))),ue.createElement("tbody",null,this.renderRows()))}}]),n}(ue.Component);$R.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var ZR=function(e){var t=e.value,n=e.onChange;return ue.createElement("div",{className:"replication__filter"},ue.createElement("i",{className:"replication__filter-icon fonticon-filter"}),ue.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};ZR.propTypes={value:kt().string.isRequired,onChange:kt().func.isRequired};var ek=function(e){var t=e.filter,n=e.onFilterChange;return ue.createElement("div",{className:"replication__activity_header"},ue.createElement("div",null),ue.createElement(ZR,{value:t,onChange:n}),ue.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},ue.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))};function tk(e){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(e)}function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rk(e,t){return rk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rk(e,t)}function ok(e,t){if(t&&("object"===tk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ak(e){return ak=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ak(e)}ek.propTypes={filter:kt().string.isRequired,onFilterChange:kt().func.isRequired};var ik=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ak(r);if(o){var n=ak(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ok(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=i,n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return ue.createElement("div",{className:"replication__activity"},ue.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table. Up to about 100 replications are displayed."),ue.createElement(ek,{filter:a,onFilterChange:t}),ue.createElement($R,{someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.createElement(dR,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}],n&&nk(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sk(e){return sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sk(e)}function ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lk(e,t){return lk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lk(e,t)}function uk(e,t){if(t&&("object"===sk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dk(e){return dk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dk(e)}ik.propTypes={docs:kt().array.isRequired,filter:kt().string.isRequired,selectAllDocs:kt().func.isRequired,allDocsSelected:kt().bool.isRequired,someDocsSelected:kt().bool.isRequired,selectDoc:kt().func.isRequired,onFilterChange:kt().func.isRequired,deleteDocs:kt().func.isRequired,activitySort:kt().object.isRequired,changeActivitySort:kt().func.isRequired};var pk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lk(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dk(r);if(o){var n=dk(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return uk(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=i,n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return ue.createElement("div",{className:"replication__activity"},ue.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),ue.createElement(ek,{filter:a,onFilterChange:t}),ue.createElement($R,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.createElement(dR,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}],n&&ck(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function fk(e){return fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fk(e)}function hk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yk(e,t){return yk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yk(e,t)}function bk(e,t){if(t&&("object"===fk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gk(e){return gk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gk(e)}pk.propTypes={docs:kt().array.isRequired,filter:kt().string.isRequired,selectAllDocs:kt().func.isRequired,allDocsSelected:kt().bool.isRequired,someDocsSelected:kt().bool.isRequired,selectDoc:kt().func.isRequired,onFilterChange:kt().func.isRequired,deleteDocs:kt().func.isRequired,activitySort:kt().object.isRequired,changeActivitySort:kt().func.isRequired};var _k=pi.LoadLines,vk=pi.Polling,Ek=pi.RefreshBtn,wk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yk(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gk(r);if(o){var n=gk(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return bk(this,e)});function i(){return hk(this,i),a.apply(this,arguments)}return t=i,n=[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.databases,i=e.localSource,s=e.remoteSource,c=e.remoteTarget,l=e.localTarget,u=e.statusDocs,d=e.statusFilter,p=e.loading,f=e.allDocsSelected,h=e.someDocsSelected,m=e.showConflictModal,y=e.localSourceKnown,b=e.localTargetKnown,g=e.updateFormField,_=e.authenticated,v=e.activityLoading,E=e.submittedNoChange,w=e.activitySort,S=e.tabSection,O=e.replicateInfo,N=e.replicateLoading,D=e.replicateFilter,C=e.allReplicateSelected,P=e.someReplicateSelected,R=e.hideConflictModal,k=e.isConflictModalVisible,T=e.filterDocs,x=e.filterReplicate,I=e.replicate,A=e.clearReplicationForm,L=e.selectAllDocs,j=e.changeActivitySort,M=e.selectDoc,U=e.deleteDocs,B=e.deleteReplicates,q=e.selectAllReplicates,V=e.selectReplicate,H=e.sourceAuthType,G=e.sourceAuth,F=e.targetAuthType,K=e.targetAuth,z=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs;return"new replication"===S?p?ue.createElement(_k,null):ue.createElement(vR,{docs:u,localTargetKnown:b,localSourceKnown:y,clearReplicationForm:A,replicate:I,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:a,localSource:i,remoteSource:s,remoteTarget:c,localTarget:l,sourceAuthType:H,sourceAuth:G,targetAuthType:F,targetAuth:K,targetDatabasePartitioned:z,allowNewPartitionedLocalDbs:W,updateFormField:g,conflictModalVisible:k,hideConflictModal:R,showConflictModal:m,checkReplicationDocID:jR,authenticated:_,submittedNoChange:E}):"_replicate"===S?N?ue.createElement(_k,null):ue.createElement(pk,{docs:O,filter:D,onFilterChange:x,selectDoc:V,selectAllDocs:q,allDocsSelected:C,someDocsSelected:P,activitySort:w,changeActivitySort:j,deleteDocs:B}):v?ue.createElement(_k,null):ue.createElement(ik,{docs:u,filter:d,onFilterChange:T,selectAllDocs:L,selectDoc:M,allDocsSelected:f,someDocsSelected:h,deleteDocs:U,activitySort:w,changeActivitySort:j})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return R.isIE1X()&&(e+=" "+e+"--ie1X"),ue.createElement("div",{className:e},ue.createElement(vk,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),ue.createElement(Ek,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[ue.createElement(Da,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(ue.createElement(Da,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){se.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:ue.createElement(Pa,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?ue.createElement(_k,null):ue.createElement(Xt,null,ue.createElement(Qt,{crumbs:this.getCrumbs()},this.getHeaderComponents()),ue.createElement(Jt,null,ue.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),ue.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}],n&&mk(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const Sk="INIT_REPLICATION",Ok="REPLICATION_DATABASES_LOADED",Nk="REPLICATION_UPDATE_FORM_FIELD",Dk="REPLICATION_CLEAR_FORM",Ck="REPLICATION_STARTING",Pk="REPLICATION_STATUS",Rk="REPLICATION_FETCHING_STATUS",kk="REPLICATION_FILTER_DOCS",Tk="REPLICATION_TOGGLE_ALL_DOCS",xk="REPLICATION_TOGGLE_DOC",Ik="REPLICATION_SET_STATE_FROM_DOC",Ak="REPLICATION_SHOW_CONFLICT_MODAL",Lk="REPLICATION_HIDE_CONFLICT_MODAL",jk="REPLICATION_CHANGE_ACTIVITY_SORT",Mk="REPLICATION_CLEAR_SELECTED_DOCS",Uk="REPLICATION_CHANGE_TAB_SECTION",Bk="REPLICATION_FETCHING_REPLICATE_STATUS",qk="REPLICATION_REPLICATE_STATUS",Vk="REPLICATION_SUPPORT_NEW_API",Hk="REPLICATION_FILTER_REPLICATE",Gk="REPLICATION_TOGGLE_ALL_REPLICATE",Fk="REPLICATION_TOGGLE_REPLICATE",Kk="REPLICATION_CLEAR_SELECTED_REPLICATES",zk="REPLICATION_FETCHING_FORM_STATE",Wk=function(e){var t=s().isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()};var Yk=function e(t){return function(n){var r=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,a=e.localTarget,i=e.localSource,s=e.remoteTarget,c=e.remoteSource,l=e._rev,u=e.sourceAuthType,d=e.sourceAuth,p=e.targetAuthType,f=e.targetAuth,h=e.targetDatabasePartitioned,m={user_ctx:{name:se.session.user().name,roles:["_admin","_reader","_writer"]},source:CR({replicationSource:n,localSource:i,remoteSource:c,sourceAuthType:u,sourceAuth:d}),target:PR({replicationTarget:t,replicationSource:n,remoteTarget:s,localTarget:a,targetAuthType:p,targetAuth:f}),create_target:kR(t),continuous:TR(r)};return h&&(m.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,l,m)}(t),o=R.getServerUrl("/_replicator"),a=O(o,r),i=Wk(r.source),s=Wk(r.target);n({type:Ck});var c=function(e){se.addNotification({msg:e.reason,type:"error",clear:!0})};return a.then((function(e){if(!e.ok)throw e;se.addNotification({msg:"Replication from <code>".concat(decodeURIComponent(i),"</code> to <code>").concat(decodeURIComponent(s),"</code> has been scheduled."),type:"success",escape:!1,clear:!0}),n(Xk()),se.navigate("#/replication")})).catch((function(r){if(r.error&&"not_found"===r.error)return function(){var e=R.getServerUrl("/_replicator");return N(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t)(n)})).catch(c);c(r)}))}},Xk=function(){return function(e){e({type:Rk}),SR().then((function(e){return AR()})).then((function(t){e({type:Pk,options:t})}))}},Qk=function(){return function(e){SR().then((function(t){t&&(e({type:Bk}),SR().then((function(e){if(!e)return[];var t=R.getServerUrl("/_scheduler/jobs");return w(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:xR(e.source.slice(0,e.source.length-1)),target:xR(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:IR(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))})).then((function(t){e({type:qk,options:t})})))}))}},Jk=function(e){var t={type:pP.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6);try{var r=dP().decode(n);return t.type=pP.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}catch(e){throw new Error("Error decoding Authorization header from replication document")}}var o=se.getExtensions("Replication:Auth"),a=void 0,i=void 0;return o&&o.map((function(t){!a&&t.getCredentials&&(a=t.getCredentials(e),i=t.typeValue)})),a&&(t.type=i,t.creds=a),t},$k=function(){return function(e){SR().then((function(t){e({type:Vk,options:t})}))}};function Zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zk(Object(n),!0).forEach((function(t){tT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nT=function(e){le.utils.localStorageSet("replication-activity-sort",e)},rT=function(){var e=le.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),nT(e),e},oT={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},aT={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:pP.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:pP.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:pP.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:rT()},iT=function(e){var t=eT({},e);return Object.values(oT).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=pP.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=pP.REPLICATION_AUTH_METHOD.NO_AUTH,t},sT=function(e,t,n){var r=eT(eT({},e),{},{submittedNoChange:!1});if(r[oT[t]]=n,t===oT.sourceAuthType||t===oT.replicationSource){var o=r[oT.sourceAuthType]===pP.REPLICATION_AUTH_METHOD.BASIC,a=r[oT.replicationSource]===pP.REPLICATION_SOURCE.LOCAL,i=!r[oT.sourceAuth]||!r[oT.sourceAuth].username;o&&a&&i&&(r[oT.sourceAuth]={username:se.session.user().name,password:""})}else if(t===oT.targetAuthType||t===oT.replicationTarget){var s=r[oT.targetAuthType]===pP.REPLICATION_AUTH_METHOD.BASIC,c=r[oT.replicationTarget]===pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[oT.replicationTarget]===pP.REPLICATION_TARGET.NEW_LOCAL_DATABASE,l=!r[oT.targetAuth]||!r[oT.targetAuth].username;s&&c&&l&&(r[oT.targetAuth]={username:se.session.user().name,password:""})}return r},cT=function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,eT(eT({},e),{},{allDocsSelected:!1})):e},lT=function(e){var t=eT(eT({},e),{},{allDocsSelected:!e.allDocsSelected});return CT(t).forEach((function(e){return e.selected=t.allDocsSelected})),t},uT=function(e,t){var n=eT({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1},dT=function(e){var t=eT(eT({},e),{},{allReplicateSelected:!e.allReplicateSelected});return qT(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t},pT=function(e,t){var n=eT(eT({},e),{},{loading:!1});return Object.keys(t).reduce((function(e,n){return sT(e,n,t[n])}),n)},fT=function(e){return e.activityLoading},hT=function(e){return e.databases},mT=function(e){return e.replicationSource},yT=function(e){return e.localSource},bT=function(e){return-1!==_.indexOf(e.databases,e.localSource)},gT=function(e){return e.remoteSource},_T=function(e){return e.replicationTarget},vT=function(e){return e.localTarget},ET=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},wT=function(e){return e.remoteTarget},ST=function(e){return e.isConflictModalVisible},OT=function(e){return e.replicationType},NT=function(e){return e.replicationDocName},DT=function(e){return e.submittedNoChange},CT=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},PT=function(e){return e.statusFilter},RT=function(e){return e.replicateFilter},kT=function(e){return e.allDocsSelected},TT=function(e){return CT(e).some((function(e){return e.selected}))},xT=function(e){return e.username},IT=function(e){return e.password},AT=function(e){return e.activitySort},LT=function(e){return e.checkingAPI},jT=function(e){return e.supportNewApi},MT=function(e){return e.fetchingReplicateInfo},UT=function(e){return e.allReplicateSelected},BT=function(e){return qT(e).some((function(e){return e.selected}))},qT=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))};const VT=(0,Tt.$j)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:fT(r),databases:hT(r),replicationSource:mT(r),localSource:yT(r),localSourceKnown:bT(r),remoteSource:gT(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:_T(r),localTarget:vT(r),localTargetKnown:ET(r),remoteTarget:wT(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:ST(r),replicationType:OT(r),replicationDocName:NT(r),submittedNoChange:DT(r),statusDocs:CT(r),statusFilter:PT(r),replicateFilter:RT(r),allDocsSelected:kT(r),someDocsSelected:TT(r),username:xT(r),password:IT(r),activitySort:AT(r),checkingApi:LT(r),supportNewApi:jT(r),replicateLoading:MT(r),replicateInfo:qT(r),allReplicateSelected:UT(r),someReplicateSelected:BT(r)}}),(function(e){return{checkForNewApi:function(){return e($k())},updateFormField:function(t){return function(n){e(function(e,t){return{type:Nk,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:Dk})},initReplicator:function(t){return e((n=t,function(e){n&&void 0!==n&&e({type:Sk,options:{localSource:n}})}));var n},getReplicationActivity:function(){return e(Xk())},getReplicateActivity:function(){return e(Qk())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:zk});var n=R.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));w(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?pP.REPLICATION_TYPE.CONTINUOUS:pP.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var a=new URL(r);n.replicationSource=pP.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(a.pathname.slice(1))}else n.replicationSource=pP.REPLICATION_SOURCE.REMOTE,n.remoteSource=NR(r);var i=Jk(e.source);if(n.sourceAuthType=i.type,n.sourceAuth=i.creds,o.indexOf(window.location.hostname)>-1){var s=new URL(o);n.replicationTarget=pP.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(s.pathname.slice(1))}else n.replicationTarget=pP.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=NR(o);var c,l=Jk(e.target);n.targetAuthType=l.type,n.targetAuth=l.creds,n.targetDatabasePartitioned=!(!(c=e.create_target_params)||!0!==c.partitioned),t({type:Ik,options:n})})).catch((function(e){se.addNotification({msg:e.reason||e.message,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=R.getServerUrl("/_all_dbs");w(t).then((function(t){e({type:Ok,options:{databases:t}})}))}))},replicate:function(t){return e(Yk(t))},showConflictModal:function(){return e({type:Ak})},hideConflictModal:function(){return e({type:Lk})},filterReplicate:function(t){return e(function(e){return{type:Hk,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:kk,options:e}}(t))},selectDoc:function(t){return e({type:xk,options:t})},deleteDocs:function(t){return e(function(e){return function(t){var n=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));se.addNotification({msg:"Deleting doc".concat(n.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var r=R.getServerUrl("/_replicator/_bulk_docs");O(r,{docs:n},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>".concat(e[0]._id,"</code> has been deleted")),se.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t({type:Mk}),t(Xk())})).catch((function(e){e.json().then((function(e){se.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}}(t))},selectAllDocs:function(){return e({type:Tk})},changeActivitySort:function(t){return e(function(e){return{type:jk,options:e}}(t))},selectAllReplicates:function(){return e({type:Gk})},deleteReplicates:function(t){return e(function(e){return function(t){se.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=R.getServerUrl("/_replicate");return O(n,t)}));return se.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>".concat(e[0]._id,"</code> has been deleted")),t({type:Kk}),t(Qk()),se.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);se.addNotification({msg:t.reason,type:"error",clear:!0})}))}}(t))},selectReplicate:function(t){return e({type:Fk,options:t})}}}))(wk),HT={RouteObjects:[se.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return ue.createElement(VT,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return ue.createElement(VT,{replicationId:e,section:"new replication"})},activityView:function(){return ue.createElement(VT,{section:"activity"})},replicateView:function(){return ue.createElement(VT,{section:"_replicate"})}})],initialize:function(){se.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),se.session.isAuthenticated().then((function(){$k()}))}};se.addReducers({replication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aT,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case Sk:var o=eT(eT({},e),{},{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=pP.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case Ok:return eT(eT({},e),{},{loading:!1,databases:r.databases});case zk:return eT(eT({},e),{},{loading:!0});case Nk:return sT(e,r.fieldName,r.value);case Dk:return iT(e);case Ck:return eT(eT({},e),{},{submittedNoChange:!0});case Rk:return eT(eT({},e),{},{activityLoading:!0});case Pk:return eT(eT({},e),{},{activityLoading:!1,statusDocs:r});case kk:return eT(eT({},e),{},{statusFilter:r});case Hk:return eT(eT({},e),{},{replicateFilter:r});case xk:return cT(e,r);case Tk:return lT(e);case Fk:return uT(e,r);case Gk:return dT(e);case Ik:return pT(e,r);case Ak:return eT(eT({},e),{},{isConflictModalVisible:!0});case Lk:return eT(eT({},e),{},{isConflictModalVisible:!1});case jk:return nT(r),eT(eT({},e),{},{activitySort:rT()});case Mk:return eT(eT({},e),{},{allDocsSelected:!1});case Uk:return eT(eT({},e),{},{tabSection:r});case Vk:return eT(eT({},e),{},{checkingApi:!1,supportNewApi:r});case Bk:return eT(eT({},e),{},{fetchingReplicateInfo:!0});case qk:return eT(eT({},e),{},{fetchingReplicateInfo:!1,replicateInfo:r});case Kk:return eT(eT({},e),{},{allReplicateSelected:!1});default:return e}}}),se.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return R.getApiUrl("/_replicator")}});const GT=HT;var FT="st_indexes",KT={};KT.Doc=ht.Doc.extend({setIndex:function(e,t){if(!this.isDdoc())return!1;var n=this.get(FT);return n||(n={}),n[e]||(n[e]={}),n[e].index=t,this.set({st_indexes:n})},removeIndex:function(e){if(!this.isDdoc())return!1;var t=this.get(FT)||{};delete t[e],this.set({st_indexes:t})},getIndex:function(e){return this.get(FT)[e].index},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new KT.Doc(e,{database:this.database})}}),KT.AllDocs=ht.AllDocs.extend({model:KT.Doc});const zT=KT,WT={GEO_INDEX_CLEAR:"GEO_INDEX_CLEAR",GEO_SET_LOADING:"GEO_SET_LOADING",GEO_INDEX_PAGE_INITIALIZING:"GEO_INDEX_PAGE_INITIALIZING",GEO_QUERY_STARTED:"GEO_QUERY_STARTED",GEO_INDEX_DESIGN_DOCS_LOADED:"GEO_INDEX_DESIGN_DOCS_LOADED",GEO_INDEX_SELECT_DESIGN_DOC:"GEO_INDEX_SELECT_DESIGN_DOC",GEO_INDEX_SET_NAME:"GEO_INDEX_SET_NAME",GEO_INIT_EDIT_SEARCH_INDEX:"GEO_INIT_EDIT_SEARCH_INDEX",GEO_TOGGLE_RESULTS_VIEW:"GEO_TOGGLE_RESULTS_VIEW",GEO_INDEX_INFO_LOADED:"GEO_INDEX_INFO_LOADED",GEO_SELECT_SEARCH_SHAPE:"GEO_SELECT_SEARCH_SHAPE",GEO_RESULTS_RETURNED:"GEO_RESULTS_RETURNED",GEO_INDEX_UPDATE_INDEX_FUNCTION:"GEO_INDEX_UPDATE_INDEX_FUNCTION",GEO_INDEX_UPDATE_PER_PAGE:"GEO_INDEX_UPDATE_PER_PAGE",GEO_UPDATE_SHAPE_RELATION:"GEO_UPDATE_SHAPE_RELATION",GEO_UPDATE_SEARCH_SETTING:"GEO_UPDATE_SEARCH_SETTING",GEO_TOGGLE_ROW:"GEO_TOGGLE_ROW",GEO_HIDE_DELETE_DOCS_MODAL:"GEO_HIDE_DELETE_DOCS_MODAL",GEO_SHOW_DELETE_DOCS_MODAL:"GEO_SHOW_DELETE_DOCS_MODAL",GEO_TOGGLE_ALL_DOCS:"GEO_TOGGLE_ALL_DOCS",GEO_CLEAR_SHAPE:"GEO_CLEAR_SHAPE",GEO_ADD_BLANK_POINT:"GEO_ADD_BLANK_POINT",GEO_DELETE_POINT:"GEO_DELETE_POINT",GEO_UPDATE_POINT:"GEO_UPDATE_POINT",GEO_TOGGLE_NEAREST_NEIGHBOUR:"GEO_TOGGLE_NEAREST_NEIGHBOUR",GEO_TOGGLE_QUERY_OPTIONS_TRAY:"GEO_TOGGLE_QUERY_OPTIONS_TRAY",GEO_NEW_DESIGN_DOC_NAME_UPDATED:"GEO_NEW_DESIGN_DOC_NAME_UPDATED"},YT={GEO_INDEX_VIEW:"GEO_INDEX_VIEW",GEO_INDEX_PER_PAGE:"GEO_INDEX_PER_PAGE",GEO_INDEX_DEFAULT_RESULTS_PER_PAGE:20,GEO_INDEX_DEFAULT_BBOX_SEARCH:{sw:{lat:-90,lon:-180},ne:{lat:90,lon:180}},DEFAULT_GEO_INDEX_NAME:"newGeoIndex",DEFAULT_GEO_INDEX_FUNCTION:"function (doc) {\n  if (doc.geometry && doc.geometry.coordinates) {\n    st_index(doc.geometry);\n  }\n}",SHAPES:{POINT:"SHAPE_POINT",LINE:"SHAPE_LINE",CIRCLE:"SHAPE_CIRCLE",ELLIPSE:"SHAPE_ELLIPSE",POLYGON:"SHAPE_POLYGON",RECTANGLE:"SHAPE_RECTANGLE"},VIEWS:{MAP:"TABLE_MAP",JSON:"TABLE_JSON",TABLE:"TABLE_VIEW"}};function XT(e){return e.filter((function(e){return""!==e[0]&&""!==e[1]})).map((function(e){return e[0]+" "+e[1]})).toString()}const QT=function(e){var t={};return e.shape===YT.SHAPES.CIRCLE?t={lat:e.shapeSettings.mapData.lat,lon:e.shapeSettings.mapData.lon,radius:e.shapeSettings.mapData.radius}:e.shape===YT.SHAPES.RECTANGLE?t={bbox:e.shapeSettings.mapData.sw.lon+","+e.shapeSettings.mapData.sw.lat+","+e.shapeSettings.mapData.ne.lon+","+e.shapeSettings.mapData.ne.lat}:e.shape===YT.SHAPES.POINT?t={g:"point("+e.shapeSettings.mapData.lon+" "+e.shapeSettings.mapData.lat+")"}:e.shape===YT.SHAPES.LINE?t={g:"linestring("+XT(e.shapeSettings.mapData)+")"}:e.shape===YT.SHAPES.POLYGON&&(t={g:"polygon(("+XT(e.shapeSettings.mapData)+"))"}),t.limit=e.perPage,e.shape!==YT.SHAPES.POINT&&"none"!==e.shapeSettings.relation&&(t.relation=e.shapeSettings.relation),e.shapeSettings.nearest&&(t.nearest="true"),e.includeDocs&&(t.include_docs="true"),e.skip&&(t.skip=e.skip),t},JT=function(e,t,n){var r=t.split("."),o=r.length,a=e;r.forEach((function(e,t){t!==o-1?a=a[e]:a[e]=n}))};function $T(e){var t=QT({shape:e.shape,shapeSettings:e.shapeSettings,perPage:e.perPage,includeDocs:e.includeDocs,skip:e.skip});le.utils.localStorageSet(YT.GEO_INDEX_PER_PAGE,e.perPage),se.dispatch({type:WT.GEO_QUERY_STARTED,options:{searchSettings:e}});var n=se.urls("geoindex","query",le.utils.safeURLName(e.databaseName),le.utils.safeURLName(e.ddocName),e.indexName),r=se.urls("geoindex","apiurl",le.utils.safeURLName(e.databaseName),le.utils.safeURLName(e.ddocName),e.indexName,o().param(t));return o().ajax({type:"GET",url:n,dataType:"json",data:t}).then((function(e){se.dispatch({type:WT.GEO_RESULTS_RETURNED,options:{resp:e,endpoint:r}}),0===e.rows.length&&se.addNotification({msg:"No results found. Please broaden your search criteria.",type:"info",clear:!0})}),(function(){se.dispatch({type:WT.GEO_RESULTS_RETURNED,options:{resp:{rows:[]}}}),se.addNotification({msg:"There was an error with this request.",type:"error",clear:!0})}))}const ZT={initNewGeoIndex:function(e){se.dispatch({type:WT.GEO_INDEX_CLEAR}),se.dispatch({type:WT.GEO_INDEX_PAGE_INITIALIZING,options:{loading:!0}}),se.when([e.designDocs.fetch()]).then((function(){se.dispatch({type:WT.GEO_INDEX_DESIGN_DOCS_LOADED,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},initCurrentGeoIndex:function(e){var t=new ev.DdocInfo({_id:e.ddocID},{database:e.database});se.dispatch({type:WT.GEO_INDEX_PAGE_INITIALIZING});var n=function(e,t,n){var r=t.replace(/^_design\//,""),o=se.urls("geoindex","geoinfo",le.utils.safeURLName(e),le.utils.safeURLName(r),n);return fetch(o,{credentials:"include",headers:{Accept:"application/json; charset=utf-8"},method:"GET"}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error);return se.dispatch({type:WT.GEO_INDEX_INFO_LOADED,options:{geoInfo:e.geo_index}}),e}))}(e.database.id,e.ddocID,e.indexName);return se.Promise.join(n,e.designDocs.fetch(),t.fetch()).then((function(){se.dispatch({type:WT.GEO_INIT_EDIT_SEARCH_INDEX,options:{indexName:e.indexName,ddocInfo:t,designDocs:e.designDocs,database:e.database}}),e.autoSearch&&$T({databaseName:e.database.id,ddocName:lO.getCleanDesignDoc(e.ddocID),indexName:e.indexName,perPage:e.perPage,shape:YT.SHAPES.RECTANGLE,shapeSettings:{mapData:YT.GEO_INDEX_DEFAULT_BBOX_SEARCH,relation:"contains"},includeDocs:!1,skip:0})}),(function(t){se.dispatch({type:WT.GEO_SET_LOADING,options:{loading:!1}});var n="There was a problem editing the geospatial index.";"not_found"===t.message&&(n="".concat(e.indexName," geo index does not exist."),se.navigate(se.urls("allDocsSanitized","app",e.database.id),{trigger:!0})),se.addNotification({msg:n,type:"error",escape:!1,clear:!0})}))},setGeoIndexName:function(e){se.dispatch({type:WT.GEO_INDEX_SET_NAME,options:{value:e}})},selectDesignDoc:function(e){se.dispatch({type:WT.GEO_INDEX_SELECT_DESIGN_DOC,options:{value:e}})},saveGeoIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction),t.lastSavedDesignDocName===e.id&&t.lastSavedIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedIndexName],e.set({indexes:r})}var o="The geospatial index has been saved.";t.isCreatingIndex&&(o="The geospatial index has been created."),e.save().then((function(){t.designDocs.add(e),se.addNotification({msg:o,type:"success",clear:!0}),se.navigate(n,{trigger:!0}),function(e){js(e.designDocs)}(t)}),(function(e){var t=JSON.parse(e.responseText).reason;se.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},deleteGeoIndex:function(e){Uc.safeDeleteIndex(e.designDoc,e.designDocs,"st_indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=se.urls("allDocs","app",e.database.safeID());se.navigate(t)}js(e.designDocs),se.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> geospatial index has been deleted.",type:"info",escape:!1,clear:!0}),Ms()}})},cloneGeoIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,st_indexes:{},language:"javascript"};return new zT.Doc(o,{database:r})}var a=e.find((function(e){return e.id===t}));return a?a.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("st_indexes");if(n&&_.has(n,e.newIndexName))se.addNotification({msg:"That geospatial index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Uc.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.st_indexes[e.sourceIndexName],t.set({st_indexes:n}),t.save().then((function(){e.onComplete(),se.addNotification({msg:"The geospatial index has been cloned.",type:"success",clear:!0}),js(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;se.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},toggleResultsView:function(e){le.utils.localStorageSet(YT.GEO_INDEX_VIEW,e),se.dispatch({type:WT.GEO_TOGGLE_RESULTS_VIEW,options:{view:e}})},selectShape:function(e){se.dispatch({type:WT.GEO_SELECT_SEARCH_SHAPE,options:{shape:e}})},query:$T,updatePerPage:function(e){le.utils.localStorageSet(YT.GEO_INDEX_PER_PAGE,e),se.dispatch({type:WT.GEO_INDEX_UPDATE_PER_PAGE,options:{perPage:e}})},updateShapeRelation:function(e,t){se.dispatch({type:WT.GEO_UPDATE_SHAPE_RELATION,options:{shape:e,relation:t}})},setSearchSetting:function(e,t,n){se.dispatch({type:WT.GEO_UPDATE_SEARCH_SETTING,options:{shape:e,setting:t,value:n}})},toggleRow:function(e){se.dispatch({type:WT.GEO_TOGGLE_ROW,options:{docID:e}})},hideDeleteDocsModal:function(){se.dispatch({type:WT.GEO_HIDE_DELETE_DOCS_MODAL})},showDeleteDocsModal:function(){se.dispatch({type:WT.GEO_SHOW_DELETE_DOCS_MODAL})},toggleAllDocs:function(){se.dispatch({type:WT.GEO_TOGGLE_ALL_DOCS})},addBlankPoint:function(e){se.dispatch({type:WT.GEO_ADD_BLANK_POINT,options:{shape:e}})},deletePoint:function(e,t){se.dispatch({type:WT.GEO_DELETE_POINT,options:{shape:e,index:t}})},updatePoint:function(e,t,n,r){se.dispatch({type:WT.GEO_UPDATE_POINT,options:{shape:e,index:t,latOrLng:n,value:r}})},toggleNearestNeighbour:function(e){se.dispatch({type:WT.GEO_TOGGLE_NEAREST_NEIGHBOUR,options:{shape:e}})},toggleQueryOptionsTray:function(e){se.dispatch({type:WT.GEO_TOGGLE_QUERY_OPTIONS_TRAY,options:{visible:e}})},gotoEditGeoIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";se.navigate("#"+se.urls("geoindex","edit",encodeURIComponent(e),o,n,r))},updateNewDesignDocName:function(e){se.dispatch({type:WT.GEO_NEW_DESIGN_DOC_NAME_UPDATED,options:{value:e}})}};var ex=se.Store.extend({initialize:function(){this.reset(),this._selectedResultsView=YT.VIEWS.MAP,this._perPage=YT.GEO_INDEX_DEFAULT_RESULTS_PER_PAGE},reset:function(){this._database=null,this._queryOptionsTrayVisible=!1,this._designDocs=new Backbone.Collection,this._ddocName="new-doc",this._pageInitializing=!1,this._hasActiveQuery=!1,this._geoInfo={},this.clearShape(),this._includeDocs=!1,this._skip=0,this._deleteDocumentsModalVisible=!1,this._results=[],this._searchCount=0,this._checkedRows=[],this.updateLastSearch(),this.softReset(),this._endpoint=""},softReset:function(){this._geoIndexFunction=YT.DEFAULT_GEO_INDEX_FUNCTION,this._geoIndexName=YT.DEFAULT_GEO_INDEX_NAME,this._lastSavedIndexName="",this._newDesignDocName=""},setEndpoint:function(e){this._endpoint=e},getEndpoint:function(){return this._endpoint},isPageInitializing:function(){return this._pageInitializing},setPageInitializing:function(e){this._pageInitializing=e},hasActiveGeoQuery:function(){return this._hasActiveQuery},getSkip:function(){return this._skip},isQueryTrayVisible:function(){return this._queryOptionsTrayVisible},initNewGeoIndex:function(e){this.setPageInitializing(!1),this._designDocs=e.designDocs,this._ddocName=e.defaultDDoc?"_design/"+e.defaultDDoc:"new-doc",this._database=e.database,this.softReset()},initEditIndex:function(e){this.setPageInitializing(!1),this._searchPerformed=!1,this._designDocs=e.designDocs,this._geoIndexName=e.indexName,this._searchQuery="",this._ddocName=e.ddocInfo.id,this._lastSavedIndexName=e.indexName,this._lastSavedDesignDocName=this._ddocName,this._database=e.database;var t=this._designDocs.find(function(e){return e.id===this._ddocName}.bind(this)).dDocModel();this._geoIndexFunction=t.getIndex(this._geoIndexName)},getCurrentDesignDoc:function(){return this._designDocs.find(function(e){return e.id===this._ddocName}.bind(this)).dDocModel()},getSearchCount:function(){return this._searchCount},getPerPage:function(){return this._perPage},setPerPage:function(e){this._perPage=e,this._lastSearch.perPage=e},getDDocName:function(){return this._ddocName},getDesignDocs:function(){return this._designDocs},getDesignDocList:function(){return this.getDesignDocs().map((function(e){return e.id}))},setDDocName:function(e){this._ddocName=e},getNewDesignDocName:function(){return this._newDesignDocName},setNewDesignDocName:function(e){this._newDesignDocName=e},getIncludeDocs:function(){return this._includeDocs},getShape:function(){return this._shape},setShape:function(e){this._shape=e},getShapeSettings:function(){return this._shapeSettings},getGeoIndexFunction:function(){return this._geoIndexFunction},setGeoIndexName:function(e){this._geoIndexName=e},getGeoIndexName:function(){return this._geoIndexName},getLastSavedIndexName:function(){return this._lastSavedIndexName},getLastSavedDesignDocName:function(){return this._lastSavedDesignDocName},getSaveDesignDoc:function(){if("new-doc"===this._ddocName){var e={_id:"_design/"+this._newDesignDocName,views:{},language:"javascript"};return new zT.Doc(e,{database:this._database})}var t=this._designDocs.find(function(e){return e.id===this._ddocName}.bind(this));return t?t.dDocModel():null},getSelectedResultsView:function(){return this._selectedResultsView},setSelectedResultsView:function(e){this._selectedResultsView=e},setGeoInfo:function(e){this._geoInfo=e},getGeoInfo:function(){return this._geoInfo},setResults:function(e){this._hasActiveQuery=!1,this._results=e.rows,this._searchCount++},getResults:function(){return this._results},updateShapeRelation:function(e,t){this._shapeSettings[e].relation=t},getLastSearch:function(){return this._lastSearch},updateSearchSetting:function(e,t,n){JT(this._shapeSettings[e],t,n)},getCheckedRows:function(){return this._checkedRows},toggleRow:function(e){-1!==this._checkedRows.indexOf(e)?this._checkedRows=this._checkedRows.filter((function(t){return t!==e})):this._checkedRows.push(e)},areAllCheckedOnPage:function(){var e=this;return this._results.every((function(t){return-1!==e._checkedRows.indexOf(t.id)}))},hasOneCheckedOnAnyPage:function(){return this._checkedRows.length>0},isDeleteDocumentsModalVisible:function(){return this._deleteDocumentsModalVisible},showDeleteDocsModal:function(){this._deleteDocumentsModalVisible=!0},hideDeleteDocsModal:function(){this._deleteDocumentsModalVisible=!1},toggleAllDocs:function(){var e=this._results.map((function(e){return e.id}));this.areAllCheckedOnPage()?this._checkedRows=_.difference(this._checkedRows,e):this._checkedRows=_.union(this._checkedRows,e)},getDeleteDocsData:function(){return{docs:[]}},clearShape:function(){this._shape=YT.SHAPES.RECTANGLE,this._shapeSettings={},this._shapeSettings[YT.SHAPES.RECTANGLE]={mapData:YT.GEO_INDEX_DEFAULT_BBOX_SEARCH,relation:"contains",nearest:!0},this._shapeSettings[YT.SHAPES.POINT]={mapData:{lat:"",lon:""},nearest:!0},this._shapeSettings[YT.SHAPES.LINE]={mapData:[],relation:"none",nearest:!0},this._shapeSettings[YT.SHAPES.CIRCLE]={mapData:{lat:"",lon:"",radius:0},relation:"contains",nearest:!1},this._shapeSettings[YT.SHAPES.POLYGON]={mapData:[],relation:"contains",nearest:!1}},startQuery:function(e){this._hasActiveQuery=!0,this.setSkip(e.skip),this._perPage=e.perPage,this._includeDocs=e.includeDocs,this._shape=e.shape,this._shapeSettings[this._shape]=e.shapeSettings,this.updateLastSearch()},setSkip:function(e){this._skip=e},updateLastSearch:function(){this._lastSearch={perPage:this._perPage,skip:this._skip,includeDocs:this._includeDocs,shape:this._shape,shapeSettings:this._shapeSettings}},addBlankPoint:function(e){this._shapeSettings[e].mapData.push(["",""])},deletePoint:function(e,t){this._shapeSettings[e].mapData.splice(t,1)},updatePoint:function(e,t,n,r){var o="lat"===n?1:0;this._shapeSettings[e].mapData[t][o]=r},toggleNearestNeighbour:function(e){this._shapeSettings[e].nearest=!this._shapeSettings[e].nearest},toggleQueryOptionsTray:function(e){this._queryOptionsTrayVisible=e},dispatch:function(e){var t=this;switch(e.type){case WT.GEO_INDEX_PAGE_INITIALIZING:this.reset(),this.setPageInitializing(!0);break;case WT.GEO_INDEX_DESIGN_DOCS_LOADED:this.initNewGeoIndex(e.options);break;case WT.GEO_INDEX_SELECT_DESIGN_DOC:this.setDDocName(e.options.value);break;case WT.GEO_INDEX_SET_NAME:this.setGeoIndexName(e.options.value);break;case WT.GEO_INIT_EDIT_SEARCH_INDEX:this.initEditIndex(e.options);break;case WT.SEARCH_INDEX_CLEAR:this.reset();break;case WT.GEO_TOGGLE_RESULTS_VIEW:this.setSelectedResultsView(e.options.view);break;case WT.GEO_INDEX_INFO_LOADED:this.setGeoInfo(e.options.geoInfo);break;case WT.GEO_SELECT_SEARCH_SHAPE:this.setShape(e.options.shape);break;case WT.GEO_RESULTS_RETURNED:this.setResults(e.options.resp),this.setEndpoint(e.options.endpoint);break;case WT.GEO_INDEX_UPDATE_PER_PAGE:this.setPerPage(e.options.perPage);break;case WT.GEO_QUERY_STARTED:this.startQuery(e.options.searchSettings);break;case WT.GEO_UPDATE_SHAPE_RELATION:this.updateShapeRelation(e.options.shape,e.options.relation);break;case WT.GEO_UPDATE_SEARCH_SETTING:this.updateSearchSetting(e.options.shape,e.options.setting,e.options.value);break;case WT.GEO_TOGGLE_ROW:this.toggleRow(e.options.docID);break;case WT.GEO_HIDE_DELETE_DOCS_MODAL:this.hideDeleteDocsModal();break;case WT.GEO_SHOW_DELETE_DOCS_MODAL:this.showDeleteDocsModal();break;case WT.GEO_TOGGLE_ALL_DOCS:this.toggleAllDocs();break;case WT.GEO_CLEAR_SHAPE:this.clearShape();break;case WT.GEO_ADD_BLANK_POINT:this.addBlankPoint(e.options.shape);break;case WT.GEO_DELETE_POINT:this.deletePoint(e.options.shape,e.options.index);break;case WT.GEO_UPDATE_POINT:this.updatePoint(e.options.shape,e.options.index,e.options.latOrLng,e.options.value);break;case WT.GEO_TOGGLE_NEAREST_NEIGHBOUR:this.toggleNearestNeighbour(e.options.shape);break;case WT.GEO_TOGGLE_QUERY_OPTIONS_TRAY:this.toggleQueryOptionsTray(e.options.visible);break;case WT.GEO_NEW_DESIGN_DOC_NAME_UPDATED:this.setNewDesignDocName(e.options.value);break;default:return}setTimeout((function(){t.triggerChange()}))}}),tx=new ex;tx.dispatchToken=se.dispatcher.register(tx.dispatch.bind(tx));const nx={GeoIndexStore:ex,geoIndexStore:tx};var rx=n(75703),ox=n.n(rx);function ax(e){return ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(e)}function ix(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cx(e,t,n){return t&&sx(e.prototype,t),n&&sx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ux(e,t)}function ux(e,t){return ux=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ux(e,t)}function dx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hx(e);if(t){var o=hx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return px(this,n)}}function px(e,t){if(t&&("object"===ax(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fx(e)}function fx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hx(e){return hx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hx(e)}function mx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yx=null,bx=null,gx=null,_x={circle:YT.SHAPES.CIRCLE,polyline:YT.SHAPES.LINE,marker:YT.SHAPES.POINT,polygon:YT.SHAPES.POLYGON,rectangle:YT.SHAPES.RECTANGLE},vx={polygon:{color:"green",fill:!1},rectangle:{color:"green"},circle:{color:"green"},polyline:{color:"green"}},Ex=null,wx=null,Sx=function(e){lx(n,e);var t=dx(n);function n(){var e;ix(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return mx(fx(e=t.call.apply(t,[this].concat(o))),"state",{lat:36,lon:0,zoom:2,lockAutoZoom:!1}),mx(fx(e),"updateResults",(function(){gx&&gx.clearLayers();var t=[],n=[],r=e.props.getEditDocURL,o=[];e.props.results.forEach((function(e){var a=e.geometry;if("Point"===a.type){var i=a.coordinates[0],s=a.coordinates[1];t.push(i),n.push(s),o.push({type:"Feature",geometry:a,properties:{"marker-color":"#f3622d",popupHTML:ox().renderToStaticMarkup(ue.createElement(Ox,{id:e.id,editURL:r(e.id)}))}})}"LineString"===a.type&&(a.coordinates.forEach((function(e){t.push(e[0]),n.push(e[1])})),o.push({type:"Feature",geometry:a,properties:{popupHTML:ox().renderToStaticMarkup(ue.createElement(Ox,{id:e.id,editURL:r(e.id)}))}})),"Polygon"!==a.type&&"MultiPolygon"!==a.type||("Polygon"===a.type&&a.coordinates.forEach((function(e){e.forEach((function(e){t.push(e[0]),n.push(e[1])}))})),"MultiPolygon"===a.type&&a.coordinates.forEach((function(e){e.forEach((function(e){e.forEach((function(e){t.push(e[0]),n.push(e[1])}))}))})),o.push({type:"Feature",geometry:a,properties:{fill:"#cd8a07","fill-opacity":.3,stroke:"#cd8a07","stroke-opacity":.7,popupHTML:ox().renderToStaticMarkup(ue.createElement(Ox,{id:e.id,editURL:r(e.id)}))}}))})),o.length&&((gx=L.mapbox.featureLayer({type:"FeatureCollection",features:o}).addTo(yx)).eachLayer((function(e){e.bindPopup(e.feature.properties.popupHTML)})),e.state.lockAutoZoom||(wx={sw:[_.min(n),_.min(t)],ne:[_.max(n),_.max(t)]},e.fitBounds()))})),mx(fx(e),"fitBounds",(function(){null!==wx&&yx.fitBounds([wx.sw,wx.ne])})),mx(fx(e),"getShapeType",(function(e){return e instanceof L.Circle?"circle":e instanceof L.Rectangle?"rectangle":"polygon"})),mx(fx(e),"drawShape",(function(e,t){if(bx.clearLayers(),e!==_x.circle)if(e!==_x.marker)if(e!==_x.rectangle){if(e===_x.polygon||e===_x.polyline){var n=t.map((function(e){return[parseFloat(e[1]),parseFloat(e[0])]}));L.polyline(n,vx.polygon).addTo(bx)}}else{if(-90===t.sw.lat&&-180===t.sw.lon&&90===t.ne.lat&&180===t.ne.lon)return void document.querySelector(".leaflet-draw-edit-remove").classList.add("leaflet-disabled");var r=[[t.sw.lat,t.sw.lon],[t.ne.lat,t.ne.lon]];L.rectangle(r,vx.rectangle).addTo(bx)}else L.marker([t.lat,t.lon]).addTo(bx);else L.circle([t.lat,t.lon],t.radius,vx.circle).addTo(bx)})),mx(fx(e),"shapeCreated",(function(t){bx.clearLayers(),bx.addLayer(t.layer),e.onDraw(t.layerType,t.layer)})),mx(fx(e),"shapeEdited",(function(t){t.layers.eachLayer(function(e){var t=this.getShapeType(e);this.onDraw(t,e)}.bind(fx(e)))})),mx(fx(e),"onDraw",(function(t,n){var r={shape:_x[t],data:{}};if("circle"===t){var o=n.getLatLng();r.data={lat:o.lat,lon:o.lng,radius:n.getRadius()}}else if("marker"===t){var a=n.getLatLng();r.data={lat:a.lat,lon:a.lng}}else if("polyline"===t)r.data=n.toGeoJSON().geometry.coordinates;else if("rectangle"===t){var i=n.getLatLngs();r.data={sw:{lat:i[0].lat,lon:i[0].lng},ne:{lat:i[2].lat,lon:i[2].lng}}}else if("polygon"===t){var s=n.toGeoJSON().geometry.coordinates;1===s.length&&Array.isArray(s[0])&&(s=s[0]),r.data=s}Ex=r,document.querySelector(".leaflet-draw-edit-remove").classList.remove("leaflet-disabled"),e.props.onDraw(r)})),mx(fx(e),"toggleAutoZoomLocking",(function(){e.setState({lockAutoZoom:!e.state.lockAutoZoom})})),e}return cx(n,[{key:"componentDidUpdate",value:function(e){this.props.searchCount!==e.searchCount&&(this.updateResults(),this.drawShape(this.props.shape,this.props.shapeSettings))}},{key:"componentDidMount",value:function(){L.mapbox.config.FORCE_HTTPS=!0,L.mapbox.accessToken="pk.eyJ1IjoiYmVua2VlbiIsImEiOiJjaWphY3Y0MTYwMDU4dXNtNDM1cTlkZ2poIn0.xspf02UPZnouGttSPhyiVg",yx=L.mapbox.map(this.map,"",{zoomControl:!1}).setView([this.state.lat,this.state.lon],this.state.zoom).addLayer(L.mapbox.styleLayer("mapbox://styles/mapbox/streets-v11")),bx=L.featureGroup().addTo(yx),new L.Control.Zoom({position:"topright"}).addTo(yx),new L.Control.Draw({position:"topright",edit:{featureGroup:bx,remove:!1,edit:!1},draw:{polyline:{shapeOptions:vx.polyline},marker:!0,polygon:{shapeOptions:vx.polygon},rectangle:{shapeOptions:vx.rectangle},circle:{shapeOptions:vx.circle}}}).addTo(yx),yx.on("draw:created",this.shapeCreated),yx.on("draw:edited",this.shapeEdited);var e=this.props.onClear;L.Control.RemoveAll=L.Control.extend({options:{position:"topright"},onAdd:function(){var t=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation).addListener(t,"click",L.DomEvent.preventDefault).addListener(t,"click",(function(){var t=this.querySelector("a");t.classList.contains("leaflet-disabled")||(bx.clearLayers(),e(),Ex=null,t.classList.add("leaflet-disabled"))}));var n="leaflet-draw-edit-remove";null===Ex&&(n+=" leaflet-disabled");var r=L.DomUtil.create("a",n,t);return r.title="Remove Shape",r.href="#",t}});var t=new L.Control.RemoveAll;yx.addControl(t),this.updateResults(),this.drawShape(this.props.shape,this.props.shapeSettings)}},{key:"render",value:function(){var e=this;return ue.createElement("div",{className:"map flex-body flex-layout flex-col"},ue.createElement("div",{ref:function(t){return e.map=t},className:"flex-body"}),ue.createElement("div",{className:"lock-auto-zoom-section"},ue.createElement("input",{type:"checkbox",id:"lock-auto-zoom",onChange:this.toggleAutoZoomLocking,checked:this.state.lockAutoZoom}),ue.createElement("label",{htmlFor:"lock-auto-zoom"},"Lock auto-zoom/panning")))}}]),n}(ue.Component);mx(Sx,"propTypes",{searchCount:kt().number.isRequired,results:kt().array.isRequired,onDraw:kt().func.isRequired});var Ox=function(e){lx(n,e);var t=dx(n);function n(){return ix(this,n),t.apply(this,arguments)}return cx(n,[{key:"render",value:function(){return ue.createElement("div",{className:"geo-map-result"},ue.createElement("div",null,"ID: ",this.props.id),ue.createElement("div",null,ue.createElement("a",{href:this.props.editURL,"data-bypass":"true",target:"_blank",rel:"noopener noreferrer",className:"opens-new-window"},"Edit document")))}}]),n}(ue.Component);mx(Ox,"propTypes",{id:kt().string.isRequired,editURL:kt().string.isRequired});const Nx={Map:Sx};function Dx(e){return Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dx(e)}function Cx(){return Cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cx.apply(this,arguments)}function Px(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tx(e,t,n){return t&&kx(e.prototype,t),n&&kx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ix(e,t)}function Ix(e,t){return Ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ix(e,t)}function Ax(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mx(e);if(t){var o=Mx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lx(this,n)}}function Lx(e,t){if(t&&("object"===Dx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jx(e)}function jx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mx(e){return Mx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mx(e)}var Ux=Zc.DesignDocSelector,Bx=pi.connectToStores,qx=pi.Document,Vx=pi.ToggleHeaderButton,Hx=pi.TrayContents,Gx=pi.TrayWrapper,Fx=on.zx,Kx=on.hE,zx=Li.ConfirmationModal,Wx=nx.geoIndexStore,Yx=function(e){xx(n,e);var t=Ax(n);function n(){return Rx(this,n),t.apply(this,arguments)}return Tx(n,[{key:"render",value:function(){return ue.createElement("div",{className:"tab-content flex-body"},ue.createElement(Zx,this.props))}}]),n}(ue.Component),Xx=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{pageInitializing:Wx.isPageInitializing(),resultsView:Wx.getSelectedResultsView(),perPage:Wx.getPerPage(),geoInfo:Wx.getGeoInfo()}})),Px(jx(e),"onChange",(function(){e.setState(e.getStoreState())})),Px(jx(e),"state",e.getStoreState()),e}return Tx(n,[{key:"componentDidMount",value:function(){Wx.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wx.off("change",this.onChange,this)}},{key:"getCancelLinkUrl",value:function(){var e=encodeURIComponent(this.props.databaseName),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=encodeURIComponent(this.props.ddocName),r=encodeURIComponent(this.props.indexName);return"#"+se.urls("geoindex","queryPage",e,t,n,r)}},{key:"render",value:function(){var e=this;return this.state.pageInitializing?ue.createElement("div",{className:"edit-search-index-page-loading"},ue.createElement(pi.LoadLines,null)):ue.createElement(Zx,Cx({ref:function(t){return e.geoIndexEditor=t},cancelLink:this.getCancelLinkUrl()},this.props))}}]),n}(ue.Component);Px(Xx,"propTypes",{databaseName:kt().string.isRequired,ddocName:kt().string.isRequired,indexName:kt().string.isRequired,partitionKey:kt().string});var Qx=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Px(jx(e=t.call.apply(t,[this].concat(a))),"getStoreState",(function(){return{pageInitializing:Wx.isPageInitializing(),activeGeoQuery:Wx.hasActiveGeoQuery(),perPage:Wx.getPerPage(),resultsView:Wx.getSelectedResultsView(),geoInfo:Wx.getGeoInfo(),deleteDocumentsModalVisible:Wx.isDeleteDocumentsModalVisible(),results:Wx.getResults(),searchCount:Wx.getSearchCount(),shape:Wx.getShape(),shapeSettings:Wx.getShapeSettings(),includeDocs:Wx.getIncludeDocs(),skip:Wx.getSkip(),lastSearch:Wx.getLastSearch(),checkedRows:Wx.getCheckedRows(),allCheckedOnPage:Wx.areAllCheckedOnPage(),hasOneChecked:Wx.hasOneCheckedOnAnyPage(),deleteDocsData:Wx.getDeleteDocsData(),designDocs:Wx.getDesignDocs()}})),Px(jx(e),"onChange",(function(){e.setState(e.getStoreState())})),Px(jx(e),"runQuery",(function(t){ZT.query({databaseName:e.props.databaseName,ddocName:e.props.ddocName,indexName:e.props.indexName,perPage:t.perPage,shape:t.shape,shapeSettings:t.shapeSettings,includeDocs:t.includeDocs,skip:t.skip})})),Px(jx(e),"onChangePerPage",(function(t){e.runQuery({perPage:t,shape:e.state.lastSearch.shape,shapeSettings:e.state.lastSearch.shapeSettings[e.state.lastSearch.shape],includeDocs:e.state.lastSearch.includeDocs,skip:0})})),Px(jx(e),"onDraw",(function(t){var n=o().extend(!0,{},e.state.shapeSettings[t.shape]);n.mapData=t.data,e.runQuery({perPage:e.state.perPage,shape:t.shape,shapeSettings:n,includeDocs:e.state.includeDocs,skip:0})})),Px(jx(e),"onClear",(function(){e.runQuery({perPage:e.state.perPage,shape:YT.SHAPES.RECTANGLE,shapeSettings:{mapData:YT.GEO_INDEX_DEFAULT_BBOX_SEARCH,relation:"contains"},includeDocs:e.state.includeDocs,skip:0})})),Px(jx(e),"getLoaderOverlay",(function(){return e.state.resultsView===YT.VIEWS.MAP&&e.state.activeGeoQuery?ue.createElement("div",{className:"query-loader"},ue.createElement(pi.LoadLines,null)):null})),Px(jx(e),"getPage",(function(){return e.state.resultsView===YT.VIEWS.JSON?ue.createElement(Jx,{isLoading:e.state.activeGeoQuery,databaseName:e.props.databaseName,checkedRows:e.state.checkedRows,includeDocs:e.state.includeDocs,numDocsInIndex:e.state.geoInfo.doc_count,results:e.state.results,allCheckedOnPage:e.state.allCheckedOnPage,hasOneChecked:e.state.hasOneChecked}):e.state.resultsView===YT.VIEWS.MAP?ue.createElement(eI,{onDraw:e.onDraw,onClear:e.onClear,databaseName:e.props.databaseName,results:e.state.results,searchCount:e.state.searchCount,defaultShape:e.state.shape,defaultShapeSettings:e.state.shapeSettings[e.state.shape].mapData}):void 0})),Px(jx(e),"getNoDocsOverlay",(function(){return e.state.resultsView!==YT.VIEWS.MAP||e.state.geoInfo.doc_count>0||e.state.activeGeoQuery||e.state.results.length>0?null:ue.createElement("div",{className:"geo-no-docs"},ue.createElement("h5",null,"No documents found."),ue.createElement("p",null,"If this is a new index, depending on the size of your database it may take time to show results. Click the button below to refresh the page."),ue.createElement("a",{href:"#","data-bypass":"true",onClick:e.refreshPage,className:"btn btn-primary"},"Refresh"))})),Px(jx(e),"refreshPage",(function(e){e.preventDefault(),window.location.reload()})),Px(jx(e),"onDeleteDocuments",(function(){})),Px(jx(e),"navigatePrevious",(function(){e.runQuery({perPage:e.state.lastSearch.perPage,shape:e.state.lastSearch.shape,shapeSettings:e.state.lastSearch.shapeSettings[e.state.lastSearch.shape],includeDocs:e.state.lastSearch.includeDocs,skip:e.state.skip-e.state.perPage})})),Px(jx(e),"navigateNext",(function(){e.runQuery({perPage:e.state.lastSearch.perPage,shape:e.state.lastSearch.shape,shapeSettings:e.state.lastSearch.shapeSettings[e.state.lastSearch.shape],includeDocs:e.state.lastSearch.includeDocs,skip:e.state.skip+e.state.perPage})})),Px(jx(e),"getFooter",(function(){if(0===e.state.geoInfo.doc_count&&0===e.state.results.length)return null;var t=e.state.skip+1,n=(e.state.results.length<e.state.perPage?e.state.results.length:e.state.perPage)+t-1;return ue.createElement($x,{perPage:e.state.perPage,onChangePerPage:e.onChangePerPage,navigatePrevious:e.navigatePrevious,navigateNext:e.navigateNext,databaseName:e.props.databaseName,ddocName:e.props.ddocName,indexName:e.props.indexName,shape:e.state.shape,shapeSettings:e.state.shapeSettings[e.state.shape],firstDocNum:t,lastDocNum:n,isFirstPage:0==e.state.skip,isLastPage:e.state.results.length<e.state.perPage})})),Px(jx(e),"state",e.getStoreState()),e}return Tx(n,[{key:"componentDidMount",value:function(){Wx.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wx.off("change",this.onChange,this)}},{key:"render",value:function(){if(this.state.pageInitializing)return ue.createElement("div",{className:"geo-index-page-loading"},ue.createElement(pi.LoadLines,null));var e="Are you sure you want to delete ";return 1===this.state.checkedRows.length?e+="this document?":e+="these "+this.state.checkedRows.length+" documents?",ue.createElement("div",{className:"flex-layout flex-col flex-body"},this.getPage(),this.getLoaderOverlay(),this.getNoDocsOverlay(),this.getFooter(),ue.createElement(zx,{visible:this.state.deleteDocumentsModalVisible,text:e,onClose:ZT.hideDeleteDocsModal,onSubmit:this.onDeleteDocuments}))}}]),n}(ue.Component);Px(Qx,"propTypes",{databaseName:kt().string.isRequired,database:kt().object.isRequired,ddocName:kt().string.isRequired,indexName:kt().string.isRequired});var Jx=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"onDoubleClick",(function(t){se.navigate(e.getURL(t))})),Px(jx(e),"getLink",(function(t){return ue.createElement("a",{href:e.getURL(t)},ue.createElement("i",{className:"fonticon-pencil"}))})),Px(jx(e),"getURL",(function(t){return"#"+se.urls("document","web-index",e.props.databaseName,t)})),Px(jx(e),"toggleSelectAll",(function(e){e.preventDefault(),ZT.toggleAllDocs()})),Px(jx(e),"onRemoveItem",(function(){ZT.showDeleteDocsModal()})),Px(jx(e),"getBulkSelector",(function(){return null})),Px(jx(e),"getLoadLines",(function(){return e.props.isLoading?ue.createElement(pi.LoadLines,null):null})),Px(jx(e),"getResults",(function(){return 0!==e.props.results.length||e.props.isLoading?e.props.results.map((function(t,n){var r=t;return _.has(t,"doc")&&(r=t.doc),ue.createElement(qx,{key:t.id+n,doc:t,onDoubleClick:e.onDoubleClick,keylabel:"id",docContent:JSON.stringify(r,null,"  "),checked:-1!==e.props.checkedRows.indexOf(t.id),header:t.id,docChecked:ZT.toggleRow,isDeletable:!1,maxRows:100,docIdentifier:t.id},e.getLink(t.id))})):ue.createElement("p",null,"No results found.")})),e}return Tx(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return 0!==this.props.numDocsInIndex||this.props.isLoading||0!==this.props.results.length?ue.createElement("div",{className:"flex-body geo-json-loader"},ue.createElement("div",{className:"loading-lines-wrapper"},this.getLoadLines()),ue.createElement("div",{className:"geo-json-results"},ue.createElement("div",{className:"show-select"},this.getBulkSelector(),ue.createElement("div",{id:"doc-list"},this.getResults())))):ue.createElement(ph,{text:"No Documents Found"})}}]),n}(ue.Component);Px(Jx,"propTypes",{isLoading:kt().bool.isRequired,results:kt().array.isRequired,databaseName:kt().string.isRequired,includeDocs:kt().bool.isRequired,checkedRows:kt().array.isRequired,allCheckedOnPage:kt().bool.isRequired,hasOneChecked:kt().bool.isRequired});var $x=function(e){xx(n,e);var t=Ax(n);function n(){return Rx(this,n),t.apply(this,arguments)}return Tx(n,[{key:"render",value:function(){var e=0===this.props.lastDocNum?ue.createElement("span",{className:"geo-no-results"},"No results."):ue.createElement("span",null,"Showing ",this.props.firstDocNum," - ",this.props.lastDocNum);return ue.createElement("footer",{className:"flex-fill geo-index-map-footer pagination-footer flex-layout flex-row"},ue.createElement("div",{className:"flex-body"}),ue.createElement("div",{className:"flex-fill"},ue.createElement("div",{className:"doclist-count"},e),ue.createElement(vi,{perPageChange:this.props.onChangePerPage,perPage:this.props.perPage,options:[1,2,5,10,20,30,50,100,150,200]}),ue.createElement(lI,{isFirstPage:this.props.isFirstPage,isLastPage:this.props.isLastPage,navigatePrevious:this.props.navigatePrevious,navigateNext:this.props.navigateNext})))}}]),n}(ue.Component);Px($x,"propTypes",{perPage:kt().number.isRequired,onChangePerPage:kt().func.isRequired,databaseName:kt().string.isRequired,ddocName:kt().string.isRequired,indexName:kt().string.isRequired,shape:kt().string.isRequired,shapeSettings:kt().object.isRequired,isFirstPage:kt().bool.isRequired,isLastPage:kt().bool.isRequired});var Zx=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{pageInitializing:Wx.isPageInitializing(),designDocs:Wx.getDesignDocs(),designDocList:Wx.getDesignDocList(),ddocName:Wx.getDDocName(),geoIndexFunction:Wx.getGeoIndexFunction(),geoIndexName:Wx.getGeoIndexName(),lastSavedIndexName:Wx.getLastSavedIndexName(),lastSavedDesignDocName:Wx.getLastSavedDesignDocName(),newDesignDocName:Wx.getNewDesignDocName(),saveDoc:Wx.getSaveDesignDoc()}})),Px(jx(e),"onChange",(function(){e.setState(e.getStoreState())})),Px(jx(e),"updateGeoIndexName",(function(e){ZT.setGeoIndexName(e.target.value)})),Px(jx(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()){var n=e.state.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=se.urls("geoindex","queryPage",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.state.geoIndexName));ZT.saveGeoIndex(e.state.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.state.geoIndexName,designDocs:e.state.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),lastSavedIndexName:e.state.lastSavedIndexName,lastSavedDesignDocName:e.state.lastSavedDesignDocName},o)}})),Px(jx(e),"getIndexFunction",(function(){return e.geoIndexEditor.getValue()})),Px(jx(e),"getCancelLink",(function(){if(!e.props.isCreatingIndex)return ue.createElement("a",{href:e.props.cancelLink,className:"geo-index-edit-cancel-link"},"Cancel")})),Px(jx(e),"state",e.getStoreState()),e}return Tx(n,[{key:"componentDidMount",value:function(){Wx.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wx.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this;if(this.state.pageInitializing)return ue.createElement("div",{className:"search-index-page-loading"},ue.createElement(pi.LoadLines,null));var t=this.props.isCreatingIndex?"New Geospatial Index":"Edit Geospatial Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return ue.createElement("div",{className:"geo-page-wrapper"},ue.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},ue.createElement("h3",{className:"index-page-header"},t),ue.createElement(Ux,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.state.designDocList,isDbPartitioned:!1,newDesignDocName:this.state.ddocName,newDesignDocPartitioned:!1,selectedDesignDocName:this.state.ddocName,selectedDesignDocPartitioned:!1,onSelectDesignDoc:ZT.selectDesignDoc,onChangeNewDesignDocName:ZT.updateNewDesignDocName,onChangeNewDesignDocPartitioned:function(){},docLink:le.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),ue.createElement("div",{className:"control-group"},ue.createElement("label",{htmlFor:"search-name"},"Index name"),ue.createElement("input",{type:"text",id:"search-name",value:this.state.geoIndexName,onChange:this.updateGeoIndexName})),ue.createElement(pi.CodeEditorPanel,{ref:function(t){return e.geoIndexEditor=t},id:"geoindex-function",className:"ace-editor-section",title:"Geospatial index function",allowZenMode:!0,docLink:le.helpers.getDocUrl("GEOSPATIAL_INDEXES_CREATING"),defaultCode:this.state.geoIndexFunction,blur:this.props.blur}),ue.createElement("div",{className:"control-group"},ue.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},ue.createElement("i",{className:"icon fonticon-ok-circled"})," ",n),this.getCancelLink()),ue.createElement("div",{className:"clearfix"})))}}]),n}(ue.Component);Px(Zx,"defaultProps",{isCreatingIndex:!1,database:null,blur:function(){}}),Px(Zx,"propTypes",{isCreatingIndex:kt().bool,database:kt().object});var eI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getEditDocURL",(function(t){return"#"+se.urls("document","web-index",e.props.databaseName,t)})),e}return Tx(n,[{key:"render",value:function(){var e=Nx.Map;return ue.createElement(e,{shape:this.props.defaultShape,shapeSettings:this.props.defaultShapeSettings,results:this.props.results,searchCount:this.props.searchCount,onDraw:this.props.onDraw,onClear:this.props.onClear,getEditDocURL:this.getEditDocURL})}}]),n}(ue.Component);Px(eI,"propTypes",{results:kt().array.isRequired,searchCount:kt().number.isRequired,defaultShape:kt().string.isRequired});var tI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getWrap",(function(){return Bx(Gx,[Wx],(function(){return{contentVisible:Wx.isQueryTrayVisible(),shape:Wx.getShape(),shapeSettings:Wx.getShapeSettings()}}))})),e}return Tx(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.getWrap();return ue.createElement(e,null,ue.createElement(nI,{contentVisible:!1,onSubmit:this.props.onSubmit}))}}]),n}(ue.Component),nI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"onSubmit",(function(t){t.preventDefault(),e.geoSettings.validate()&&(e.closeTray(),e.props.onSubmit())})),Px(jx(e),"getTray",(function(){return ue.createElement(Hx,{contentVisible:e.props.contentVisible,closeTray:e.closeTray,className:"query-options geo-query-options",id:"query-options-tray"},ue.createElement("form",{onSubmit:e.onSubmit,className:"js-view-query-update custom-inputs"},ue.createElement(aI,{ref:function(t){return e.geoSettings=t},shape:e.props.shape,shapeSettings:e.props.shapeSettings}),ue.createElement(ap,{onCancel:e.closeTray})))})),Px(jx(e),"toggleQueryOptionsTray",(function(){ZT.toggleQueryOptionsTray(!e.props.contentVisible)})),Px(jx(e),"closeTray",(function(){ZT.toggleQueryOptionsTray(!1)})),e}return Tx(n,[{key:"render",value:function(){return ue.createElement("div",{id:"geo-query-options"},ue.createElement(Vx,{containerClasses:"header-control-box control-toggle-queryoptions",title:"Options",fonticon:"fonticon-gears",text:"Options",toggleCallback:this.toggleQueryOptionsTray}),this.getTray())}}]),n}(ue.Component);Px(nI,"propTypes",{onSubmit:kt().func.isRequired});var rI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{selectedView:Wx.getSelectedResultsView(),includeDocs:Wx.getIncludeDocs()}})),Px(jx(e),"onChange",(function(){e.setState(e.getStoreState())})),Px(jx(e),"toggleView",(function(e){ZT.toggleResultsView(e)})),Px(jx(e),"state",e.getStoreState()),e}return Tx(n,[{key:"componentDidMount",value:function(){Wx.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wx.off("change",this.onChange)}},{key:"render",value:function(){return ue.createElement("div",{className:"alternative-header flex-body geo-btns"},ue.createElement(Kx,{className:"header-toggle-button"},ue.createElement(Fx,{className:this.state.selectedView===YT.VIEWS.JSON?"active":"",onClick:this.toggleView.bind(this,YT.VIEWS.JSON)},ue.createElement("i",{className:"fonticon-json"})," JSON"),ue.createElement(Fx,{className:this.state.selectedView===YT.VIEWS.MAP?"active":"",onClick:this.toggleView.bind(this,YT.VIEWS.MAP)},ue.createElement("i",{className:"fonticon-map2"}),ue.createElement("span",{className:"geo-map-view-label"},"Map"))),ue.createElement(Vx,{toggleCallback:this.props.onToggleIncludeDocs,containerClasses:"header-control-box control-toggle-include-docs",title:"Enable/Disable include_docs",fonticon:this.state.includeDocs?"icon-check":"icon-check-empty",iconDefaultClass:"icon fontawesome",text:""}))}}]),n}(ue.Component);Px(rI,"propTypes",{onToggleIncludeDocs:kt().func.isRequired});var oI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{lastSearch:Wx.getLastSearch(),perPage:Wx.getPerPage(),shape:Wx.getShape(),shapeSettings:Wx.getShapeSettings(),includeDocs:Wx.getIncludeDocs(),skip:Wx.getSkip()}})),Px(jx(e),"onChange",(function(){e.setState(e.getStoreState())})),Px(jx(e),"runQuery",(function(t){ZT.query({databaseName:e.props.databaseName,ddocName:e.props.ddocName,indexName:e.props.indexName,perPage:t.perPage,shape:t.shape,shapeSettings:t.shapeSettings,includeDocs:t.includeDocs,skip:t.skip})})),Px(jx(e),"onToggleIncludeDocs",(function(){e.runQuery({perPage:e.state.lastSearch.perPage,shape:e.state.lastSearch.shape,shapeSettings:e.state.lastSearch.shapeSettings[e.state.lastSearch.shape],includeDocs:!e.state.lastSearch.includeDocs,skip:e.state.lastSearch.skip})})),Px(jx(e),"onSubmit",(function(){e.runQuery({perPage:e.state.perPage,shape:e.state.shape,shapeSettings:e.state.shapeSettings[e.state.shape],includeDocs:e.state.includeDocs,skip:0})})),Px(jx(e),"state",e.getStoreState()),e}return Tx(n,[{key:"componentDidMount",value:function(){Wx.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Wx.off("change",this.onChange,this)}},{key:"render",value:function(){return ue.createElement("div",{className:"flex-body flex-layout flex-row"},ue.createElement(rI,{onToggleIncludeDocs:this.onToggleIncludeDocs}),ue.createElement("div",{className:"flex-fill"},ue.createElement(tI,{onSubmit:this.onSubmit})))}}]),n}(ue.Component);Px(oI,"propTypes",{databaseName:kt().string.isRequired,ddocName:kt().string.isRequired,indexName:kt().string.isRequired});var aI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"validate",(function(){var t="",n={};return e.props.shape===YT.SHAPES.CIRCLE&&(""===(n=e.props.shapeSettings[YT.SHAPES.CIRCLE]).mapData.lat||""===n.mapData.lon?t="Please enter a lat/lon coordinate for the circle.":""!==n.mapData.radius&&0!==n.mapData.radius||(t="Please enter a radius for the circle")),e.props.shape===YT.SHAPES.RECTANGLE&&(""===(n=e.props.shapeSettings[YT.SHAPES.RECTANGLE]).mapData.sw.lat||""===n.mapData.sw.lon||""===n.mapData.ne.lat||""===n.mapData.ne.lon?t="Please enter all bounding box lat/lon coordinates.":_.isNumber(parseFloat(n.mapData.sw.lat))&&_.isNumber(parseFloat(n.mapData.sw.lon))&&_.isNumber(parseFloat(n.mapData.ne.lat))&&_.isNumber(parseFloat(n.mapData.ne.lon))||(t="Please only enter numeric values for the lat/lon coordinates.")),e.props.shape===YT.SHAPES.LINE&&(n=e.props.shapeSettings[YT.SHAPES.LINE].mapData).length<2&&(t="Line searches require at least two vertexes."),e.props.shape===YT.SHAPES.POLYGON&&((n=e.props.shapeSettings[YT.SHAPES.POLYGON].mapData).length<3?t="Polygon searches require a connected polygon of at least three vertexes.":n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]||(t="Polygon searches require a connected polygon. The last vertexes lat/lng coordinates should be the same as the first.")),e.props.shape===YT.SHAPES.POINT&&(""!==(n=e.props.shapeSettings[YT.SHAPES.POINT]).mapData.lat&&""!==n.mapData.lon||(t="Please enter a lat/lon coordinate.")),!t||(se.addNotification({msg:t,type:"error",clear:!0}),!1)})),Px(jx(e),"selectShape",(function(e){ZT.selectShape(e)})),Px(jx(e),"getShapeSettings",(function(){return e.props.shape===YT.SHAPES.RECTANGLE?e.rectangleSettings():e.props.shape===YT.SHAPES.POINT?e.pointSettings():e.props.shape===YT.SHAPES.LINE?e.lineSettings():e.props.shape===YT.SHAPES.CIRCLE?e.circleSettings():e.props.shape===YT.SHAPES.POLYGON?e.polygonSettings():void 0})),Px(jx(e),"setSearchSetting",(function(e){var t=e.target.getAttribute("data-shape"),n=e.target.getAttribute("data-setting");ZT.setSearchSetting(t,n,e.target.value)})),Px(jx(e),"toggleNearestNeighbour",(function(e){ZT.toggleNearestNeighbour(e)})),Px(jx(e),"rectangleSettings",(function(){var t=e.props.shapeSettings[YT.SHAPES.RECTANGLE];return ue.createElement("div",{className:"geo-settings rect-shape-settings"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("h5",null,"Lower Left Coordinates"),ue.createElement("div",null,ue.createElement("label",null,"Lat"),ue.createElement("input",{type:"text",value:t.mapData.sw.lat,"data-shape":YT.SHAPES.RECTANGLE,"data-setting":"mapData.sw.lat",onChange:e.setSearchSetting})),ue.createElement("div",null,ue.createElement("label",null,"Lng"),ue.createElement("input",{type:"text",value:t.mapData.sw.lon,"data-shape":YT.SHAPES.RECTANGLE,"data-setting":"mapData.sw.lon",onChange:e.setSearchSetting}))),ue.createElement("div",{className:"flex-body"},ue.createElement("h5",null,"Upper Right Coordinates"),ue.createElement("div",null,ue.createElement("label",null,"Lat"),ue.createElement("input",{type:"text",value:t.mapData.ne.lat,"data-shape":YT.SHAPES.RECTANGLE,"data-setting":"mapData.ne.lat",onChange:e.setSearchSetting})),ue.createElement("div",null,ue.createElement("label",null,"Lng"),ue.createElement("input",{type:"text",value:t.mapData.ne.lon,"data-shape":YT.SHAPES.RECTANGLE,"data-setting":"mapData.ne.lon",onChange:e.setSearchSetting})))),ue.createElement("div",{className:"flex-layout flex-row geo-tray-nn-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",{className:"row-fluid fieldsets geo-nn-cell"},ue.createElement("div",{className:"checkbox"},ue.createElement("input",{onChange:e.toggleNearestNeighbour.bind(jx(e),YT.SHAPES.RECTANGLE),id:"geo-nn",name:"geo-nn",type:"checkbox",checked:t.nearest}),ue.createElement("label",{htmlFor:"geo-nn"},"Nearest neighbour")))),ue.createElement("div",{className:"flex-body relation-col"},ue.createElement("label",{className:"mid-label"},"Relation"),ue.createElement(cI,{value:t.relation,shape:YT.SHAPES.RECTANGLE,onChange:ZT.updateShapeRelation}))))})),Px(jx(e),"circleSettings",(function(){var t=e.props.shapeSettings[YT.SHAPES.CIRCLE];return ue.createElement("div",{className:" geo-settings ellipse-shape-settings"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",null,ue.createElement("label",null,"Lat"),ue.createElement("input",{type:"text",value:t.mapData.lat,"data-shape":YT.SHAPES.CIRCLE,"data-setting":"mapData.lat",onChange:e.setSearchSetting})),ue.createElement("div",null,ue.createElement("label",null,"Lng"),ue.createElement("input",{type:"text",value:t.mapData.lon,"data-shape":YT.SHAPES.CIRCLE,"data-setting":"mapData.lon",onChange:e.setSearchSetting}))),ue.createElement("div",{className:"flex-body"},ue.createElement("div",null,ue.createElement("label",{className:"mid-label"},"Radius"),ue.createElement("input",{type:"text",value:t.mapData.radius,"data-shape":YT.SHAPES.CIRCLE,"data-setting":"mapData.radius",onChange:e.setSearchSetting})))),ue.createElement("div",{className:"flex-layout flex-row geo-tray-nn-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",{className:"row-fluid fieldsets geo-nn-cell"},ue.createElement("div",{className:"checkbox"},ue.createElement("input",{onChange:e.toggleNearestNeighbour.bind(jx(e),YT.SHAPES.CIRCLE),id:"geo-nn",name:"geo-nn",type:"checkbox",checked:t.nearest}),ue.createElement("label",{htmlFor:"geo-nn"},"Nearest neighbour")))),ue.createElement("div",{className:"flex-body relation-col"},ue.createElement("label",{className:"mid-label"},"Relation"),ue.createElement(cI,{value:t.relation,shape:YT.SHAPES.CIRCLE,onChange:ZT.updateShapeRelation}))))})),Px(jx(e),"pointSettings",(function(){var t=e.props.shapeSettings[YT.SHAPES.POINT];return ue.createElement("div",{className:"geo-settings point-shape-settings"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",null,ue.createElement("label",null,"Lat"),ue.createElement("input",{type:"text",value:t.mapData.lat,"data-shape":YT.SHAPES.POINT,"data-setting":"mapData.lat",onChange:e.setSearchSetting})),ue.createElement("div",null,ue.createElement("label",null,"Lng"),ue.createElement("input",{type:"text",value:t.mapData.lon,"data-shape":YT.SHAPES.POINT,"data-setting":"mapData.lon",onChange:e.setSearchSetting})))),ue.createElement("div",{className:"flex-layout flex-row geo-tray-nn-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",{className:"row-fluid fieldsets geo-nn-cell"},ue.createElement("div",{className:"checkbox"},ue.createElement("input",{onChange:e.toggleNearestNeighbour.bind(jx(e),YT.SHAPES.POINT),id:"geo-nn",name:"geo-nn",type:"checkbox",checked:t.nearest}),ue.createElement("label",{htmlFor:"geo-nn"},"Nearest neighbour"))))))})),Px(jx(e),"lineSettings",(function(){var t=e.props.shapeSettings[YT.SHAPES.LINE];return ue.createElement("div",{className:"flex-layout flex-row geo-settings line-shape-settings"},ue.createElement("div",{className:"flex-body"},ue.createElement(iI,{points:t.mapData,addPoint:ZT.addBlankPoint.bind(jx(e),YT.SHAPES.LINE),shape:YT.SHAPES.LINE}),ue.createElement("div",{className:"flex-layout flex-row geo-tray-nn-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",{className:"row-fluid fieldsets geo-nn-cell"},ue.createElement("div",{className:"checkbox"},ue.createElement("input",{onChange:e.toggleNearestNeighbour.bind(jx(e),YT.SHAPES.LINE),id:"geo-nn",name:"geo-nn",type:"checkbox",checked:t.nearest}),ue.createElement("label",{htmlFor:"geo-nn"},"Nearest neighbour")))),ue.createElement("div",{className:"flex-body relation-col"},ue.createElement("label",{className:"mid-label"},"Relation"),ue.createElement(cI,{value:t.relation,shape:YT.SHAPES.LINE,onChange:ZT.updateShapeRelation})))))})),Px(jx(e),"polygonSettings",(function(){var t=e.props.shapeSettings[YT.SHAPES.POLYGON];return ue.createElement("div",{className:"geo-settings polygon-shape-settings"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-body"},ue.createElement(iI,{points:t.mapData,addPoint:ZT.addBlankPoint.bind(jx(e),YT.SHAPES.POLYGON),shape:YT.SHAPES.POLYGON}))),ue.createElement("div",{className:"flex-layout flex-row geo-tray-nn-row"},ue.createElement("div",{className:"flex-body"},ue.createElement("div",{className:"row-fluid fieldsets geo-nn-cell"},ue.createElement("div",{className:"checkbox"},ue.createElement("input",{onChange:e.toggleNearestNeighbour.bind(jx(e),YT.SHAPES.POLYGON),id:"geo-nn",name:"geo-nn",type:"checkbox",checked:t.nearest}),ue.createElement("label",{htmlFor:"geo-nn"},"Nearest neighbour")))),ue.createElement("div",{className:"flex-body relation-col"},ue.createElement("label",{className:"mid-label"},"Relation"),ue.createElement(cI,{value:t.relation,shape:YT.SHAPES.POLYGON,onChange:ZT.updateShapeRelation}))))})),e}return Tx(n,[{key:"render",value:function(){var e="drop-down btn",t=e,n=e,r=e,o=e,a=e;return this.props.shape===YT.SHAPES.RECTANGLE?t+=" active":this.props.shape===YT.SHAPES.POINT?n+=" active":this.props.shape===YT.SHAPES.LINE?r+=" active":this.props.shape===YT.SHAPES.CIRCLE?o+=" active":this.props.shape===YT.SHAPES.POLYGON&&(a+=" active"),ue.createElement("div",{className:"query-group",id:"query-options-key-search"},ue.createElement("div",{className:"add-on"},"Query Options",ue.createElement("a",{className:"help-link",href:se.constants.DOC_URLS.GEOSPATIAL_INDEXES,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},ue.createElement("i",{className:"icon-question-sign"}))),ue.createElement("div",{className:"btn-group toggle-btns row-fluid"},ue.createElement("label",{onClick:this.selectShape.bind(this,YT.SHAPES.RECTANGLE),className:t},"Rectangle"),ue.createElement("label",{onClick:this.selectShape.bind(this,YT.SHAPES.POINT),className:n},"Point"),ue.createElement("label",{onClick:this.selectShape.bind(this,YT.SHAPES.LINE),className:r},"Lines"),ue.createElement("label",{onClick:this.selectShape.bind(this,YT.SHAPES.CIRCLE),className:o},"Circle"),ue.createElement("label",{onClick:this.selectShape.bind(this,YT.SHAPES.POLYGON),className:a},"Polygon")),this.getShapeSettings())}}]),n}(ue.Component);Px(aI,"propTypes",{shape:kt().string.isRequired,shapeSettings:kt().object.isRequired});var iI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"getLatLngGrid",(function(){return 0===e.props.points.length?null:ue.createElement("div",{className:"lat-lng-grid"},ue.createElement("div",{className:"flex-layout flex-row heading-row"},ue.createElement("div",{className:"lat-lng-row-num"}),ue.createElement("div",{className:"flex-body"},"Latitude"),ue.createElement("div",{className:"flex-body"},"Longitude"),ue.createElement("div",{className:"lat-lng-delete"})),ue.createElement("div",{className:"lat-lng-grid-rows"},e.getLatLngRows()))})),Px(jx(e),"editPoint",(function(t,n,r){ZT.updatePoint(e.props.shape,t,n,r)})),Px(jx(e),"getLatLngRows",(function(){return e.props.points.map((function(t,n){return ue.createElement(sI,{key:n,lat:t[1],lng:t[0],index:n,canDelete:!0,onEdit:e.editPoint,onDelete:ZT.deletePoint.bind(jx(e),e.props.shape,n)})}))})),Px(jx(e),"addPoint",(function(t){t.preventDefault(),e.props.addPoint()})),e}return Tx(n,[{key:"render",value:function(){return ue.createElement("div",null,this.getLatLngGrid(),ue.createElement("p",{className:"add-point"},ue.createElement("a",{href:"#","data-bypass":"true",onClick:this.addPoint},"Add point »")))}}]),n}(ue.Component);Px(iI,"propTypes",{points:kt().array.isRequired,addPoint:kt().func.isRequired,shape:kt().string.isRequired});var sI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"updateLatitude",(function(t){e.props.onEdit(e.props.index,"lat",t.target.value)})),Px(jx(e),"updateLongitude",(function(t){e.props.onEdit(e.props.index,"lng",t.target.value)})),e}return Tx(n,[{key:"render",value:function(){var e="fonticon fonticon-cancel";return this.props.canDelete||(e+=" disabled"),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{className:"lat-lng-row-num"},this.props.index+1),ue.createElement("div",{className:"flex-body"},ue.createElement("input",{type:"text",value:this.props.lat,onChange:this.updateLatitude})),ue.createElement("div",{className:"flex-body"},ue.createElement("input",{type:"text",value:this.props.lng,onChange:this.updateLongitude})),ue.createElement("div",{className:"lat-lng-delete"},ue.createElement("i",{className:e,onClick:this.props.onDelete})))}}]),n}(ue.Component);Px(sI,"propTypes",{index:kt().number.isRequired,onDelete:kt().func.isRequired,onEdit:kt().func.isRequired});var cI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"onChange",(function(t){e.props.onChange(e.props.shape,t.target.value)})),e}return Tx(n,[{key:"render",value:function(){return ue.createElement("select",{value:this.props.value,onChange:this.onChange},ue.createElement("option",{value:"none"},"None"),ue.createElement("option",{value:"contains"},"Contains"),ue.createElement("option",{value:"contains_properly"},"Contains properly"),ue.createElement("option",{value:"covered_by"},"Covered by"),ue.createElement("option",{value:"covers"},"Covers"),ue.createElement("option",{value:"crosses"},"Crosses"),ue.createElement("option",{value:"disjoint"},"Disjoint"),ue.createElement("option",{value:"intersects"},"Intersects"),ue.createElement("option",{value:"overlaps"},"Overlaps"),ue.createElement("option",{value:"touches"},"Touches"),ue.createElement("option",{value:"within"},"Within"))}}]),n}(ue.Component);Px(cI,"propTypes",{value:kt().string.isRequired,shape:kt().string.isRequired,onChange:kt().func.isRequired});var lI=function(e){xx(n,e);var t=Ax(n);function n(){var e;Rx(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Px(jx(e=t.call.apply(t,[this].concat(o))),"nextClicked",(function(t){t.preventDefault(),e.props.isLastPage||e.props.navigateNext()})),Px(jx(e),"previousClicked",(function(t){t.preventDefault(),e.props.isFirstPage||e.props.navigatePrevious()})),e}return Tx(n,[{key:"render",value:function(){var e=this.props.isFirstPage?"disabled":"",t=this.props.isLastPage?"disabled":"";return ue.createElement("ul",{className:"pagination"},ue.createElement("li",{className:e},ue.createElement("a",{href:"#",onClick:this.previousClicked,className:"icon fonticon-left-open","data-bypass":"true"})),ue.createElement("li",{className:t},ue.createElement("a",{href:"#",onClick:this.nextClicked,className:"icon fonticon-right-open","data-bypass":"true"})))}}]),n}(ue.Component);Px(lI,"propTypes",{isFirstPage:kt().bool.isRequired,isLastPage:kt().bool.isRequired,navigatePrevious:kt().func.isRequired,navigateNext:kt().func.isRequired});const uI={CreateGeoIndexController:Yx,EditGeoIndexController:Xx,QueryGeoIndexController:Qx,GeoIndexEditor:Zx,ViewControls:rI,GeoQueryOptions:nI,Header:oI,Footer:$x,GeoSettings:aI,JSONResults:Jx,LatLngGrid:iI,GeoDocsNavigation:lI};function dI(e){return dI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dI(e)}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fI(e,t){return fI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fI(e,t)}function hI(e,t){if(t&&("object"===dI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mI(e){return mI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mI(e)}var yI=nx.geoIndexStore,bI=function(e){var t=e.hideHeader,n=e.database,r=e.dbName,o=e.indexName,a=e.ddocName,i=e.dropDownLinks,s=e.docURL,c=e.endpoint;return ue.createElement("header",{className:"two-panel-header flex-fill"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{id:"header-docs-left"},ue.createElement(Eu,{dbName:r,dropDownLinks:i})),ue.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.createElement("div",{id:"react-headerbar",className:"flex-body"},t?null:ue.createElement(uI.Header,{database:n,databaseName:r,ddocName:a,indexName:o})),ue.createElement("div",{id:"right-header",className:"flex-fill"}),ue.createElement(Yt,{docURL:s,endpoint:c}),ue.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.createElement(Ht,null)))))};bI.defaultProps={hideHeader:!1},bI.propTypes={dbName:kt().string.isRequired,dropDownLinks:kt().array.isRequired,docURL:kt().string,endpoint:kt().string,database:kt().object.isRequired};var gI=function(e){var t=e.content,n=e.database,r=e.dbName,o=e.ddocName,a=e.indexName,i=e.selectedNavItem,s=e.partitionKey;return ue.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area flex-layout flex-body"},ue.createElement("aside",{id:"sidebar-content"},ue.createElement(gu,{selectedNavItem:i,selectedPartitionKey:s})),ue.createElement("section",{id:"dashboard-content",className:"flex-body flex-layout flex-col"},ue.createElement("div",{id:"dashboard-upper-content"}),ue.createElement("div",{id:"dashboard-lower-content",className:"flex-body flex-layout flex-col"},function(e,t,n,r,o,a){return"edit"===e?ue.createElement(uI.EditGeoIndexController,{database:t,databaseName:n,ddocName:r,indexName:o,partitionKey:a}):"create"===e?ue.createElement(uI.CreateGeoIndexController,{isCreatingIndex:!0,database:t,databaseName:n,partitionKey:a}):ue.createElement(uI.QueryGeoIndexController,{database:t,databaseName:n,ddocName:r,indexName:o})}(t,n,r,o,a,s)),ue.createElement("div",{id:"footer"})))},_I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fI(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mI(r);if(o){var n=mI(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return hI(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t}return t=i,n=[{key:"getStoreState",value:function(){return{endpoint:yI.getEndpoint()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){yI.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){yI.off("change",this.onChange)}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.hideHeader,r=e.dbName,o=e.dropDownLinks,a=e.docURL,i=e.database,s=e.ddocName,c=e.indexName,l=e.selectedNavItem,u=e.partitionKey;return ue.createElement("div",{id:"dashboard",className:"with-sidebar flex-template flex-layout flex-col"},ue.createElement(bI,{docURL:a,endpoint:this.state.endpoint,dbName:r,dropDownLinks:o,database:i,ddocName:s,indexName:c,hideHeader:n}),ue.createElement(gI,{database:i,dbName:r,ddocName:s,indexName:c,content:t,selectedNavItem:l,partitionKey:u}))}}],n&&pI(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const vI=_I;var EI=qs.extend({routes:{"database/:database/_design/:ddoc/_geoindex/:geoindex":{route:"queryGeoIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_geoindex/:geoindex":{route:"queryGeoIndex",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_geoindex/:geoindex/edit":{route:"editGeoIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_geoindex/:geoindex/edit":{route:"editGeoIndex",roles:["fx_loggedIn"]},"database/:database/new_geoindex":{route:"createGeoIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_geoindex":{route:"createGeoIndex",roles:["fx_loggedIn"]},"database/:database/new_geoindex/:designDoc":{route:"createGeoIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_geoindex/:designDoc":{route:"createGeoIndex",roles:["fx_loggedIn"]}},initialize:function(e,t){this.databaseName=t[0],this.database=new Es.Model({id:this.databaseName}),this.data={database:new Es.Model({id:this.databaseName})},this.data.designDocs=new zT.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Ls({database:this.data.database,designDocs:this.data.designDocs})},createGeoIndexNoPartition:function(e,t){return this.createGeoIndex(e,"",t)},createGeoIndex:function(e,t,n){return this.apiUrl=!1,ZT.initNewGeoIndex({designDocs:this.data.designDocs,defaultDDoc:n,database:this.database}),Pt.fetchSelectedDatabaseInfo(e),ue.createElement(vI,{dropDownLinks:this.getCrumbs(this.database),database:this.database,dbName:this.databaseName,hideHeader:!0,docURL:se.constants.DOC_URLS.GEOSPATIAL_INDEXES_CREATING,content:"create",partitionKey:t})},queryGeoIndexNoPartition:function(e,t,n){return this.queryGeoIndex(e,"",t,n)},queryGeoIndex:function(e,t,n,r){this.databaseName=e,this.ddocName=n,this.indexName=r;var o=le.utils.localStorageGet(YT.GEO_INDEX_VIEW);o&&ZT.toggleResultsView(o);var a=le.utils.localStorageGet(YT.GEO_INDEX_PER_PAGE);_.isUndefined(a)&&(a=YT.GEO_INDEX_DEFAULT_RESULTS_PER_PAGE),ZT.updatePerPage(a),ZT.initCurrentGeoIndex({ddocID:"_design/"+n,indexName:r,designDocs:this.data.designDocs,autoSearch:!0,perPage:a,database:this.database});var i=new Gs("designDoc",{designDocName:n,designDocSection:"Geospatial Indexes",indexName:r});return Us(i),Pt.fetchSelectedDatabaseInfo(e),ue.createElement(vI,{dropDownLinks:this.getCrumbs(this.database),database:this.database,dbName:this.databaseName,ddocName:this.ddocName,docURL:se.constants.DOC_URLS.GEOSPATIAL_INDEXES,indexName:this.indexName,selectedNavItem:i,partitionKey:t})},editGeoIndexNoPartition:function(e,t,n){return this.editGeoIndex(e,"",t,n)},editGeoIndex:function(e,t,n,r){this.databaseName=e,this.ddocName=n,this.indexName=r,ZT.initCurrentGeoIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs});var o=new Gs("designDoc",{designDocName:n,designDocSection:"Geospatial Indexes",indexName:r});return Us(o),Pt.fetchSelectedDatabaseInfo(e),ue.createElement(vI,{dropDownLinks:this.getCrumbs(this.database),database:this.database,dbName:this.databaseName,ddocName:this.ddocName,indexName:this.indexName,hideHeader:!0,docURL:se.constants.DOC_URLS.GEOSPATIAL_INDEXES_CREATING,content:"edit",selectedNavItem:o,partitionKey:t})},getExtensionLinks:function(){var e="#"+se.urls("databaseBaseURL","app",this.database.id),t=[{title:"New Doc",url:e+"/_new",icon:"fonticon-plus-circled"},{title:"New View",url:e+"/new_view",icon:"fonticon-plus-circled"}];return _.reduce(se.getExtensions("sidebar:links"),(function(t,n){return t.push({title:n.title,url:e+"/"+n.url,icon:"fonticon-plus-circled"}),t}),t)}}),wI=EI.extend({routes:{"database/shared/:user/:database/_design/:ddoc/_geoindex/:geoindex":{route:"sharedQueryGeoIndex",roles:["fx_loggedIn"]},"database/shared/:user/:database/_design/:ddoc/_geoindex/:geoindex/edit":{route:"sharedEditGeoIndex",roles:["fx_loggedIn"]},"database/shared/:user/:database/new_geoindex":{route:"sharedCreateGeoIndex",roles:["fx_loggedIn"]},"database/shared/:user/:database/new_geoindex/:designDoc":{route:"sharedCreateGeoIndex",roles:["fx_loggedIn"]}},initialize:function(e,t){this.username=tD.sharedUsername=t[0],this.databaseName=t[1],this.database=new Es.Model({id:this.databaseName}),this.data={database:new Es.Model({id:this.databaseName})},this.data.designDocs=new zT.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Ls({database:this.data.database,designDocs:this.data.designDocs})},sharedCreateGeoIndex:function(e,t,n){return this.createGeoIndexNoPartition(t,n)},sharedQueryGeoIndex:function(e,t,n,r){return this.queryGeoIndexNoPartition(t,n,r)},sharedEditGeoIndex:function(e,t,n,r){return this.editGeoIndexNoPartition(t,n,r)}});zT.RouteObjects=[EI,wI];const SI=zT;function OI(e){return e?"/_partition/"+e:""}SI.initialize=function(){se.registerExtension("sidebar:list",{selector:"st_indexes",name:"Geospatial Indexes",icon:"fonticon-sidenav-search",urlNamespace:"geoindex",indexLabel:"geospatial index",onDelete:ZT.deleteGeoIndex,onClone:ZT.cloneGeoIndex,onEdit:ZT.gotoEditGeoIndexPage}),se.registerExtension("sidebar:links",{title:"New Geospatial Index",url:"new_geoindex",icon:"fonticon-plus-circled"}),se.registerExtension("IndexTypes:propNames","st_indexes")};var NI=uD.proxyUrl;_.extend(uD.sharedUrlPaths,{geoindex:{app:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_design/"+t+"/_geoindex/"},queryPage:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/_design/"+n+"/_geoindex/"+r},query:function(e,t,n,r){return r=uD.addRemoteAccount(r),NI+e+"/_design/"+t+"/_geo/"+n+r},edit:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/_design/"+n+"/_geoindex/"+r+"/edit"},geoinfo:function(e,t,n,r){return r=uD.addRemoteAccount(r),NI+e+"/_design/"+t+"/_geo_info/"+n+r},apiurl:function(e,t,n,r){return r=uD.addRemoteAccount(r),NI+e+"/_design/"+t+"/_geo/"+n+"?"+r}}}),se.registerUrls("partitioned_geoindex",{app:function(e,t,n){return"database/"+e+OI(t)+"/_design/"+n+"/_geoindex/"}}),se.registerUrls("geoindex",{app:function(e,t){return"database/"+e+"/_design/"+t+"/_geoindex/"},queryPage:function(e,t,n,r){return"database/"+e+OI(t)+"/_design/"+n+"/_geoindex/"+r},query:function(e,t,n){return R.getServerUrl("/"+e+"/_design/"+t+"/_geo/"+n)},edit:function(e,t,n,r){return"database/"+e+OI(t)+"/_design/"+n+"/_geoindex/"+r+"/edit"},geoinfo:function(e,t,n){return R.getServerUrl("/"+e+"/_design/"+t+"/_geo_info/"+n)},apiurl:function(e,t,n,r){return window.location.origin+"/"+e+"/_design/"+t+"/_geo/"+n+"?"+r}});const DI=SI,CI="SEARCH_INDEX_DESIGN_DOCS_LOADED",PI="SEARCH_INDEX_INIT",RI="SEARCH_INDEX_SET_NAME",kI="SEARCH_INDEX_SET_ANALYZER_TYPE",TI="SEARCH_INDEX_ADD_ANALYZER_ROW",xI="SEARCH_INDEX_REMOVE_ANALYZER_ROW",II="SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",AI="SEARCH_INDEX_SET_ANALYZER_ROW",LI="SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",jI="SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",MI="SEARCH_INDEX_PREVIEW_MODEL_UPDATED",UI="SEARCH_INDEX_PREVIEW_REQUEST_MADE",BI="PREVIEW_MODEL_REQUEST_ERROR",qI="SEARCH_INDEX_SELECT_DESIGN_DOC",VI="SEARCH_INDEX_SET_SINGLE_ANALYZER",HI="SEARCH_INDEX_SET_SEARCH_QUERY",GI="SEARCH_INDEX_SET_LOADING",FI="SEARCH_INDEX_CLEAR",KI="SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",zI="SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",WI="SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",YI="SEARCH_INDEX_PARTITION_PARAM_MANDATORY",XI="single",QI="multiple",JI="standard";function $I(e){return $I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$I(e)}var ZI={};ZI.Doc=ht.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===$I(this.getAnalyzer(e))?QI:XI},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new ZI.Doc(e,{database:this.database})}}),ZI.AllDocs=ht.AllDocs.extend({model:ZI.Doc});const eA=ZI;var tA=function(e,t,n,r,o,a){return a({type:UI}),function(e,t,n,r,o){var a=function(e,t,n,r,o){var a=t?encodeURIComponent(t):"";return se.urls("search","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return w(a).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))}(e,t,n,r,o).then((function(e){a({type:MI,options:{searchResults:e}})})).catch((function(t){a({type:BI}),t&&-1!==t.message.indexOf("`partition` not supported")?a(nA()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?a(rA()):se.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&se.navigate(se.urls("allDocsSanitized","app",e),{trigger:!0})}))},nA=function(){return{type:WI}},rA=function(){return{type:YI}};const oA={dispatchInitNewSearchIndex:function(e){se.reduxDispatch({type:FI}),se.reduxDispatch({type:GI,options:{loading:!0}}),e.designDocs.fetch().then((function(){se.reduxDispatch({type:CI,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(se.reduxDispatch({type:GI,options:{loading:!0}}),se.reduxDispatch({type:PI,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return tA(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,se.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=e.database,n=e.ddocID,r=e.designDocs,o=e.indexName;se.reduxDispatch({type:GI,options:{loading:!0}}),r.fetch().then((function(e){var a=e.rows.find((function(e){return e._id===n})).doc;if(!a.indexes||!a.indexes[o])throw Error('Index "'.concat(o,'" not found'));se.reduxDispatch({type:jI,options:{indexName:o,database:t,ddocID:n,designDocs:r}})})).catch((function(e){var t=e.message?e.message:"";se.addNotification({msg:'There was a problem editing the search index "'.concat(o,'". ')+t,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:"SEARCH_INDEX_SELECT_TAB",options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:RI,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:kI,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:TI,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:xI,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:II,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:AI,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:LI,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:qI,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),se.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=Uc.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);Uc.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){js(t.designDocs)}})}js(t.designDocs),se.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;se.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new eA.Doc(o,{database:r})}var a=e.find((function(e){return e.id===t}));return a?a.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))se.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Uc.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),se.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),js(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;se.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){Uc.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=se.urls("allDocs","app",e.database.safeID());se.navigate(t)}js(e.designDocs),se.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> search index has been deleted.",type:"info",escape:!1,clear:!0}),Ms()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";se.navigate("#"+se.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var a=t?se.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n),encodeURIComponent(r)):se.urls("search","app",encodeURIComponent(e),encodeURIComponent(n),encodeURIComponent(r));se.navigate("".concat(a).concat(encodeURIComponent(r),"?").concat(encodeURIComponent(o)),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:HI,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:VI,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:KI,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:zI,options:{value:e}})}},partitionParamNotSupported:nA,partitionParamIsMandatory:rA};function aA(e){return aA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aA(e)}function iA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cA(e,t){return cA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cA(e,t)}function lA(e,t){if(t&&("object"===aA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uA(e)}function uA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dA(e){return dA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dA(e)}function pA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cA(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dA(r);if(o){var n=dA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lA(this,e)});function i(){var e;iA(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pA(uA(e=a.call.apply(a,[this].concat(n))),"querySearch",(function(t){if(t.preventDefault(),""===e.props.searchQuery.trim())return se.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void e.searchInput.focus();var n=e.props,r=n.databaseName,o=n.partitionKey,a=n.ddocName,i=n.indexName,s=n.searchQuery;e.props.querySearch(r,o,a,i,s)})),pA(uA(e),"getRows",(function(){var t=encodeURIComponent(e.props.databaseName);return e.props.searchResults.map((function(n){var r={header:n.id,content:JSON.stringify(n,null,"  "),url:se.urls("document","app",t,encodeURIComponent(n.id))};return ue.createElement(pi.Document,{key:n.id,keylabel:"id:",doc:r,header:n.id,isDeletable:!1,docContent:r.content,onClick:e.onClick,docChecked:function(){},docIdentifier:n.id})}))})),pA(uA(e),"onClick",(function(e,t){t.url&&se.navigate(t.url)})),pA(uA(e),"onType",(function(t){e.props.setSearchQuery(t.target.value)})),pA(uA(e),"getResults",(function(){return e.props.hasActiveQuery?ue.createElement(pi.LoadLines,null):e.props.noResultsWarning?ue.createElement("div",{"data-select":"search-result-set"},e.props.noResultsWarning):!!e.props.searchResults&&(0===e.props.searchResults.length?ue.createElement("div",{"data-select":"search-result-set"},"No results found."):ue.createElement("div",{id:"doc-list","data-select":"search-result-set"},e.getRows()))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Query";return ue.createElement("div",null,ue.createElement("form",{id:"search-index-preview-form"},ue.createElement("span",{className:"input-append"},ue.createElement("input",{className:"span4",ref:function(t){return e.searchInput=t},type:"text",placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery}),ue.createElement("button",{className:"btn btn-primary",id:"search-index-query-button",type:"submit",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t)),ue.createElement("a",{className:"help-link","data-bypass":"true",href:se.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},ue.createElement("i",{className:"icon-question-sign"}))),this.getResults())}}])&&sA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);pA(fA,"propTypes",{hasActiveQuery:kt().bool.isRequired,searchQuery:kt().string.isRequired,searchPerformed:kt().bool.isRequired,querySearch:kt().func.isRequired,setSearchQuery:kt().func.isRequired,searchResults:kt().array});var hA=(0,Tt.$j)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){oA.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(oA.setSearchQuery(t))}}}))(fA);const mA=hA;function yA(e){return yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yA(e)}function bA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _A(e,t){return _A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_A(e,t)}function vA(e,t){if(t&&("object"===yA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EA(e)}function EA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wA(e){return wA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wA(e)}function SA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OA=pi.StyledSelect,NA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_A(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wA(r);if(o){var n=wA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vA(this,e)});function i(){var e;bA(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SA(EA(e=a.call.apply(a,[this].concat(n))),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return ue.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),SA(EA(e),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return ue.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),SA(EA(e),"getLabel",(function(){return""===e.props.label?null:ue.createElement("label",{htmlFor:e.props.id},e.props.label)})),e}return t=i,(n=[{key:"render",value:function(){var e=ue.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return ue.createElement("div",{className:this.props.classes},this.getLabel(),ue.createElement(OA,{selectChange:this.props.onChange,selectValue:this.props.defaultSelected,selectId:this.props.id,selectContent:[this.getAnalyzers(),e]}))}}])&&gA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function DA(e){return DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DA(e)}function CA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PA(e,t){return PA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},PA(e,t)}function RA(e,t){if(t&&("object"===DA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kA(e)}function kA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TA(e){return TA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},TA(e)}function xA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}SA(NA,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),SA(NA,"propTypes",{defaultSelected:kt().string.isRequired,label:kt().string.isRequired,id:kt().string.isRequired,classes:kt().string.isRequired,onChange:kt().func.isRequired});var IA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PA(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=TA(r);if(o){var n=TA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return RA(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),xA(kA(t=a.call(this,e)),"deleteRow",(function(e){e.preventDefault(),t.props.removeAnalyzerRow(t.props.rowIndex)})),xA(kA(t),"getFieldNameHeading",(function(e){return 0===t.props.rowIndex&&ue.createElement("label",{htmlFor:e},"Fieldname")})),xA(kA(t),"changeFieldName",(function(e){t.props.setAnalyzerRowFieldName({rowIndex:t.props.rowIndex,fieldName:e.target.value})})),xA(kA(t),"selectAnalyzer",(function(e){t.props.setAnalyzer({rowIndex:t.props.rowIndex,analyzer:e.target.value})})),t}return t=i,(n=[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="span12";return this.props.showErrors&&!this.props.row.valid&&(n+=" unhappy"),ue.createElement("li",null,ue.createElement("div",{className:"row-fluid"},ue.createElement("div",{className:"span4"},this.getFieldNameHeading(e),ue.createElement("input",{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),ue.createElement(NA,{id:e,label:t,defaultSelected:this.props.row.analyzer,classes:"span4",onChange:this.selectAnalyzer}),ue.createElement("div",{className:"span4"},ue.createElement("button",{className:"btn btn-danger delete-analyzer",onClick:this.deleteRow},"delete"))))}}])&&CA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function AA(e){return AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AA(e)}function LA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jA(e,t){return jA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jA(e,t)}function MA(e,t){if(t&&("object"===AA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UA(e)}function UA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BA(e){return BA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},BA(e)}function qA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xA(IA,"propTypes",{rowIndex:kt().number.isRequired,row:kt().object.isRequired,showErrors:kt().bool.isRequired,removeAnalyzerRow:kt().func.isRequired,setAnalyzerRowFieldName:kt().func.isRequired,setAnalyzer:kt().func.isRequired});var VA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jA(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BA(r);if(o){var n=BA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return MA(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),qA(UA(t=a.call(this,e)),"addRow",(function(e){e.preventDefault(),t.props.addAnalyzerRow(t.props.defaultAnalyzer)})),qA(UA(t),"getRows",(function(){return t.props.fields.map((function(e,n){return ue.createElement(IA,{row:e,key:e.key,rowIndex:n,showErrors:t.state.showErrors,setAnalyzer:t.props.setAnalyzer,setAnalyzerRowFieldName:t.props.setAnalyzerRowFieldName,removeAnalyzerRow:t.props.removeAnalyzerRow})}))})),qA(UA(t),"validate",(function(){t.setState({showErrors:!0});var e=!1,n=[],r=t.props.fields.every((function(t){return-1!==n.indexOf(t.fieldName)&&(e=!0),n.push(t.fieldName),t.valid}));return r&&!e||se.addNotification({msg:"Fieldnames cannot be empty and must be unique.",type:"error",clear:!0}),r})),t.state={showErrors:!1},t}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",null,ue.createElement(NA,{label:"Default",id:"defaultAnalyzer",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),ue.createElement("ul",{id:"analyzer-fields",className:"unstyled"},this.getRows()),ue.createElement("button",{className:"addfield btn btn-small btn-primary",onClick:this.addRow},ue.createElement("i",{className:"cloudant-circle-plus"}),"Add Field"))}}])&&LA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function HA(e){return HA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HA(e)}function GA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FA(e,t){return FA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},FA(e,t)}function KA(e,t){if(t&&("object"===HA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zA(e)}function zA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WA(e){return WA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},WA(e)}function YA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qA(VA,"propTypes",{addAnalyzerRow:kt().func.isRequired,defaultAnalyzer:kt().string.isRequired,selectDefaultMultipleAnalyzer:kt().func.isRequired,fields:kt().array.isRequired});var XA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FA(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=WA(r);if(o){var n=WA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return KA(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),YA(zA(t=a.call(this,e)),"selectAnalyzerType",(function(e){t.props.setAnalyzerType(e.target.value)})),YA(zA(t),"validate",(function(){return t.props.analyzerType===XI||t.analyzerMultiple.validate()})),YA(zA(t),"getAnalyzerFieldsAsObject",(function(){var e={};return t.props.analyzerFields.forEach((function(t){var n=t.fieldName.replace(/["']/g,"");e[n]=t.analyzer})),e})),YA(zA(t),"getInfo",(function(){return t.props.analyzerType===XI?t.props.singleAnalyzer:{name:"perfield",default:t.props.defaultMultipleAnalyzer,fields:t.getAnalyzerFieldsAsObject()}})),YA(zA(t),"selectSingleAnalyzer",(function(e){t.props.setSingleAnalyzer(e.target.value)})),YA(zA(t),"selectDefaultMultipleAnalyzer",(function(e){t.props.setDefaultMultipleAnalyzer(e.target.value)})),YA(zA(t),"getAnalyzerType",(function(){return t.props.analyzerType===XI?ue.createElement(NA,{label:"Type",defaultSelected:t.props.singleAnalyzer,onChange:t.selectSingleAnalyzer}):ue.createElement(VA,{ref:function(e){return t.analyzerMultiple=e},defaultAnalyzer:t.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:t.selectDefaultMultipleAnalyzer,fields:t.props.analyzerFields,addAnalyzerRow:t.props.addAnalyzerRow,removeAnalyzerRow:t.props.removeAnalyzerRow,setAnalyzerRowFieldName:t.props.setAnalyzerRowFieldName,setAnalyzer:t.props.setAnalyzer})})),t.selectAnalyzerType=t.selectAnalyzerType.bind(zA(t)),t.selectSingleAnalyzer=t.selectSingleAnalyzer.bind(zA(t)),t.selectDefaultMultipleAnalyzer=t.selectDefaultMultipleAnalyzer.bind(zA(t)),t}return t=i,(n=[{key:"render",value:function(){var e="btn";this.props.analyzerType===QI&&(e+=" active");var t="btn";return this.props.analyzerType===XI&&(t+=" active"),ue.createElement("div",{className:"well"},ue.createElement("div",{className:"control-group"},ue.createElement("label",{htmlFor:"search-analyzer"},"Analyzer"),ue.createElement("div",{className:"btn-group toggle-btns",id:"analyzer"},ue.createElement("label",{style:{width:"82px"},htmlFor:"single-analyzer",className:t},"Single"),ue.createElement("input",{type:"radio",id:"single-analyzer",name:"search-analyzer",value:"single",checked:this.props.analyzerType===XI,onChange:this.selectAnalyzerType}),ue.createElement("input",{type:"radio",id:"multiple-analyzer",name:"search-analyzer",value:"multiple",checked:this.props.analyzerType===QI,onChange:this.selectAnalyzerType}),ue.createElement("label",{style:{width:"82px"},htmlFor:"multiple-analyzer",className:e},"Multiple"))),this.getAnalyzerType())}}])&&GA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function QA(e){return QA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(e)}function JA(){return JA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JA.apply(this,arguments)}function $A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eL(e,t){return eL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eL(e,t)}function tL(e,t){if(t&&("object"===QA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nL(e)}function nL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rL(e){return rL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rL(e)}function oL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}YA(XA,"propTypes",{analyzerType:kt().string.isRequired,analyzerFields:kt().array.isRequired,defaultMultipleAnalyzer:kt().string.isRequired,singleAnalyzer:kt().string.isRequired,setAnalyzerType:kt().func.isRequired,setSingleAnalyzer:kt().func.isRequired,setDefaultMultipleAnalyzer:kt().func.isRequired,addAnalyzerRow:kt().func.isRequired});var aL=Zc.DesignDocSelector,iL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eL(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rL(r);if(o){var n=rL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tL(this,e)});function i(){var e;$A(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oL(nL(e=a.call.apply(a,[this].concat(n))),"updateSearchIndexName",(function(t){e.props.setSearchIndexName(t.target.value)})),oL(nL(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()&&e.analyzer.validate())if(e.props.searchIndexName.trim()){var n=e.props.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=se.urls("search","fragment",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.props.searchIndexName));e.props.saveSearchIndex(e.props.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.props.searchIndexName,designDocs:e.props.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),analyzerInfo:e.analyzer.getInfo(),lastSavedSearchIndexName:e.props.lastSavedSearchIndexName,lastSavedDesignDocName:e.props.lastSavedDesignDocName},o)}else se.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),oL(nL(e),"getIndexFunction",(function(){return e.searchIndexEditor.getValue()})),oL(nL(e),"getDesignDocList",(function(){return e.props.designDocs.map((function(e){return e.id}))})),e}return t=i,(n=[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+se.urls("allDocs","app",e,t);var n=this.props.lastSavedDesignDocName.replace(/^_design\//,""),r="_design/"+encodeURIComponent(n),o=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+se.urls("search","showIndex",e,t,r,o)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.createElement("div",{className:"search-index-page-loading"},ue.createElement(pi.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return ue.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},ue.createElement("h3",{className:"simple-header"},t),ue.createElement(aL,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:le.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),ue.createElement("div",{className:"control-group"},ue.createElement("label",{htmlFor:"search-name"},"Index name"),ue.createElement("input",{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName})),ue.createElement(pi.CodeEditorPanel,{id:"search-function",className:"ace-editor-section",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:le.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),ue.createElement(XA,JA({ref:function(t){return e.analyzer=t}},this.props)),ue.createElement("div",{className:"control-group"},ue.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},ue.createElement("i",{className:"icon fonticon-ok-circled"}),n),ue.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))}}])&&ZA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sL(){return sL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sL.apply(this,arguments)}function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cL(Object(n),!0).forEach((function(t){uL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}oL(iL,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),oL(iL,"propTypes",{isLoading:kt().bool,isCreatingIndex:kt().bool,database:kt().object.isRequired,saveDoc:kt().object.isRequired,newDesignDocName:kt().string,blur:kt().func,setSearchIndexName:kt().func.isRequired,searchIndexFunction:kt().string.isRequired,saveSearchIndex:kt().func.isRequired,selectDesignDoc:kt().func.isRequired,updateNewDesignDocName:kt().func.isRequired});var dL=lL({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},pL());function pL(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:'function (doc) {\n  index("name", doc.name);\n}',searchIndexName:"newSearch",analyzerType:"single",analyzerFields:[],singleAnalyzer:JI,defaultMultipleAnalyzer:JI}}function fL(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:lO.getUniqueKey(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function hL(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function mL(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),a=parseInt(r,10);return o[a].fieldName=n,o[a].valid=""!==n,o}function yL(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function bL(e,t){var n,r=t.database,o=t.designDocs,a=t.ddocID,i=t.indexName,s=o.find((function(e){return e.id===a})).dDocModel(),c=s.getAnalyzer(i);n=_.isString(c)?c:_.has(c,"default")?c.default:JI;var l=[];return c&&c.fields&&Object.keys(c.fields).forEach((function(e){l.push({key:lO.getUniqueKey(),fieldName:e||"",analyzer:c.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:i,ddocName:a,lastSavedSearchIndexName:i,lastSavedDesignDocName:a,searchIndexFunction:s.getIndex(i),analyzerType:s.analyzerType(i),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:l}}function gL(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new eA.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName}));return o?o.dDocModel():null}var _L=(0,Tt.$j)((function(e,t){var n,r,o,a=e.search,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.ddocName===e.id})))&&or.isDDocPartitioned(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:a.loading,database:a.database,designDocs:a.designDocs,searchIndexFunction:a.searchIndexFunction,ddocName:a.ddocName,ddocPartitioned:s,lastSavedDesignDocName:a.lastSavedDesignDocName,lastSavedSearchIndexName:a.lastSavedSearchIndexName,searchIndexName:a.searchIndexName,analyzerType:a.analyzerType,analyzerFields:a.analyzerFields,analyzerFieldsObj:a.analyzerFieldsObj,defaultMultipleAnalyzer:a.defaultMultipleAnalyzer,singleAnalyzer:a.singleAnalyzer,saveDoc:gL(a,i.isDbPartitioned),newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(oA.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){oA.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(oA.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(oA.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(oA.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(oA.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(oA.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(oA.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(oA.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(oA.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(oA.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(oA.setAnalyzer(t))}}}))(iL);const vL=_L;var EL=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,a=e.docURL,i=e.endpoint,s=e.dropDownLinks,c=e.designDocs,l=e.ddoc,u=e.selectedNavItem,d=e.partitionKey,p=e.onPartitionKeySelected,f=e.onGlobalModeSelected,h=e.globalMode;return ue.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.createElement(Em,{hideQueryOptions:!0,docURL:a,endpoint:i,dbName:n.id,dropDownLinks:s,database:n,showPartitionKeySelector:"search"===t,partitionKey:d,onPartitionKeySelected:p,onGlobalModeSelected:f,globalMode:h}),ue.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.createElement(gu,{selectedNavItem:u,selectedPartitionKey:d})),ue.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},ue.createElement("div",{className:"search-index-content"},ue.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,a,i){return"create"===e?ue.createElement(vL,{designDocs:o,ddoc:a,database:t,isCreatingIndex:!0,partitionKey:i}):"edit"===e?ue.createElement(vL,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:i}):ue.createElement(mA,null)}(t,n,r,o,c,l,d)))))))};EL.propTypes={section:kt().string.isRequired,docURL:kt().string,endpoint:kt().string,ddocName:kt().string,indexName:kt().string,dropDownLinks:kt().array.isRequired,database:kt().object.isRequired};const wL=EL;var SL=qs.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.allDatabases=new Es.List,this.databaseName=t[0],this.database=new Es.Model({id:this.databaseName}),this.data={database:new Es.Model({id:this.databaseName})},this.data.designDocs=new eA.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Ls({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var a=new Gs("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});Us(a);var i=this.getCrumbs(this.database);oA.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),Pt.fetchSelectedDatabaseInfo(e);var s=t?encodeURIComponent(t):"",c=se.urls("search","apiurl",this.databaseName,s,this.ddocName,this.indexName,o||"*:*"),l=o?"?".concat(encodeURIComponent(o)):"";return ue.createElement(wL,{section:"search",dropDownLinks:i,endpoint:c,docURL:se.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:a,partitionKey:t,onPartitionKeySelected:function(t){var o=se.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));se.navigate("#/"+o+encodeURIComponent(r)+l)},onGlobalModeSelected:function(){var t=se.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));se.navigate("#/"+t+encodeURIComponent(r)+l)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new Gs("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});Us(o),oA.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),Pt.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.createElement(wL,{section:"edit",dropDownLinks:a,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new Gs("");oA.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),Pt.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return ue.createElement(wL,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}}),OL=SL.extend({routes:{"database/shared/:user/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"sharedSearch",roles:["fx_loggedIn"]},"database/shared/:user/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"sharedSearch",roles:["fx_loggedIn"]},"database/shared/:user/:database/new_search":"sharedNewSearch","database/shared/:user/:database/new_search/:designDoc":"sharedNewSearch","database/shared/:user/:database/_design/:ddoc/_search/:search/edit":{route:"sharedEdit",roles:["fx_loggedIn"]}},initialize:function(e,t){le.getParams().include_docs=!0,this.username=tD.sharedUsername=t[0],this.databaseName=t[1],this.database=new ZN.SharedModel({id:this.databaseName,name:this.username}),this.user=new yS.User,this.data={username:this.username,database:this.database},this.data.designDocs=new tD.SharedAllDocs(null,{username:this.username,database:this.database,paging:{pageSize:500},params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0,limit:500}});var n=t.slice(1);SL.prototype.initialize.call(this,e,n)},sharedSearch:function(e,t,n,r,o){return this.searchNoPartition(t,n,r,o)},sharedEdit:function(e,t,n,r){return this.editNoPartition(t,n,r)},sharedNewSearch:function(e,t,n){return this.createNoPartition(t,n)}});eA.RouteObjects=[SL,OL];const NL=eA;function DL(e){return e?"/_partition/"+e:""}NL.initialize=function(){se.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:oA.deleteSearchIndex,onClone:oA.cloneSearchIndex,onEdit:oA.gotoEditSearchIndexPage}),se.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),se.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),se.registerExtension("IndexTypes:propNames","indexes")};var CL=uD.proxyUrl;_.extend(uD.sharedUrlPaths,{search:{server:function(e,t,n,r,o){return o=uD.addRemoteAccount(o),CL+e+"/_design/"+n+"/_search/"+r+o},app:function(e,t){return uD.sharedUrlPaths.userHash()+e+"/_design/"+le.utils.safeURLName(t)+"/_search/"},edit:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/_design/"+n+"/_search/"+r+"/edit"},apiurl:function(e,t,n,r){return uD.sharedUrlPaths.host()+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)},fragment:function(e,t,n,r){return uD.sharedUrlPaths.userHash()+e+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return uD.sharedUrlPaths.host()+e+"/"+n+"/_search/"+r}},partitioned_search:{app:function(e,t,n){return uD.sharedUrlPaths.userHash()+e+"/_design/"+le.utils.safeURLName(n)+"/_search/"}}}),se.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+DL(t)+"/_design/"+n+"/_search/"}}),se.registerUrls("search",{server:function(e,t,n,r,o){return R.getServerUrl("/"+e+DL(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+DL(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+DL(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+DL(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),se.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case GI:return lL(lL({},e),{},{loading:n.loading});case CI:var r=lL(lL({},e),{},{loading:!1,designDocs:n.designDocs,database:n.database},pL());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case RI:return lL(lL({},e),{},{searchIndexName:n.value});case kI:return lL(lL({},e),{},{analyzerType:n.value});case VI:return lL(lL({},e),{},{singleAnalyzer:n.analyzer});case TI:return lL(lL({},e),{},{analyzerFields:fL(e,n)});case UI:return lL(lL({},e),{},{hasActiveQuery:!0});case BI:return lL(lL({},e),{},{hasActiveQuery:!1,searchResults:[]});case HI:return lL(lL({},e),{},{searchQuery:n.query});case MI:return lL(lL({},e),{},{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case xI:return lL(lL({},e),{},{analyzerFields:hL(e,n.rowIndex)});case II:return lL(lL({},e),{},{analyzerFields:mL(e,n)});case AI:return lL(lL({},e),{},{analyzerFields:yL(e,n)});case LI:return lL(lL({},e),{},{defaultMultipleAnalyzer:n.analyzer});case jI:return lL(lL({},e),bL(0,n));case qI:return lL(lL({},e),{},{ddocName:n.value});case FI:return lL(lL({},dL),{},{designDocs:new Backbone.Collection});case PI:return lL(lL({},e),{},{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case KI:return lL(lL({},e),{},{newDesignDocName:n.value});case zI:return lL(lL({},e),{},{newDesignDocPartitioned:n.value});case WI:return sL({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case YI:return sL({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});const PL=NL;function RL(e){return RL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RL(e)}function kL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xL(e,t){return xL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xL(e,t)}function IL(e,t){if(t&&("object"===RL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AL(e)}function AL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LL(e){return LL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},LL(e)}function jL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ML=pi.TabElement,UL=pi.TabElementWrapper,BL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xL(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=LL(r);if(o){var n=LL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return IL(this,e)});function i(){var e;kL(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jL(AL(e=a.call.apply(a,[this].concat(n))),"checked",(function(t){return e.props.selectedRadio===t})),jL(AL(e),"onRadioClick",(function(t){var n=t.target.value;e.props.onRadioClick(n)})),jL(AL(e),"createFilterTabs",(function(){return e.props.radioNames.map((function(t,n){var r=e.checked(t);return ue.createElement(ML,{key:n,selected:r,text:t,onChange:e.onRadioClick})}))})),jL(AL(e),"searchTermChange",(function(t){var n=t.target.value;e.props.onSearch(n)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.createFilterTabs();return ue.createElement(UL,null,e,ue.createElement("li",{className:"component-tab-list-element"},ue.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}])&&TL(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function qL(e){return qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qL(e)}function VL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GL(e,t){return GL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},GL(e,t)}function FL(e,t){if(t&&("object"===qL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KL(e)}function KL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zL(e){return zL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zL(e)}function WL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}jL(BL,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var YL=function(e){return[le.helpers.formatDate(e),le.helpers.getDateFromNow(e)]},XL=function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},QL=function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},JL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GL(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zL(r);if(o){var n=zL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return FL(this,e)});function i(){var e;VL(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return WL(KL(e=a.call.apply(a,[this].concat(n))),"getInfo",(function(e){return{type:e.type,objectField:XL(e),started_on:YL(e.started_on),updated_on:YL(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:QL(e)}})),WL(KL(e),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return ue.createElement("p",{key:t,className:n},e)}))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),r=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return ue.createElement("tr",null,ue.createElement("td",null,e.type),ue.createElement("td",null,t),ue.createElement("td",null,n),ue.createElement("td",null,r),ue.createElement("td",null,e.pid),ue.createElement("td",null,o))}}])&&HL(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function $L(e){return $L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$L(e)}function ZL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ej(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tj(e,t){return tj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tj(e,t)}function nj(e,t){if(t&&("object"===$L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rj(e)}function rj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oj(e){return oj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oj(e)}function aj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ij=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tj(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oj(r);if(o){var n=oj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nj(this,e)});function i(){var e;ZL(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return aj(rj(e=a.call.apply(a,[this].concat(n))),"createRows",(function(){var t=""===e.props.searchTerm.trim();return 0===e.props.tasks.length||e.props.isLoading?t?e.noActiveTasks():e.noActiveTasksMatchFilter():e.props.tasks.map((function(e,t){return ue.createElement(JL,{key:t,item:e})}))})),aj(rj(e),"getType",(function(){var t=e.props.selectedRadio;return"All Tasks"===t?"":t})),aj(rj(e),"noActiveTasks",(function(){var t=e.getType(),n=ue.createElement("td",{colSpan:"6"},"No active ",t," tasks.");return e.props.isLoading&&(n=ue.createElement("td",{colSpan:"6"},"Loading tasks.")),ue.createElement("tr",{className:"no-matching-database-on-search"},n)})),aj(rj(e),"noActiveTasksMatchFilter",(function(){var t=e.getType();return ue.createElement("tr",{className:"no-matching-database-on-search"},ue.createElement("td",{colSpan:"6"},"No active ",t,' tasks match with filter: "',e.props.searchTerm,'"'))})),e}return t=i,(n=[{key:"render",value:function(){return ue.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}])&&ej(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function sj(e){return sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sj(e)}function cj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uj(e,t,n){return t&&lj(e.prototype,t),n&&lj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dj(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pj(e,t)}function pj(e,t){return pj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pj(e,t)}function fj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yj(e);if(t){var o=yj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hj(this,n)}}function hj(e,t){if(t&&("object"===sj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mj(e)}function mj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(e){return yj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yj(e)}function bj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gj=function(e){dj(n,e);var t=fj(n);function n(e){var r;return cj(this,n),bj(mj(r=t.call(this,e)),"arrow",(function(){var e=r.props.sortByHeader,t=r.props.headerName,n=r.props.headerIsAscending?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return ue.createElement("i",{className:n})})),bj(mj(r),"onTableHeaderClick",(function(){r.props.onTableHeaderClick(r.props.headerName)})),r.onTableHeaderClick=r.onTableHeaderClick.bind(mj(r)),r}return uj(n,[{key:"render",value:function(){return ue.createElement("td",{className:"header-field ".concat(this.props.headerName," tableheader"),onClick:this.onTableHeaderClick},ue.createElement("label",{className:"header-field label-text active-tasks-header noselect"},this.props.displayName," ",this.arrow()))}}]),n}(ue.Component),_j=function(e){dj(n,e);var t=fj(n);function n(){var e;cj(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return bj(mj(e=t.call.apply(t,[this].concat(o))),"createTableHeadingFields",(function(){var t=e.props,n=t.onTableHeaderClick,r=t.sortByHeader,o=t.headerIsAscending;return e.props.headerNames.map((function(e){return ue.createElement(gj,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:n,sortByHeader:r,headerIsAscending:o})}))})),e}return uj(n,[{key:"render",value:function(){return ue.createElement("thead",null,ue.createElement("tr",null,this.createTableHeadingFields()))}}]),n}(ue.Component);function vj(e){return vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vj(e)}function Ej(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sj(e,t){return Sj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sj(e,t)}function Oj(e,t){if(t&&("object"===vj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nj(e){return Nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nj(e)}bj(_j,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]});var Dj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sj(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nj(r);if(o){var n=Nj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oj(this,e)});function i(){return Ej(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,a=e.onTableHeaderClick,i=e.headerIsAscending,s=e.isLoading;return ue.createElement("div",{id:"dashboard-lower-content"},ue.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},ue.createElement(_j,{onTableHeaderClick:a,sortByHeader:o,headerIsAscending:i}),ue.createElement(ij,{tasks:t,selectedRadio:n,isLoading:s,searchTerm:r})))}}])&&wj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function Cj(e){return Cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cj(e)}function Pj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kj(e,t){return kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kj(e,t)}function Tj(e,t){if(t&&("object"===Cj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xj(e)}function xj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ij(e){return Ij=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ij(e)}function Aj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kj(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ij(r);if(o){var n=Ij(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Tj(this,e)});function i(){var e;Pj(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Aj(xj(e=a.call.apply(a,[this].concat(n))),"setNewSearchTerm",(function(t){e.props.setSearchTerm(t)})),Aj(xj(e),"switchTab",(function(t){e.props.switchTab(t)})),Aj(xj(e),"tableHeaderOnClick",(function(t){e.props.sortByColumnHeader(t)})),e}return t=i,n=[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,a=e.sortByHeader,i=e.headerIsAscending,s=this.setNewSearchTerm,c=this.tableHeaderOnClick;return ue.createElement("div",{id:"active-tasks-page",className:"scrollable"},ue.createElement("div",{className:"inner"},ue.createElement(BL,{searchTerm:r,selectedRadio:o,onSearch:s,onRadioClick:this.switchTab}),ue.createElement(Dj,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:c,sortByHeader:a,headerIsAscending:i})))}}],n&&Rj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function jj(e){return jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jj(e)}function Mj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bj(e,t){return Bj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bj(e,t)}function qj(e,t){if(t&&("object"===jj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vj(e)}function Vj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(e){return Hj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hj(e)}function Gj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fj=pi.Polling,Kj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hj(r);if(o){var n=Hj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qj(this,e)});function i(){var e;Mj(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gj(Vj(e=a.call.apply(a,[this].concat(n))),"runPollingUpdate",(function(){e.props.runPollingUpdate()})),Gj(Vj(e),"getPluralForLabel",(function(){return"1"===e.state.pollingInterval?"":"s"})),e}return t=i,(n=[{key:"render",value:function(){var e="active-tasks__polling-wrapper";return R.isIE1X()&&(e+=" "+e+"--ie1X"),ue.createElement("div",{className:e},ue.createElement(Fj,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}])&&Uj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),zj=[{name:"Active Tasks"}];const Wj={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"},Yj=function(){return w(R.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))};var Xj=function(e){return{type:Wj.ACTIVE_TASKS_SET_IS_LOADING,options:e}},Qj=function(e){return{type:Wj.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function Jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jj(Object(n),!0).forEach((function(t){Zj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eM={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[]},tM=function(e,t){var n=nM(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending);return $j($j({},e),{},{filteredTasks:n,searchTerm:t})},nM=function(e,t,n,r,o){var a=r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return(0,i.has)(e,"database")&&(r+=e.database),(0,i.has)(e,"source")&&(r+=e.source),(0,i.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)}));return function(e,t,n){var r=(0,i.sortBy)(t,(function(t){var n=e;return(0,i.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,a,o)},rM=function(e,t,n){return e!==t||!n},oM=function(e){return e.headerIsAscending},aM=function(e){return e.isLoading},iM=function(e){return e.selectedRadio},sM=function(e){return e.sortByHeader},cM=function(e){return e.searchTerm};const lM=(0,Tt.$j)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:oM(n),selectedRadio:iM(n),sortByHeader:sM(n),searchTerm:cM(n),isLoading:aM(n)}}),(function(e){return{init:function(){return e((function(e){e(Xj(!0)),Yj().then((function(t){e(Xj(!1)),e(Qj(t))})).catch((function(e){se.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:Wj.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:Wj.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:Wj.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){Yj().then((function(t){e(Qj(t))})).catch((function(e){se.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))((function(e){return ue.createElement(Xt,null,ue.createElement(Qt,{crumbs:zj,docURL:se.constants.DOC_URLS.ACTIVE_TASKS,endpoint:R.getApiUrl("/_active_tasks")},ue.createElement(Kj,e)),ue.createElement(Jt,null,ue.createElement(Lj,e)))})),uM={RouteObjects:[se.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return ue.createElement(lM,null)}})],initialize:function(){se.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})}};se.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eM,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case Wj.ACTIVE_TASKS_FETCH_AND_SET:return $j($j({},e),{},{tasks:r,filteredTasks:nM(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case Wj.ACTIVE_TASKS_SWITCH_TAB:var o=nM(e.searchTerm,r,e.sortByHeader,e.tasks,s);return $j($j({},e),{},{selectedRadio:r,filteredTasks:o});case Wj.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return $j($j({},e),{},{pollingIntervalSeconds:r});case Wj.ACTIVE_TASKS_SET_SEARCH_TERM:return tM(e,r);case Wj.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var a=e.sortByHeader,i=r,s=rM(a,i,e.headerIsAscending),c=nM(e.searchTerm,e.selectedRadio,i,e.tasks,s);return $j($j({},e),{},{sortByHeader:i,headerIsAscending:s,filteredTasks:c});case Wj.ACTIVE_TASKS_SET_IS_LOADING:return $j($j({},e),{},{isLoading:r})}return e}});const dM=uM,pM={RouteObjects:[se.RouteObject.extend({selectedHeader:"Monitoring",routes:{}})]};var fM=n(42808),hM=nN.userPromise;pM.initialize=function(){var e=document.createElement("div");e.id="plan-limit-modal",document.body.appendChild(e),Y.render(ue.createElement(hS.AccountPlanExceededModal),document.getElementById("plan-limit-modal")),o()(document).ajaxError((function(e,t){429===t.status&&YE.showPlanExceededModal()})),y.pipe((0,fM.h)((function(e){return 429===e.status}))).subscribe((function(){YE.showPlanExceededModal()})),hM.then((function(){var e=nN.user.get("plan"),t=nN.user.get("over_quota"),n=PE(e);nN.user.set("isCcmCustomer",n),function(e,t,n){n&&t&&se.showPermanentNotification('Your Lite account contains over 1 GB of data, and is <b>restricted</b>. To remove the restrictions on your account, <a href="https://cloud.ibm.com/resources" class="doc-link opens-new-window" target="_blank"> upgrade to a paid plan</a>, or <a href="#/_all_dbs" class="doc-link">delete data</a> to return storage to under the 1 GB limit. Restrictions are lifted after daily storage assessment completes.')}(0,t,n)})).catch((function(){}))};const mM=pM,yM="SUPPORT_SELECT_PAGE",bM="SUPPORT_USER_TICKET_LIST_LOADED",gM="SUPPORT_USER_TICKET_LOADED",_M="SUPPORT_SELECT_TICKET",vM="SUPPORT_SET_NEW_TICKET_SUBJECT",EM="SUPPORT_SET_NEW_TICKET_MESSAGE",wM="SUPPORT_SET_NEW_TICKET_ATTACHMENT",SM="SUPPORT_NEW_CASE_SUBMITTED",OM="SUPPORT_SHOW_RESPONSE_FORM",NM="SUPPORT_HIDE_RESPONSE_FORM",DM="SUPPORT_SET_RESPONSE_MESSAGE",CM="SUPPORT_SET_RESPONSE_ATTACHMENT",PM="SUPPORT_CLEAR_CACHE",RM="SUPPORT_CLEAR_RESPONSE_FORM",kM="SUPPORT_SUBMITTING_RESPONSE",TM="SUPPORT_RESPONSE_COMPLETE",xM={SUPPORT_PAGES:{NEW_TICKET:"NEW_TICKET",OPEN_TICKETS:"OPEN_TICKETS",CLOSED_TICKETS:"CLOSED_TICKETS"},TICKET_LIST_TYPES:{OPEN:"TICKET_LIST_TYPE_OPEN",CLOSED:"TICKET_LIST_TYPE_CLOSED"},RESPONSE_FORM_ANIMATION_SPEED:400,TICKET_CACHE_DURATION:12e4,VALID_FILE_UPLOAD_FORMATS:[".png",".jpg",".jpeg",".gif",".bmp",".tif",".log",".csv"]};function IM(e){return e.split("_")[0]}const AM={cleanUpTickets:function(e){return e?e.map((function(e){return{caseID:IM(e.id),id:e.id,open:"true"===e.open,title:e.title,timeUpdated:e.timeupdated,timeViewed:e.timeviewed}})):[]},getCaseID:IM,getFirstTicketByType:function(e,t){var n=t===xM.TICKET_LIST_TYPES.OPEN;return(e?e.find((function(e){return e.open===n})):void 0)||null},getPerson:function(e,t){return-1!==["wilson (API server)","FogBugz","Support On-Call"].indexOf(t)?e:"Cloudant Support"},parseTicketDetails:function(e){var t=e.public_events.map((function(e){return{moment:h()(e.date),content:e.content,person:e.person,attachments:e.attachments}}));return"false"===e.open&&t.push({content:"This ticket has been closed.",moment:h()(e.timeupdated),person:"Cloudant Support",attachments:[]}),{id:e.id,fetched:!0,fetchTime:h()().unix(),correspondence:t.reverse()}}};function LM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];jM(e,t).then((function(e){var t=e.fromCache?e.ticketInfo:AM.parseTicketDetails(e.tickets[0]);se.dispatch({type:gM,options:{ticketInfo:t}})}),(function(){se.addNotification({msg:"There was an error retrieving this ticket.",type:"error",clear:!0})}))}function jM(e,t){var n=t?t.find((function(t){return t.id===e})):void 0,r=h()().unix();return n&&n.details.fetched&&n.details.fetchTime+xM.TICKET_CACHE_DURATION>r?se.Deferred().resolve({fromCache:!0,ticketInfo:n.details}):o().ajax({method:"GET",contentType:"application/json; charset=utf-8",dataType:"json",url:le.hostDash+"/support/tickets/"+AM.getCaseID(e)})}const MM={selectPage:function(e){se.dispatch({type:yM,options:{page:e}})},selectTicket:function(e,t,n){se.dispatch({type:_M,options:{ticketType:e,ticketID:n}}),LM(n,t)},initSupportPage:function(e){nN.userPromise.then((function(){nN.user.isIBMCloudAccount()||o().ajax({method:"GET",contentType:"application/json; charset=utf-8",dataType:"json",url:le.hostDash+"/support/tickets"}).then((function(t){var n,r=AM.cleanUpTickets(t.tickets);se.dispatch({type:bM,options:{tickets:r}}),-1!==[xM.SUPPORT_PAGES.OPEN_TICKETS,xM.SUPPORT_PAGES.CLOSED_TICKETS].indexOf(e)&&(n=e===xM.SUPPORT_PAGES.OPEN_TICKETS?AM.getFirstTicketByType(r,xM.TICKET_LIST_TYPES.OPEN):AM.getFirstTicketByType(r,xM.TICKET_LIST_TYPES.CLOSED))&&LM(n.id)}),(function(){se.addNotification({msg:"There was an error retrieving the support tickets.",type:"error",clear:!0})}))}),(function(){}))},getSingleTicket:LM,setNewTicketAttachment:function(e){se.dispatch({type:wM,options:{attachment:e}})},setNewTicketSubject:function(e){se.dispatch({type:vM,options:{subject:e}})},setNewTicketMessage:function(e){se.dispatch({type:EM,options:{message:e}})},setResponseMessage:function(e){se.dispatch({type:DM,options:{message:e}})},setResponseAttachment:function(e){se.dispatch({type:CM,options:{attachment:e}})},showResponseForm:function(){se.dispatch({type:OM})},hideResponseForm:function(){se.dispatch({type:NM})},submitTicket:function(e){se.addNotification({msg:"Creating ticket.",type:"info",clear:!0}),fetch("".concat(le.hostDash,"/support/tickets"),{method:"POST",credentials:"include",body:e,headers:{Accept:"multipart/form-data; charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){e.error||e.message?se.addNotification({msg:"The ticket could not be created: ".concat(e.error||e.message),type:"error",clear:!0}):se.addNotification({msg:"The ticket has been created.",type:"success",clear:!0})})),se.dispatch({type:SM})},submitResponse:function(e,t,n){se.addNotification({msg:"Submitting response. Please wait.",type:"info",clear:!0}),se.dispatch({type:kM}),function(e,t){return o().ajax({method:"PUT",url:le.hostDash+"/support/tickets/"+e,data:t,async:!0,dataType:"json",cache:!1,contentType:!1,processData:!1})}(AM.getCaseID(t),n).then((function(t){se.dispatch({type:TM}),se.addNotification({msg:e?"You have replied to this ticket.":"The ticket has been re-opened.",type:"success",clear:!0}),e?(se.dispatch({type:RM}),se.dispatch({type:gM,options:{ticketInfo:AM.parseTicketDetails(t)}})):(se.dispatch({type:PM}),se.navigate("support/opentickets"))}),(function(){se.addNotification({msg:e?"There was an error replying to this ticket.":"There was an error re-opening this ticket.",type:"error",clear:!0})}))}};var UM=new(se.Store.extend({initialize:function(){this._currentPage=xM.SUPPORT_PAGES.NEW_TICKET,this.clearUserInfo(),this.reset()},clearUserInfo:function(){this._userAuthenticated=!1,this._userEmail="",this._isInChina=null},reset:function(){this._tickets=null,this._ticketDetails={},this._selectedOpenTicket=null,this._selectedClosedTicket=null,this._newTicketSubject="",this._newTicketMessage="",this._newTicketAttachment="",this._newCaseSubmitted=!1,this._responseFormVisible=!1,this._responseMessage="",this._responseAttachment="",this._responseSubmitting=!1},selectPage:function(e){this._currentPage=e,e===xM.SUPPORT_PAGES.NEW_TICKET&&(this._newTicketSubject="",this._newTicketMessage="",this._newTicketAttachment="",this._newCaseSubmitted=!1)},isLoaded:function(){return null!==this._tickets&&this._userAuthenticated},isAuthenticated:function(){return this._userAuthenticated},getPage:function(){return this._currentPage},setUser:function(e){this._userAuthenticated=!0,this._userEmail=e.email,this._isGoldSupport="gold"===e.supportLevel,this._isInChina=e.isInChina},isUserInChina:function(){return this._isInChina},getUserEmail:function(){return this._userEmail},getNewTicketAttachment:function(){return this._newTicketAttachment},getTickets:function(e){var t=this;return(this._tickets?this._tickets.filter((function(t){return t.open===e})):[]).map((function(e){var n=e.id;return t.getTicketById(n)}))},updateTicketList:function(e){this._tickets=e;var t=AM.getFirstTicketByType(this._tickets,xM.TICKET_LIST_TYPES.OPEN);this._selectedOpenTicket=null===t?null:this.getTicketById(t.id);var n=AM.getFirstTicketByType(this._tickets,xM.TICKET_LIST_TYPES.CLOSED);this._selectedClosedTicket=null===n?null:this.getTicketById(n.id)},isGoldSupport:function(){return this._isGoldSupport},getSelectedTicket:function(e){return e?this._selectedOpenTicket:this._selectedClosedTicket},getNewTicketSubject:function(){return this._newTicketSubject},getNewTicketMessage:function(){return this._newTicketMessage},setTicketDetails:function(e){this._ticketDetails[e.id]=e},selectTicket:function(e,t){e!==xM.TICKET_LIST_TYPES.OPEN?this._selectedClosedTicket=this.getTicketById(t):this._selectedOpenTicket=this.getTicketById(t)},isNewCaseSubmitted:function(){return this._newCaseSubmitted},isResponseFormVisible:function(){return this._responseFormVisible},getResponseMessage:function(){return this._responseMessage},getResponseAttachment:function(){return this._responseAttachment},isResponseBeingSubmitted:function(){return this._responseSubmitting},getTicketById:function(e){var t=this._tickets?this._tickets.find((function(t){return t.id===e})):void 0;return t&&(t.details=_.has(this._ticketDetails,e)?this._ticketDetails[e]:{fetched:!1}),t},dispatch:function(e){switch(e.type){case iE:this.setUser(e.options);break;case yM:this.selectPage(e.options.page);break;case bM:this.updateTicketList(e.options.tickets);break;case gM:this.setTicketDetails(e.options.ticketInfo);break;case _M:this.selectTicket(e.options.ticketType,e.options.ticketID);break;case wM:this._newTicketAttachment=e.options.attachment;break;case vM:this._newTicketSubject=e.options.subject;break;case EM:this._newTicketMessage=e.options.message;break;case SM:this._newCaseSubmitted=!0;break;case OM:this._responseFormVisible=!0;break;case NM:this._responseFormVisible=!1;break;case RM:this._responseFormVisible=!1,this._responseMessage="",this._responseAttachment="";break;case DM:this._responseMessage=e.options.message;break;case CM:this._responseAttachment=e.options.attachment;break;case PM:this.reset();break;case kM:this._responseSubmitting=!0;break;case TM:this._responseSubmitting=!1;break;default:return}this.triggerChange()}}));function BM(e){return BM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BM(e)}function qM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HM(e,t,n){return t&&VM(e.prototype,t),n&&VM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GM(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FM(e,t)}function FM(e,t){return FM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},FM(e,t)}function KM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=YM(e);if(t){var o=YM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zM(this,n)}}function zM(e,t){if(t&&("object"===BM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return WM(e)}function WM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YM(e){return YM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},YM(e)}UM.dispatchToken=se.dispatcher.register(UM.dispatch.bind(UM));var XM=pi.LoadLines,QM={supportPageStore:UM}.supportPageStore,JM=function(e){GM(n,e);var t=KM(n);function n(e){var r;return qM(this,n),(r=t.call(this,e)).state=r.getStoreState(),r.state.userPromiseResolved=!1,r.submit=r.submit.bind(WM(r)),r}return HM(n,[{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){var e=this;QM.on("change",this.onChange,this);var t=function(){e.setState({userPromiseResolved:!0})};nN.userPromise.then(t).catch(t)}},{key:"componentWillUnmount",value:function(){QM.off("change",this.onChange)}},{key:"getStoreState",value:function(){return{page:QM.getPage(),userAuthenticated:QM.isAuthenticated(),userEmail:QM.getUserEmail(),userIsInChina:QM.isUserInChina(),newTicketSubject:QM.getNewTicketSubject(),newTicketMessage:QM.getNewTicketMessage(),newTicketAttachment:QM.getNewTicketAttachment(),newCaseSubmitted:QM.isNewCaseSubmitted(),isGoldSupport:QM.isGoldSupport()}}},{key:"submit",value:function(e){if(e.preventDefault(),this.validate()){var t=new FormData(e.target);t.append("priority",3),MM.submitTicket(t)}}},{key:"validate",value:function(){var e=this.state,t=e.newTicketSubject,n=e.newTicketMessage;return t?!!n||(se.addNotification({msg:"Please enter a message.",type:"error",clear:!0}),this.message.focus(),!1):(se.addNotification({msg:"Please enter a subject.",type:"error",clear:!0}),this.subject.focus(),!1)}},{key:"getCaseSubmittedMsg",value:function(){return this.state.isGoldSupport?ue.createElement("div",null,ue.createElement("p",null,"Thank you. Cloudant support will reply to you within the hour."),ue.createElement("p",null,"Add ",ue.createElement("a",{href:"mailto:support@cloudant.com"},"support@cloudant.com")," to the address book of your email application, so that our replies don't end up anywhere but your inbox.")):ue.createElement("p",null,"Thank you. Cloudant support will reply to you as soon as possible.")}},{key:"getNewCaseContent",value:function(){var e=this,t=this.state,n=t.userEmail,r=t.newTicketSubject,o=t.newTicketMessage,a=t.newTicketAttachment;return t.newCaseSubmitted?ue.createElement("div",{className:"support-page-title"},ue.createElement("h4",null,"Case Submitted"),this.getCaseSubmittedMsg()):ue.createElement("div",null,ue.createElement("div",{className:"support-page-title"},ue.createElement("h4",null,"New Case"),ue.createElement("p",null,"Use the following form to ask a question or report a problem to Cloudant Support. Responses will be posted in the Support section of the Cloudant Dashboard and sent to ",n,". Please describe the issue in as much detail as possible.")),ue.createElement("form",{id:"support-form",className:"newticket",encType:"multipart/form-data",onSubmit:this.submit},ue.createElement("label",{htmlFor:"subject"},"Subject"),ue.createElement("input",{type:"text",id:"subject",name:"title",ref:function(t){return e.subject=t},className:"input-xxlarge",autoFocus:!0,value:r,onChange:function(e){return MM.setNewTicketSubject(e.target.value)}}),ue.createElement("label",{htmlFor:"comments"},"Details"),ue.createElement("textarea",{id:"comments",name:"body",ref:function(t){return e.message=t},className:"input-xxlarge input-xxtall",value:o,onChange:function(e){return MM.setNewTicketMessage(e.target.value)}}),ue.createElement(rU,{attachment:a,onSelect:MM.setNewTicketAttachment,acceptedFileFormats:xM.VALID_FILE_UPLOAD_FORMATS}),ue.createElement("div",{className:"support-buttons"},ue.createElement("button",{type:"submit",className:"btn btn-primary"},"Open Case"))))}},{key:"render",value:function(){var e=this.state,t=e.userAuthenticated,n=e.userIsInChina,r=e.userPromiseResolved;return t&&r?n?ue.createElement(aU,null):nN.user.isIBMCloudAccount()?ue.createElement("div",{id:"new-ticket-wrapper",className:"new-ticket-page"},ue.createElement("p",null,"To open a new support ticket, please visit the ",ue.createElement("a",{href:"https://cloud.ibm.com/unifiedsupport/supportcenter",target:"_blank",rel:"noopener noreferrer"},"IBM Cloud Support page"),".")):ue.createElement(iU,null):ue.createElement("div",{className:"support-load-lines"},ue.createElement(XM,null))}}]),n}(ue.Component),$M=function(e){GM(n,e);var t=KM(n);function n(e){var r;return qM(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return HM(n,[{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){QM.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){QM.off("change",this.onChange)}},{key:"getStoreState",value:function(){return{loaded:QM.isLoaded(),userIsInChina:QM.isUserInChina(),tickets:QM.getTickets(this.props.open),selectedTicket:QM.getSelectedTicket(this.props.open),userEmail:QM.getUserEmail(),responseFormVisible:QM.isResponseFormVisible(),responseMessage:QM.getResponseMessage(),responseAttachment:QM.getResponseAttachment(),responseFormSubmitting:QM.isResponseBeingSubmitted()}}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.userIsInChina,r=e.tickets,o=e.selectedTicket,a=e.userEmail,i=e.responseFormVisible,s=e.responseMessage,c=e.responseAttachment,l=e.responseFormSubmitting;if(n)return ue.createElement(aU,null);if(!t)return ue.createElement("div",{className:"support-load-lines"},ue.createElement(XM,null));var u=this.props.open?xM.TICKET_LIST_TYPES.OPEN:xM.TICKET_LIST_TYPES.CLOSED;return ue.createElement("div",{className:"ticket-list flex-layout flex-col"},ue.createElement(ZM,{ticketType:u,tickets:r,selectedTicket:o,userEmail:a,responseFormVisible:i,responseMessage:s,responseAttachment:c,responseFormSubmitting:l}))}}]),n}(ue.Component);$M.propTypes={open:kt().bool.isRequired};var ZM=function(e){GM(n,e);var t=KM(n);function n(){return qM(this,n),t.apply(this,arguments)}return HM(n,[{key:"getOptions",value:function(){return this.props.tickets.map((function(e){return{value:e.id,label:"".concat(e.caseID," - ").concat(e.title)}}))}},{key:"getTicketHistory",value:function(){var e=this.props,t=e.selectedTicket,n=e.userEmail;return t.details.fetched?ue.createElement(eU,{correspondence:t.details.correspondence,userEmail:n,id:t.id}):ue.createElement("div",{className:"support-load-lines"},ue.createElement(XM,null))}},{key:"getResponseForm",value:function(e){var t=this.props,n=t.responseFormVisible,r=t.responseMessage,o=t.responseAttachment,a=t.responseFormSubmitting,i=t.selectedTicket,s=e.map((function(e){var t=e.style;return ue.createElement(nU,{key:"1",style:t,id:i.id,isOpen:i.open,isSubmitting:a,visible:n,message:r,attachment:o,onChangeMessage:MM.setResponseMessage,onChangeAttachment:MM.setResponseAttachment,onCancel:MM.hideResponseForm,onSubmit:MM.submitResponse})}));return ue.createElement("div",null,s)}},{key:"getStyles",value:function(e){var t=this.props.responseFormVisible,n={opacity:0,height:0};return t&&(n={opacity:(0,na.ST)(1,na.um.gentle),height:(0,na.ST)(350,na.um.gentle)}),e&&!t&&(n={opacity:(0,na.ST)(0),height:(0,na.ST)(0)}),[{key:"1",style:n}]}},{key:"render",value:function(){var e=this.props,t=e.tickets,n=e.ticketType,r=e.selectedTicket;if(0===t.length){var o={};return o[xM.TICKET_LIST_TYPES.OPEN]="open",o[xM.TICKET_LIST_TYPES.CLOSED]="closed",ue.createElement("p",{className:"no-tickets-of-type"},"You have no ",o[n]," tickets.")}var a=n===xM.TICKET_LIST_TYPES.OPEN?"Reply":"Reopen Case";return ue.createElement("div",{className:"tab-pane flex-layout flex-col"},ue.createElement("div",{className:"flex-fill"},ue.createElement("div",{className:"support-header flex-layout flex-row"},ue.createElement("div",{className:"flex-body"},ue.createElement(ni.ZP,{name:"ticket-selector",value:r.id,options:this.getOptions(),clearable:!1,onChange:function(e){return MM.selectTicket(n,t,e.value)}})),ue.createElement("div",{className:"flex-fill button-row-item"},ue.createElement("button",{className:"btn btn-small btn-primary",disabled:!r.details.fetched,onClick:MM.showResponseForm},a)))),ue.createElement("div",{className:"flex-fill"},ue.createElement(na.bg,{styles:this.getStyles.bind(this)},this.getResponseForm.bind(this)),this.getTicketHistory()))}}]),n}(ue.Component);ZM.propTypes={tickets:kt().array.isRequired,ticketType:kt().oneOf([xM.TICKET_LIST_TYPES.OPEN,xM.TICKET_LIST_TYPES.CLOSED]).isRequired,userEmail:kt().string.isRequired,responseFormVisible:kt().bool.isRequired,responseMessage:kt().string.isRequired,responseAttachment:kt().string.isRequired};var eU=function(e){GM(n,e);var t=KM(n);function n(){return qM(this,n),t.apply(this,arguments)}return HM(n,[{key:"getList",value:function(){var e=this.props,t=e.correspondence,n=e.userEmail,r=e.id;return t?t.map((function(e,t){return ue.createElement(tU,{item:e,key:t,userEmail:n,id:r})})):[]}},{key:"render",value:function(){return ue.createElement("div",null,this.getList())}}]),n}(ue.Component),tU=function(e){GM(n,e);var t=KM(n);function n(){return qM(this,n),t.apply(this,arguments)}return HM(n,[{key:"getAttachments",value:function(){return 0===this.props.item.attachments.length?null:ue.createElement("ul",{className:"unstyled"},this.getAttachmentList())}},{key:"getAttachmentList",value:function(){var e=this.props,t=e.id,n=e.item;return n.attachments?Object.keys(n.attachments).map((function(e){var r=n.attachments[e];if(/NO_FILENAME/.test(e))return null;var o="/_api/v2/support/tickets/".concat(t,"/files/").concat(r);return ue.createElement("li",{className:"attachment",key:e},ue.createElement("span",{className:"icon fonticon-paperclip"}),ue.createElement("a",{href:o,"data-bypass":"true",target:"_blank",rel:"noopener noreferrer"},e))})):[]}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.userEmail;return ue.createElement("div",{className:"volley"},ue.createElement("div",{className:"row-fluid time-stamp"},ue.createElement("div",{className:"span3"},ue.createElement("h4",{className:"meta"},ue.createElement("div",{className:"date"},t.moment.format("MMM D, YYYY"),ue.createElement("span",{className:"time"},t.moment.format("h:mm A"))))),ue.createElement("div",{className:"span8"},ue.createElement("h4",null,ue.createElement("div",{className:"person"},ue.createElement("span",{className:"edited"},"From")," ",AM.getPerson(n,t.person))))),ue.createElement("div",{className:"row-fluid content"},ue.createElement("div",{className:"span12"},ue.createElement("pre",null,t.content),this.getAttachments())))}}]),n}(ue.Component),nU=function(e){GM(n,e);var t=KM(n);function n(e){var r;return qM(this,n),(r=t.call(this,e)).submit=r.submit.bind(WM(r)),r.focus=r.focus.bind(WM(r)),r}return HM(n,[{key:"submit",value:function(e){if(e.preventDefault(),!this.validate())return!1;var t=new FormData(e.target);this.props.onSubmit(this.props.isOpen,this.props.id,t)}},{key:"focus",value:function(){this.message.focus()}},{key:"validate",value:function(){return!!this.props.message||(se.addNotification({msg:"Please enter a message.",type:"error",clear:!0}),this.message.focus(),!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.style,o=t.message,a=t.attachment,i=t.onChangeMessage,s=t.onChangeAttachment,c=t.onCancel,l=t.isSubmitting;return 0!==r.opacity||n?ue.createElement("div",{style:{opacity:r.opacity,height:r.height+"px"},className:"support-response-form-wrapper"},ue.createElement("form",{className:"support-response-form",encType:"multipart/form-data",onSubmit:this.submit},ue.createElement("textarea",{name:"body",ref:function(t){return e.message=t},className:"input-xxlarge input-xxtall",placeholder:"Enter comments here",onChange:function(e){return i(e.target.value)},value:o,autoFocus:!0,disabled:l}),ue.createElement(rU,{attachment:a,onSelect:s,acceptedFileFormats:xM.VALID_FILE_UPLOAD_FORMATS}),ue.createElement("div",{className:"support-buttons"},ue.createElement("button",{type:"submit",className:"btn btn-primary",value:"Submit",disabled:l},"Submit"),ue.createElement("a",{"data-bypass":"true",className:"cancel-link",onClick:function(){return c()}},"Cancel")))):null}}]),n}(ue.Component);nU.propTypes={id:kt().string.isRequired,isOpen:kt().bool.isRequired,message:kt().string.isRequired,attachment:kt().string.isRequired,onChangeMessage:kt().func.isRequired,onChangeAttachment:kt().func.isRequired,onCancel:kt().func.isRequired,onSubmit:kt().func.isRequired};var rU=function(e){GM(n,e);var t=KM(n);function n(e){var r;return qM(this,n),(r=t.call(this,e)).selectAttachment=r.selectAttachment.bind(WM(r)),r}return HM(n,[{key:"selectAttachment",value:function(e){var t=this.props,n=t.onSelect,r=t.acceptedFileFormats;if(""!==e){var o=e.toLowerCase().match(/.[0-9a-z]+$/),a="";o.length>0&&(a=o[0].toLowerCase()),0===r.length||-1!==r.indexOf(a)?n(e):(se.addNotification({msg:"Attachments may only be of the following formats: "+r.join(", "),type:"error",clear:!0}),n(""))}else n("")}},{key:"getAttachment",value:function(){var e=this.props,t=e.attachment,n=e.onSelect;if(!t)return null;var r=t.replace("C:\\fakepath\\","");return ue.createElement("span",{className:"support-attachment"},ue.createElement("span",{className:"attachment-name"},r),ue.createElement("span",{className:"remove-attachment fonticon-cancel",onClick:function(){return n("")}}))}},{key:"render",value:function(){var e=this,t=this.props.attachment;return ue.createElement("div",null,ue.createElement("label",{className:"fileContainer attach-file btn btn-link"},ue.createElement("i",{className:"icon fonticon-paperclip"}),"Attach a file",ue.createElement("input",{className:"file",type:"file",name:"attachments",value:t,onChange:function(t){return e.selectAttachment(t.target.value)}})),this.getAttachment())}}]),n}(ue.Component);rU.propTypes={attachment:kt().string.isRequired,onSelect:kt().func.isRequired,acceptedFileFormats:kt().array},rU.defaultProps={acceptedFileFormats:[]};var oU=function(e){GM(n,e);var t=KM(n);function n(e){var r;return qM(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return HM(n,[{key:"getStoreState",value:function(){return{page:QM.getPage(),loaded:QM.isLoaded(),isAuthenticated:QM.isAuthenticated(),userIsInChina:QM.isUserInChina(),openTickets:QM.getTickets(!0),closedTickets:QM.getTickets(!1)}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){QM.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){QM.off("change",this.onChange)}},{key:"getOpenCasesCount",value:function(){var e=this.state,t=e.loaded,n=e.openTickets;return t?ue.createElement("span",{id:"open-case-count",className:"case-count"},"(",n.length,")"):null}},{key:"getSupportUnavailableNav",value:function(){return ue.createElement("div",{className:"flex-layout flex-col no-support-nav"},ue.createElement("nav",{className:"sidenav simple-sidenav"},ue.createElement("ul",{className:"nav nav-list"},ue.createElement("li",{className:"active"},ue.createElement("a",{href:"#/support",id:"case-button"},"How to get support")))))}},{key:"getNav",value:function(){var e=this.state.page,t=e===xM.SUPPORT_PAGES.NEW_TICKET?"active":"",n=e===xM.SUPPORT_PAGES.OPEN_TICKETS?"active":"",r=e===xM.SUPPORT_PAGES.CLOSED_TICKETS?"active":"";return ue.createElement("div",{className:"flex-layout flex-col"},ue.createElement("nav",{className:"sidenav simple-sidenav"},ue.createElement("ul",{className:"nav nav-list"},ue.createElement("li",{className:t},ue.createElement("a",{href:"#/support",id:"case-button"},"New Case")),ue.createElement("li",{className:n},ue.createElement("a",{href:"#support/opentickets",className:"cases-link",id:"open-cases"},"Open Tickets",this.getOpenCasesCount())),ue.createElement("li",{className:r},ue.createElement("a",{href:"#support/closedtickets",className:"cases-link",id:"closed-cases"},"Closed Tickets")))),ue.createElement("div",{className:"support-more-resources"},ue.createElement("div",null,ue.createElement("h4",null,"More resources"),ue.createElement("ul",null,ue.createElement("li",null,ue.createElement("a",{href:"https://twitter.com/cloudantstatus",target:"_blank",rel:"noopener noreferrer",className:"opens-new-window"},"@cloudantstatus on Twitter")),ue.createElement("li",null,ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-learning-center",target:"_blank",rel:"noopener noreferrer",className:"opens-new-window"},"Learning Center"))))))}},{key:"render",value:function(){return this.state.isAuthenticated?this.getSupportUnavailableNav():ue.createElement("div",{className:"support-sidebar-loading"},ue.createElement(XM,null))}}]),n}(ue.Component),aU=function(e){GM(n,e);var t=KM(n);function n(){return qM(this,n),t.apply(this,arguments)}return HM(n,[{key:"render",value:function(){return ue.createElement("div",{className:"support-unavailable"},ue.createElement("p",null,"For Cloudant questions and support, please email ",ue.createElement("a",{href:"mailto:Cloudant@21vianet.com"},"Cloudant@21vianet.com")," and include your username with a brief description of the question or problem."))}}]),n}(ue.Component),iU=function(e){GM(n,e);var t=KM(n);function n(){return qM(this,n),t.apply(this,arguments)}return HM(n,[{key:"render",value:function(){return ue.createElement("div",{id:"new-ticket-wrapper",className:"new-ticket-page"},ue.createElement("p",null,"The legacy Cloudant support portal has been deprecated. Please open your case in the ",ue.createElement("a",{href:"https://cloud.ibm.com/unifiedsupport/supportcenter",target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},"IBM Cloud Support Center"),", from within an IBM Cloud pay-go account. There will be no charge for use of this support channel."),ue.createElement("p",null,"To migrate to the IBM Cloud Support portal, you can follow the instructions outlined below:"),ue.createElement("ol",null,ue.createElement("li",null,"Create an IBM Cloud Pay-As-You-Go  account if you do not already have one, following the instructions at ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/account?topic=account-account-getting-started",target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},"https://cloud.ibm.com/docs/account?topic=account-account-getting-started"),". Creating this account will require you to provide a credit card but there will not be any charges to that account related to your use of the IBM Cloudant Dedicated Cluster service or for IBM Cloud Basic Support for your use of that service."),ue.createElement("li",null,"Open a support ticket via email to  support@cloudant.com to share the email address of the owner of that IBM Cloud account"),ue.createElement("li",null,"IBM Cloud Support staff will notify the account owner to indicate availability of support via IBM Cloud Support in the support ticket using the current system"),ue.createElement("li",null,"From that point on support tickets should be opened in one of the following ways",ue.createElement("ol",{type:"a"},ue.createElement("li",null,"using the ",ue.createElement("strong",null,"Create a case")," button on the ",ue.createElement("a",{href:"https://cloud.ibm.com/unifiedsupport/supportcenter",target:"_blank",rel:"noreferrer noopener",className:"opens-new-window"},"IBM Cloud Support Center")),ue.createElement("li",null,"by phone: +1-866-403-7638"),ue.createElement("li",null,"by chat from the IBM Cloud Support Center"),ue.createElement("li",null,"in all situations when opening  a support ticket mention that your account is for IBM Cloudant Enterprise Dedicated in both the Subject and Description of the support case and include the Cloudant $USERNAME value used to make a request, for example  https://$USERNAME.cloudant.com/_all_dbs")))))}}]),n}(ue.Component);const sU={TicketsController:$M,NewTicketController:JM,TicketCorrespondence:eU,TicketDetails:tU,TicketsList:ZM,FileUploader:rU,ResponseForm:nU,Sidebar:oU,SupportUnavailable:aU};var cU=[{name:"Support"}],lU=function(){return ue.createElement("header",{className:"two-panel-header flex-fill"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("div",{id:"header-docs-left"}),ue.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.createElement("div",{id:"react-headerbar",className:"flex-body"},ue.createElement(Kt,{crumbs:cU})),ue.createElement("div",{id:"right-header",className:"flex-fill"}),ue.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.createElement(Ht,null)))))},uU=function(e){var t=e.content,n=e.open;return ue.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area flex-layout flex-body"},ue.createElement("aside",{id:"sidebar-content"},ue.createElement(sU.Sidebar,null)),ue.createElement("section",{id:"dashboard-content",className:"flex-body flex-layout flex-col"},function(e,t){return"create"===e?ue.createElement(sU.NewTicketController,null):ue.createElement(sU.TicketsController,{open:t})}(t,n)))};const dU=function(e){var t=e.content,n=e.open;return ue.createElement("div",{id:"dashboard",className:"with-sidebar flex-template flex-layout flex-col"},ue.createElement(lU,null),ue.createElement(uU,{content:t,open:n}))},pU={RouteObjects:[se.RouteObject.extend({routes:{support:"defaultPage","support/opentickets":"openTickets","support/closedtickets":"closedTickets"},roles:["_admin"],selectedHeader:"Support",defaultPage:function(){return MM.selectPage(xM.SUPPORT_PAGES.NEW_TICKET),ue.createElement(dU,{content:"create"})},openTickets:function(){return MM.selectPage(xM.SUPPORT_PAGES.OPEN_TICKETS),ue.createElement(dU,{content:"open",open:!0})},closedTickets:function(){return MM.selectPage(xM.SUPPORT_PAGES.CLOSED_TICKETS),ue.createElement(dU,{content:"open",open:!1})}})],initialize:function(){se.addHeaderLink({title:"Support",href:"#/support",icon:"fonticon-support"})}},fU="DATABASES_PAGE_SELECT_TAB",hU="DATABASES_PAGE_LOADING",mU="DATABASES_PAGE_LOADING_COMPLETED",yU="SHARED_DATABASES_SHOW_DB_UNAVAILABLE_MODAL",bU="SHARED_DATABASES_HIDE_DB_UNAVAILABLE_MODAL",gU="SHARED_DATABASES_SETLOADING",_U="SHARED_DATABASES_SETPAGE",vU="SHARED_DATABASES_STARTLOADING",EU="SHARED_DATABASES_UPDATE";var wU=function(e){var t=e.split("/")[0];return{username:t,db:e.replace(t+"/","")}},SU=function(e,t,n,r,o,a){var i=[],s=0,c=t.filter((function(e){return-1===r.indexOf(e)}));c.forEach((function(e){var l=wU(e),u=se.urls("sharedDatabasePermissions","server",l.db,"?remote_account="+l.username);Pt.fetch(u).then((function(t){i.push({db:e,permissions:t})})).finally((function(){s++,c.length===s&&(OU({permissions:i,dbList:t,databaseDetails:o,failedDbs:r,fullDbList:n}),a&&a(null,t,n,r,o))}))}))},OU=function(e){se.dispatch({type:EU,options:e})},NU=function(e){se.dispatch({type:gU,options:{isLoading:e}})},DU=function(){var e=le.getParams(),t=e.page?parseInt(e.page,10):1,n=se.constants.MISC.DEFAULT_PAGE_SIZE;se.dispatch({type:vU}),function(e){se.dispatch({type:_U,options:{page:e}})}(t),NU(!0);var r=se.urls("sharedAllDbs","server","?per_page=500");Pt.fetch(r).then((function(e){var r=e.shared_databases;NU(!1);var o=Pt.paginate(r,t,n);OU({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:r}),function(e,t,n){var r=[],o=[],a=0;e.forEach((function(i){var s=wU(i),c=se.urls("sharedDatabaseBaseURL","server",s.db,"?remote_account="+s.username);Pt.fetch(c).then((function(e){e.db_name=i,r.push(e)}),(function(){o.push(i)})).finally((function(){++a===e.length&&(OU({dbList:e,databaseDetails:r,failedDbs:o,fullDbList:t}),n&&n(null,e,t,o,r))}))}))}(o,r,SU)}))};const CU=DU,PU=function(){se.dispatch({type:yU})},RU=function(){se.dispatch({type:bU})},kU=function(e){var t=R.getServerUrl("/_api/v2/user/shared_databases"),n=JSON.stringify({database:e.dbName});S(t,{body:n}).then((function(e){if(e.message)throw new Error(e.message);DU(),se.addNotification({msg:"The database has been removed from the list.",type:"success",clear:!0})})).catch((function(){se.addNotification({msg:"There was an error removing the database from the list.",type:"error",clear:!0})}))},TU=function(){se.dispatch({type:hU}),nN.userPromise.then((function(){se.dispatch({type:mU,options:{showSharedDBsTab:!nN.user.isIBMCloudAccount()}})})).catch((function(){se.dispatch({type:mU,options:{showSharedDBsTab:!1}})}))},xU="databases",IU="shared-databases";var AU={};AU.CloudantDatabasesPageStore=se.Store.extend({initialize:function(){this.currentTab=xU,this._tabDisabled=!0,this._isLoading=!0,this._isSharedDBsTabVisible=!1},selectTab:function(e){this.currentTab=e},getIsTabDisabled:function(){return this._tabDisabled},getTab:function(){return this.currentTab},isSharedDBsTabVisible:function(){return this._isSharedDBsTabVisible},isLoading:function(){return this._isLoading},dispatch:function(e){switch(e.type){case fU:this.selectTab(e.tab);break;case"SHARED_DATABASES_SET_TAB_STATUS":this._tabDisabled=e.options.isTabDisabled;break;case hU:this._isLoading=!0;break;case mU:this._isLoading=!1,this._isSharedDBsTabVisible=e.options.showSharedDBsTab;break;default:return}this.triggerChange()}}),AU.cloudantDatabasesPageStore=new AU.CloudantDatabasesPageStore,AU.cloudantDatabasesPageStore.dispatchToken=se.dispatcher.register(AU.cloudantDatabasesPageStore.dispatch.bind(AU.cloudantDatabasesPageStore)),AU.SharedDatabasesStore=se.Store.extend({initialize:function(){this.reset()},reset:function(){this._isLoading=!0,this._permissions=[],this._dbUnavailableModalVisible=!1},isDatabaseUnavailableModalVisible:function(){return this._dbUnavailableModalVisible},showDBUnavailableModal:function(){this._dbUnavailableModalVisible=!0},hideDBUnavailableModal:function(){this._dbUnavailableModalVisible=!1},getPermissions:function(){var e=se.cloudantUser.get("username");return this._permissions.map((function(t){if(!t.permissions)return t;var n=t.permissions.cloudant[e];return{db:t.db,permissions:n}}))},getIsSharedDbLoading:function(){return this._isLoading},dispatch:function(e){switch(e.type){case gU:this._isLoading=e.options.isLoading;break;case fU:this.hideDBUnavailableModal();break;case yU:this.showDBUnavailableModal();break;case bU:this.hideDBUnavailableModal();break;case ot:this._permissions=e.options.permissions||[];break;default:return}this.triggerChange()}}),AU.sharedDatabasesStore=new AU.SharedDatabasesStore,AU.sharedDatabasesStore.dispatchToken=se.dispatcher.register(AU.sharedDatabasesStore.dispatch.bind(AU.sharedDatabasesStore)),AU.databasesStore=new Et.DatabasesStoreConstructor,AU.databasesStore.dispatch=function(e){switch(e.type){case _U:this._page=e.options.page;break;case"SHARED_DATABASES_SET_PROMPT_VISIBLE":this.setPromptVisible(e.options.visible);break;case vU:this.setLoading(!0);break;case"SHARED_DATABASES_LOADCOMPLETE":this.setLoading(!1);break;case EU:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;default:return}this.triggerChange()},AU.databasesStore.dispatchToken=se.dispatcher.register(AU.databasesStore.dispatch.bind(AU.databasesStore));const LU=AU;function jU(e){return jU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jU(e)}function MU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BU(e,t,n){return t&&UU(e.prototype,t),n&&UU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qU(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VU(e,t)}function VU(e,t){return VU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},VU(e,t)}function HU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KU(e);if(t){var o=KU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return GU(this,n)}}function GU(e,t){if(t&&("object"===jU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FU(e)}function FU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KU(e){return KU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},KU(e)}function zU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WU=LU.databasesStore,YU=LU.cloudantDatabasesPageStore,XU=LU.sharedDatabasesStore,QU=cs.GraveyardInfo,JU=pi.TabElement,$U=pi.TabElementWrapper,ZU=function(e){qU(n,e);var t=HU(n);function n(e){var r;return MU(this,n),zU(FU(r=t.call(this,e)),"getStoreState",(function(){return{selectedTab:YU.getTab(),isTabDisabled:YU.getIsTabDisabled(),isSharedDBsTabVisible:YU.isSharedDBsTabVisible(),isLoading:YU.isLoading()}})),zU(FU(r),"onChange",(function(){r.setState(r.getStoreState())})),zU(FU(r),"getSharedDBTab",(function(){if(r.state.isSharedDBsTabVisible){var e=r.state.selectedTab;return ue.createElement(JU,{selected:e===IU,text:"Databases Shared by Others",onChange:function(){se.navigate("#shared-database")},iconClass:""})}})),zU(FU(r),"getSharedDBTabContent",(function(){if(r.state.isSharedDBsTabVisible&&r.state.selectedTab==IU){var e="shared-database-content-tag tab-pane";return r.state.selectedTab===IU&&(e+=" active"),ue.createElement("div",{className:e,id:"shared-database-tab"},ue.createElement(eB,null))}return null})),r.state=r.getStoreState(),r}return BU(n,[{key:"componentDidMount",value:function(){YU.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){YU.off("change",this.onChange)}},{key:"render",value:function(){var e=this.state,t=e.selectedTab;if(e.isLoading)return ue.createElement(pi.LoadLines,null);var n="your-database-content-tag tab-pane";return this.state.selectedTab===xU&&(n+=" active"),ue.createElement("div",{style:{padding:0}},ue.createElement($U,null,ue.createElement(JU,{selected:t===xU,text:"Your Databases",onChange:function(){se.navigate("#your-database")},iconClass:""}),this.getSharedDBTab()),ue.createElement("div",{className:"tab-content dashboard-tab-content"},ue.createElement("div",{className:n,id:"your-database-tab"},ue.createElement(cs.DatabasesController,null)),this.getSharedDBTabContent()),ue.createElement("div",{id:"database-unavailable-modal-wrapper"}))}}]),n}(ue.Component),eB=function(e){qU(n,e);var t=HU(n);function n(){var e;MU(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zU(FU(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{dbUnavailableModalVisible:XU.isDatabaseUnavailableModalVisible(),permissions:XU.getPermissions(),dbList:WU.getDbList(),isLoading:XU.getIsSharedDbLoading()}})),zU(FU(e),"onChange",(function(){e.setState(e.getStoreState())})),zU(FU(e),"state",e.getStoreState()),e}return BU(n,[{key:"componentDidMount",value:function(){WU.on("change",this.onChange,this),XU.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){WU.off("change",this.onChange),XU.off("change",this.onChange)}},{key:"render",value:function(){var e=this.state,t=e.permissions,n=e.dbList;return ue.createElement("div",null,ue.createElement(tB,{permissions:t,dbList:n,loading:this.state.isLoading}),ue.createElement(rB,{visible:this.state.dbUnavailableModalVisible}))}}]),n}(ue.Component),tB=function(e){qU(n,e);var t=HU(n);function n(){var e;MU(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zU(FU(e=t.call.apply(t,[this].concat(o))),"createRows",(function(){return e.props.dbList.map((function(t,n){var r=e.props.permissions.filter((function(e){if(e)return e.db!==t.id}))[0];return ue.createElement(nB,{permissions:r,item:t,key:n})}))})),zU(FU(e),"emptyTableMsg",(function(){return ue.createElement("tr",{className:"no-shared-dbs-available"},ue.createElement("td",{colSpan:"5"},"You do not have any shared databases available."))})),e}return BU(n,[{key:"render",value:function(){if(this.props.loading)return ue.createElement("div",{className:"view"},ue.createElement(pi.LoadLines,null));var e=0===this.props.dbList.length?this.emptyTableMsg():this.createRows();return ue.createElement("div",{className:"view"},ue.createElement("table",{className:"databases table table-striped fauxton-table-list shared-db-table"},ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",null,"Name"),ue.createElement("th",null,"Size"),ue.createElement("th",null,"Documents"),ue.createElement("th",null,"Actions"))),ue.createElement("tbody",null,e)))}}]),n}(ue.Component),nB=function(e){qU(n,e);var t=HU(n);function n(){var e;MU(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zU(FU(e=t.call.apply(t,[this].concat(o))),"showDatabaseUnavailableModal",(function(){PU()})),zU(FU(e),"deleteFromList",(function(){var t=e.props.item;kU({dbName:t.id})})),zU(FU(e),"getDeleteIcon",(function(){var t=ue.createElement(on.u,{id:"tooltip-delete"},"Delete from this list");return ue.createElement(on.Ox,{placement:"top",overlay:t},ue.createElement("a",{ref:function(t){return e.deleteIcon=t},onClick:e.deleteFromList,className:"js-db-remove db-actions btn fa fa-remove icon-remove fonticon-remove delete-db-from-list",title:"Delete from this list"}))})),zU(FU(e),"getReplicationIcon",(function(t,n){var r=n&&(-1!==n.indexOf("_writer")||-1!==n.indexOf("_replicator")),o=ue.createElement(on.u,{id:"tooltip-replication"},"You do not have permission to replicate this database");return r?(o=ue.createElement(on.u,{id:"tooltip-replication"},"Replicate ".concat(decodeURIComponent(t))),ue.createElement(on.Ox,{placement:"top",overlay:o},ue.createElement("a",{ref:function(t){return e.replicationIcon=t},className:"db-actions btn fonticon-replicate set-replication-start",title:"Replicate "+t,href:"#/replication/shared/"+t}," "))):ue.createElement(on.Ox,{placement:"top",overlay:o},ue.createElement("a",{ref:function(t){return e.replicationIcon=t},className:"db-actions btn fonticon-replicate set-replication-start disabled disabled-shared-button",title:"You do not have permission to replicate this database"}," "))})),zU(FU(e),"getPermissionsIcon",(function(t,n){var r=n&&-1!==n.indexOf("_admin"),o=ue.createElement(on.u,{id:"tooltip-permissions"},"You do not have permission to view this database's security settings");return r?(o=ue.createElement(on.u,{id:"tooltip-permissions"},"Set permissions for ".concat(decodeURIComponent(t))),ue.createElement(on.Ox,{placement:"top",overlay:o},ue.createElement("a",{ref:function(t){return e.permissionsIcon=t},className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+decodeURIComponent(t),href:"#/database/shared/"+t+"/permissions"}))):ue.createElement(on.Ox,{placement:"top",overlay:o},ue.createElement("a",{ref:function(t){return e.permissionsIcon=t},className:"db-actions btn icon-lock set-permissions disabled disabled-shared-button",title:"You do not have permission to view this database's security settings"}))})),e}return BU(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.permissions,r=t.encodedId,o=t.id,a=t.dataSize,i=t.docCount,s=t.docDelCount,c=t.showTombstoneWarning;if(t.failed)return ue.createElement("tr",null,ue.createElement("td",null,o),ue.createElement("td",{className:"gray js-db-unavailable database-unavailable-msg",onClick:this.showDatabaseUnavailableModal},"Database Unavailable ",ue.createElement("i",{className:"icon icon-exclamation-sign"})),ue.createElement("td",null),ue.createElement("td",null,this.getDeleteIcon()));var l=c?ue.createElement(QU,{docCount:i,docDelCount:s}):null,u=n?n.permissions:null;return ue.createElement("tr",null,ue.createElement("td",null,ue.createElement("a",{href:"#/database/shared/"+o+"/_all_docs"},o)),ue.createElement("td",null,a),ue.createElement("td",null,i," ",l),ue.createElement("td",null,this.getDeleteIcon()," ",this.getReplicationIcon(r,u)," ",this.getPermissionsIcon(r,u)))}}]),n}(ue.Component),rB=function(e){qU(n,e);var t=HU(n);function n(){var e;MU(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return zU(FU(e=t.call.apply(t,[this].concat(o))),"closeModal",(function(){RU()})),e}return BU(n,[{key:"render",value:function(){if(!this.props.visible)return null;var e=this.props.visible;return ue.createElement(on.u_,{dialogClassName:"",show:e,onHide:this.closeModal},ue.createElement(on.u_.Header,{closeButton:!0},ue.createElement(on.u_.Title,null,"Database Unavailable")),ue.createElement(on.u_.Body,null,ue.createElement("b",null,'"Database Unavailable"')," is typically the result of one the following:",ue.createElement("br",null),ue.createElement("div",{className:"dashboard__database-unavailable-reasons"},ue.createElement("p",null,"The person sharing this database needs to enable CORS."),ue.createElement("p",{className:"dashboard__unavailable-modal-text-indent"},"They can do this in the 'CORS' section, under their 'Account' tab."),ue.createElement("p",{className:"dashboard__unavailable-modal-p"},ue.createElement("span",{className:"dashboard__unavailable-modal-or-span"},"OR"),"This database has been deleted."),ue.createElement("p",{className:"dashboard__unavailable-modal-p"},ue.createElement("span",{className:"dashboard__unavailable-modal-or-span"},"OR"),"You have permission to replicate this database, but not to view."),ue.createElement("p",{className:"dashboard__unavailable-modal-p"},ue.createElement("span",{className:"dashboard__unavailable-modal-or-span"},"OR"),"Your permission to view this database has been revoked."))))}}]),n}(ue.Component);zU(rB,"defaultProps",{visible:!1});const oB={DatabasesPageController:ZU,SharedDatabasesPage:eB,SharedDatabaseTable:tB,SharedDatabaseRow:nB,DatabaseUnavailableModal:rB};function aB(e){return aB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aB(e)}function iB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cB(e,t){return cB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cB(e,t)}function lB(e,t){if(t&&("object"===aB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uB(e){return uB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uB(e)}var dB=LU.cloudantDatabasesPageStore,pB=LU.databasesStore,fB=Et.databasesStore,hB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cB(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uB(r);if(o){var n=uB(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lB(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,n=[{key:"isSharedDbsTab",value:function(e){return e!==xU}},{key:"loadCorrectTab",value:function(e){var t,n;t=e.tab,n=dB.getTab(),t!==n&&(Pt.updateDatabases({dbList:[],databaseDetails:[],failedDbs:[],fullDbList:[]}),OU({dbList:[],databaseDetails:[],failedDbs:[],fullDbList:[]})),se.dispatch({type:fU,tab:t}),this.isSharedDbsTab(e.tab)&&CU()}},{key:"componentDidMount",value:function(){this.loadCorrectTab(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadCorrectTab(e)}},{key:"render",value:function(){var e=this.props.linkPath,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iB(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(["shared-database"===this.props.tab?window.location.origin+"/_api/v2/user/shared_databases":window.location.origin+"/_all_dbs","https://cloud.ibm.com/apidocs/cloudant#getalldbs"],2),n=t[0],r=t[1],o=this.isSharedDbsTab(this.props.tab)?pB:fB;return ue.createElement(Xt,null,ue.createElement(Qt,{crumbs:[{name:"Databases"}],endpoint:n,docURL:r},ue.createElement(cs.RightDatabasesHeader,{partitionedDbHelpText:le.i18n.en_US["create-db-partitioned-help"]})),ue.createElement(Jt,null,ue.createElement(oB.DatabasesPageController,null)),ue.createElement($t,null,ue.createElement(cs.DatabasePagination,{linkPath:e,store:o})))}}],n&&sB(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);const mB=hB;var yB=se.RouteObject.extend({routes:{"":"databasesTab",_all_dbs:"databasesTab","your-database":"databasesTab","_all_dbs(:params)":"databasesTab","_all_shared_dbs(:params)":"sharedDatabasesTab","shared-database(:params)":"sharedDatabasesTab"},selectedHeader:"Databases",roles:["_admin"],databasesTab:function(e,t){var n=function(e){var t=1,n=void 0;if(e){var r=le.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}(t),r=n.page,o=n.limit;return Pt.setPage(r),o&&Pt.setLimit(o),TU(),ue.createElement(mB,{tab:xU})},sharedDatabasesTab:function(){return TU(),ue.createElement(mB,{linkPath:"_all_shared_dbs",tab:IU})}});ZN.RouteObjects=[yB];const bB=ZN;bB.initialize=function(){},se.registerUrls("sharedAllDbs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R.getServerUrl("/_api/v2/user/shared_databases".concat(e))},app:function(){throw new Error("not implemented")},apiurl:function(){throw new Error("not implemented")}}),se.registerUrls("sharedDatabaseBaseURL",{server:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return R.getServerUrl("/_api/v2/user/shared_databases/proxy/"+e+t)},app:function(){throw new Error("not implemented")},apiurl:function(){throw new Error("not implemented")}}),se.registerUrls("sharedDatabasePermissions",{server:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return R.getServerUrl("/_api/v2/user/shared_databases/proxy/".concat(e,"/_security").concat(t))},app:function(){throw new Error("not implemented")},apiurl:function(){throw new Error("not implemented")}}),se.registerExtension("DatabaseList:dbSizeReportFieldName","external");const gB=bB;function _B(e){return _B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_B(e)}function vB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wB(e,t){return wB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wB(e,t)}function SB(e,t){if(t&&("object"===_B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function OB(e){return OB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},OB(e)}const NB={DocPage:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wB(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OB(r);if(o){var n=OB(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return SB(this,e)});function i(){return vB(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return ue.createElement("div",{className:"doc-page-links"},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-getting-started-with-cloudant",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"Documentation"),ue.createElement("div",{className:"link-desc"},"The Cloudant Documentation Center contains information on Cloudant features, tutorials, and reference materials.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://ibm.com/cloud/cloudant",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"ibm.com/cloudant"),ue.createElement("div",{className:"link-desc"},"The Cloudant homepage is a portal to numerous resources on Cloudant, including webinars, tutorials, case studies, and white papers.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://cloud.ibm.com/docs/Cloudant?topic=Cloudant-learning-center",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"Cloudant Learning Center"),ue.createElement("div",{className:"link-desc"},"The Cloudant Learning Center contains numerous videos, tutorials, and the Cloudant API Reference.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://www.ibm.com/cloud/blog/welcome-to-the-new-ibm-cloud-blog",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"IBM Cloud Blog"),ue.createElement("div",{className:"link-desc"},"The IBM Cloud Blog contains posts on Cloudant within IBM Cloud and related services for building applications with Cloudant.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://blog.cloudant.com/",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"Cloudant Blog"),ue.createElement("div",{className:"link-desc"},"IBM Cloudant specific blog with content on best practices, use cases, and tooling.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://developer.ibm.com/?q=cloudant",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"IBM Developer"),ue.createElement("div",{className:"link-desc"},"IBM Developer is a technical resource center for software developers, and contains technical posts, tutorials, and code patterns on Cloudant and Cloudant integrations with other products.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://stackoverflow.com/questions/tagged/cloudant",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"Stack Overflow"),ue.createElement("div",{className:"link-desc"},"Stack Overflow contains thousands of posted questions and answers about Cloudant and other products. These forums are owned by the Stack Exchange Network.")),ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("a",{href:"https://cloud.ibm.com/apidocs/cloudant#introduction",target:"_blank",rel:"noopener noreferrer",className:"doc-link opens-new-window"},"API Documentation"),ue.createElement("div",{className:"link-desc"},"IBM Cloudant API documentation includes information on each endpoint and its authorization requirements, auditing events, request body, response body, and status codes. The information is provided for using the HTTP API directly and other supported environments.")))}}])&&EB(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component)};var DB=new se.addon,CB=se.RouteObject.extend({routes:{doc:"showDocumentation"},selectedHeader:"Documentation",roles:["_admin"],showDocumentation:function(){return ue.createElement(Zt,{component:ue.createElement(NB.DocPage,null),crumbs:[{name:"Documentation"}]})}});DB.RouteObjects=[CB];const PB=DB;function RB(e){if(e&&e.altKey&&e.shiftKey&&86===e.keyCode){var t=document.getElementById("cloudant_dashboard_build");t&&t.innerText?window.alert("Cloudant Dashboard build:\n".concat(t.innerText)):window.alert("Cloudant Dashboard build information is not available")}}PB.initialize=function(){se.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#doc",bottomNav:!0,top:!0}),document.addEventListener("keyup",RB,!1)};const kB=PB;function TB(e){return TB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TB(e)}function xB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IB(e,t){return IB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},IB(e,t)}function AB(e,t){if(t&&("object"===TB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LB(e)}function LB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jB(e){return jB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jB(e)}var MB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IB(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jB(r);if(o){var n=jB(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return AB(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).updateKey=t.updateKey.bind(LB(t)),t}return t=i,(n=[{key:"updateKey",value:function(e){this.props.onChange({iamApiKey:e})}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t&&t.iamApiKey||"";return ue.createElement("div",{className:"replication__section"},ue.createElement("div",{className:"replication__input-label"}),ue.createElement("div",null,ue.createElement("input",{type:"password",placeholder:"IAM API Key",value:n,onChange:function(t){return e.updateKey(t.target.value)}})))}}])&&xB(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),UB=!1;const BB={initialize:function(){nN.userPromise.then((function(){UB||(se.registerExtension("Replication:Auth",{typeValue:"IBM_IAM",typeLabel:"IAM Authentication",inputComponent:MB,getCredentials:function(e){if(e.auth&&e.auth.iam)return{iamApiKey:e.auth.iam.api_key}},setCredentials:function(e,t){e.auth={iam:{api_key:t.iamApiKey}}}}),se.registerExtension("Replication:Auth-help",{authType:pP.REPLICATION_AUTH_METHOD.BASIC,helpText:"For security purposes, the IBM Cloudant team recommends that you use IAM API keys or IBM Cloudant legacy authentication API keys rather than account-level credentials for replication jobs."})),UB=!0})).catch((function(){}))}},qB="MONITORING_CHANGE_CLUSTER",VB="MONITORING_CLUSTER_NAME",HB="MONITORING_UPDATE_POLLING_FREQ",GB="MONITORING_CHANGE_RANGE",FB="MONITORING_HIDE_RANGE",KB="MONITORING_SHOW_RANGE",zB="MONITORING_SHOW_REFRESH_CONTROLS",WB="MONITORING_HIDE_REFRESH_CONTROLS",YB="MONITORING_CHANGE_TAB",XB="MONITORING_HTTP_METRICS",QB="MONITORING_HTTP_STATUS_METRICS",JB="MONITORING_VIEW_EMITS_METRICS",$B="MONITORING_DOCS_PROCESSED_METRICS",ZB="MONITORING_DATA_VOLUME",eq="MONITORING_CLEAR_METRICS",tq="MONITORING_NODE_INFO",nq="MONITORING_CHART_STATE",rq="MONITORING_SET_USER_TYPE",oq="MONITORING_GOT_CCM_USAGE",aq="MONITORING_STOP_AUTO_UPDATE_CCM_CHART";var iq=n(98491),sq=n(74662),cq=n(72577);const lq={MAX_NODES_IN_REQUEST:4,POLLING:{DEFAULT_AUTO_REFRESH_FREQ_SECS:180,POLLING_STEP_SIZE:60,POLLING_FREQ_OPTIONS:[60,120,180,240,300,360,420,480,540,600]},DEFAULT_OVERVIEW_GRAPHS_RANGE:"24h",EVENTS:{COUNTDOWN_COMPLETE:"countdownComplete",REFRESH_CLUSTER:"refreshCluster",REFRESH_OVERVIEW:"refreshOverview",OVERVIEW_CHANGE_RANGE:"overviewChangeRange",SINGLE_CHART_LOADED:"singleChartLoaded",ALL_CHARTS_LOADED:"allChartsLoaded",TOGGLE_AUTO_REFRESH:"toggleAutoRefresh",CHANGE_AUTO_REFRESH_FREQ:"changeAutoRefreshFrequency",CLUSTER_TAB_SELECTED:"clusterTabSelected",UPDATE_API_URL:"updateAPIURL"},NODE_STATUSES:{UP:"UP",DOWN:"DOWN",NOLB:"NOLB"},LOCAL_STORAGE:{AUTO_REFRESH_ENABLED:"monitoringAutoRefreshEnabled",AUTO_REFRESH_FREQ:"monitoringAutoRefreshFrequency",OVERVIEW_GRAPHS_RANGE:"overviewGraphsRange",LAST_CLUSTER_NAME:"lastClusterName",HTTP_STATUS:"http-status",HTTP_REQUESTS:"http-requests"}};var uq,dq=function(e){return function(e){return e.filter((function(e){return!s().isNull(e[0])}))}(e).map((function(e){return{value:e[0],epoch:e[1],date:new Date(1e3*e[1])}}))},pq=function(e){var t=e.map((function(e){return e.points.length})),n=(0,iq.Z)(t),r=s().range(0,n).map((function(){return 0}));return e.forEach((function(e){r=r.map((function(t,n){return t+e.points[n].value}))})),[0,(0,cq.Z)(r)]},fq=function(e){var t,n=((t=function(e){var t=function(e){return(0,iq.Z)(e.filter((function(e){return 0!==e.points.length})).map((function(e){return e.points.length})))}(e),n=t<200,r=Math.floor(t/200);return e.filter((function(e){return 0!==e.points.length&&(e.points=e.points.slice(0,t).filter((function(e,o){return n?o<=t-1:0===o||o%r==0})),e.mean=(0,sq.Z)(e.points,(function(e){return e.value})),e.mean<1&&(e.toggle=!0),!0)}))}(e.target_responses.map((function(e){return{name:e.target.split(" ")[1],points:dq(e.datapoints),toggle:!1,mean:0}})))).length>1&&t.forEach((function(e,n){0!==n&&e.points.forEach((function(e,n){e.date=s().has(t[0].points[n],"date")?t[0].points[n].date:null,e.epoch=t[0].points[n].epoch}))})),t);return{datapoints:n,domain:pq(n)}},hq=function(e){var t=e.url;return o().ajax({type:"GET",url:t,contentType:"application/json; charset=utf-8",dataType:"json"}).then((function(e){return fq(e)}))},mq=function(e){return function(t){return t.datapoints.forEach((function(t){var n=t.name.toLowerCase();s().isUndefined(e[n])||(t.toggle=e[n])})),t}},yq=function(e){var t=Object.keys(e)[0],n=Object.keys(e[t])[0],r=e[t][n];return r.name=n,r.cluster=t,r.memory&&Object.prototype.hasOwnProperty.call(r.memory,"Used")?r.memory=R.formatSize(r.memory.Used):r.memory=R.formatSize(r.memory.Processes),r.uptimeDate=h()().subtract(r.uptime,"seconds").format("dddd, MMMM Do YYYY, h:mm:ss a"),r.uptimeSince=h()().subtract(r.uptime,"seconds").fromNow(!0),r.statusExplain={UP:"This node is up",NOLB:"This node is not load balanced",DOWN:"This node is down"}[r.status],r.runQueue=r.run_queue,r.processes=r.process_count,r.osProcesses=r.os_proc_count,r},bq=function(){uq&&window.clearInterval(uq)};function gq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vq=function(e,t,n,r){Cq(),Pq(e,t,r),Rq(t,n)},Eq=function(){bq()},wq=function(e){if("cluster"===e)se.navigate("/monitoring/cluster",{replace:!0});else if("current_operations"===e)se.navigate("/monitoring/usage",{replace:!0});else if("denied_requests"===e)se.navigate("/monitoring/denied",{replace:!0});else if("storage"===e)se.navigate("/monitoring/storage",{replace:!0});else{if("metrics"!==e)return;se.navigate("/monitoring/overview",{replace:!0})}se.dispatch({type:YB,data:e})},Sq=function(e){se.dispatch({type:rq,data:e})},Oq=function(){se.dispatch({type:zB})},Nq=function(){se.dispatch({type:WB})},Dq=function(e,t){var n=w("/_api/v2/clusters?admin=true").then((function(e){var t=e.clusters;return t?(t.forEach((function(e){e.nodes=e.nodes.map((function(e){return e.split(".")[0]}))})),t):[]}));se.Promise.all([n,nN.userPromise]).then((function(n){var r=gq(n,1)[0];if((o=se.cloudantUser).isGlobalAdmin()||!s().isNull(o.adminCluster())){var o,a=function(e){var t=le.utils.localStorageGet(lq.LOCAL_STORAGE.LAST_CLUSTER_NAME),n=e.map((function(e){return e.cluster}));return t&&n.indexOf(t)>-1?t:e[0].cluster}(r);se.dispatch({type:VB,data:{clusters:r,userClusters:se.cloudantUser.get("admin_clusters"),selectedCluster:a}}),Pq(e,a,t),Rq(a,r.find((function(e){return e.cluster===a})).nodes)}}))},Cq=function(){se.dispatch({type:eq})},Pq=function(e,t,n){var r,a,i;(r={duration:e,cluster:t},a=n["http-requests"],i=o().param(r),hq({url:"/_api/v2/monitoring/rate/verb?".concat(i)}).then(mq(a))).then((function(e){se.dispatch({type:XB,data:e})})),function(e,t){var n=o().param(e);return hq({url:"/_api/v2/monitoring/rate/status_code?".concat(n)}).then(mq(t))}({duration:e,cluster:t},n["http-status"]).then((function(e){se.dispatch({type:QB,data:e})})),function(e){var t=o().param(e);return hq({url:"/_api/v2/monitoring/map_doc?".concat(t)}).then((function(e){return e.datapoints.length>0&&(e.datapoints[0].name="Docs"),e}))}({duration:e,cluster:t}).then((function(e){se.dispatch({type:$B,data:e})})),function(e){var t=o().param(e);return hq({url:"/_api/v2/monitoring/kv_emits?".concat(t)}).then((function(e){return e.datapoints.length>0&&(e.datapoints[0].name="Emits"),e}))}({duration:e,cluster:t}).then((function(e){se.dispatch({type:JB,data:e})})),function(e){var t=o().param(e);return hq({url:"/_api/v2/monitoring/disk_use?".concat(t)}).then((function(e){if(0===e.datapoints.length)return e;var t=e.datapoints.find((function(e){return"Used"===e.name})).points,n=e.datapoints.find((function(e){return"Free"===e.name})).points;return{domain:[0,100],datapoints:[{name:"Used",toggle:!0,points:t.map((function(e,t){var r=n[t].value,o=e.value+r;return{value:0===e.value?0:(e.value/o*100).toFixed(0),total:o,free:r,epoch:e.epoch,date:e.date}}))}]}}))}({duration:e,cluster:t}).then((function(e){se.dispatch({type:ZB,data:e})}))},Rq=function(e,t){t.forEach((function(t){(function(e,t){return o().ajax({type:"GET",url:"/_api/v2/clusters/status?force_complete=true&cluster=".concat(e,"&nodes=").concat(t),contentType:"application/json; charset=utf-8",dataType:"json"}).then(yq,function(e,t){return function(n){var r="An error occurred with this request.";if(n&&n.responseText){var o=JSON.parse(n.responseText);o.error&&(r=o.error)}return{name:t,cluster:e,error:r}}}(e,t))})(e,t).then((function(e){return se.dispatch({type:tq,data:e})}),(function(e){return se.dispatch({type:tq,data:e})}))}))},kq=function(e,t,n){se.dispatch({type:nq,data:{chart:e,state:t,type:n}})},Tq=0,xq=function(){se.Promise.all([w("/_api/v2/user/plan"),w("/_api/v2/user/ccm_diagnostics")]).then((function(e){var t=gq(e,2),n=t[0],r=t[1];if(!n.throughput&&!n.plan){var o=Iq(n);throw new Error("Could not retrieve your plan details. ".concat(o))}if(!r.account){var a=Iq(r);throw new Error("Could not retrieve your service usage. ".concat(a))}Tq=0,se.dispatch({type:oq,options:{usage:r,planDetails:n}})})).catch((function(e){if(!(++Tq<=3)){var t=e&&e.message?e.message:"Could not retrieve your service usage.";se.addNotification({msg:t,type:"error",clear:!0}),se.dispatch({type:aq,options:{reason:t}})}}))};function Iq(e){return e.error?e.error:e.message?e.message:""}function Aq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aq(Object(n),!0).forEach((function(t){jq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mq={};Mq.MonitoringStore=se.Store.extend({initialize:function(){this._clusters=[],this._userClusters=[],this._selectedCluster="",this._isLoading=!1,this._pollingFreq=le.utils.localStorageGet(lq.LOCAL_STORAGE.AUTO_REFRESH_FREQ)||300,this._monitoringRange="7d",this._rangeVisible=!0,this._refreshControlsVisible=!1,this._selectedTab="network",this._monitoringRange=le.utils.localStorageGet(lq.LOCAL_STORAGE.OVERVIEW_GRAPHS_RANGE)||lq.DEFAULT_OVERVIEW_GRAPHS_RANGE,this._metrics={},this._nodeInfo={},this._isUserAdmin=void 0,this.loadChartState()},isUserInformationLoaded:function(){return void 0!==this._isUserAdmin},isUserAdmin:function(){return!0===this._isUserAdmin},loadChartState:function(){var e=function(e){return le.utils.localStorageGet(e)||{}};this._chartToggleStates={"http-status":e(lq.LOCAL_STORAGE.HTTP_STATUS),"http-requests":e(lq.LOCAL_STORAGE.HTTP_REQUESTS)}},toggleChartState:function(e){var t=e.chart,n=e.state,r=e.type;this._chartToggleStates[t][r.toLowerCase()]=!n,le.utils.localStorageSet(t,this._chartToggleStates[t])},getToggleChartState:function(){return this._chartToggleStates},setClusters:function(e){this._clusters=e},setUserClusters:function(e,t){this.setActiveCluster(t),this._userClusters=e},setActiveCluster:function(e){this._selectedCluster=e,le.utils.localStorageSet(lq.LOCAL_STORAGE.LAST_CLUSTER_NAME,e)},getSelectedCluster:function(){return this._selectedCluster},getClusterNames:function(){return this._userClusters},getClusters:function(){return this._clusters},isLoading:function(){return this._isLoading},hideRange:function(){this._rangeVisible=!1},showRange:function(){this._rangeVisible=!0},rangeVisible:function(){return this._rangeVisible},hideRefreshControls:function(){this._refreshControlsVisible=!1},showRefreshControls:function(){this._refreshControlsVisible=!0},refreshControlsVisible:function(){return this._refreshControlsVisible},updatePollingFreq:function(e){this._pollingFreq=e,le.utils.localStorageSet(lq.LOCAL_STORAGE.AUTO_REFRESH_FREQ,e)},changeRange:function(e){this._monitoringRange=e,le.utils.localStorageSet(lq.LOCAL_STORAGE.OVERVIEW_GRAPHS_RANGE,e)},changeTab:function(e){this._selectedTab=e},getSelectedTab:function(){return this._selectedTab},getPollingFreq:function(){return this._pollingFreq},getGraphRefresh:function(){return this._autoGraphRefresh},getMonitoringRange:function(){return this._monitoringRange},getHttpMetrics:function(){return this._metrics.http},getHttpStatusMetrics:function(){return this._metrics["http-status"]},getDocsProcessedMetrics:function(){return this._metrics["docs-processed"]},getViewEmitsMetrics:function(){return this._metrics["view-emits"]},getDataVolumeMetrics:function(){return this._metrics["data-volume"]},getSelectedClusterNodes:function(){return 0===this.getClusters().length?[]:this.getClusterNodes(this.getSelectedCluster())},getClusterNodes:function(e){return this.getClusters().find((function(t){return t.cluster===e})).nodes},getSeletedClusterNodesStatus:function(){return this._nodeInfo[this.getSelectedCluster()]||[]},setMetrics:function(e,t){this._metrics[e]=t},clearNodeInfo:function(){this._nodeInfo=[]},setNodeInfo:function(e){this._nodeInfo[e.cluster]||(this._nodeInfo[e.cluster]=[]),this._nodeInfo[e.cluster].push(e)},clearMetrics:function(){this._metrics={}},setCcmUsage:function(e){var t=e.usage,n=e.planDetails;if(this._ccmUsage=t,this._ccmPlanDetails=n,-1!==Object.keys(lq.NEW_BLUEMIX_PLANS).indexOf(this._ccmPlanDetails.plan)&&this._preSelectedPlan.multiple&&this._ccmPlanDetails.throughput){var r=this._ccmPlanDetails.throughput;this._ccmPlanDetails.throughput=Lq(Lq({},this._ccmPlanDetails.throughput),{},{write:this._preSelectedPlan.multiple*r.write,query:this._preSelectedPlan.multiple*r.query,lookup:this._preSelectedPlan.multiple*r.lookup})}},dispatch:function(e){var t=e.type,n=e.data;switch(t){case"MONITORING_FETCHING_CLUSTER_NAME":this._isLoading=!0;break;case VB:this._isLoading=!1,this.setClusters(n.clusters),this.setUserClusters(n.userClusters,n.selectedCluster);break;case qB:this.clearNodeInfo(),this.clearMetrics(),this.setActiveCluster(n);break;case FB:this.hideRange();break;case KB:this.showRange();break;case WB:this.hideRefreshControls();break;case zB:this.showRefreshControls();break;case HB:this.updatePollingFreq(n);break;case GB:this.changeRange(n);break;case YB:this.changeTab(n);break;case XB:this.setMetrics("http",n);break;case QB:this.setMetrics("http-status",n);break;case $B:this.setMetrics("docs-processed",n);break;case JB:this.setMetrics("view-emits",n);break;case ZB:this.setMetrics("data-volume",n);break;case eq:this.clearMetrics(),this.clearNodeInfo();break;case tq:this.setNodeInfo(n);break;case nq:this.toggleChartState(n);break;case rq:this._isUserAdmin=n;break;default:return}this.triggerChange()}}),Mq.monitoringStore=new Mq.MonitoringStore,Mq.monitoringStore.dispatchToken=se.dispatcher.register(Mq.monitoringStore.dispatch.bind(Mq.monitoringStore)),Mq.CCMMonitoringStore=se.Store.extend({initialize:function(){this._ccmUsage={write:0,query:0,lookup:0},this._ccmPlanDetails={throughput:{write:0,query:0,lookup:0}},this._stopAutoUpdate=!1,this._stopAutoUpdateReason=null,this._userPlan=void 0,this._isAccountOnCcmPlan=!1},isAccountOnCcmPlan:function(){return this._isAccountOnCcmPlan},getCcmUsage:function(){return this._ccmUsage},getCcmPlanDetails:function(){return this._ccmPlanDetails},getStopAutoUpdateStatus:function(){return this._stopAutoUpdate},getStopAutoUpdateReason:function(){return this._stopAutoUpdateReason},isTransactionEnginePlan:function(){return/\.transactionengine\./.test(this._userPlan.id)},setCcmUsage:function(e){var t=e.usage,n=e.planDetails;if(this._userPlan&&(this._ccmUsage=t,n.throughput&&(this._ccmPlanDetails=n),-1!==Object.keys(KE.NEW_BLUEMIX_PLANS).indexOf(this._ccmPlanDetails.plan)&&this._userPlan.multiple&&this._ccmPlanDetails.throughput)){var r=this._ccmPlanDetails.throughput;this._ccmPlanDetails.throughput=Lq(Lq({},this._ccmPlanDetails.throughput),{},{write:this._userPlan.multiple*r.write,query:this._userPlan.multiple*r.query,lookup:this._userPlan.multiple*r.lookup})}},dispatch:function(e){var t=e.type,n=e.options;switch(t){case iE:this._userPlan={id:n.plan,multiple:n.plan_multiple},this._isAccountOnCcmPlan=PE(n.plan);break;case oq:this.setCcmUsage(n);break;case aq:this._stopAutoUpdate=!0,this._stopAutoUpdateReason=n.reason;break;default:return}this.triggerChange()}}),Mq.ccmMonitoringStore=new Mq.CCMMonitoringStore,Mq.ccmMonitoringStore.dispatchToken=se.dispatcher.register(Mq.ccmMonitoringStore.dispatch.bind(Mq.ccmMonitoringStore));const Uq=Mq;var Bq=function(e){var t=e.isVisible,n=e.monitoringRange,r=e.changeRange;return t?ue.createElement("div",{className:"monitoring__duration"},ue.createElement("label",{className:"monitoring__duration-text"},"Range:"),ue.createElement("select",{className:"monitoring__duration-input",value:n,onChange:function(e){return r(e.target.value)}},ue.createElement("option",{value:"7d"},"7 days"),ue.createElement("option",{value:"3d"},"3 days"),ue.createElement("option",{value:"24h"},"24 hours"),ue.createElement("option",{value:"12h"},"12 hours"),ue.createElement("option",{value:"30min"},"30 mins"),ue.createElement("option",{value:"5min"},"5 mins"))):null},qq=function(e){var t=e.rangeVisible,n=e.monitoringRange,r=e.changeMonitoringRange,o=e.pollingAction;return ue.createElement("div",{className:"monitoring__right-header"},ue.createElement(Bq,{monitoringRange:n,changeRange:r,isVisible:t}),ue.createElement(Ma,{stepSize:lq.POLLING.POLLING_STEP_SIZE,pollingFreqOptions:lq.POLLING.POLLING_FREQ_OPTIONS,startValue:lq.POLLING.POLLING_FREQ_OPTIONS[Math.floor((lq.POLLING.POLLING_FREQ_OPTIONS.length-1)/2)],min:lq.POLLING.POLLING_FREQ_OPTIONS[0],max:lq.POLLING.POLLING_FREQ_OPTIONS[lq.POLLING.POLLING_FREQ_OPTIONS.length-1],onPoll:o}),ue.createElement(Ua,{refresh:o}))},Vq=function(e){var t=e.clusters,n=e.selectedCluster,r=e.onChange;return ue.createElement("div",{className:"monitoring__left-header"},ue.createElement("label",{className:"monitoring__left-header-label"},"Monitoring > Cluster:"),ue.createElement("select",{className:"monitoring__left-header-select",value:n,onChange:function(e){return r(e.target.value)}},t.map((function(e){return ue.createElement("option",{key:e,value:e},e)}))))},Hq=function(e){var t=e.clusterName,n=e.clusters,r=e.onClusterChange;return t?n.length>1?ue.createElement(Vq,{selectedCluster:t,clusters:n,onChange:r}):ue.createElement(Kt,{crumbs:[{name:"Monitoring"},{name:t}]}):null},Gq=n(71328);n(32448);const Fq=["#ffb4c3","#a1d1f5","#abdfe0","#ffdebd","#b5e5b3","#b5a3f5"],Kq=["#ff6384","#36a2eb","#4bc0c0","#ffbd7a","#5fc75c","#603ae9"];function zq(e){return zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zq(e)}function Wq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xq(e,t){return Xq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xq(e,t)}function Qq(e,t){if(t&&("object"===zq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jq(e){return Jq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jq(e)}var $q=pi.LoadLines,Zq=Fq,eV=Kq,tV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xq(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jq(r);if(o){var n=Jq(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qq(this,e)});function i(){return Wq(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"timeDisplayFormat",value:function(e){var t={hour:"hh a",minute:"hh:mm a",second:":ss",millisecond:"hh:mm:ss.SSS a"};return"12h"===e&&(t.minute=":mm"),t}},{key:"lineChart",value:function(){var e=this.props,t=e.metricsData,n=e.showLegend,r=void 0===n||n,o=e.range,a=e.yMin,i=e.yMax,s=e.yLabelFormatter;if(!t||!t.datapoints||!t.datapoints.length)return"Graph data is unavailable";var c,l={labels:t.datapoints[0].points.map((function(e){return 1e3*e.epoch})),datasets:t.datapoints.map((function(e,t){return{label:e.name,data:e.points.map((function(e){return e.value})),borderWidth:2,fill:!1,backgroundColor:Zq[t%Zq.length],borderColor:eV[t%eV.length],pointBackgroundColor:Zq[t%Zq.length],pointStyle:"circle",pointRadius:0}}))};"Percentage of Disk Used"==this.props.name&&s&&(c=function(e){var t=e.dataset.label||"";return null!==e.parsed.y?"".concat(t,": ").concat(s(e.parsed.y)):t});var u={plugins:{legend:{display:!0===r,fontSize:12,fontStyle:"ibm-plex-sans, 'Helvetica Neue', Arial, sans-serif",fontColor:"#1D364D",position:"top"},tooltip:{callbacks:{label:c}}},interaction:{intersect:!1,mode:"index"},maintainAspectRatio:!1,scales:{xAxis:{type:"time",time:{tooltipFormat:"ll hh:mm:ss a Z",displayFormats:this.timeDisplayFormat(o)},grid:{display:!0,drawBorder:!1,drawOnChartArea:!1,drawTicks:!0},ticks:{major:{enabled:!0},font:function(e){if(e.tick&&e.tick.major)return{weight:"bold"}}}},yAxis:{stacked:!1,min:a||0,max:i||void 0,ticks:{callback:s}}}};return ue.createElement(Gq.x1,{data:l,width:600,height:180,options:u})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.name;if(t)return ue.createElement("div",{className:"monitoring__chart"},ue.createElement("h3",{className:"monitoring__chart-title"},this.props.name),ue.createElement($q,null),ue.createElement("div",{className:"monitoring__chart-graph"}));var r=t?ue.createElement($q,null):this.lineChart();return ue.createElement("div",{className:"monitoring__chart"},ue.createElement("h3",{className:"monitoring__chart-title"},n),ue.createElement("div",{className:"monitoring__chart-graph"},r))}}])&&Yq(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),nV=function(e){var t=e.httpMetrics,n=e.httpStatusMetrics,r=e.docsProcessedMetrics,o=e.viewEmitsMetrics,a=e.dataVolumeMetrics,i=e.range;return ue.createElement("div",{className:"monitoring__overview",style:{padding:0,marginTop:"5px"}},ue.createElement(tV,{name:"HTTP Requests Received per Second",isFetching:void 0===t,metricsData:t,range:i}),ue.createElement(tV,{name:"HTTP Status Codes Sent per Second",isFetching:void 0===n,metricsData:n,range:i}),ue.createElement(tV,{name:"Documents Processed by Map Functions per Second",isFetching:void 0===r,metricsData:r,range:i,showLegend:!1}),ue.createElement(tV,{name:"Key-Value Pairs Emitted into Indexes per Second",isFetching:void 0===o,metricsData:o,range:i,showLegend:!1}),ue.createElement(tV,{name:"Percentage of Disk Used",isFetching:void 0===a,metricsData:a,range:i,showLegend:!1,yMax:100,yLabelFormatter:function(e){return e+"%"}}))};function rV(e){return rV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rV(e)}function oV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aV(e,t){return aV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},aV(e,t)}function iV(e,t){if(t&&("object"===rV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sV(e){return sV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sV(e)}var cV=pi.LoadLines,lV=function(e){var t=e.node,n=t.osProcesses,r=t.name,o=t.status,a=t.memory,i=t.uptimeDate,s=t.uptimeSince,c=t.statusExplain,l=t.processes,u=t.runQueue,d=ue.createElement(on.u,{id:"monitoring__cluster-table-time-tooltip"},i),p=ue.createElement(on.u,{id:"monitoring__cluster-table-status-tooltip"},c);return ue.createElement("tr",null,ue.createElement("td",null,r),ue.createElement("td",null,ue.createElement(on.Ox,{placement:"bottom",overlay:p},ue.createElement("span",{className:"label monitoring__cluster-table-status--".concat(o),width:70},o))),ue.createElement("td",null,ue.createElement(on.Ox,{placement:"bottom",overlay:d},ue.createElement("span",null,s))),ue.createElement("td",null,n),ue.createElement("td",null,l),ue.createElement("td",null,a),ue.createElement("td",null,u))},uV=function(e){var t=e.node,n=t.error,r=t.name;return ue.createElement("tr",null,ue.createElement("td",null,r),ue.createElement("td",null,ue.createElement(on.__,{bsStyle:"danger"},"Error")),ue.createElement("td",{colSpan:"5"},ue.createElement("pre",null,n)))},dV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aV(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sV(r);if(o){var n=sV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return iV(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={descending:!0,column:"name"},t}return t=i,(n=[{key:"sort",value:function(e,t,n){var r=n.sort((function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}));return t||r.reverse(),r}},{key:"renderRows",value:function(){var e=this.state,t=e.column,n=e.descending;return this.sort(t,n,this.props.nodes).map((function(e){return e.error?ue.createElement(uV,{key:"".concat(e.cluster,"-").concat(e.name),node:e}):ue.createElement(lV,{key:"".concat(e.cluster,"-").concat(e.name),node:e})}))}},{key:"onClickOrder",value:function(e){var t=this;return function(){t.setState({descending:e!==t.state.column||!t.state.descending,column:e})}}},{key:"showSortIcon",value:function(e){return e!==this.state.column?"":this.state.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"render",value:function(){return ue.createElement(on.iA,null,ue.createElement("thead",null,ue.createElement("tr",null,ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("name")},"Node",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("name"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("status")},"Status",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("status"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("uptimeSince")},"Uptime",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("uptimeSince"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("osProcesses")},"OS Proc.",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("osProcesses"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("processes")},"Processes",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("processes"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("memory")},"Memory",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("memory"))})),ue.createElement("th",{className:"monitoring__cluster-table-header",onClick:this.onClickOrder("runQueue")},"Run Queue",ue.createElement("span",{className:"monitoring__cluster-table-icon ".concat(this.showSortIcon("runQueue"))})))),ue.createElement("tbody",null,this.renderRows()))}}])&&oV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),pV=function(e){var t=e.cluster,n=e.nodes;return ue.createElement("div",{className:"monitoring__cluster"},ue.createElement(dV,{cluster:t,nodes:n}),0===n.length?ue.createElement(cV,null):"")},fV=n(13311),hV=n(66197);function mV(e){return mV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mV(e)}function yV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gV(e,t){return gV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gV(e,t)}function _V(e,t){if(t&&("object"===mV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vV(e){return vV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vV(e)}fV.kL.register(hV.Z);var EV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gV(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vV(r);if(o){var n=vV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _V(this,e)});function i(){return yV(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.timestampData,n=e.usageData,r=e.reservedRate,o=e.showLegend,a={labels:t,datasets:[{label:"Throughput",data:n,borderWidth:1,fill:"origin",lineTension:0,pointRadius:0,backgroundColor:"#60D0C1",borderColor:"#00BAA1",type:"line"}]},i={legend:{display:!0===(void 0===o||o),fontSize:12,fontStyle:"ibm-plex-sans, 'Helvetica Neue', Arial, sans-serif",fontColor:"#1D364D"},tooltips:{intersect:!1},maintainAspectRatio:!1,animation:{duration:0},scales:{xAxis:{type:"time",time:{tooltipFormat:"ll HH:mm:ss Z",displayFormats:{hour:"HH",minute:"HH:mm",second:"HH:mm:ss",millisecond:"HH:mm:ss.SSS"}}},yAxis:{id:"tp",stacked:!0,min:0,suggestedMax:1.2*r}}};return r&&(i.plugins={autocolors:!1,annotation:{annotations:{line1:{type:"line",scaleID:"yAxis",value:r,borderWidth:2,borderDash:[5,5],borderColor:"black",backgroundColor:"#f1f1f1"}}}}),ue.createElement(Gq.x1,{data:a,width:600,height:180,options:i})}}])&&bV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function wV(e){return wV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wV(e)}function SV(){return SV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SV.apply(this,arguments)}function OV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NV(e,t){return NV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},NV(e,t)}function DV(e,t){if(t&&("object"===wV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function CV(e){return CV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},CV(e)}var PV=Uq.ccmMonitoringStore,RV=IE.accountStore,kV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NV(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=CV(r);if(o){var n=CV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return DV(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t}return t=i,(n=[{key:"getStoreState",value:function(){var e=void 0,t=void 0,n=SV({},{deny429History:[],operationHistory:[]},PV.getCcmUsage());if(this.state){if(this.state&&this.state.ccmUsageHistory){e=this.state.ccmUsageHistory.slice(),t=this.state.ccm429History.slice();for(var r=0;r<n.operationHistory.length;r++){var o=n.operationHistory[r];o.ts=1e3*o.ts;var a=n.deny429History[r];a.ts=1e3*a.ts;var i=e[e.length-1];o.ts>i.ts&&(e.splice(0,1),e.push(o),t.splice(0,1),t.push(a))}}}else{e=[];for(var s=h()().subtract(900,"s"),c=0;c<900;c++)e.push({lookup:0,query:0,write:0,ts:s.add(1,"s").valueOf()});t=e}return{planDetails:PV.getCcmPlanDetails(),ccm429History:t||this.state.ccm429History,ccmUsageHistory:e||this.state.ccmUsageHistory,stopAutoUpdate:PV.getStopAutoUpdateStatus(),stopAutoUpdateReason:PV.getStopAutoUpdateReason(),isTransactionEnginePlan:PV.isTransactionEnginePlan()}}},{key:"componentDidMount",value:function(){PV.on("change",this.onChange,this),RV.on("change",this.onChange,this),xq(),this.interval=window.setInterval((function(){xq()}),3e3)}},{key:"componentWillUnmount",value:function(){PV.off("change",this.onChange),RV.off("change",this.onChange),window.clearInterval(this.interval)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){t.stopAutoUpdate&&window.clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planDetails,n=e.ccmUsageHistory,r=e.stopAutoUpdateReason,o=e.isTransactionEnginePlan,a=this.props.isCcmPlan?ue.createElement(IV,null):null;return ue.createElement("div",{className:"c-ccmsection"},ue.createElement("div",null,ue.createElement(xV,{planDetails:t,usageDataHistory:n,errorMessage:r,isCcmPlan:this.props.isCcmPlan,isTransactionEnginePlan:o})),a)}}])&&OV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),TV=function(e){var t=e.usageItem,n=e.currentUsage,r=e.reservedCapacity,o=e.usageHistory,a=e.showLegend,i=null;if(o){var s=o.map((function(e){return e.ts})),c=[];"Reads"===t?c=o.map((function(e){return e.lookup})):"Writes"===t?c=o.map((function(e){return e.write})):"Global Queries"===t&&(c=o.map((function(e){return e.query}))),i=ue.createElement(EV,{timestampData:s,usageData:c,reservedRate:r,showLegend:a})}var l=null;return r>0&&(l=ue.createElement("div",{className:"c-requestrate__reserved-rate-box"},"Reserved",ue.createElement("br",null),ue.createElement("span",{className:"c-requestrate__reserved-rate-value"},r," ops/s"))),ue.createElement("div",{className:"c-requestrate__graph-row"},ue.createElement("div",{className:"c-requestrate__graph-legend"},ue.createElement("div",null,ue.createElement("span",{className:"c-requestrate__graph-legend--mainlabel"},t),ue.createElement("br",null),"(per second)")),ue.createElement("div",{style:{padding:4}},i),ue.createElement("div",{className:"c-requestrate__current-reserved-wrapper"},ue.createElement("div",{className:"c-requestrate__current-reserved-box"},ue.createElement("div",{className:"c-requestrate__current-rate-box"},"Throughput",ue.createElement("br",null),ue.createElement("span",{className:"c-requestrate__current-rate-value"},n," ",ue.createElement("span",{className:"c-requestrate__current-rate-unit"},"ops/s"))),l)))},xV=function(e){var t,n=e.planDetails,r=e.usageDataHistory,o=e.errorMessage,a=e.isCcmPlan,i=e.isTransactionEnginePlan,s=r[r.length-1],c=s.write,l=s.query,u=s.lookup,d=n.throughput,p=o?ue.createElement("div",{className:"alert alert-error"},"Something went wrong while retrieving your service usage. Try refreshing the page.",ue.createElement("br",null),o):null;t=a?ue.createElement("div",{className:"c-requestratesection__desc"},"Your ",ue.createElement("a",{href:"#account/plans"},"provisioned throughput capacity")," includes a reserved number of database operations (reads, writes, and queries) per second."):ue.createElement("div",{className:"c-requestratesection__desc"},"The below graphs show a recent history of throughput against the Cloudant instance. This is for informative purposes only to help users who are migrating to Lite or Standard plan instances on the IBM Cloud which are priced based on provisioned throughput capacity and data volume. See the ",ue.createElement("a",{href:"https://cloud.ibm.com/docs/services/Cloudant/guides?topic=cloudant-migrating-to-ibm-cloudant-on-ibm-cloud#migrating-to-ibm-cloudant-on-ibm-cloud",target:"_blank",rel:"noopener noreferrer"},"migration guide")," in our documentation for more information.");var f=i?null:ue.createElement(TV,{usageItem:"Global Queries",currentUsage:l,reservedCapacity:d.query,usageHistory:r,showLegend:!1});return ue.createElement("div",{className:"c-requestratesection"},p,ue.createElement("div",{className:"c-ccmheading"},"Throughput"),ue.createElement("br",null),ue.createElement("div",{className:"c-ccmsection"},t,ue.createElement("br",null),ue.createElement(TV,{usageItem:"Reads",currentUsage:u,reservedCapacity:d.lookup,usageHistory:r}),ue.createElement(TV,{usageItem:"Writes",currentUsage:c,reservedCapacity:d.write,usageHistory:r,showLegend:!1}),f,ue.createElement("div",null)))};xV.propTypes={usageDataHistory:kt().array.isRequired,planDetails:kt().shape({throughput:kt().object}).isRequired,isCcmPlan:kt().bool.isRequired,isTransactionEnginePlan:kt().bool.isRequired};var IV=function(){return ue.createElement("div",{className:"c-bluemix-tier-section"},ue.createElement("div",{className:"c-ccmheading"},"Provisioning"),ue.createElement("br",null),ue.createElement("div",{className:"c-ccmsection"},ue.createElement("div",{className:"c-bluemix-tier-section__desc"},"You can increase or decrease your account’s throughput capacity as the needs of your application change. To make a provisioning adjustment, visit the Cloudant dashboard’s ",ue.createElement("a",{href:"#account/plans"},"provisioned capacity page"),".")))},AV=function(e){var t=e.limit,n=e.current,r=e.text,o=e.className,a="c-requestrate__barcontent--inlimit";n>=t&&(a="c-requestrate__barcontent--abovelimit");var i=200/1.62,s=200/t*Math.min(t,n),c={height:"".concat(s,"px"),width:"".concat(i,"px")},l=null,u=null;if(Number.isNaN(s)&&(s=0),s>25)u=ue.createElement("div",{style:{color:"#fff",marginTop:"1px"},className:"c-requestrate__currentvalue"},n);else{var d={color:"#000",bottom:"".concat(s+2,"px"),zIndex:5};l=ue.createElement("div",{style:d,className:"c-requestrate__currentvalue"},n)}return ue.createElement("div",{style:{width:"".concat(i,"px")},className:"flex-fill c-requestrate__wrapper ".concat(o)},ue.createElement("div",{className:"c-requestrate__limit"},t,"/s"),ue.createElement("div",{style:{height:"".concat(200,"px")},className:"c-requestrate__bar"},l,ue.createElement("div",{className:"c-requestrate__barcontent "+a,style:c},u)),ue.createElement("div",{className:"c-requestrate__text"},r))};function LV(e){return LV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LV(e)}function jV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UV(e,t){return UV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},UV(e,t)}function BV(e,t){if(t&&("object"===LV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qV(e){return qV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qV(e)}AV.propTypes={limit:kt().number.isRequired,current:kt().number.isRequired,text:kt().string.isRequired},AV.defaultProps={className:""},n(55158);var VV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UV(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qV(r);if(o){var n=qV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return BV(this,e)});function i(){return jV(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.timestampData,n=e.denyData,r=e.showLegend,o={labels:t,datasets:[{label:"Rate limited",data:n,borderWidth:1,fill:"origin",lineTension:0,pointRadius:0,backgroundColor:"#ffd2dd",borderColor:"#ffd2dd",type:"line"}]},a={legend:{display:!0===(void 0!==r&&r),fontSize:12,fontStyle:"ibm-plex-sans, 'Helvetica Neue', Arial, sans-serif",fontColor:"#1D364D"},tooltips:{intersect:!1},maintainAspectRatio:!1,animation:{duration:0},scales:{xAxis:{type:"time",time:{tooltipFormat:"ll HH:mm:ss Z",displayFormats:{hour:"HH",minute:"HH:mm",second:"HH:mm:ss",millisecond:"HH:mm:ss.SSS"}}},yAxis:{suggestedMin:0,suggestedMax:10}}};return ue.createElement(Gq.x1,{data:o,width:600,height:180,options:a})}}])&&MV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function HV(e){return HV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HV(e)}function GV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FV(e,t){return FV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},FV(e,t)}function KV(e,t){if(t&&("object"===HV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zV(e){return zV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zV(e)}var WV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FV(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zV(r);if(o){var n=zV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return KV(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"render",value:function(){var e=this.state,t=e.ccm429History,n=e.stopAutoUpdateReason,r=e.isTransactionEnginePlan;return ue.createElement("div",{className:"c-ccmsection"},ue.createElement("div",null,ue.createElement(XV,{deny429History:t,errorMessage:n,isTransactionEnginePlan:r})))}}])&&GV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(kV),YV=function(e){var t=e.usageItem,n=e.currentValue,r=e.history,o=null;if(r){var a=r.map((function(e){return e.ts})),i=[];"Reads"===t?i=r.map((function(e){return e.lookup})):"Writes"===t?i=r.map((function(e){return e.write})):"Global Queries"===t&&(i=r.map((function(e){return e.query}))),o=ue.createElement(VV,{timestampData:a,denyData:i})}return ue.createElement("div",{className:"c-requestrate__graph-row"},ue.createElement("div",{className:"c-requestrate__graph-legend"},ue.createElement("div",null,ue.createElement("span",{className:"c-requestrate__graph-legend--mainlabel"},t),ue.createElement("br",null),"(per second)")),ue.createElement("div",{style:{padding:4}},o),ue.createElement("div",{className:"c-requestrate__current-reserved-wrapper"},ue.createElement("div",{className:"c-requestrate__current-reserved-box"},ue.createElement("div",{className:"c-requestrate__current-rate-box"},"Limited",ue.createElement("br",null),ue.createElement("span",{className:"c-requestrate__current-rate-value"},n," ",ue.createElement("span",{className:"c-requestrate__current-rate-unit"},"requests/s"))))))},XV=function(e){var t=e.deny429History,n=e.errorMessage,r=e.isTransactionEnginePlan,o=t[t.length-1],a=o.write,i=o.query,s=o.lookup,c=n?ue.createElement("div",{className:"alert alert-error"},"Something went wrong while retrieving your service usage. Try refreshing the page.",ue.createElement("br",null),n):null,l=r?null:ue.createElement(YV,{usageItem:"Global Queries",currentValue:i,history:t});return ue.createElement("div",{className:"c-requestratesection"},c,ue.createElement("div",{className:"c-ccmheading"},"Rate Limited Requests (429 status code)"),ue.createElement("br",null),ue.createElement("div",{className:"c-ccmsection"},ue.createElement(YV,{usageItem:"Reads",currentValue:s,history:t}),ue.createElement(YV,{usageItem:"Writes",currentValue:a,history:t}),l,ue.createElement("div",null)))};XV.propTypes={deny429History:kt().array.isRequired,isTransactionEnginePlan:kt().bool.isRequired};var QV=function(e){var t=e.limit,n=e.current,r=e.text,o=e.className,a="c-requestrate__barcontent--inlimit";n>=t&&(a="c-requestrate__barcontent--abovelimit");var i=200/1.62,s=200/t*Math.min(t,n),c={height:"".concat(s,"px"),width:"".concat(i,"px")},l=null,u=null;if(Number.isNaN(s)&&(s=0),s>25)u=ue.createElement("div",{style:{color:"#fff",marginTop:"1px"},className:"c-requestrate__currentvalue"},n);else{var d={color:"#000",bottom:"".concat(s+2,"px"),zIndex:5};l=ue.createElement("div",{style:d,className:"c-requestrate__currentvalue"},n)}return ue.createElement("div",{style:{width:"".concat(i,"px")},className:"flex-fill c-requestrate__wrapper ".concat(o)},ue.createElement("div",{className:"c-requestrate__limit"},t,"/s"),ue.createElement("div",{style:{height:"".concat(200,"px")},className:"c-requestrate__bar"},l,ue.createElement("div",{className:"c-requestrate__barcontent "+a,style:c},u)),ue.createElement("div",{className:"c-requestrate__text"},r))};function JV(e){return JV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JV(e)}function $V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eH(e,t){return eH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eH(e,t)}function tH(e,t){if(t&&("object"===JV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nH(e){return nH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nH(e)}QV.propTypes={limit:kt().number.isRequired,current:kt().number.isRequired,text:kt().string.isRequired},QV.defaultProps={className:""};var rH=pi.LoadLines,oH=Fq,aH=Kq,iH=[{unit:"B",pow2:1,pow10:1}];function sH(e){var t=function(e){return e<=1?iH[0]:(0,i.last)((0,i.filter)(iH,(function(t){return t.pow2<e})))}(e),n=(e/t.pow2).toLocaleString("en-us",{minimumFractionDigits:1,maximumFractionDigits:1});return"".concat(n," ").concat(t.unit)}iH.push({unit:"kB",pow2:Math.pow(2,10),pow10:Math.pow(10,3)}),iH.push({unit:"MB",pow2:Math.pow(2,20),pow10:Math.pow(10,6)}),iH.push({unit:"GB",pow2:Math.pow(2,30),pow10:Math.pow(10,9)}),iH.push({unit:"TB",pow2:Math.pow(2,40),pow10:Math.pow(10,12)}),iH.push({unit:"PB",pow2:Math.pow(2,50),pow10:Math.pow(10,15)}),iH.push({unit:"EB",pow2:Math.pow(2,60),pow10:Math.pow(10,18)});var cH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eH(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nH(r);if(o){var n=nH(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tH(this,e)});function i(){return $V(this,i),a.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props,t=e.usageData,n=e.showLegend,r=void 0===n||n;if(e.isFetching)return ue.createElement(rH,null);if(!t)return"Graph data is unavailable";var o={labels:t.length>0?t[0].values.map((function(e){return e.date})):[],datasets:t.map((function(e,t){return{label:e.name,data:e.values.map((function(e){return e.value})),borderWidth:1,fill:"stack",backgroundColor:oH[t%oH.length],borderColor:aH[t%aH.length],pointBackgroundColor:oH[t%oH.length]}}))},a={plugins:{legend:{display:!0===r,fontSize:12,fontStyle:"ibm-plex-sans, 'Helvetica Neue', Arial, sans-serif",fontColor:"#1D364D",position:"top"},tooltip:{callbacks:{label:function(e){var t=e.dataset.label||"";if(null!==e.parsed.y){var n=sH(e.parsed.y);return"".concat(t,": ").concat(n)}return t},title:function(e){return e.length>0?(t=e[0].label)&&t.length>=10?t.substring(0,4)+"/"+t.substring(5,7)+"/"+t.substring(8,10):"":"";var t}}}},interaction:{intersect:!1,mode:"index"},maintainAspectRatio:!0,scales:{xAxis:{type:"category",title:{display:!0,text:"Day of the month"},ticks:{callback:function(e){return(t=this.getLabelForValue(e))&&t.length>=10?t.substring(5,7)+"/"+t.substring(8,10):"n/a";var t}}},yAxis:{stacked:!0,min:0,ticks:{callback:function(e){return sH(e)}}}}};return ue.createElement(Gq.x1,{data:o,width:600,height:180,options:a})}}],n&&ZV(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function lH(e){return lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lH(e)}function uH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dH(e,t){return dH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dH(e,t)}function pH(e,t){if(t&&("object"===lH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fH(e){return fH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fH(e)}var hH=Uq.ccmMonitoringStore,mH=IE.accountStore,yH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dH(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fH(r);if(o){var n=fH(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pH(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getStoreState(),t}return t=i,(n=[{key:"getStoreState",value:function(){var e=mH.fetchingAccountUsageData();return void 0===e&&(e=!0),{dataVolumeData:mH.getDataVolumeData(),isFetchingAccountUsageData:e,stopAutoUpdate:hH.getStopAutoUpdateStatus()}}},{key:"componentDidMount",value:function(){hH.on("change",this.onChange,this),mH.on("change",this.onChange,this),xq(),this.interval=window.setInterval((function(){xq()}),3e3)}},{key:"componentWillUnmount",value:function(){hH.off("change",this.onChange),mH.off("change",this.onChange),window.clearInterval(this.interval)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){t.stopAutoUpdate&&window.clearInterval(this.interval)}},{key:"shouldComponentUpdate",value:function(e,t){return!_.isEqual(t.dataVolumeData.sort(),this.state.dataVolumeData.sort())}},{key:"render",value:function(){var e=this.state,t=e.isFetchingAccountUsageData,n=e.dataVolumeData.map((function(e){return"geo"===e.name&&(e.name="Geospatial Indexes"),"search"===e.name&&(e.name="Search Indexes"),"views"===e.name&&(e.name="Views"),"dbs"===e.name&&(e.name="Databases"),e}));return ue.createElement("div",{className:"c-datavolumesection"},ue.createElement("div",{className:"c-ccmsection"},ue.createElement("div",{className:"c-datavolumesection__desc"},"Stored data includes your JSON documents, indexes, and attachments. Storage assessments occur once every 24 hours.",ue.createElement("br",null),ue.createElement("br",null),"Lite accounts that contain over 1 GB of data during storage-assessment will be locked. To unlock a locked account, upgrade to a paid plan, or delete data to return storage to under the 1 GB limit, and then wait for daily storage assessment to complete."),ue.createElement("br",null),ue.createElement("div",{className:"c-datavolumesection__chart"},ue.createElement(cH,{isFetching:t,usageData:n}))))}}])&&uH(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function bH(e){return bH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bH(e)}function gH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vH(e,t,n){return t&&_H(e.prototype,t),n&&_H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function EH(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wH(e,t)}function wH(e,t){return wH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wH(e,t)}function SH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=NH(e);if(t){var o=NH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return OH(this,n)}}function OH(e,t){if(t&&("object"===bH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function NH(e){return NH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},NH(e)}var DH=pi.TabElementWrapper,CH=pi.TabElement,PH=Uq.monitoringStore,RH=Uq.ccmMonitoringStore,kH=function(e){EH(n,e);var t=SH(n);function n(e){return gH(this,n),t.call(this,e)}return vH(n,[{key:"checked",value:function(e){return this.props.selectedTab===e}},{key:"render",value:function(){var e=this.props,t=e.onTabClick,n=e.showAdminTabs,r=e.showStorageTab,o=e.showRateLimitedOperationsTabs,a=null,i=null,s=null;n&&(a=ue.createElement(CH,{selected:this.checked("metrics"),text:"Metrics",onChange:function(e){return t(e.target.value.toLowerCase())}}),i=ue.createElement(CH,{selected:this.checked("cluster"),text:"Cluster",onChange:function(e){return t(e.target.value.toLowerCase())}})),r&&(s=ue.createElement(CH,{selected:this.checked("storage"),text:"Storage",onChange:function(){return t("storage")}}));var c=o?ue.createElement(CH,{selected:this.checked("current_operations"),text:"Current Operations",onChange:function(){return t("current_operations")}}):null,l=o?ue.createElement(CH,{selected:this.checked("denied_requests"),text:"Denied Requests",onChange:function(){return t("denied_requests")}}):null;return ue.createElement("div",{className:"monitoring__tabs-wrapper"},ue.createElement(DH,null,c,l,s,a,i))}}]),n}(ue.Component),TH=function(e){EH(n,e);var t=SH(n);function n(e){var r;return gH(this,n),(r=t.call(this,e)).state=r.getStoreState(),r.adminTabs=["cluster","metrics"],r}return vH(n,[{key:"getStoreState",value:function(){return{selectedTab:PH.getSelectedTab(),selectedCluster:PH.getSelectedCluster(),clusters:PH.getClusterNames(),nodes:PH.getSeletedClusterNodesStatus(),isLoadingMonitoringData:PH.isLoading(),httpMetrics:PH.getHttpMetrics(),httpStatusMetrics:PH.getHttpStatusMetrics(),docsProcessedMetrics:PH.getDocsProcessedMetrics(),viewEmitsMetrics:PH.getViewEmitsMetrics(),dataVolumeMetrics:PH.getDataVolumeMetrics(),duration:PH.getMonitoringRange(),graphRefresh:PH.getGraphRefresh(),pollingFreq:PH.getPollingFreq(),monitoringRange:PH.getMonitoringRange(),refreshControlsVisible:PH.refreshControlsVisible(),rangeVisible:PH.rangeVisible(),clusterNodes:PH.getSelectedClusterNodes(),chartState:PH.getToggleChartState(),isUserInformationLoaded:PH.isUserInformationLoaded(),isUserAdmin:PH.isUserAdmin(),isCcmPlan:RH.isAccountOnCcmPlan()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){PH.on("change",this.onChange,this),this.updatePollingFreq(this.state.pollingFreq),this.state.isUserAdmin&&-1!==this.adminTabs.indexOf(this.state.selectedTab)&&Dq(this.state.monitoringRange,this.state.chartState)}},{key:"componentWillUnmount",value:function(){PH.off("change",this.onChange),Eq()}},{key:"componentDidUpdate",value:function(e,t){this.state.isUserAdmin&&-1!==this.adminTabs.indexOf(this.state.selectedTab)&&-1===this.adminTabs.indexOf(t.selectedTab)&&Dq(this.state.monitoringRange,this.state.chartState),this.state.isUserAdmin&&-1===this.adminTabs.indexOf(this.state.selectedTab)&&-1!==this.adminTabs.indexOf(t.selectedTab)&&Eq()}},{key:"showselectedTab",value:function(){return"cluster"===this.state.selectedTab?ue.createElement(pV,{cluster:this.state.selectedCluster,nodes:this.state.nodes}):"current_operations"===this.state.selectedTab?ue.createElement(kV,{isCcmPlan:this.state.isCcmPlan}):"denied_requests"===this.state.selectedTab?ue.createElement(WV,null):"storage"===this.state.selectedTab?ue.createElement(yH,null):ue.createElement(nV,{loading:this.state.isLoadingMonitoringData,httpMetrics:this.state.httpMetrics,httpStatusMetrics:this.state.httpStatusMetrics,docsProcessedMetrics:this.state.docsProcessedMetrics,viewEmitsMetrics:this.state.viewEmitsMetrics,dataVolumeMetrics:this.state.dataVolumeMetrics,range:this.state.monitoringRange,toggleChartState:kq})}},{key:"refreshMonitoring",value:function(){this.state.isUserAdmin&&vq(this.state.monitoringRange,this.state.selectedCluster,this.state.clusterNodes,this.state.chartState)}},{key:"changeCluster",value:function(e){!function(e,t,n,r){se.dispatch({type:qB,data:e}),vq(t,e,n,r)}(e,this.state.monitoringRange,PH.getClusterNodes(e),this.state.chartState)}},{key:"changeMonitoringRange",value:function(e){!function(e,t,n){se.dispatch({type:GB,data:e}),Cq(),Pq(e,t,n)}(e,this.state.selectedCluster,this.state.chartState)}},{key:"updatePollingFreq",value:function(e){!function(e,t){var n=parseInt(e,10);0===n||n>600?bq():function(e,t){bq(),uq=window.setInterval(t,e)}(1e3*n,t),se.dispatch({type:HB,data:n})}(e,this.refreshMonitoring.bind(this))}},{key:"monitoringHeaderTitle",value:function(){return ue.createElement("div",{className:"monitoring__left-header"},ue.createElement("label",{className:"monitoring__left-header-label"},"Monitoring"))}},{key:"leftHeader",value:function(){var e=this.state.selectedTab,t=this.monitoringHeaderTitle();if(-1!==["metrics","cluster"].indexOf(e)){var n=this.state,r=n.selectedCluster,o=n.clusters;t=ue.createElement("div",{className:"flex-body"},ue.createElement(Hq,{onClusterChange:this.changeCluster.bind(this),clusters:o,clusterName:r}))}return ue.createElement("div",{className:"flex-body"},t)}},{key:"render",value:function(){var e=this.state,t=e.selectedCluster,n=e.isLoadingMonitoringData,r=e.refreshControlsVisible,o=e.rangeVisible,a=e.pollingFreq,i=e.graphRefresh,s=e.monitoringRange,c=e.isUserInformationLoaded,l=e.isUserAdmin,u=e.isCcmPlan,d=e.selectedTab;if(!c)return ue.createElement("div",{id:"dashboard",className:"template-with-sidebar flex-layout flex-col"},ue.createElement("header",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-layout flex-row",style:{boxShadow:"none"}},ue.createElement("div",{className:"flex-body"},this.monitoringHeaderTitle()))),ue.createElement("div",{style:{paddingTop:60}},ue.createElement(pi.LoadLines,null)));var p=null;r&&(p=ue.createElement("div",{id:"right-header",className:"flex-fill"},ue.createElement(qq,{changeMonitoringRange:this.changeMonitoringRange.bind(this),clusterName:t,rangeVisible:o,pollingFreq:a,graphRefresh:i,monitoringRange:s,pollingAction:this.refreshMonitoring.bind(this),updatePollingFreq:this.updatePollingFreq.bind(this)})));var f=n?ue.createElement(pi.LoadLines,null):this.showselectedTab();return ue.createElement("div",{id:"dashboard",className:"template-with-sidebar flex-layout flex-col"},ue.createElement("header",{className:"flex-layout flex-row"},ue.createElement("div",{className:"flex-layout flex-row",style:{boxShadow:"none"}},this.leftHeader(),p,ue.createElement("div",{id:"api-navbar",className:"flex-fill"}),ue.createElement("div",{id:"notification-center-btn",className:"flex-fill"}))),ue.createElement("div",{className:"template-content flex-body flex-layout flex-col"},ue.createElement(kH,{selectedTab:d,onTabClick:wq,showAdminTabs:l,showStorageTab:u,showRateLimitedOperationsTabs:u}),ue.createElement("div",{id:"dashboard-content",className:"flex-body"},f)))}}]),n}(ue.Component);const xH=TH,IH={RouteObjects:[se.RouteObject.extend({routes:{monitoring:"redirect","monitoring/overview":"overviewPage","monitoring/cluster":"clusterPage","monitoring/usage":"showUsage","monitoring/denied":"showDenied","monitoring/storage":"showStorage"},selectedHeader:"Monitoring",roles:["_admin"],initialize:function(){this.user=se.cloudantUser},redirect:function(){nN.userPromise.then((function(){var e=PE(nN.user.get("plan"))?"#monitoring/usage":"#monitoring/overview";se.navigate(e,{redirect:!0})}))},overviewPage:function(){return Oq(),se.dispatch({type:KB}),wq("metrics"),ue.createElement(xH,null)},clusterPage:function(){return Oq(),se.dispatch({type:FB}),wq("cluster"),ue.createElement(xH,null)},showUsage:function(){return Nq(),wq("current_operations"),ue.createElement(xH,null)},showDenied:function(){return Nq(),wq("denied_requests"),ue.createElement(xH,null)},showStorage:function(){return gS.initUsageGraph(),Nq(),wq("storage"),ue.createElement(xH,null)}})]};var AH=nN.userPromise;IH.initialize=function(){AH.then((function(){var e=nN.user,t=!0;e.isGlobalAdmin()||!_.isNull(e.adminCluster())?Sq(!0):(Sq(!1),PE(e.get("plan"))||(t=!1)),t&&se.addHeaderLink({title:"Monitoring",href:"#monitoring",icon:"fonticon-dashboard",top:!0})})).catch((function(){}))};const LH=[$e,{initialize:function(){}},Es,ev,aN,JN,mD,mC,lP,GT,DI,rE,aE,PL,dM,nN,mM,pU,gB,kB,BB,IH];function jH(e){return jH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jH(e)}function MH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BH(e,t){return BH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},BH(e,t)}function qH(e,t){if(t&&("object"===jH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VH(e)}function VH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HH(e){return HH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},HH(e)}function GH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FH=pi.Copy,KH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BH(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=HH(r);if(o){var n=HH(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qH(this,e)});function i(){var e;MH(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return GH(VH(e=a.call.apply(a,[this].concat(n))),"clearNotification",(function(){var t=e.props.item.toastId;e.props.clearSingleNotification(t)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type,r=this.props.style,o=r.opacity,a=r.height;return 0===o&&0===a?null:ue.createElement("li",{style:{opactiy:o,height:a+"px",borderBottomColor:"rgba(34, 34, 34, ".concat(o,")")},"aria-hidden":n},ue.createElement("div",{className:"flex-layout flex-row"},ue.createElement("span",{className:t}),ue.createElement("div",{className:"flex-body"},ue.createElement("p",null,this.props.item.cleanMsg),ue.createElement("div",{className:"notification-actions"},ue.createElement("span",{className:"time-elapsed"},e),ue.createElement("span",{className:"divider"},"|"),ue.createElement(FH,{uniqueKey:(0,wu.Z)(),text:this.props.item.cleanMsg,displayType:"text"}))),ue.createElement("button",{type:"button",onClick:this.clearNotification},"×")))}}])&&UH(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function zH(e){return zH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zH(e)}function WH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XH(e,t){return XH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},XH(e,t)}function QH(e,t){if(t&&("object"===zH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JH(e)}function JH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $H(e){return $H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$H(e)}function ZH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}GH(KH,"propTypes",{item:kt().object.isRequired,filter:kt().string.isRequired,clearSingleNotification:kt().func.isRequired});var eG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XH(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$H(r);if(o){var n=$H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return QH(this,e)});function i(){var e;WH(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ZH(JH(e=a.call.apply(a,[this].concat(n))),"getNotifications",(function(t){var n;return n=t.length||e.props.notifications.length?t.map((function(t){var n=t.key,r=t.data,o=t.style;return ue.createElement(KH,{item:r,filter:e.props.filter,clearSingleNotification:e.props.clearSingleNotification,key:n,style:o})})):ue.createElement("li",{className:"no-notifications"},"No notifications."),ue.createElement("ul",{className:"notification-list"},n)})),ZH(JH(e),"getStyles",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.notifications.map((function(n){var r=t.find((function(e){return e.key===n.toastId.toString()})),o=!r&&{opacity:0,height:0};return o||n.type!==e.props.filter&&"all"!==e.props.filter?n.type!==e.props.filter&&(o={opacity:(0,na.ST)(0,na.um.stiff),height:(0,na.ST)(0,na.um.stiff)}):o={opacity:(0,na.ST)(1,na.um.stiff),height:(0,na.ST)(61,na.um.stiff)},{key:n.toastId.toString(),style:o,data:n}}));return n})),e}return t=i,(n=[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return ue.createElement("div",{id:"notification-center"},ue.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},ue.createElement("header",{className:"flex-layout flex-row"},ue.createElement("span",{className:"fonticon fonticon-bell"}),ue.createElement("h1",{className:"flex-body"},"Notifications"),ue.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"×")),ue.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},ue.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),ue.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},ue.createElement("span",{className:"fonticon fonticon-ok-circled"})),ue.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},ue.createElement("span",{className:"fonticon fonticon-attention-circled"})),ue.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},ue.createElement("span",{className:"fonticon fonticon-info-circled"}))),ue.createElement("div",{className:"flex-body"},ue.createElement(na.bg,{styles:this.getStyles},this.getNotifications)),ue.createElement("footer",null,ue.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:this.props.clearAllNotifications}))),ue.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}])&&YH(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);function tG(e){return tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tG(e)}function nG(){return nG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nG.apply(this,arguments)}function rG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aG(e,t){return aG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},aG(e,t)}function iG(e,t){if(t&&("object"===tG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sG(e)}function sG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cG(e){return cG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cG(e)}function lG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ZH(eG,"propTypes",{isVisible:kt().bool.isRequired,filter:kt().string.isRequired,notifications:kt().array.isRequired,hideNotificationCenter:kt().func.isRequired,selectNotificationFilter:kt().func.isRequired,clearAllNotifications:kt().func.isRequired,clearSingleNotification:kt().func.isRequired});var uG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aG(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cG(r);if(o){var n=cG(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return iG(this,e)});function i(){var e;rG(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lG(sG(e=a.call.apply(a,[this].concat(n))),"getStyles",(function(){var t={key:"1",style:{x:320}};return e.props.isVisible?t.style={x:(0,na.ST)(0)}:t.style={x:(0,na.ST)(320)},[t]})),lG(sG(e),"getNotificationCenterPanel",(function(t){var n=t.map((function(t){var n=t.style;return ue.createElement(eG,nG({key:"1",style:n},e.props))}));return ue.createElement("aside",{"aria-label":"Notifications"},n)})),e}return t=i,(n=[{key:"render",value:function(){return ue.createElement(na.bg,{styles:this.getStyles},this.getNotificationCenterPanel)}}])&&oG(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component),dG=(0,Tt.$j)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:Le})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:Ue,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:Me})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:je,options:{toastId:e}})}}(t))}}}))(uG);const pG=dG;function fG(e){return fG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fG(e)}function hG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mG(e,t){return mG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mG(e,t)}function yG(e,t){if(t&&("object"===fG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bG(e){return bG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bG(e)}function gG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mG(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bG(r);if(o){var n=bG(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yG(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"getMsg",value:function(){return{__html:this.props.message}}},{key:"getContent",value:function(){return ue.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()})}},{key:"render",value:function(){return this.props.visible&&this.props.message?ue.createElement("div",{id:"perma-warning"},this.getContent()):null}}])&&hG(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);gG(_G,"defaultProps",{visible:!1}),gG(_G,"propTypes",{visible:kt().bool.isRequired,message:kt().string});const vG=(0,Tt.$j)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(_G);var EG=function(e){var t=e.version;return t?ue.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on  ",ue.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),ue.createElement("div",null,"v. ",t)):null};EG.propTypes={version:kt().string};const wG=EG;var SG=function(e){var t=e.toggleMenu,n=e.isMinimized,r=rn()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return ue.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},ue.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};SG.propTypes={toggleMenu:kt().func.isRequired,isMinimized:kt().bool.isRequired};const OG=SG;var NG=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,a=rn()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),i=r?null:ue.createElement("span",{className:"faux-navbar__text"},t.title),s=null;return t.icon&&(s=ue.createElement("i",{"aria-hidden":"true",className:rn()(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),ue.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:a,href:t.href,target:t.target?"_blank":null,rel:"noreferrer noopener","data-bypass":t.target?"true":null},ue.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},s,i))};NG.propTypes={link:kt().object.isRequired,active:kt().string,isMinimized:kt().bool.isRequired};const DG=NG;var CG=function(e){var t=e.isMinimized,n=rn()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return ue.createElement("div",{className:"faux-navbar__brand"},ue.createElement("div",{className:n}))};CG.propTypes={isMinimized:kt().bool.isRequired};const PG=CG;var RG=function(e){var t=e.username,n=e.isMinimized,r=rn()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return ue.createElement("a",{className:"faux-logout__link",href:"#/logout"},ue.createElement("div",{className:r},ue.createElement("span",{className:"faux-navbar__logout__text"},"Log Out")," ",n?null:ue.createElement("span",{className:"faux-navbar__logout__username"},s().escape(t))))};RG.propTypes={username:kt().string,isMinimized:kt().bool.isRequired};const kG=RG;var TG=function(e){var t=e.isMinimized,n=rn()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return ue.createElement("a",{className:"faux-login__link",href:"#/login"},ue.createElement("div",{className:n},ue.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};TG.propTypes={isMinimized:kt().bool.isRequired};const xG=TG;function IG(e){return IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IG(e)}function AG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LG(e,t){return LG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},LG(e,t)}function jG(e,t){if(t&&("object"===IG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function MG(e){return MG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},MG(e)}var UG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LG(e,t)}(i,e);var t,n,r,o,a=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=MG(r);if(o){var n=MG(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jG(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return t=i,(n=[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return ue.createElement(DG,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,a=e.activeLink,i=e.username,s=e.isNavBarVisible,c=e.toggleNavbarMenu;if(!s)return null;var l=this.createLinks(this.props.navLinks),u=this.createLinks(this.props.bottomNavLinks),d=this.createLinks(this.props.footerNavLinks),p=rn()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),f=o?ue.createElement(xG,{active:a,isMinimized:t}):ue.createElement(kG,{username:i,isMinimized:t});return ue.createElement("div",{className:p},ue.createElement("nav",null,ue.createElement("div",{className:"faux-navbar__linkcontainer"},ue.createElement(OG,{isMinimized:t,toggleMenu:c}),ue.createElement("div",{className:"faux-navbar__links"},l,u),ue.createElement("div",{className:"faux-navbar__footer"},ue.createElement(PG,{isMinimized:t}),ue.createElement("div",null,d),ue.createElement(wG,{version:n}),r?f:null))))}}])&&AG(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue.Component);UG.propTypes={activeLink:kt().string,isMinimized:kt().bool.isRequired,version:kt().string,username:kt().string,navLinks:kt().array,bottomNavLinks:kt().array,footerNavLinks:kt().array,isNavBarVisible:kt().bool,isLoginSectionVisible:kt().bool.isRequired,isLoginVisibleInsteadOfLogout:kt().bool.isRequired,toggleNavbarMenu:kt().func.isRequired};const BG=UG;const qG=(0,Tt.$j)((function(e){var t=e.navigation,n=se.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:pe})}))}}}))(BG);function VG(e){return VG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VG(e)}function HG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FG(e,t,n){return t&&GG(e.prototype,t),n&&GG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KG(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zG(e,t)}function zG(e,t){return zG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zG(e,t)}function WG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=QG(e);if(t){var o=QG(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return YG(this,n)}}function YG(e,t){if(t&&("object"===VG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XG(e)}function XG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QG(e){return QG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},QG(e)}var JG=function(e){KG(n,e);var t=WG(n);function n(e){var r;return HG(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(XG(r=t.call(this,e)),"onKeydown",(function(e){27===(e.keyCode||e.which)&&Ve.Am.dismiss()})),r.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&r.props.setNavbarActiveLink(r.state.routerOptions.selectedHeader),r}return FG(n,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()})),document.addEventListener("keydown",this.onKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown)}},{key:"render",value:function(){return this.state.routerOptions&&this.state.routerOptions.component||null}}]),n}(ue.Component),$G=function(e){KG(n,e);var t=WG(n);function n(e){return HG(this,n),t.call(this,e)}return FG(n,[{key:"render",value:function(){var e=rn()({closeMenu:this.props.isPrimaryNavMinimized}),t=rn()({"app-container__with-perm-notification":this.props.isPermanentNotificationShowing});return ue.createElement("div",null,ue.createElement(Ve.Ix,{className:"toast-container",position:"top-right",autoClose:5e3,closeButton:!1,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),ue.createElement(vG,null),ue.createElement("div",{id:"notifications"},ue.createElement(pG,null)),ue.createElement("div",{id:"main",className:e},ue.createElement("div",{id:"app-container",className:t},ue.createElement("div",{className:"wrapper"},ue.createElement("div",{role:"main",className:"pusher"},ue.createElement(JG,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),ue.createElement("div",{id:"primary-navbar"},ue.createElement(qG,null))))))}}]),n}(ue.Component);const ZG=(0,Tt.$j)((function(e){var t=e.navigation,n=e.notifications;return{isPrimaryNavMinimized:t.isMinimized,isPermanentNotificationShowing:n.permanentNotificationVisible}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:ge,name:n})}))}}}))($G);var eF=n(62505),tF=n(43916);function nF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}se.addMiddleware(tF.Z);var rF,oF=(0,eF.MT)((0,eF.UY)(se.reducers),eF.md.apply(void 0,function(e){if(Array.isArray(e))return nF(e)}(rF=se.middlewares)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(rF)||function(e,t){if(e){if("string"==typeof e)return nF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nF(e,t):void 0}}(rF)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));se.reduxDispatch=function(e){oF.dispatch(e)},se.reduxState=function(){return oF.getState()},le.addons=LH,se.router=le.router=new se.Router(le.addons),T().history.start({pushState:!1,root:le.root}),"ActiveXObject"in window&&o().ajaxSetup({cache:!1});var aF=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null};document.addEventListener("click",(function(e){var t=aF(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),le.router.navigate(n.attr,!0))}}})),Y.render(ue.createElement(Tt.zt,{store:oF},ue.createElement(ZG,{router:le.router})),document.getElementById("app"))},4927:(e,t)=>{var n,r,o;function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}r=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1).Beautifier,o=n(5).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new o}},function(e,t,n){"use strict";var r=n(2).Output,o=n(3).Token,a=n(4),i=n(5).Options,s=n(7).Tokenizer,c=n(7).line_starters,l=n(7).positionable_operators,u=n(7).TOKEN;function d(e,t){return-1!==t.indexOf(e)}function p(e,t){return e&&e.type===u.RESERVED&&e.text===t}function f(e,t){return e&&e.type===u.RESERVED&&d(e.text,t)}var h=["case","return","do","if","throw","else","await","break","continue","async"],m=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),y=[m.before_newline,m.preserve_newline],b="BlockStatement",g="Statement",_="ObjectLiteral",v="ArrayLiteral",E="ForInitializer",w="Conditional",S="Expression";function O(e,t){t.multiline_frame||t.mode===E||t.mode===w||e.remove_indent(t.start_line_index)}function N(e){return e===v}function D(e){return d(e,[S,E,w])}function C(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new i(t)}C.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new o(u.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},C.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new r(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(b);var n=new s(e,this._options);return this._tokens=n.tokenize(),e},C.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&a.lineBreak.test(e||"")&&(t=e.match(a.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},C.prototype.handle_token=function(e,t){e.type===u.START_EXPR?this.handle_start_expr(e):e.type===u.END_EXPR?this.handle_end_expr(e):e.type===u.START_BLOCK?this.handle_start_block(e):e.type===u.END_BLOCK?this.handle_end_block(e):e.type===u.WORD||e.type===u.RESERVED?this.handle_word(e):e.type===u.SEMICOLON?this.handle_semicolon(e):e.type===u.STRING?this.handle_string(e):e.type===u.EQUALS?this.handle_equals(e):e.type===u.OPERATOR?this.handle_operator(e):e.type===u.COMMA?this.handle_comma(e):e.type===u.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===u.COMMENT?this.handle_comment(e,t):e.type===u.DOT?this.handle_dot(e):e.type===u.EOF?this.handle_eof(e):(e.type,u.UNKNOWN,this.handle_unknown(e,t))},C.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,r=this._options.keep_array_indentation&&N(this._flags.mode);if(e.comments_before)for(var o=e.comments_before.next();o;)this.handle_whitespace_and_comments(o,t),this.handle_token(o,t),o=e.comments_before.next();if(r)for(var a=0;a<n;a+=1)this.print_newline(a>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var i=1;i<n;i+=1)this.print_newline(!0,t)}};var P=["async","break","continue","return","throw","yield"];C.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(d(this._flags.last_token.text,l)||d(e.text,l)){var r=d(this._flags.last_token.text,l)&&d(this._options.operator_position,y)||d(e.text,l);n=n&&r}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(f(this._flags.last_token,P))return;this._output.set_wrap_point()}}},C.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==u.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&p(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},C.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||N(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},C.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===u.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},C.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===g&&O(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.start_of_object_property=function(){return this._flags.parent.mode===_&&this._flags.mode===g&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"]))},C.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||f(this._flags.last_token,["var","let","const"])&&e.type===u.WORD)||p(this._flags.last_token,"do"))||!(this._flags.parent.mode===_&&this._flags.mode===g)&&f(this._flags.last_token,P)&&!e.newlines)||p(this._flags.last_token,"else")&&!(p(e,"if")&&!e.comments_before))||this._flags.last_token.type===u.END_EXPR&&(this._previous_flags.mode===E||this._previous_flags.mode===w))||this._flags.last_token.type===u.WORD&&this._flags.mode===b&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==u.WORD&&e.type!==u.RESERVED)||this._flags.mode===_&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"])))&&(this.set_mode(g),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,f(e,["do","for","if","while"])),!0)},C.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=S;if("["===e.text){if(this._flags.last_token.type===u.WORD||")"===this._flags.last_token.text)return f(this._flags.last_token,c)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=v,N(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),d(this._flags.last_token.type,[u.START_EXPR,u.END_EXPR,u.WORD,u.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===u.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=E):d(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=w):d(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(d(this._flags.last_token.text,c)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===u.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var r=this._tokens.peek(-4);f(n,["async","function"])||"*"===n.text&&f(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===_&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==r.text&&","!==r.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===u.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===_&&d(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===u.START_BLOCK?this.print_newline():this._flags.last_token.type!==u.END_EXPR&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==u.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},C.prototype.handle_end_expr=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&N(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==u.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),O(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===w&&(this._previous_flags.mode=S,this._flags.do_block=!1,this._flags.do_while=!1)},C.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR?(this.set_mode(b),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(b):n&&(d(n.text,[":",","])&&d(t.type,[u.STRING,u.WORD,u.RESERVED])||d(t.text,["get","set","..."])&&d(n.type,[u.WORD,u.RESERVED]))?d(this._last_last_text,["class","interface"])?this.set_mode(b):this.set_mode(_):this._flags.last_token.type===u.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(b):d(this._flags.last_token.type,[u.EQUALS,u.START_EXPR,u.COMMA,u.OPERATOR])||f(this._flags.last_token,["return","throw","import","default"])?this.set_mode(_):this.set_mode(b);var r=!t.comments_before&&"}"===t.text,o=r&&"function"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR;if(this._options.brace_preserve_inline){var a=0,i=null;this._flags.inline_frame=!0;do{if(a+=1,(i=this._tokens.peek(a-1)).newlines){this._flags.inline_frame=!1;break}}while(i.type!==u.EOF&&(i.type!==u.END_BLOCK||i.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==u.OPERATOR&&(o||this._flags.last_token.type===u.EQUALS||f(this._flags.last_token,h)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!N(this._previous_flags.mode)||this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.COMMA||((this._flags.last_token.type===u.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==u.OPERATOR&&this._flags.last_token.type!==u.START_EXPR&&(this._flags.last_token.type!==u.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),r||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},C.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===g;)this.restore_mode();var t=this._flags.last_token.type===u.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(N(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},C.prototype.handle_word=function(e){if(e.type===u.RESERVED&&(d(e.text,["set","get"])&&this._flags.mode!==_||"import"===e.text&&"("===this._tokens.peek().text||d(e.text,["as","from"])&&!this._flags.import_block||this._flags.mode===_&&":"===this._tokens.peek().text)&&(e.type=u.WORD),this.start_of_statement(e)?f(this._flags.last_token,["var","let","const"])&&e.type===u.WORD&&(this._flags.declaration_statement=!0):!e.newlines||D(this._flags.mode)||this._flags.last_token.type===u.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===u.EQUALS||!this._options.preserve_newlines&&f(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(p(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&p(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===g;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&f(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==u.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.EQUALS&&this._flags.last_token.type!==u.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),p(e,"function"))return(d(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!d(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==u.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD?f(this._flags.last_token,["get","set","new","export"])||f(this._flags.last_token,P)||p(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===u.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!D(this._flags.mode)&&!N(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";this._flags.last_token.type===u.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":f(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&this._flags.mode===b?t="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&D(this._flags.mode)?t="SPACE":this._flags.last_token.type===u.STRING?t="NEWLINE":this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===_&&d(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===u.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===u.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),f(e,c)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),f(e,["else","catch","finally"])?(this._flags.last_token.type!==u.END_BLOCK||this._previous_flags.mode!==b||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?f(this._flags.last_token,h)||"declare"===this._flags.last_token.text&&f(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==u.END_EXPR?this._flags.last_token.type===u.START_EXPR&&f(e,["var","let","const"])||":"===this._flags.last_token.text||(p(e,"if")&&p(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):f(e,c)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&N(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0),!e.previous||e.previous.type!==u.WORD&&e.previous.type!==u.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===u.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&p(e,"from")&&(this._flags.import_block=!1))},C.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&p(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},C.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR||this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},C.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},C.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(D(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===_||this._flags.mode===g&&this._flags.parent.mode===_?(this._flags.mode===g&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},C.prototype.handle_operator=function(e){var t="*"===e.text&&(f(this._flags.last_token,["function","yield"])||d(this._flags.last_token.type,[u.START_BLOCK,u.COMMA,u.END_BLOCK,u.SEMICOLON])),n=d(e.text,["-","+"])&&(d(this._flags.last_token.type,[u.START_BLOCK,u.START_EXPR,u.EQUALS,u.OPERATOR])||d(this._flags.last_token.text,c)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var r=!t;this.handle_whitespace_and_comments(e,r)}if(f(this._flags.last_token,h))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==u.DOT)if("::"!==e.text){if(this._flags.last_token.type===u.OPERATOR&&d(this._options.operator_position,y)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==u.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var o=!0,a=!0,i=!1;if(":"===e.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,i=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&d(e.text,l)){var s=":"===e.text,p=s&&i,_=s&&!i;switch(this._options.operator_position){case m.before_newline:return this._output.space_before_token=!_,this.print_token(e),s&&!p||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case m.after_newline:return this._output.space_before_token=!0,!s||p?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case m.preserve_newline:return _||this.allow_wrap_or_preserved_newline(e),o=!(this._output.just_added_newline()||_),this._output.space_before_token=o,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),o=!1;var v=this._tokens.peek();a=v&&d(v.type,[u.WORD,u.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),o=this._flags.last_token.type===u.START_BLOCK,a=!1):(d(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR||this.allow_wrap_or_preserved_newline(e),o=!1,a=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&D(this._flags.mode)&&(o=!0),this._flags.last_token.type===u.RESERVED?o=!0:this._flags.last_token.type===u.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===u.OPERATOR&&(o=d(e.text,["--","-","++","+"])&&d(this._flags.last_token.text,["--","-","++","+"]),d(e.text,["+","-"])&&d(this._flags.last_token.text,["--","++"])&&(a=!0)),(this._flags.mode!==b||this._flags.inline_frame)&&this._flags.mode!==g||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(e),this._output.space_before_token=a}else this.print_token(e);else this.print_token(e)},C.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):a.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},C.prototype.print_block_commment=function(e,t){var n,r=function(e){for(var t=[],n=(e=e.replace(a.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),o=!1,i=!1,s=e.whitespace_before,c=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(o=function(e,t){for(var n=0;n<e.length;n++)if("*"!==e[n].trim().charAt(0))return!1;return!0}(r=r.slice(1)),i=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}(r,s),o&&(this._flags.alignment=1),n=0;n<r.length;n++)o?(this.print_token_line_indentation(e),this._output.add_token(r[n].replace(/^\s+/g,""))):i&&r[n]?(this.print_token_line_indentation(e),this._output.add_token(r[n].substring(c))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,t);this._flags.alignment=0}},C.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},C.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),f(this._flags.last_token,h)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},C.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},C.prototype.handle_eof=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=C},function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function o(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function a(e,t){this.__indent_cache=new o(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},o.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),(n+=e*this.__indent_size)+t},o.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+this.__cache[t]},o.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},o.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},a.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},a.prototype.get_line_number=function(){return this.__lines.length},a.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},a.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},a.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},a.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},a.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},a.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},a.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},a.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},a.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},a.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},a.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},a.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},a.prototype.just_added_newline=function(){return this.current_line.is_empty()},a.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},a.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var o=this.__lines[n];if(o.is_empty())break;if(0!==o.item(0).indexOf(e)&&o.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=a},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(e,t,n){"use strict";var r="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",o="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+r+"])";t.identifier=new RegExp(o+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),t.identifierStart=new RegExp(o),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a"+r+"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var r=n(6).Options,o=["before-newline","after-newline","preserve-newline"];function a(e){r.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var a=0;a<n.length;a++)"preserve-inline"===n[a]?this.brace_preserve_inline=!0:this.brace_style=n[a];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",o),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}a.prototype=new r,e.exports.Options=a},function(e,t,n){"use strict";function r(e,t){this.raw_options=o(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function o(e,t){var n,r={};for(n in e=a(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function a(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"===i(n)?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=a,e.exports.mergeOpts=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(9).Tokenizer,a=n(9).TOKEN,i=n(13).Directives,s=n(4),c=n(12).Pattern,l=n(14).TemplatablePattern;function u(e,t){return-1!==t.indexOf(e)}var d={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:a.START,RAW:a.RAW,EOF:a.EOF},p=new i(/\/\*/,/\*\//),f=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,h=/[0-9]/,m=/[^\d\.]/,y=">>> === !== << && >= ** != == <= >> || |> < / - + > : & % ? ^ | *".split(" "),b=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";b=(b="\\?\\.(?!\\d) "+(b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var g,_=new RegExp(b),v="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),E=v.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),w=new RegExp("^(?:"+E.join("|")+")$"),S=function(e,t){o.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new c(this._input),r=new l(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(s.identifier).matching(s.identifierMatch),number:n.matching(f),punct:n.matching(_),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(s.lineBreak),shebang:n.starting_with(/#!/).until_after(s.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};(S.prototype=new o)._is_comment=function(e){return e.type===d.COMMENT||e.type===d.BLOCK_COMMENT||e.type===d.UNKNOWN},S.prototype._is_opening=function(e){return e.type===d.START_BLOCK||e.type===d.START_EXPR},S.prototype._is_closing=function(e,t){return(e.type===d.END_BLOCK||e.type===d.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},S.prototype._reset=function(){g=!1},S.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(d.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(r))||this._read_string(r))||this._read_word(e))||this._read_singles(r))||this._read_comment(r))||this._read_regexp(r,e))||this._read_xml(r,e))||this._read_punctuation())||this._create_token(d.UNKNOWN,this._input.next())},S.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(s.allLineBreaks,"\n"),e.type!==d.DOT&&(e.type!==d.RESERVED||"set"!==e.text&&"get"!==e.text)&&w.test(t)?"in"===t||"of"===t?this._create_token(d.OPERATOR,t):this._create_token(d.RESERVED,t):this._create_token(d.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(d.WORD,t):void 0},S.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(d.START_EXPR,e):")"===e||"]"===e?t=this._create_token(d.END_EXPR,e):"{"===e?t=this._create_token(d.START_BLOCK,e):"}"===e?t=this._create_token(d.END_BLOCK,e):";"===e?t=this._create_token(d.SEMICOLON,e):"."===e&&m.test(this._input.peek(1))?t=this._create_token(d.DOT,e):","===e&&(t=this._create_token(d.COMMA,e)),t&&this._input.next(),t},S.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(d.EQUALS,e):"?."===e?this._create_token(d.DOT,e):this._create_token(d.OPERATOR,e)},S.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(d.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(d.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(h)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(d.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(s.newline);)t+=this._input.next();return g=!0,this._create_token(d.COMMENT,t)}}else if(g&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return g=!1,this._create_token(d.COMMENT,t);return null},S.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var r=p.get_directives(n);r&&"start"===r.ignore&&(n+=p.readIgnored(this._input)),n=n.replace(s.allLineBreaks,"\n"),(t=this._create_token(d.BLOCK_COMMENT,n)).directives=r}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(d.COMMENT,n))}return t},S.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){for(var t="",n=0,o=new r(e),a=null;o.hasNext();)if((a=o.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=a[0]),"\\"===o.peek()){if(o.next(),"x"===o.peek())a=o.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==o.peek()){t+="\\",o.hasNext()&&(t+=o.next());continue}a=o.match(/u([0-9A-Fa-f]{4})/g)}if(!a)return e;if((n=parseInt(a[1],16))>126&&n<=255&&0===a[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+a[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(s.allLineBreaks,"\n"),this._create_token(d.STRING,t)}return null},S.prototype._allow_regexp_or_xml=function(e){return e.type===d.RESERVED&&u(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===d.END_EXPR&&")"===e.text&&e.opened.previous.type===d.RESERVED&&u(e.opened.previous.text,["if","while","for"])||u(e.type,[d.COMMENT,d.START_EXPR,d.START_BLOCK,d.START,d.END_BLOCK,d.OPERATOR,d.EQUALS,d.EOF,d.SEMICOLON,d.COMMA])},S.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),r=!1,o=!1;this._input.hasNext()&&(r||o||this._input.peek()!==e)&&!this._input.testChar(s.newline);)n+=this._input.peek(),r?r=!1:(r="\\"===this._input.peek(),"["===this._input.peek()?o=!0:"]"===this._input.peek()&&(o=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(s.identifier)),this._create_token(d.STRING,n)}return null},S.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",r=this.__patterns.xml.read_match();if(r){for(var o=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),a=0===o.indexOf("{"),i=0;r;){var c=!!r[1],l=r[2];if(!(r[r.length-1]||"![CDATA["===l.slice(0,8))&&(l===o||a&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(c?--i:++i),n+=r[0],i<=0)break;r=this.__patterns.xml.read_match()}return r||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(s.allLineBreaks,"\n"),this._create_token(d.STRING,n)}}return null},S.prototype._read_string_recursive=function(e,t,n){var r,o;"'"===e?o=this.__patterns.single_quote:'"'===e?o=this.__patterns.double_quote:"`"===e?o=this.__patterns.template_text:"}"===e&&(o=this.__patterns.template_expression);for(var a=o.read(),i="";this._input.hasNext();){if((i=this._input.next())===e||!t&&s.newline.test(i)){this._input.back();break}"\\"===i&&this._input.hasNext()?("x"===(r=this._input.peek())||"u"===r?this.has_char_escapes=!0:"\r"===r&&"\n"===this._input.peek(1)&&this._input.next(),i+=this._input.next()):n&&("${"===n&&"$"===i&&"{"===this._input.peek()&&(i+=this._input.next()),n===i&&(i+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(i+=this._input.next()))),a+=i+=o.read()}return a},e.exports.Tokenizer=S,e.exports.TOKEN=d,e.exports.positionable_operators=y.slice(),e.exports.line_starters=v.slice()},function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function o(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}o.prototype.restart=function(){this.__position=0},o.prototype.back=function(){this.__position>0&&(this.__position-=1)},o.prototype.hasNext=function(){return this.__position<this.__input_length},o.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},o.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},o.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},o.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},o.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},o.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},o.prototype.read=function(e,t,n){var r,o="";return e&&(r=this.match(e))&&(o+=r[0]),!t||!r&&e||(o+=this.readUntil(t,n)),o},o.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var o=e.exec(this.__input);return o?(r=o.index,t&&(r+=o[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},o.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},o.prototype.get_regexp=function(e,t){var n=null,o="g";return t&&r&&(o="y"),"string"==typeof e&&""!==e?n=new RegExp(e,o):e&&(n=new RegExp(e.source,o)),n},o.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},o.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},o.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(3).Token,a=n(10).TokenStream,i=n(11).WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},c=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new i(this._input)};c.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new a,this._reset();for(var t=new o(s.START,""),n=null,r=[],i=new a;t.type!==s.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)i.add(e),e=this._get_next_token(t,n);i.isEmpty()||(e.comments_before=i,i=new a),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},c.prototype._is_first_token=function(){return this.__tokens.isEmpty()},c.prototype._reset=function(){},c.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},c.prototype._is_comment=function(e){return!1},c.prototype._is_opening=function(e){return!1},c.prototype._is_closing=function(e,t){return!1},c.prototype._create_token=function(e,t){return new o(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},c.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=c,e.exports.TOKEN=s},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function o(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}o.prototype=new r,o.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},o.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},o.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},o.prototype._create=function(){return new o(this._input,this)},o.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],o=e.exec(t);o;)r.push(t.substring(n,o.index)),n=o.index+o[0].length,o=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=o},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,o={django:!1,erb:!1,handlebars:!1,php:!1};function i(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=a({},o),this._excluded=a({},o),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=a(this._excluded,t._excluded),this._disabled=a(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}i.prototype=new r,i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){this.__set_templated_pattern()},i.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},i.prototype.read_options=function(e){var t=this._create();for(var n in o)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},i.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},i.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},i.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},i.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=i}]),o=r,void 0===(n=function(){return{js_beautify:o}}.apply(t,[]))||(e.exports=n)},70488:()=>{var e=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function n(n,r){var o,a={};!function(){for(var t=n.concat(r),i=[],s={},c=0,l=t.length;c<l;++c){var u=t[c],d=u[3];if(d)for(var p=d.length;--p>=0;)a[d.charAt(p)]=u;d=""+(u=u[1]),s.hasOwnProperty(d)||(i.push(u),s[d]=e)}i.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=d[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),a="^"===r[0],i=a?1:0,s=r.length;i<s;++i){var c,l=r[i];/\\[bdsw]/i.test(l)?e.push(l):(l=t(l),i+2<s&&"-"===r[i+1]?(c=t(r[i+2]),i+=2):c=l,o.push([l,c]),c<65||l>122||(c<65||l>90||o.push([32|Math.max(65,l),32|Math.min(c,90)]),c<97||l>122||o.push([-33&Math.max(97,l),-33&Math.min(c,122)])))}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],l=[NaN,NaN],i=0;i<o.length;++i)(s=o[i])[0]<=l[1]+1?l[1]=Math.max(l[1],s[1]):r.push(l=s);for(o=["["],a&&o.push("^"),o.push.apply(o,e),i=0;i<r.length;++i)s=r[i],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],s=0,c=0;s<n;++s){var l=t[s];"("===l?++c:"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=c&&(o[l]=-1)}for(s=1;s<o.length;++s)-1===o[s]&&(o[s]=++a);for(c=s=0;s<n;++s)"("===(l=t[s])?void 0===o[++c]&&(t[s]="(?:"):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=c&&(t[s]="\\"+o[c]);for(c=s=0;s<n;++s)"^"===t[s]&&"^"!==t[s+1]&&(t[s]="");if(e.ignoreCase&&i)for(s=0;s<n;++s)e=(l=t[s]).charAt(0),l.length>=2&&"["===e?t[s]=r(l):"\\"!==e&&(t[s]=l.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var a=0,i=!1,s=!1,c=0,l=e.length;c<l;++c){var u=e[c];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){i=!0,s=!1;break}}var d={b:8,t:9,n:10,v:11,f:12,r:13},p=[];for(c=0,l=e.length;c<l;++c){if((u=e[c]).global||u.multiline)throw Error(""+u);p.push("(?:"+o(u)+")")}return RegExp(p.join("|"),s?"gi":"g")}(i)}();var s=r.length;return function e(n){for(var c=n.d,l=[c,"pln"],u=0,d=n.a.match(o)||[],p={},f=0,h=d.length;f<h;++f){var m,y=d[f],b=p[y],g=void 0;if("string"==typeof b)m=!1;else{var _=a[y.charAt(0)];if(_)g=y.match(_[1]),b=_[0];else{for(m=0;m<s;++m)if(_=r[m],g=y.match(_[1])){b=_[0];break}g||(b="pln")}!(m=b.length>=5&&"lang-"===b.substring(0,5))||g&&"string"==typeof g[1]||(m=!1,b="src"),m||(p[y]=b)}if(_=u,u+=y.length,m){m=g[1];var v=y.indexOf(m),E=v+m.length;g[2]&&(v=(E=y.length-g[2].length)-m.length),b=b.substring(5),t(c+_,y.substring(0,v),e,l),t(c+_+v,m,i(b,m),l),t(c+_+E,y.substring(E),e,l)}else l.push(c+_,b)}n.e=l}}function r(t){var r=[],o=[];t.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,e,"'\""]):t.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,e,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,e,"\"'"]),t.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,e]);var a=t.hashComments;return a&&(t.cStyleComments?(a>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,e,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,e,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,e])):r.push(["com",/^#[^\n\r]*/,e,"#"])),t.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,e]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,e])),t.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(a=t.types)&&o.push(["typ",a]),(t=(""+t.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+t.replace(/[\s,]+/g,"|")+")\\b"),e]),r.push(["pln",/^\s+/,e," \r\n\t "]),o.push(["lit",/^@[$_a-z][\w$@]*/i,e],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,e],["pln",/^[$_a-z][\w$@]*/i,e],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,e,"0123456789"],["pln",/^\\[\S\s]?/,e],["pun",/^.[^\s\w"-$'./@\\`]*/,e]),n(r,o)}function o(t,n){function r(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(l){var t=e.nodeValue,n=t.match(s);if(n){var a=t.substring(0,n.index);e.nodeValue=a,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(c.createTextNode(t),e.nextSibling),o(e),a||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),a=t.nextSibling;o.appendChild(r);for(var i=a;i;i=a)a=i.nextSibling,o.appendChild(i)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;u.push(e)}var a,i=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,c=t.ownerDocument;t.currentStyle?a=t.currentStyle.whiteSpace:window.getComputedStyle&&(a=c.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var l=a&&"pre"===a.substring(0,3);for(a=c.createElement("LI");t.firstChild;)a.appendChild(t.firstChild);for(var u=[a],d=0;d<u.length;++d)r(u[d]);n===(0|n)&&u[0].setAttribute("value",n);var p=c.createElement("OL");p.className="linenums";for(var f=Math.max(0,n-1|0)||0,h=(d=0,u.length);d<h;++d)(a=u[d]).className="L"+(d+f)%10,a.firstChild||a.appendChild(c.createTextNode(" ")),p.appendChild(a);t.appendChild(p)}function a(e,t){for(var n=t.length;--n>=0;){var r=t[n];g.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):g[r]=e}}function i(e,t){return e&&g.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),g[e]}function s(t){var n=t.g;try{var r=function(t){var n,r=/(?:^|\s)nocode(?:\s|$)/,o=[],a=0,i=[],s=0;t.currentStyle?n=t.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var c=n&&"pre"===n.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[s]="\n",i[s<<1]=a++,i[s++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=c?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[s]=n,i[s<<1]=a,a+=n.length,i[s++<<1|1]=t)}}(t),{a:o.join("").replace(/\n$/,""),c:i}}(t.h),o=r.a;t.a=o,t.c=r.c,t.d=0,i(n,o)(t);var a,s,c=/\bMSIE\b/.test(navigator.userAgent),l=(n=/\n/g,t.a),u=l.length,d=(r=0,t.c),p=d.length,f=(o=0,t.e),h=f.length;for(t=0,f[h]=u,s=a=0;s<h;)f[s]!==f[s+2]?(f[a++]=f[s++],f[a++]=f[s++]):s+=2;for(h=a,s=a=0;s<h;){for(var m=f[s],y=f[s+1],b=s+2;b+2<=h&&f[b+1]===y;)b+=2;f[a++]=m,f[a++]=y,s=b}for(f.length=a;o<p;){var g,_=d[o+2]||u,v=f[t+2]||u,E=(b=Math.min(_,v),d[o+1]);if(1!==E.nodeType&&(g=l.substring(r,b))){c&&(g=g.replace(n,"\r")),E.nodeValue=g;var w=E.ownerDocument,S=w.createElement("SPAN");S.className=f[t+1];var O=E.parentNode;O.replaceChild(S,E),S.appendChild(E),r<_&&(d[o+1]=E=w.createTextNode(l.substring(b,_)),O.insertBefore(E,S.nextSibling))}(r=b)>=_&&(o+=2),r>=v&&(t+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c,l,u=[c=[[l=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],d=[c,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],p=[d,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],f=[l,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],h=[l,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],m=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,y=/\S/,b=r({keywords:[u,p,c=[c,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+f,h,l=[l,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),g={};a(b,["default-code"]),a(n([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),a(n([["pln",/^\s+/,e," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,e,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),a(n([],[["atv",/^[\S\s]+/]]),["uq.val"]),a(r({keywords:u,hashComments:!0,cStyleComments:!0,types:m}),["c","cc","cpp","cxx","cyc","m"]),a(r({keywords:"null,true,false"}),["json"]),a(r({keywords:p,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:m}),["cs"]),a(r({keywords:d,cStyleComments:!0}),["java"]),a(r({keywords:l,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),a(r({keywords:f,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),a(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),a(r({keywords:h,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),a(r({keywords:c,cStyleComments:!0,regexLiterals:!0}),["js"]),a(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),a(n([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),s({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(t){for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],a=0;a<n.length;++a)for(var i=0,c=n[a].length;i<c;++i)r.push(n[a][i]);n=e;var l=Date;l.now||(l={now:function(){return+new Date}});var u=0,d=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function e(){for(var n=window.PR_SHOULD_USE_CONTINUATION?l.now()+250:1/0;u<r.length&&l.now()<n;u++){var a=r[u];if((i=a.className).indexOf("prettyprint")>=0){var i,c,p;if(p=!(i=i.match(d))){for(var f=void 0,h=(p=a).firstChild;h;h=h.nextSibling){var m=h.nodeType;f=1===m?f?p:h:3===m&&y.test(h.nodeValue)?p:f}p=(c=f===p?void 0:f)&&"CODE"===c.tagName}for(p&&(i=c.className.match(d)),i&&(i=i[1]),p=!1,f=a.parentNode;f;f=f.parentNode)if(("pre"===f.tagName||"code"===f.tagName||"xmp"===f.tagName)&&f.className&&f.className.indexOf("prettyprint")>=0){p=!0;break}p||((p=!!(p=a.className.match(/\blinenums\b(?::(\d+))?/))&&(!p[1]||!p[1].length||+p[1]))&&o(a,p),s({g:i,h:a,i:p}))}}u<r.length?setTimeout(e,250):t&&t()}()},window.PR={createSimpleLexer:n,registerLangHandler:a,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()}},e=>{var t=t=>e(e.s=t);e.O(0,[736],(()=>(t(35005),t(32005),t(38603),t(32013),t(77131),t(85299),t(77588),t(29318)))),e.O()}]);